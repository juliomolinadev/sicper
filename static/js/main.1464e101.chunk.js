(this.webpackJsonpsicper=this.webpackJsonpsicper||[]).push([[0],{118:function(e,a){},134:function(e,a,t){e.exports=t(349)},148:function(e,a,t){},324:function(e,a){},325:function(e,a){},348:function(e,a,t){},349:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(22),c=t.n(o),l=t(2),i=t(36),s=t(124),u=t(1),d="[Login] Login",m="[Login] Entity",p="[Login] Logout",E="[Login] Privilegios",f="[Login] Set Variables Globales",v="[Login] Set Estado Expedicion Modulo",b="[UI] Set Error",N="[UI] Remove Error",h="[UI] Start Loading",g="[UI] Finish Loading",O="[Configuracion] Set Entities",A="[Alta Permisos] Open permiso modal",x="[Alta Permisos] Close permiso modal",y="[Alta Permisos] Open cultivos modal",P="[Alta Permisos] Close cultivos modal",C="[Alta Permisos] Open cultivo anterior modal",j="[Alta Permisos] Close cultivo anterior modal",z="[Alta Permisos] Load cultivos",S="[Alta Permisos] Set Cultivos Anteriores",w="[Alta Permisos] Clear cultivos",R="[Alta Permisos] Set cultivo",I="[Alta Permisos] unset cultivo",D="[Alta Permisos] Set cultivo anterior",U="[Alta Permisos] unset cultivo anterior",M="[Alta Permisos] Set Cuota Cultivo",k="[Alta Permisos] Open usuarios modal",T="[Alta Permisos] Close usuarios modal",L="[Alta Permisos] Clear usuarios",F="[Alta Permisos] Set usuarios",G="[Alta Permisos] Unset usuarios",V="[Alta Permisos] Set usuario",B="[Alta Permisos] Unset usuario",Y="[Padron] Set Updating Padron",q="[Padron] Unset Updating Padron",Z="[Padron] Set Updating Reacomodos",H="[Padron] Unset Updating Reacomodos",_="[Alta Permisos] Open productores modal",K="[Alta Permisos] Close productores modal",X="[Alta Permisos] Load prosuctores",J="[Alta Permisos] Clear prosuctores",Q="[Alta Permisos] Set productor",W="[Alta Permisos] Unset productor",$="[Alta Permisos] Open nuevo prouctor modal",ee="[Alta Permisos] Close nuevo prouctor modal",ae="[Alta Permisos] Set form value",te="[Alta Permisos] Set onSubmit data",ne="[Alta Permisos] unSet onSubmit data",re="[Alta Permisos] Set en espera",oe="[Alta Permisos] unSet en espera",ce="[Alta Permisos] Enable save button",le="[Alta Permisos] Disable save button",ie="[Alta Permisos] Enable print button",se="[Alta Permisos] Disable print button",ue="[Permisos Screen] Set permisos",de="[Permisos Screen] Unset permisos",me="[Permisos Screen] Set permiso selected",pe="[Permisos Screen] Unset permiso selected",Ee="[Permisos Screen] Set superficies",fe="[Permisos Screen] Unset superficies",ve="[Permisos Screen] Set Pre Cancel Permits",be="[Permisos Screen] Unset Pre Cancel Permits",Ne="[Permisos Screen] Set Pre Permit To Cancel",he="[Permisos Screen] Unset Pre Permit To Cancel",ge="[Autorizados Screen] Set modulo",Oe="[Autorizados Screen] Unset modulo",Ae="[Autorizados Screen] Set autorizados",xe="[Autorizados Screen] Unset autorizados",ye="[Autorizados Screen] Open autorizados modal",Pe="[Autorizados Screen] Close autorizados modal",Ce="[Autorizados Screen] Set autorizado selected",je="[Autorizados Screen] Unset autorizado selected",ze="[Autorizados Screen] Set superficie referencia",Se="[Autorizados Screen] Unset superficie referencia",we="[Autorizados Screen] Set Form Error",Re="[Autorizados Screen] Unset Form Error",Ie="[Autorizados Screen] Set autorizados por cultivo",De="[Sicper Screen] Set expedicion",Ue="[Sicper Screen] Unset expedicion",Me="[Sicper Screen] Set superficie normal",ke="[Sicper Screen] Set superficie extra",Te="[Algodonero Screen] Set permisos",Le="[Algodonero Screen] Unset permisos",Fe="[Algodonero Screen] Open Modal Sanidad",Ge="[Algodonero Screen] Close Modal Sanidad",Ve="[Entidades] Set Data Principales Cultivos",Be="[Entidades] Set permisos",Ye="[Entidades] Set Campo Ordenador",qe="[Scenes] Open Imprimir Reporte Modal",Ze="[Scenes] Close Imprimir Reporte Modal",He="[Entidades] Set System Users",_e="[Entidades] Set System User Selected",Ke="[Entidades] Unset System User Selected",Xe="[Entidades] Set Users Roles",Je="[Entidades] Unset Users Roles",Qe="[Entidades] Set User Role Selected",We="[Entidades] Unset User Role Selected",$e="[Entidades] Set Privileges To Edit",ea="[Entidades] Unset Privileges To Edit",aa="[Entidades] Set Localties",ta="[Entidades] Unset Localties",na="[Entidades] Set Selected Localties",ra="[Entidades] Unset Selected Localties",oa="[Entidades] Set Localtie Selected",ca="[Entidades] Unset Localtie Selected",la="[Entidades] Open Localties Modal",ia="[Entidades] Close Localties Modal",sa="[Reportes] Set Expedicion",ua="[Reportes] Set Autorizados",da="[UI] Open User Role Modal",ma="[UI] Close User Role Modal",pa={loading:!1,msgError:null},Ea={enEspera:!1,enableSaveButton:!0,enablePrintButton:!1,openUsuariosModal:!1,openProductoresModal:!1,isOpenNuevoProductorModal:!1,openCultivosModal:!1,openCultivoAnteriorModal:!1,isOpenPrintPermisoModal:!1,usuarios:[],cultivos:[],cultivosAnteriores:[],productores:[],idUsuarioSelected:null,cuenta:null,usuario:null,supDerecho:null,lote:null,localidad:null,municipio:null,estado:null,modulo:null,seccion:null,canal:null,toma:null,sistema:null,idProductorSelected:null,nombreProductor:null,rfcProductor:null,idCultivoSelected:null,nombreCultivo:null,claveCultivo:null,subciclo:null,cuotaCultivo:null,supPrevia:0,idCultivoAnteriorSelected:null,cultivoAnterior:null,claveCultivoAnterior:null,tipo:null,ciclo:null,numeroPermiso:null,fechaEmicion:null,fechaLimite:null,vigencia:null,estadoPermiso:null,variedad:"",supAutorizada:0,fuenteCredito:"",latitud:"",longitud:"",observaciones:""},fa={permisos:[],permisoSelected:null,superficies:null},va={modulo:null,openAutorizadosModal:!1,autorizados:[],autorizadoSelected:null,superficieReferencia:null,formError:null},ba={expedicion:null,superficie:"normal"},Na={permisos:[],permisoSelected:null,printSanidadModal:!1},ha={reportesScreen:{openImprimirReporteModal:!1},padronScreen:{updatingPadron:!1,updatingReacomodos:!1}},ga="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,Oa=Object(i.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case d:return{uid:a.payload.uid,name:a.payload.displayName};case m:return Object(u.a)(Object(u.a)({},e),{},{entidad:a.payload.entidad,img:a.payload.img,claveEntidad:a.payload.claveEntidad,dotacionGravedad:a.payload.dotacionGravedad,dotacionPozo:a.payload.dotacionPozo,titular:a.payload.titular,direccion:a.payload.direccion,expedicionActivaModulo:a.payload.expedicionActivaModulo,rol:a.payload.rol,modulo:a.payload.modulo});case E:return Object(u.a)(Object(u.a)({},e),{},{privilegios:a.payload});case f:return Object(u.a)(Object(u.a)({},e),{},{variablesGlobales:a.payload});case v:return Object(u.a)(Object(u.a)({},e),{},{expedicionActivaModulo:a.payload});case p:return{};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pa,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case b:return Object(u.a)(Object(u.a)({},e),{},{msgError:a.payload});case N:return Object(u.a)(Object(u.a)({},e),{},{msgError:null});case h:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case g:return Object(u.a)(Object(u.a)({},e),{},{loading:!1});case da:return Object(u.a)(Object(u.a)({},e),{},{isOpenUserRoleModal:!0});case ma:return Object(u.a)(Object(u.a)({},e),{},{isOpenUserRoleModal:!1});default:return e}},scenes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ha,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case ua:return Object(u.a)(Object(u.a)({},e),{},{reportesScreen:Object(u.a)(Object(u.a)({},e.reportesScreen),{},{autorizados:a.payload})});case sa:return Object(u.a)(Object(u.a)({},e),{},{reportesScreen:Object(u.a)(Object(u.a)({},e.reportesScreen),{},{expedicion:a.payload})});case qe:return Object(u.a)(Object(u.a)({},e),{},{reportesScreen:{openImprimirReporteModal:!0}});case Ze:return Object(u.a)(Object(u.a)({},e),{},{reportesScreen:{openImprimirReporteModal:!1}});case Y:return Object(u.a)(Object(u.a)({},e),{},{padronScreen:{updatingPadron:!0}});case q:return Object(u.a)(Object(u.a)({},e),{},{padronScreen:{updatingPadron:!1}});case Z:return Object(u.a)(Object(u.a)({},e),{},{padronScreen:{updatingReacomodos:!0}});case H:return Object(u.a)(Object(u.a)({},e),{},{padronScreen:{updatingReacomodos:!1}});default:return e}},entidades:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Ve:return Object(u.a)(Object(u.a)({},e),{},{principalesCultivos:{labels:a.payload.labels,superficiesCultivos:a.payload.superficiesCultivos,numeroPermisos:a.payload.numeroPermisos}});case Be:return Object(u.a)(Object(u.a)({},e),{},{permisos:a.payload});case Ye:return Object(u.a)(Object(u.a)({},e),{},{campoOrdenador:a.payload});case F:return Object(u.a)(Object(u.a)({},e),{},{usuarios:a.payload});case G:return Object(u.a)(Object(u.a)({},e),{},{usuarios:!1});case V:return Object(u.a)(Object(u.a)({},e),{},{usuario:a.payload});case B:return Object(u.a)(Object(u.a)({},e),{},{usuario:!1});case Xe:return Object(u.a)(Object(u.a)({},e),{},{userRoles:a.payload});case Je:return Object(u.a)(Object(u.a)({},e),{},{userRoles:!1});case Qe:return Object(u.a)(Object(u.a)({},e),{},{userRoleSelected:a.payload});case We:return Object(u.a)(Object(u.a)({},e),{},{userRoleSelected:!1});case $e:return Object(u.a)(Object(u.a)({},e),{},{privilegesToEdit:a.payload});case ea:return Object(u.a)(Object(u.a)({},e),{},{privilegesToEdit:!1});case He:return Object(u.a)(Object(u.a)({},e),{},{systemUsers:a.payload});case _e:return Object(u.a)(Object(u.a)({},e),{},{systemUserSelected:a.payload});case Ke:return Object(u.a)(Object(u.a)({},e),{},{systemUserSelected:null});case aa:return Object(u.a)(Object(u.a)({},e),{},{localties:a.payload});case ta:return Object(u.a)(Object(u.a)({},e),{},{localties:null});case na:return Object(u.a)(Object(u.a)({},e),{},{selectedLocalties:a.payload});case ra:return Object(u.a)(Object(u.a)({},e),{},{selectedLocalties:null});case oa:return Object(u.a)(Object(u.a)({},e),{},{localtieSelected:a.payload});case ca:return Object(u.a)(Object(u.a)({},e),{},{localtieSelected:null});case la:return Object(u.a)(Object(u.a)({},e),{},{openLocaltiesModal:!0});case ia:return Object(u.a)(Object(u.a)({},e),{},{openLocaltiesModal:!1});case O:return Object(u.a)(Object(u.a)({},e),{},{entities:a.payload});default:return e}},sicperScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case De:return Object(u.a)(Object(u.a)({},e),{},{expedicion:a.payload});case Ue:return Object(u.a)(Object(u.a)({},e),{},{expedicion:null});case Me:return Object(u.a)(Object(u.a)({},e),{},{superficie:"normal"});case ke:return Object(u.a)(Object(u.a)({},e),{},{superficie:"extra"});default:return e}},permisosScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fa,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case ue:return Object(u.a)(Object(u.a)({},e),{},{permisos:a.payload});case de:return Object(u.a)(Object(u.a)({},e),{},{permisos:[]});case ve:return Object(u.a)(Object(u.a)({},e),{},{preCancelPermits:a.payload});case be:return Object(u.a)(Object(u.a)({},e),{},{preCancelPermits:[]});case me:return Object(u.a)(Object(u.a)({},e),{},{permisoSelected:a.payload});case pe:return Object(u.a)(Object(u.a)({},e),{},{permisoSelected:null});case Ne:return Object(u.a)(Object(u.a)({},e),{},{permitToCancelSelected:a.payload});case he:return Object(u.a)(Object(u.a)({},e),{},{permitToCancelSelected:null});case Ee:return Object(u.a)(Object(u.a)({},e),{},{superficies:a.payload});case fe:return Object(u.a)(Object(u.a)({},e),{},{superficies:null});default:return e}},algodoneroScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Na,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Te:return Object(u.a)(Object(u.a)({},e),{},{permisos:a.payload});case Le:return Object(u.a)(Object(u.a)({},e),{},{permisos:[]});case me:return Object(u.a)(Object(u.a)({},e),{},{permisoSelected:a.payload});case pe:return Object(u.a)(Object(u.a)({},e),{},{permisoSelected:null});case Fe:return Object(u.a)(Object(u.a)({},e),{},{printSanidadModal:!0});case Ge:return Object(u.a)(Object(u.a)({},e),{},{printSanidadModal:!1});default:return e}},altaPermisos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ea,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case A:return Object(u.a)(Object(u.a)({},e),{},{openPrintPermisoModal:!0});case x:return Object(u.a)(Object(u.a)({},e),{},{openPrintPermisoModal:!1});case y:return Object(u.a)(Object(u.a)({},e),{},{openCultivosModal:!0});case P:return Object(u.a)(Object(u.a)({},e),{},{openCultivosModal:!1});case C:return Object(u.a)(Object(u.a)({},e),{},{openCultivoAnteriorModal:!0});case j:return Object(u.a)(Object(u.a)({},e),{},{openCultivoAnteriorModal:!1});case z:return Object(u.a)(Object(u.a)({},e),{},{cultivos:a.payload});case S:return Object(u.a)(Object(u.a)({},e),{},{cultivosAnteriores:a.payload});case w:return Object(u.a)(Object(u.a)({},e),{},{cultivos:[]});case R:return Object(u.a)(Object(u.a)({},e),{},{idCultivoSelected:a.payload.id,nombreCultivo:a.payload.nombre,claveCultivo:a.payload.clave,subciclo:a.payload.subciclo,cuotaCultivo:a.payload.costoHectarea,superficiePreviaCultivo:a.payload.superficiePrevia});case M:return Object(u.a)(Object(u.a)({},e),{},{cuotaCultivo:a.payload});case I:return Object(u.a)(Object(u.a)({},e),{},{idCultivoSelected:null,nombreCultivo:null,claveCultivo:null,subciclo:null,cuotaCultivo:null});case D:return Object(u.a)(Object(u.a)({},e),{},{idCultivoAnteriorSelected:a.payload.id,cultivoAnterior:a.payload.nombre,claveCultivoAnterior:a.payload.clave});case U:return Object(u.a)(Object(u.a)({},e),{},{idCultivoAnteriorSelected:null,cultivoAnterior:null,claveCultivoAnterior:null});case k:return Object(u.a)(Object(u.a)({},e),{},{openUsuariosModal:!0});case T:return Object(u.a)(Object(u.a)({},e),{},{openUsuariosModal:!1});case F:return Object(u.a)(Object(u.a)({},e),{},{usuarios:a.payload});case L:return Object(u.a)(Object(u.a)({},e),{},{usuarios:[]});case V:return Object(u.a)(Object(u.a)({},e),{},{idUsuarioSelected:a.payload.id,cuenta:"".concat(a.payload.cuenta,".").concat(a.payload.subcta),usuario:"".concat(a.payload.apPaterno," ").concat(a.payload.apMaterno," ").concat(a.payload.nombre),supDerecho:a.payload.supRiego,lote:a.payload.predio,localidad:a.payload.localidad,municipio:a.payload.municipio,estado:a.payload.estado,modulo:a.payload.modulo,zona:a.payload.zona,seccion:a.payload.seccion,canal:"".concat(a.payload.cp,"-").concat(a.payload.lt,"-").concat(a.payload.slt,"-").concat(a.payload.ra,"-").concat(a.payload.sra,"-").concat(a.payload.ssra),toma:a.payload.pControl,sistema:a.payload.sistRiego,supPrevia:a.payload.supPrevia,reacomodo:a.payload.reacomodo,nombreLocalidad:a.payload.nombreLocalidad});case B:return Object(u.a)(Object(u.a)({},e),{},{idUsuarioSelected:null,cuenta:null,usuario:null,supDerecho:null,lote:null,localidad:null,municipio:null,estado:null,modulo:null,seccion:null,canal:null,toma:null,sistema:null});case _:return Object(u.a)(Object(u.a)({},e),{},{openProductoresModal:!0});case K:return Object(u.a)(Object(u.a)({},e),{},{openProductoresModal:!1});case X:return Object(u.a)(Object(u.a)({},e),{},{productores:a.payload});case J:return Object(u.a)(Object(u.a)({},e),{},{productores:[]});case Q:return Object(u.a)(Object(u.a)({},e),{},{idProductorSelected:a.payload.id,nombreProductor:"".concat(a.payload.apPaterno," ").concat(a.payload.apMaterno," ").concat(a.payload.nombre),rfcProductor:a.payload.rfc,curpProductor:a.payload.curp});case W:return Object(u.a)(Object(u.a)({},e),{},{idProductorSelected:null,nombreProductor:null,rfcProductor:null});case $:return Object(u.a)(Object(u.a)({},e),{},{isOpenNuevoProductorModal:!0});case ee:return Object(u.a)(Object(u.a)({},e),{},{isOpenNuevoProductorModal:!1});case ae:return Object(u.a)(Object(u.a)({},e),{},{supAutorizada:Number(a.payload.supAutorizada),variedad:a.payload.variedad,fuenteCredito:a.payload.fuenteCredito,latitud:a.payload.latitud,longitud:a.payload.longitud,observaciones:a.payload.observaciones});case te:return Object(u.a)(Object(u.a)({},e),{},{tipo:a.payload.tipo,ciclo:a.payload.ciclo,numeroPermiso:a.payload.numeroPermiso,fechaEmicion:a.payload.fechaEmicion,fechaLimite:a.payload.fechaLimite,vigencia:a.payload.vigencia,estadoPermiso:a.payload.estadoPermiso});case ne:return Object(u.a)(Object(u.a)({},e),{},{tipo:null,ciclo:null,numeroPermiso:null,fechaEmicion:null,fechaLimite:null,vigencia:null});case re:return Object(u.a)(Object(u.a)({},e),{},{enEspera:!0});case oe:return Object(u.a)(Object(u.a)({},e),{},{enEspera:!1});case ce:return Object(u.a)(Object(u.a)({},e),{},{enableSaveButton:!0});case le:return Object(u.a)(Object(u.a)({},e),{},{enableSaveButton:!1});case ie:return Object(u.a)(Object(u.a)({},e),{},{enablePrintButton:!0});case se:return Object(u.a)(Object(u.a)({},e),{},{enablePrintButton:!1});default:return e}},autorizadosScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:va,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case ge:return Object(u.a)(Object(u.a)({},e),{},{modulo:a.payload});case Oe:return Object(u.a)(Object(u.a)({},e),{},{modulo:null});case Ie:return Object(u.a)(Object(u.a)({},e),{},{autorizadosPorCultivo:a.payload});case Ae:return Object(u.a)(Object(u.a)({},e),{},{autorizados:a.payload});case xe:return Object(u.a)(Object(u.a)({},e),{},{autorizados:[]});case ye:return Object(u.a)(Object(u.a)({},e),{},{openAutorizadosModal:!0});case Pe:return Object(u.a)(Object(u.a)({},e),{},{autorizadoSelected:null,openAutorizadosModal:!1});case Ce:return Object(u.a)(Object(u.a)({},e),{},{openAutorizadosModal:!0,autorizadoSelected:a.payload});case je:return Object(u.a)(Object(u.a)({},e),{},{openAutorizadosModal:!1,autorizadoSelected:null});case ze:return Object(u.a)(Object(u.a)({},e),{},{superficieReferencia:a.payload});case Se:return Object(u.a)(Object(u.a)({},e),{},{superficieReferencia:null});case we:return Object(u.a)(Object(u.a)({},e),{},{formError:a.payload});case Re:return Object(u.a)(Object(u.a)({},e),{},{formError:null});default:return e}}}),Aa=Object(i.e)(Oa,ga(Object(i.a)(s.a))),xa=t(3),ya=t.n(xa),Pa=t(5),Ca=t(11),ja=t(15),za=t(16),Sa=t(10),wa=t.n(Sa);t(45),t(146);wa.a.initializeApp({apiKey:"AIzaSyCPGzYLWjSE-8cCojpCClhkbDZouZVqVVo",authDomain:"sicper-e1812.firebaseapp.com",databaseURL:"https://sicper-e1812.firebaseio.com",projectId:"sicper-e1812",storageBucket:"sicper-e1812.appspot.com",messagingSenderId:"868337651917",appId:"1:868337651917:web:ce83022e99f450f19dd984"});var Ra=wa.a.firestore(),Ia=(new wa.a.auth.GoogleAuthProvider,function(e){return{type:b,payload:e}}),Da=function(){return{type:N}},Ua=function(){return{type:g}},Ma=t(8),ka=t.n(Ma),Ta=function(e,a){return function(t){t({type:h}),wa.a.auth().signInWithEmailAndPassword(e,a).then(function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var n,r,o,c,l,i,s,u,d,m,p,E,f;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.user,e.next=3,Ba(n.uid);case 3:return r=e.sent,e.next=6,Ya(r.claveEntidad);case 6:return o=e.sent,e.next=9,qa(r.rol);case 9:return c=e.sent,l=o.nombre,i=o.img,s=o.clave,u=o.dotacionGravedad,d=o.dotacionPozo,m=o.titular,p=o.direccion,E=o.expedicionActivaModulo,t(La(n.uid,n.displayName)),t(Fa(l,i,s,u,d,m,p,E,r.rol,r.modulo)),t(Ha(c)),e.next=16,Za();case 16:f=e.sent,t(Ga(f)),t(Ua());case 19:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),t(Ua()),ka.a.fire("Error","Usuoario o contrase\xf1a incorrecto.","error")}))}},La=function(e,a){return{type:d,payload:{uid:e,displayName:a}}},Fa=function(e,a,t,n,r,o,c,l,i,s){return{type:m,payload:{entidad:e,img:a,claveEntidad:t,dotacionGravedad:n,dotacionPozo:r,titular:o,direccion:c,expedicionActivaModulo:l,rol:i,modulo:s}}},Ga=function(e){return{type:f,payload:e}},Va=function(){return{type:p}},Ba=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t,n;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("usuarios").get();case 2:return t=e.sent,n={},t.forEach((function(e){e.id===a&&(n=Object(u.a)({},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Ya=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t,n;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("entidades").get();case 2:return t=e.sent,n={},t.forEach((function(e){e.data().clave===a&&(n=Object(u.a)({},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),qa=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t,n;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("roles").get();case 2:return t=e.sent,n={},t.forEach((function(e){e.id===a&&(n=Object(u.a)({},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Za=function(){var e=Object(Pa.a)(ya.a.mark((function e(){var a;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("app").doc("variablesGlobales").get();case 2:return a=e.sent,e.abrupt("return",a.data());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ha=function(e){return{type:E,payload:e}},_a=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("entidades").doc("".concat(a)).get();case 2:return t=e.sent,e.abrupt("return",t.data().expedicionActivaModulo);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Ka=function(e){return function(){var a=Object(Pa.a)(ya.a.mark((function a(t){var n;return ya.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_a(e);case 2:n=a.sent,t(Xa(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Xa=function(e){return{type:v,payload:e}},Ja=t(20),Qa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(n.useState)(e),t=Object(Ca.a)(a,2),r=t[0],o=t[1],c=function(){o(e)},l=function(e){var a=e.target;"checkbox"===a.type?o(Object(u.a)(Object(u.a)({},r),{},Object(Ja.a)({},a.name,a.checked))):o(Object(u.a)(Object(u.a)({},r),{},Object(Ja.a)({},a.name,a.value)))},i=function(e){o(e)};return[r,l,c,i]},Wa=(t(148),function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.ui})).loading,t=Qa({email:"",password:""}),n=Object(Ca.a)(t,2),o=n[0],c=n[1],i=o.email,s=o.password;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"auth__title"},"Login"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e(Ta(i,s))}},r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",className:"auth__input",autoComplete:"off",value:i,onChange:c}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",className:"auth__input",value:s,onChange:c}),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-block mt-3",disabled:a},"Login"),r.a.createElement("div",{className:"pt-4"},r.a.createElement(ja.b,{to:"/auth/register",className:"link"},"Crear nuevo usuario"))))}),$a=t(125),et=t.n($a),at=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.ui})).msgError,t=Qa(),n=Object(Ca.a)(t,2),o=n[0],c=n[1],i=o.name,s=o.email,u=o.password,d=o.password2,m=o.modulo,p=function(){return m?i?s?et.a.isEmail(s)?u?u!==d||u.length<6?(e(Ia("Password diferentes o menor de 6 caracteres")),!1):(e(Da()),!0):(e(Ia("Se requiere password")),!1):(e(Ia("Email no valido")),!1):(e(Ia("Se requiere email")),!1):(e(Ia("Se requiere el nombre")),!1):(e(Ia("Seleccione entidad")),!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"auth__title"},"Registro"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),p()&&e(function(e,a,t,n){return function(r){wa.a.auth().createUserWithEmailAndPassword(e,a).then(function(){var a=Object(Pa.a)(ya.a.mark((function a(o){var c;return ya.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=o.user,a.next=3,c.updateProfile({displayName:t});case 3:return r(La(c.uid,c.displayName)),a.next=6,Ra.collection("usuarios").doc(c.uid).set({claveEntidad:n,modulo:n,rol:"sinAsignar",email:e,displayName:t});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.log(e),ka.a.fire("Error","El usuario ya existe.","error")}))}}(s,u,i,function(e){return"9A"===e?"9":"9B"===e?"92":e}(m)))}},a&&r.a.createElement("div",{className:"auth__alert-error"},a),r.a.createElement("select",{type:"text",name:"modulo",value:m,onChange:c,className:"auth__input"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"Entidad"),r.a.createElement("option",{value:"1"},"Modulo 1"),r.a.createElement("option",{value:"2"},"Modulo 2"),r.a.createElement("option",{value:"3"},"Modulo 3"),r.a.createElement("option",{value:"4"},"Modulo 4"),r.a.createElement("option",{value:"5"},"Modulo 5"),r.a.createElement("option",{value:"6"},"Modulo 6"),r.a.createElement("option",{value:"7"},"Modulo 7"),r.a.createElement("option",{value:"8"},"Modulo 8"),r.a.createElement("option",{value:"9A"},"Modulo 9A"),r.a.createElement("option",{value:"9B"},"Modulo 9B"),r.a.createElement("option",{value:"10"},"Modulo 10"),r.a.createElement("option",{value:"11"},"Modulo 11"),r.a.createElement("option",{value:"12"},"Modulo 12"),r.a.createElement("option",{value:"14"},"Modulo 14"),r.a.createElement("option",{value:"15"},"Modulo 15"),r.a.createElement("option",{value:"16"},"Modulo 16"),r.a.createElement("option",{value:"17"},"Modulo 17"),r.a.createElement("option",{value:"18"},"Modulo 18"),r.a.createElement("option",{value:"19"},"Modulo 19"),r.a.createElement("option",{value:"20"},"Modulo 20"),r.a.createElement("option",{value:"21"},"Modulo 21"),r.a.createElement("option",{value:"22"},"Modulo 22"),r.a.createElement("option",{value:"23"},"Modulo FL"),r.a.createElement("option",{value:"UNI01"},"1ra Unidad"),r.a.createElement("option",{value:"UNI02"},"2da Unidad"),r.a.createElement("option",{value:"UNI03"},"3ra Unidad"),r.a.createElement("option",{value:"SADER"},"SADER"),r.a.createElement("option",{value:"CNA"},"CNA"),r.a.createElement("option",{value:"CESVBC"},"CESVBC"),r.a.createElement("option",{value:"SRL"},"SRL")),r.a.createElement("input",{type:"text",placeholder:"Nombre",name:"name",className:"auth__input",autoComplete:"off",onChange:c}),r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",className:"auth__input",autoComplete:"off",onChange:c}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",className:"auth__input",onChange:c}),r.a.createElement("input",{type:"password",placeholder:"Confirmar password",name:"password2",className:"auth__input",onChange:c}),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-block mt-3 mb-5"},"Crear usuario"),r.a.createElement(ja.b,{to:"/auth/login",className:"link"},"Ya esta registrado?")))},tt=function(){return r.a.createElement("div",{className:"auth__main"},r.a.createElement("div",{className:"auth__box-container"},r.a.createElement(za.d,null,r.a.createElement(za.b,{exact:!0,path:"/auth/login",component:Wa}),r.a.createElement(za.b,{exact:!0,path:"/auth/register",component:at}),r.a.createElement(za.a,{to:"/auth/login"}))))},nt=t(355),rt=t(356),ot=t(354),ct=function(){var e=Object(l.c)((function(e){return e.auth})).privilegios,a=Object(l.b)();return r.a.createElement("div",{className:"fixed-top"},r.a.createElement(nt.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(nt.a.Brand,{href:"/"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("img",{src:"./logos/cna.png",height:"50",className:"d-inline-block align-top align-self-center",alt:"Logo comisi\xf3n nacional del agua"}),r.a.createElement("img",{src:"./logos/sader.png",height:"25",className:"d-inline-block align-top align-self-center ml-2",alt:"Logo comisi\xf3n nacional del agua"}))),r.a.createElement(nt.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(nt.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(rt.a,{className:"mr-auto"},e.pantallaInicio&&r.a.createElement(ja.c,{to:"/sicper",className:"nav-link"},"Inicio"),e.pantallaPadron&&r.a.createElement(ja.c,{to:"/padron",className:"nav-link"},"Padron"),e.pantallaPermisos&&r.a.createElement(ja.c,{to:"/permisos",className:"nav-link"},"Permisos"),e.pantallaTransferencias&&r.a.createElement(ja.c,{to:"/transferencias",className:"nav-link"},"Transferencias"),e.pantallaAsignacion&&r.a.createElement(ja.c,{to:"/asignacion",className:"nav-link"},"Asignacion"),e.pantallaLabores&&r.a.createElement(ja.c,{to:"/labores",className:"nav-link"},"Labores"),e.pantallaAutorizados&&r.a.createElement(ja.c,{to:"/autorizados",className:"nav-link"},"Autorizados"),e.pantallaReportes&&r.a.createElement(ja.c,{to:"/reportes",className:"nav-link"},"Reportes"),e.pantallaConfiguracion&&r.a.createElement(ja.c,{to:"/configuracion",className:"nav-link"},"Configuracion"),e.testArea&&r.a.createElement(ja.c,{to:"/test",className:"nav-link"},"Test")),r.a.createElement(ot.a,{variant:"outline-secondary btn-sm",onClick:function(){a(function(){var e=Object(Pa.a)(ya.a.mark((function e(a){return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wa.a.auth().signOut();case 2:a(Va());case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())},to:"/login"},"Salir"))))},lt=function(){var e=Object(Pa.a)(ya.a.mark((function e(){var a,t;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("cultivos").orderBy("clave").get();case 2:return a=e.sent,t=[],a.forEach((function(e){t.push({clave:e.data().clave,cultivo:e.data().nombre,subciclo:e.data().subciclo})})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),it=function(){var e=Object(Pa.a)(ya.a.mark((function e(a,t){var n,r,o;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("autorizados").doc(a).collection("modulos").doc("Modulo-".concat(t)).collection("autorizados").orderBy("clave").get();case 2:return n=e.sent,r=[],n.forEach((function(e){r.push(Object(u.a)({},e.data()))})),e.next=7,lt();case 7:return o=e.sent,0===r.length?o.forEach((function(e){r.push({clave:e.clave,cultivo:e.cultivo,subciclo:e.subciclo,gravedadNormalAutorizada:0,gravedadNormalAsignada:0,gravedadExtraAutorizada:0,gravedadExtraAsignada:0,pozoNormalAutorizada:0,pozoNormalAsignada:0,pozoExtraAutorizada:0,pozoExtraAsignada:0})})):o.forEach((function(e){void 0===r.find((function(a){return a.clave===e.clave}))&&r.push({clave:e.clave,cultivo:e.cultivo,subciclo:e.subciclo,gravedadNormalAutorizada:0,gravedadNormalAsignada:0,gravedadExtraAutorizada:0,gravedadExtraAsignada:0,pozoNormalAutorizada:0,pozoNormalAsignada:0,pozoExtraAutorizada:0,pozoExtraAsignada:0})})),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),st=function(){var e=Object(Pa.a)(ya.a.mark((function e(a,t,n){var r,o;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("autorizados").doc(a).collection("modulos").doc("Modulo-".concat(t)).collection("autorizados").where("clave","==",n).get();case 2:return r=e.sent,o=[],r.forEach((function(e){o.push(Object(u.a)({},e.data()))})),e.abrupt("return",o[0]);case 6:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),ut=function(){var e=Object(Pa.a)(ya.a.mark((function e(a,t){var n;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,Ra.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisosPorCultivo").orderBy("superficie","desc").get().then((function(e){e.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))}))})).catch((function(e){console.log(" Error: ",e)}));case 3:return 0===n.length&&(n=!1),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),dt=function(e){return{type:De,payload:e}},mt=function(e,a){return+(Math.round(e+"e+".concat(a))+"e-".concat(a))},pt=function(){var e=Object(l.c)((function(e){return e.sicperScreen})),a=e.expedicion,t=e.superficie,o=Object(l.c)((function(e){return e.auth})).modulo,c=Object(l.b)(),i=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual;Object(n.useEffect)((function(){c(function(e,a){return function(){var t=Object(Pa.a)(ya.a.mark((function t(n){var r,o,c,l;return ya.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ut(e,a);case 2:return r=t.sent,t.next=5,it(a,e);case 5:o=t.sent,c=function(e,a){return!!e&&e.find((function(e){return e.id===a}))},l=[],o&&o.forEach((function(e){if(e.superficieTotal>0){var a=c(r,"".concat(e.clave,"-").concat(e.cultivo));a?l.push(Object(u.a)(Object(u.a)({},e),a)):l.push(Object(u.a)({},e))}})),l.forEach((function(e){void 0===e.gravedadNormal&&(e.gravedadNormal=0),void 0===e.gravedadExtra&&(e.gravedadExtra=0),void 0===e.pozoNormal&&(e.pozoNormal=0),void 0===e.pozoExtra&&(e.pozoExtra=0),void 0===e.pozoParticularNormal&&(e.pozoParticularNormal=0),void 0===e.pozoParticularExtra&&(e.pozoParticularExtra=0)})),0===l.length&&(l=[{clave:"-",cultivo:"Sin expedicion",gravedadNormalAutorizada:0,gravedadNormalAsignada:0,gravedadExtraAutorizada:0,gravedadExtraAsignada:0,pozoNormalAutorizada:0,pozoNormalAsignada:0,pozoExtraAutorizada:0,pozoExtraAsignada:0,gravedadNormal:0,pozoNormal:0,gravedadExtra:0,pozoExtra:0}]),n(dt(l));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(o,i))}),[c,o,i]);var s=function(){c({type:Me})},d=function(){c({type:ke})},m=function(e){switch(e){case"UNI01":case"UNI02":case"UNI03":return!1;default:return!0}};return r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"btn-group",role:"group"},"normal"===t?r.a.createElement("button",{type:"button",className:"btn btn-info",onClick:s},"Superficie Normal"):r.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:s},"Superficie Normal"),"extra"===t?r.a.createElement("button",{type:"button",className:"btn btn-info",onClick:d},"Superficie Extra"):r.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:d},"Superficie Extra"))),r.a.createElement("div",{className:"border border-info rounded p-0 mt-3"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-sm table-striped text-secondary"},r.a.createElement("thead",{className:"table-info"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"text-center"},"Clave"),r.a.createElement("th",{scope:"col"},"Cultivo"),r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col",className:"text-center"},"Superficie Autorizada"),r.a.createElement("th",{scope:"col",className:"text-center"},"Superficie Asignada"),r.a.createElement("th",{scope:"col",className:"text-center"},"Superficie Expedida"),r.a.createElement("th",{scope:"col",className:"text-center"},"Superficie Disponible"))),a&&"normal"===t?r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:"".concat(e.id,"-").concat(e.clave)},r.a.createElement("th",{scope:"row",className:"text-center"},e.clave),r.a.createElement("td",null,e.cultivo),r.a.createElement("td",null,r.a.createElement("div",null,"Gravedad"),r.a.createElement("div",null,"Pozo")),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},mt(e.gravedadNormalAutorizada,3)),r.a.createElement("div",{className:"text-center"},mt(e.pozoNormalAutorizada,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},mt(e.gravedadNormalAsignada,3)),r.a.createElement("div",{className:"text-center"},mt(e.pozoNormalAsignada,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},mt(e.gravedadNormal,3)),m(o)?r.a.createElement("div",{className:"text-center"},mt(e.pozoNormal,3)):r.a.createElement("div",{className:"text-center"},mt(e.pozoParticularNormal,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},mt(e.gravedadNormalAsignada-e.gravedadNormal,3)),m(o)?r.a.createElement("div",{className:"text-center"},mt(e.pozoNormalAsignada-e.pozoNormal,3)):r.a.createElement("div",{className:"text-center"},mt(e.pozoNormalAsignada-e.pozoParticularNormal,3))))}))):r.a.createElement(r.a.Fragment,null),a&&"extra"===t?r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:"".concat(e.id,"-").concat(e.clave)},r.a.createElement("th",{scope:"row",className:"text-center"},e.clave),r.a.createElement("td",null,e.cultivo),r.a.createElement("td",null,r.a.createElement("div",null,"Gravedad"),r.a.createElement("div",null,"Pozo")),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},mt(e.gravedadExtraAutorizada,3)),r.a.createElement("div",{className:"text-center"},mt(e.pozoExtraAutorizada,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},mt(e.gravedadExtraAsignada,3)),r.a.createElement("div",{className:"text-center"},mt(e.pozoExtraAsignada,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},mt(e.gravedadExtra,3)),r.a.createElement("div",{className:"text-center"},mt(e.pozoExtra,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},mt(e.gravedadExtraAsignada-e.gravedadExtra,3)),r.a.createElement("div",{className:"text-center"},mt(e.pozoExtraAsignada-e.pozoExtra,3))))}))):r.a.createElement(r.a.Fragment,null)))))},Et=t(55),ft=function(){var e,a,t=Object(l.c)((function(e){return e.permisosScreen})).superficies,n={},o=0,c=0;null!==t&&(a="Superficie por cultivo",n={labels:(e=t).labels,datasets:[{label:a,data:e.superficiesCultivos,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},t.superficiesCultivos.forEach((function(e){o+=e})),t.numeroPermisos.forEach((function(e){c+=e})));return r.a.createElement("div",{className:"pt-4 text-secondary"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h5",null,"Superficies por cultivo")),r.a.createElement("div",{className:"d-flex flex-column pt-4 pb-4 pl-3"},r.a.createElement("div",null,r.a.createElement("h6",null,"Superficie expedida: ",o.toFixed(2)," ha")),r.a.createElement("div",null,r.a.createElement("h6",null,"Permisos expedidos: ",c))),r.a.createElement("div",{className:"pb-4"},r.a.createElement(Et.HorizontalBar,{data:n,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},width:220})))},vt=function(e){var a=e.autorizados,t=e.modulo,n=0,o=0,c=0,l=0,i=0,s=0,u=0,d=0;return null!==t&&a.forEach((function(e){n+=e.gravedadNormalAutorizada,o+=e.gravedadNormalAsignada,c+=e.gravedadExtraAutorizada,l+=e.gravedadExtraAsignada,i+=e.pozoNormalAutorizada,s+=e.pozoNormalAsignada,u+=e.pozoExtraAutorizada,d+=e.pozoExtraAsignada})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex bg-light border-primary border-bottom rounded-top p-1 justify-content-center font-weight-bold text-secondary pt-3"},r.a.createElement("h5",null,"M\xf3dulo ",t)),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-primary mb-0 text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"3"},"Total Superficie Normal")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Gravedad"),r.a.createElement("td",null,n),r.a.createElement("td",null,o)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Federal"),r.a.createElement("td",null,i),r.a.createElement("td",null,s))))),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-table-secondary text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"3"},"Total Superficie Extra")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Gravedad"),r.a.createElement("td",null,c),r.a.createElement("td",null,l)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Federal"),r.a.createElement("td",null,u),r.a.createElement("td",null,d))))))},bt=function(){var e=Object(Pa.a)(ya.a.mark((function e(a,t){var n,r;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisos").orderBy("fechaEmicion","desc").limit(20).get();case 2:return n=e.sent,r=[],n.forEach((function(e){r.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();function Nt(e,a){var t=new Date(e);return t.setDate(t.getDate()+a),t}var ht=function(){var e=Object(Pa.a)(ya.a.mark((function e(a,t,n){var r,o,c,l,i,s,d,m,p,E,f,v,b=arguments;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=b.length>3&&void 0!==b[3]?b[3]:["nombreCultivo","usuario","cuenta","numeroPermiso"],o=b.length>4&&void 0!==b[4]?b[4]:"todos",c=b.length>5&&void 0!==b[5]?b[5]:"todos",l=b.length>6&&void 0!==b[6]?b[6]:"todos",i=b.length>7&&void 0!==b[7]?b[7]:new Date(2021,8,1),s=b.length>8&&void 0!==b[8]?b[8]:new Date(2022,8,30),d=[],m=[],p=Ra.collection("permisos").doc(n).collection("modulos").doc("Modulo-".concat(t)).collection("permisos"),E=p,"todos"!==o&&(E=E.where("estadoPermiso","==",o)),"todos"!==c&&(E=E.where("tipo","==",c)),"todos"===l){e.next=21;break}e.t0=l,e.next="Gravedad"===e.t0?16:"Pozo"===e.t0?18:20;break;case 16:return E=E.where("sistema","==",l),e.abrupt("break",21);case 18:return E=E.where("sistema","in",["Pozo Particular","Pozo Federal"]),e.abrupt("break",21);case 20:return e.abrupt("break",21);case 21:return r.forEach((function(e){m.push(E.orderBy(e).startAt(a.toUpperCase()).endAt(a.toUpperCase()+"\uf8ff").get())})),e.next=24,Promise.all(m);case 24:for(f=e.sent,v=0;v<f.length;v++)f[v].forEach((function(e){var a=e.data().fechaEmicion.toDate();a>=i&&a<=Nt(s,1)&&d.push(Object(u.a)({id:e.id},e.data()))}));return 0===d.length&&ka.a.fire("No se encontraron permisos ","Se mostrar\xe1n los \xfaltimos permisos registrados.","warning"),e.abrupt("return",d);case 28:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),gt=function(){var e=Object(Pa.a)(ya.a.mark((function e(a,t){var n;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,Ra.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisosPorCultivo").orderBy("superficie","desc").get().then((function(e){var a=[];e.forEach((function(e){a.push(Object(u.a)({id:e.id},e.data()))}));var t=[],r=[],o=[],c=4,l=0,i=0;a.forEach((function(e){c>=0?(t.push("".concat(e.id," (").concat(mt(e.superficie,2),"ha)")),r.push(e.superficie),o.push(e.numeroPermisos),c--):(l=+e.superficie,i=+e.numeroPermisos)})),t.push("Otros cultivos (".concat(mt(l,2),"ha)")),r.push(mt(l,3)),o.push(i),n={labels:t,superficiesCultivos:r,numeroPermisos:o}})).catch((function(e){console.log(" Error: ",e)}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Ot=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t,n;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=Ra.collectionGroup("permisos").where("estadoPermiso","==","En proceso de cancelaci\xf3n").where("ciclo","==",a),e.next=4,n.get().then((function(e){e.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}))}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),At=function(e,a){return function(){var t=Object(Pa.a)(ya.a.mark((function t(n){var r;return ya.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt(e,a);case 2:r=t.sent,n(Ct(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},xt=function(e){return function(){var a=Object(Pa.a)(ya.a.mark((function a(t){var n;return ya.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ot(e);case 2:n=a.sent,t(jt(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},yt=function(e,a){return function(){var t=Object(Pa.a)(ya.a.mark((function t(n){var r;return ya.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gt(e,a);case 2:r=t.sent,n(Pt(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Pt=function(e){return{type:Ee,payload:e}},Ct=function(e){return{type:ue,payload:e}},jt=function(e){return{type:ve,payload:e}},zt=function(e){return{type:me,payload:e.id}},St=function(e){return{type:Ne,payload:e.id}},wt=function(e,a){return function(){var t=Object(Pa.a)(ya.a.mark((function t(n){var r,o;return ya.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,it(e,a);case 2:r=t.sent,o=0,r.forEach((function(e){o+=e.gravedadNormalAutorizada,o+=e.gravedadNormalAsignada,o+=e.gravedadExtraAutorizada,o+=e.gravedadExtraAsignada,o+=e.pozoNormalAutorizada,o+=e.pozoNormalAsignada,o+=e.pozoExtraAutorizada,o+=e.pozoExtraAsignada})),n(Rt(r)),n(Mt(o));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Rt=function(e){return{type:Ae,payload:e}},It=function(e){return{type:Ie,payload:e}},Dt=function(){return{type:Pe}},Ut=function(e){return{type:Ce,payload:e}},Mt=function(e){return{type:ze,payload:e}},kt=function(e){return{type:we,payload:e}},Tt=function(){return{type:Re}},Lt=function(){var e=Object(l.c)((function(e){return e.autorizadosScreen})).autorizados,a=Object(l.c)((function(e){return e.auth})).modulo,t=Object(l.b)(),o=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual;return Object(n.useEffect)((function(){t(wt(o,a)),t(yt(a,o))}),[t,o,a]),r.a.createElement("div",{className:"border border-primary rounded detallePermiso text-secondary mt-3"},r.a.createElement(ft,null),e.length>0&&r.a.createElement(vt,{autorizados:e,modulo:a}))},Ft=function(){var e=Object(l.b)();return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(ja.b,{to:"/nuevo-permiso"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:function(){e(function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Za();case 2:t=e.sent,a(Ga(t));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())}},r.a.createElement("span",null,"Nuevo Permiso "),r.a.createElement("i",{className:"fas fa-plus"}))))},Gt=function(){return r.a.createElement("div",{className:"border border-warning rounded p-4"},r.a.createElement("h3",null,"\xa1A\xfan no tiene privilegios !"),r.a.createElement("p",null,"Por favor p\xf3ngase en contacto con el administrador del sistema para que se le asignen privilegios de usuario."))},Vt=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.privilegios,t=e.rol,n=e.expedicionActivaModulo,o=Object(l.c)((function(e){return e.auth})).variablesGlobales.expedicionActiva,c=Date.now(),i=new Date(c);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row pt-5"},r.a.createElement("div",{className:"col-sm-8"},a.consultarAutorizados&&r.a.createElement(pt,null),a.consultarAutorizados&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("button",{className:"btn btn-outline-primary mt-4 no-printme",type:"button",onClick:function(){return window.print()}},r.a.createElement("span",null,"Imprimir"),r.a.createElement("i",{className:"fas fa-print"}))),r.a.createElement("div",{className:"col-sm-2 mt-2"},i.toLocaleDateString()))),r.a.createElement("div",{className:"col-sm-4 no-printme"},o&&n&&a.expedirPermisos&&r.a.createElement(Ft,null),a.consultarExpedicion&&r.a.createElement(Lt,null))),r.a.createElement("div",{className:"row d-flex justify-content-center pt-5"},r.a.createElement("div",{className:"col-sm-6"},"sinAsignar"===t&&r.a.createElement(Gt,null))))},Bt=t(38),Yt=t.n(Bt),qt=function(e){var a=e.title,t=e.columns,n=e.data,o=e.setFunction,c=e.closeFunction,i=Object(l.b)();return r.a.createElement(Yt.a,{onClick:function(e){return console.log(e)},columns:t,data:n,title:a,pagination:!0,paginationComponentOptions:{rowsPerPageText:"Filas por pagina",rangesSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"},fixedHeader:!0,persistTableHead:!0,fixedHeaderScrollHeight:"380px",highlightOnHover:!0,striped:!0,pointerOnHover:!0,dense:!0,onRowClicked:function(e){void 0!==o&&i(o(e)),void 0!==c&&i(c())}})},Zt=t(131);function Ht(){var e=Object(Zt.a)(["\n\theight: 32px;\n\twidth: 200px;\n\tborder-radius: 3px;\n\tborder-top-left-radius: 5px;\n\tborder-bottom-left-radius: 5px;\n\tborder-top-right-radius: 0;\n\tborder-bottom-right-radius: 0;\n\tborder: 1px solid #e5e5e5;\n\tpadding: 0 32px 0 16px;\n\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n"]);return Ht=function(){return e},e}t(79).default.input(Ht());var _t=[{name:"id",selector:"id",omit:!0},{name:"CUENTA",selector:"cuenta",sortable:!0,width:"80px"},{name:"SUBCTA",selector:"subcta",sortable:!0,width:"40px",center:!0},{name:"PATERNO",selector:"apPaterno",width:"120px",sortable:!0},{name:"MATERNO",selector:"apMaterno",width:"120px",sortable:!0},{name:"NOMBRE",selector:"nombre",width:"150px",sortable:!0},{name:"DERECHO(ha)",selector:"supRiego",sortable:!0,width:"80px",center:!0},{name:"LOTE",selector:"predio",sortable:!0,width:"60px",center:!0},{name:"LOCALIDAD",selector:"nombreLocalidad",sortable:!0,width:"200px"},{name:"SECCION",selector:"seccion",sortable:!0,width:"60px",center:!0},{name:"MODULO",selector:"modulo",sortable:!0,width:"60px",center:!0}],Kt=[{name:"id",selector:"id",omit:!0},{name:"PATERNO",selector:"apPaterno",width:"140px",sortable:!0},{name:"MATERNO",selector:"apMaterno",width:"140px",sortable:!0},{name:"NOMBRE",selector:"nombre",width:"200px",sortable:!0},{name:"CURP",selector:"curp",sortable:!0,width:"180px",center:!0}],Xt=[{name:"id",selector:"id",omit:!0},{name:"CLAVE",selector:"clave",sortable:!0,width:"60px",center:!0},{name:"NOMBRE",selector:"nombre",sortable:!0,center:!0},{name:"SUBCICLO",selector:"subciclo",sortable:!0,center:!0}],Jt=[{name:"id",selector:"id",omit:!0},{name:"CLAVE ENTIDAD",selector:"claveEntidad",sortable:!0,center:!0},{name:"NOMBRE",selector:"displayName",sortable:!0},{name:"CORREO",selector:"email",sortable:!0},{name:"ROL",selector:"rol",sortable:!0}],Qt=[{name:"id",selector:"id",omit:!0},{name:"CLAVE",selector:"clave",sortable:!0,center:!0},{name:"NOMBRE",selector:"nombre",sortable:!0},{name:"TIPO",selector:"tipo",sortable:!0},{name:"MUNICIPIO",selector:"municipio",sortable:!0},{name:"ESTADO",selector:"estado",sortable:!0}],Wt=[{name:"id",selector:"id",omit:!0},{name:"PERMISO",selector:"numeroPermiso",sortable:!0,width:"110px"},{name:"CUENTA",selector:"cuenta",sortable:!0,width:"80px"},{name:"USUARIO",selector:"usuario",sortable:!0,width:"250px"},{name:"PRODUCTOR",selector:"nombreProductor",width:"250px",sortable:!0},{name:"CULTIVO",selector:"nombreCultivo",width:"150px",sortable:!0},{name:"HA",selector:"supAutorizada",width:"60px",sortable:!0,center:!0},{name:"LOTE",selector:"lote",sortable:!0,width:"60px",center:!0},{name:"LOCALIDAD",selector:"localidad",sortable:!0,width:"150px"},{name:"EMISI\xd3N",selector:"fechaEmicion",sortable:!0,width:"100px"},{name:"VIGENCIA",selector:"vigencia",sortable:!0,width:"100px"},{name:"ESTADO",selector:"estadoPermiso",sortable:!0,width:"100px"}],$t=[{name:"id",selector:"id",omit:!0},{name:"PERMISO",selector:"numeroPermiso",sortable:!0,width:"70px"},{name:"CUENTA",selector:"cuenta",sortable:!0,width:"60px"},{name:"USUARIO",selector:"usuario",sortable:!0,width:"180px"},{name:"PRODUCTOR",selector:"nombreProductor",width:"140px",sortable:!0},{name:"CULTIVO",selector:"nombreCultivo",width:"70px",sortable:!0},{name:"HA",selector:"supAutorizada",width:"60px",sortable:!0,center:!0},{name:"LOTE",selector:"lote",sortable:!0,width:"40px",center:!0},{name:"LOCALIDAD",selector:"localidad",sortable:!0,width:"80px"},{name:"EMISI\xd3N",selector:"fechaEmicion",sortable:!0,width:"70px"},{name:"ESTADO",selector:"estadoPermiso",sortable:!0,width:"70px"},{name:"CUOTA",selector:"cuotaCultivo",width:"60px",sortable:!0,center:!0},{name:"SISTEMA",selector:"sistema",width:"60px",sortable:!0}],en=[{name:"id",selector:"id",omit:!0},{name:"CLAVE",selector:"clave",sortable:!0,width:"80px",center:!0},{name:"CULTIVO",selector:"cultivo",sortable:!0,width:"160px"},{name:"GRAVEDAD NORMAL AUTORIZADA",selector:"gravedadNormalAutorizada",sortable:!0,center:!0},{name:"GRAVEDAD NORMAL ASIGNADA",selector:"gravedadNormalAsignada",sortable:!0,center:!0},{name:"GRAVEDAD EXTRA AUTORIZADA",selector:"gravedadExtraAutorizada",sortable:!0,center:!0},{name:"GRAVEDAD EXTRA ASIGNADA",selector:"gravedadExtraAsignada",sortable:!0,center:!0},{name:"POZO NORMAL AUTORIZADA",selector:"pozoNormalAutorizada",sortable:!0,center:!0},{name:"POZO NORMAL ASIGNADA",selector:"pozoNormalAsignada",sortable:!0,center:!0},{name:"POZO EXTRA AUTORIZADA",selector:"pozoExtraAutorizada",sortable:!0,center:!0},{name:"POZO EXTRA ASIGNADA",selector:"pozoExtraAsignada",sortable:!0,center:!0}],an=[{name:"id",selector:"id",omit:!0},{name:"CLAVE",selector:"clave",sortable:!0,width:"80px",center:!0},{name:"CULTIVO",selector:"cultivo",sortable:!0,width:"160px"},{name:"POZO NORMAL AUTORIZADA",selector:"pozoNormalAutorizada",sortable:!0,center:!0},{name:"POZO NORMAL ASIGNADA",selector:"pozoNormalAsignada",sortable:!0,center:!0},{name:"POZO EXTRA AUTORIZADA",selector:"pozoExtraAutorizada",sortable:!0,center:!0},{name:"POZO EXTRA ASIGNADA",selector:"pozoExtraAsignada",sortable:!0,center:!0}],tn=function(){var e=Object(Pa.a)(ya.a.mark((function e(a,t){var n,r,o,c;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=["apPaterno","cuenta"],r=[],o=[],c=nn(t),n.forEach((function(e){r.push(c.orderBy(e).startAt(a).endAt(a+"\uf8ff").get()),r.push(c.where(e,"==",Number(a)).get())})),e.next=7,Promise.all(r);case 7:return e.sent.forEach((function(e){e.forEach((function(e){switch(t){case"UNI01":case"UNI02":case"UNI03":o.push(Object(u.a)({id:e.id},e.data()));break;default:1!==e.data().equipo&&o.push(Object(u.a)({id:e.id},e.data()))}}))})),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),nn=function(e){switch(e){case"UNI01":return Ra.collection("derechos").where("equipo","==",1).where("modulo","in",[4,5,6,7]);case"UNI02":return Ra.collection("derechos").where("equipo","==",1).where("modulo","in",[8,"9A","9B"]);case"UNI03":return Ra.collection("derechos").where("equipo","==",1).where("modulo","in",[1,2,3]);default:return Ra.collection("derechos").where("modulo","==",function(e){return"9A"===e||"9B"===e||"dev"===e?e:parseInt(e)}(e))}},rn=function(){var e=Object(Pa.a)(ya.a.mark((function e(a,t,n){var r,o,c;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("permisos").doc(n).collection("modulos").doc("Modulo-".concat(t)).collection("permisos").where("cuenta","==",a).where("estadoPermiso","!=","Cancelado").get();case 2:return r=e.sent,o=[],r.forEach((function(e){o.push(Object(u.a)({id:e.id},e.data()))})),c=0,o.forEach((function(e){c+=e.supAutorizada})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),on=function(){var e=Object(Pa.a)(ya.a.mark((function e(a,t,n){var r,o,c;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("transferencias").doc(n).collection("transferencias").where("cuentaOrigen","==",a).where("moduloOrigen","==",t).get();case 2:return r=e.sent,o=[],r.forEach((function(e){o.push(Object(u.a)({id:e.id},e.data()))})),c=0,o.forEach((function(e){c+=e.superficieTransferida})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),cn=function(){var e=Object(Pa.a)(ya.a.mark((function e(){var a;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("app").doc("variablesGlobales").get();case 2:return a=e.sent,e.abrupt("return",a.data().cicloActual);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ln=function(e){document.getElementById(e)&&document.getElementById(e).focus()},sn=function(){return{type:T}},un=function(e,a){return function(){var t=Object(Pa.a)(ya.a.mark((function t(n){var r;return ya.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tn(e,a);case 2:r=t.sent,n(dn(r)),n(Ka(a));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},dn=function(e){return{type:F,payload:e}},mn=function(e){return En(),function(){var a=Object(Pa.a)(ya.a.mark((function a(t){var n,r,o;return ya.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,cn();case 2:return n=a.sent,a.next=5,rn("".concat(e.cuenta,".").concat(e.subcta),e.modulo,n);case 5:return r=a.sent,a.next=8,on("".concat(e.cuenta,".").concat(e.subcta),e.modulo,n);case 8:o=a.sent,e.supPrevia=r+o,t(pn(e)),ln("cultivoInput");case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},pn=function(e){return 26===e.estado&&(e.estado="Sonora"),2===e.estado&&(e.estado="Baja California"),2===e.municipio&&(e.municipio="Mexicali"),55===e.municipio&&(e.municipio="San Luis Rio Colorado"),1===e.sistRiego&&(e.sistRiego="Gravedad"),2===e.sistRiego&&1===e.equipo&&(e.sistRiego="Pozo Particular"),2===e.sistRiego&&2===e.equipo&&(e.sistRiego="Pozo Federal"),{type:V,payload:e}},En=function(){return{type:B}},fn=function(){return{type:q}},vn=function(){return{type:H}},bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(n.useState)(e),t=Object(Ca.a)(a,2),r=t[0],o=t[1],c=function(){o(e)},l=function(e){var a=e.target;"checkbox"===a.type?o(Object(u.a)(Object(u.a)({},r),{},Object(Ja.a)({},a.name,a.checked))):o(Object(u.a)(Object(u.a)({},r),{},Object(Ja.a)({},a.name,a.value.toUpperCase())))},i=function(e){o(e)};return[r,l,c,i]},Nn=function(){var e=Object(l.c)((function(e){return e.auth})).modulo,a=Object(l.c)((function(e){return e.altaPermisos})),t=a.idUsuarioSelected,o=a.usuario,c=Object(l.b)(),i=function(){s(),f.length>0?c({type:k}):ka.a.fire("Nada para buscar","Ingrese apellido paterno o cuenta del usuario","warning")};Object(n.useEffect)((function(){c(En()),c(sn())}),[c]);var s=function(){c(un(f.toUpperCase(),e))},u="";t&&(u=o);var d=bn({usuario:""}),m=Object(Ca.a)(d,2),p=m[0],E=m[1],f=p.usuario;return r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},r.a.createElement("span",{className:"text-warning"},"* "),"Usuario:"," "),r.a.createElement("label",null,u," "),t?r.a.createElement("div",{className:"fas fa-check text-success p-3"}):r.a.createElement(r.a.Fragment,null),t?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex-grow-1"},r.a.createElement("input",{tabIndex:"1",type:"text",className:"form-control",placeholder:"Apellido paterno o numero de cuenta",name:"usuario",autoComplete:"off",value:f,onChange:E,onKeyUp:function(e){"Enter"===e.key&&i()},autoFocus:!0})),t?r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){c(En()),p.usuario=""}},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:i},r.a.createElement("i",{className:"fas fa-search"}))))},hn=function(){var e=Object(l.c)((function(e){return e.altaPermisos}));return r.a.createElement("div",{className:"border rounded mb-4 p-2"},r.a.createElement("div",null,"Cuenta: ",e.cuenta),r.a.createElement("div",null,"Usuario: ",e.usuario),r.a.createElement("div",null,"Colonia/Ejido: ",e.nombreLocalidad),r.a.createElement("div",null,"Lote: ",e.lote),r.a.createElement("div",null,"Seccion: ",e.seccion),r.a.createElement("div",null,"Sup. Derecho: ",e.supDerecho),r.a.createElement("div",null,"Sup. Disponible: ",e.supDerecho-e.supPrevia),r.a.createElement("div",null,"Sistema: ",e.sistema),e.reacomodo&&r.a.createElement("div",{className:"text-info"},"Reacomodo: ",e.reacomodo))},gn=t(37),On=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise((function(e,t){var n=new FileReader;n.readAsArrayBuffer(a),n.onload=function(a){var t=a.target.result,n=Object(gn.read)(t,{type:"buffer"}),r=n.SheetNames[0],o=n.Sheets[r],c=gn.utils.sheet_to_json(o);e(c)},n.onerror=function(e){t(e)}})),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),An=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t,n;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("colonias").orderBy("nombre").startAt(a).endAt(a+"\uf8ff").get();case 2:return t=e.sent,n=[],t.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),xn=function(){var e=Object(Pa.a)(ya.a.mark((function e(){var a,t;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("reacomodos").get();case 2:return a=e.sent,t=[],a.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),yn=[1,2,3,4,5,6,7,8,"9A","9B",10,11,12,14,15,16,17,18,19,20,21,22,23,"UNI01","UNI02","UNI03","dev"],Pn={accesoGlobal:!1,pantallaInicio:!1,pantallaPadron:!1,pantallaPermisos:!1,pantallaTransferencias:!1,pantallaAsignacion:!1,pantallaLabores:!1,pantallaAutorizados:!1,pantallaReportes:!1,pantallaConfiguracion:!1,testArea:!1,actualizarPadron:!1,expedirPermisos:!1,consultarPermisos:!1,solicitarCancelarPermisos:!1,cancelarPermisos:!1,consultarExpedicion:!1,consultarAutorizados:!1,solicitarTransferencias:!1,"asignarT\xe9cnico":!1,consultarLabores:!1,registrarLabores:!1,pagarLabores:!1,imprimirLabores:!1,editarEntidades:!1,asignarRoles:!1,editarRoles:!1,cerrarExpedicionModulos:!1,variablesGlobales:!1},Cn=[{clave:"dev",dotacionGravedad:117,dotacionPozo:0,titular:"dev",direccion:"",nombre:"Desarrollo",img:"dev.png",expedicionActivaModulo:!0},{clave:"CNA",dotacionGravedad:117,dotacionPozo:0,nombre:"Comisi\xf3n Nacional del Agua",titular:"???",direccion:"",img:"cna.png"},{clave:"SADER",dotacionGravedad:117,dotacionPozo:0,nombre:"Secretar\xeda de Agricultura y Desarrollo Rural",titular:"???",direccion:"",img:"sader.png"},{clave:"CESVBC",dotacionGravedad:117,dotacionPozo:0,nombre:"Comit\xe9 Estatal de Sanidad Vegetal de Baja California",titular:"???",direccion:"",img:"cesvbc.webp"},{clave:"SRL",dotacionGravedad:117,dotacionPozo:0,nombre:"Distrito de Riego 014, R\xedo Colorado S. de R.L.",titular:"???",direccion:"",img:"srl.png"},{clave:"1",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 1",titular:"???",direccion:"",img:"m1.jpg",expedicionActivaModulo:!0},{clave:"2",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 2",titular:"???",direccion:"",img:"m2.jpg",expedicionActivaModulo:!0},{clave:"3",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 3",titular:"???",direccion:"",img:"m3.jpg",expedicionActivaModulo:!0},{clave:"4",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 4",titular:"???",direccion:"",img:"m4.jpg",expedicionActivaModulo:!0},{clave:"5",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 5",titular:"???",direccion:"",img:"m5.jpg",expedicionActivaModulo:!0},{clave:"6",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 6",titular:"???",direccion:"",img:"m6.jpg",expedicionActivaModulo:!0},{clave:"7",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 7",titular:"???",direccion:"",img:"m7.jpg",expedicionActivaModulo:!0},{clave:"8",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 8",titular:"???",direccion:"",img:"m8.jpg",expedicionActivaModulo:!0},{clave:"9A",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 9A",titular:"???",direccion:"",img:"m9a.jpg",expedicionActivaModulo:!0},{clave:"9B",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 9B",titular:"???",direccion:"",img:"m9b.jpg",expedicionActivaModulo:!0},{clave:"10",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 10",titular:"???",direccion:"",img:"m10.jpg",expedicionActivaModulo:!0},{clave:"11",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 11",titular:"???",direccion:"",img:"m11.jpg",expedicionActivaModulo:!0},{clave:"12",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 12",titular:"???",direccion:"",img:"m12.jpg",expedicionActivaModulo:!0},{clave:"14",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 14",titular:"???",direccion:"",img:"m14.jpg",expedicionActivaModulo:!0},{clave:"15",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 15",titular:"???",direccion:"",img:"m15.jpg",expedicionActivaModulo:!0},{clave:"16",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 16",titular:"???",direccion:"",img:"m16.jpg",expedicionActivaModulo:!0},{clave:"17",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 17",titular:"???",direccion:"",img:"m17.jpg",expedicionActivaModulo:!0},{clave:"18",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 18",titular:"???",direccion:"",img:"m18.jpg",expedicionActivaModulo:!0},{clave:"19",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 19",titular:"???",direccion:"Carretera a San Felipe Km 1.5 S/N, Col. Xochimilco C.P. 21380. Mexicali B.C.",img:"m19.png",expedicionActivaModulo:!0},{clave:"20",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 20",titular:"???",direccion:"",img:"m20.jpg",expedicionActivaModulo:!0},{clave:"21",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 21",titular:"???",direccion:"",img:"m21.jpg",expedicionActivaModulo:!0},{clave:"22",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 22",titular:"???",direccion:"",img:"m22.jpg",expedicionActivaModulo:!0},{clave:"23",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del m\xf3dulo No. 23",titular:"???",direccion:"",img:"srl.png",expedicionActivaModulo:!0}],jn=[{CUENTA:"dev",SUBCTA:0,UNIDAD:2,ZONA:"dev",SECCION:86,CP:1,LT:32,SLT:0,RA:0,SRA:0,SSRA:0,PCONTROL:300,TENENCIA:1,ESTADO:2,MUNICIPIO:2,EJIDO:224,GRUPO:0,PREDIO:23,SISTRIEGO:1,EQUIPO:0,APPATERNO:"LOPEZ",APMATERNO:"LOPEZ",NOMBRE:"JUAN DEV",SUPFISICA:100,SUPRIEGO:100,FECHA:"",REFERENCIA:3606,MODULO:"dev"},{CUENTA:"dev",SUBCTA:1,UNIDAD:2,ZONA:"dev",SECCION:88,CP:1,LT:5,SLT:0,RA:0,SRA:0,SSRA:0,PCONTROL:300,TENENCIA:1,ESTADO:2,MUNICIPIO:2,EJIDO:151,GRUPO:0,PREDIO:23,SISTRIEGO:2,EQUIPO:1,APPATERNO:"LOPEZ",APMATERNO:"GOMEZ",NOMBRE:"LUIS DEV",SUPFISICA:100,SUPRIEGO:100,FECHA:"",REFERENCIA:3606,MODULO:"dev"},{CUENTA:"dev",SUBCTA:2,UNIDAD:2,ZONA:"dev",SECCION:90,CP:1,LT:12,SLT:0,RA:0,SRA:0,SSRA:0,PCONTROL:300,TENENCIA:1,ESTADO:2,MUNICIPIO:2,EJIDO:224,GRUPO:0,PREDIO:23,SISTRIEGO:2,EQUIPO:2,APPATERNO:"LOPEZ",APMATERNO:"HERNANDEZ",NOMBRE:"CARLOS DEV",SUPFISICA:100,SUPRIEGO:100,FECHA:"",REFERENCIA:3606,MODULO:"dev"}],zn=function(e){var a=!0;return["CUENTA","SUBCTA","APPATERNO","UNIDAD","ZONA","EJIDO","SECCION"].forEach((function(t){void 0===e[0][t]&&(a=!1)})),a?console.log("ok, todo en orden!"):console.log("Esto no es un padron"),a},Sn=function(e,a){var t=e.find((function(e){return e.clave===a}));return t?t.nombre:"?"},wn=function(e,a){return a>=0?e>0?"".concat(e).concat(a):a:"?"},Rn=function(e){return 9===e?"9A":92===e?"9B":e},In=function(e,a){return 1===e?"Gravedad":2===e&&1===a?"Pozo Particular":2===e&&2===a?"Pozo Federal":""},Dn=function(e){var a=e.actionFunction,t=e.title,n=e.updating,o=void 0!==n&&n,c=e.fileExtension;return r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex"},r.a.createElement("label",{htmlFor:"input",className:"align-self-center"},t),o&&r.a.createElement("div",{className:"spinner-border text-primary align-self-center ml-2",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement("input",{id:"input",type:"file",className:"form-control-file mt-4",onChange:function(e){var t=e.target.files[0];t.name.match(/\.[0-9a-z]+$/i)[0]===c?a(t):ka.a.fire("Formato incorrecto",'Verifique que el archivo que intenta cargar tenga la extensi\xf3n "'.concat(c,'".'),"error")}}))},Un=function(){var e=Object(l.c)((function(e){return e.scenes.padronScreen})).updatingPadron,a=Object(l.b)();return r.a.createElement(Dn,{actionFunction:function(e){a(function(e){return function(){var a=Object(Pa.a)(ya.a.mark((function a(t){var n,r,o,c,l,i;return ya.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t({type:Y});case 2:return a.next=4,An("");case 4:return n=a.sent,a.next=7,xn();case 7:return r=a.sent,a.next=10,On(e);case 10:if(o=a.sent,jn.forEach((function(e){o.push(e)})),c=Ra.batch(),l=1,i=500,!zn(o)){a.next=25;break}return a.next=18,o.forEach((function(e,a){var t=r.find((function(a){return a.id==="".concat(e.CUENTA,"-").concat(e.SUBCTA)}));t&&(o[a].reacomodo=t.reacomodo)}));case 18:return a.next=20,o.forEach((function(e,a){var t=Sn(n,e.EJIDO);o[a].nombreLocalidad=t}));case 20:return a.next=22,o.forEach((function(e){var a={apMaterno:void 0!==e.APMATERNO?e.APMATERNO:"?",apPaterno:void 0!==e.APPATERNO?e.APPATERNO:"?",cp:void 0!==e.CP?e.CP:"?",cuenta:void 0!==e.CUENTA?e.CUENTA:"?",ejido:void 0!==e.EJIDO?e.EJIDO:"?",nombreLocalidad:e.nombreLocalidad,equipo:void 0!==e.EQUIPO?e.EQUIPO:"?",estado:void 0!==e.ESTADO?e.ESTADO:"?",fecha:void 0!==e.FECHA?e.FECHA:"?",grupo:void 0!==e.GRUPO?e.GRUPO:"?",lt:void 0!==e.LT?e.LT:"?",modulo:void 0!==e.ZONA?Rn(e.ZONA):"?",municipio:void 0!==e.MUNICIPIO?e.MUNICIPIO:"?",nombre:void 0!==e.NOMBRE?e.NOMBRE:"?",pControl:void 0!==e.PCONTROL?e.PCONTROL:"?",predio:wn(e.GRUPO,e.PREDIO),ra:void 0!==e.RA?e.RA:"?",referencia:void 0!==e.REFERENCIA?e.REFERENCIA:"?",seccion:void 0!==e.SECCION?e.SECCION:"?",sistRiego:void 0!==e.SISTRIEGO?e.SISTRIEGO:"?",sistemaRiego:In(e.SISTRIEGO,e.EQUIPO),slt:void 0!==e.SLT?e.SLT:"?",sra:void 0!==e.SRA?e.SRA:"?",ssra:void 0!==e.SSRA?e.SSRA:"?",subcta:void 0!==e.SUBCTA?e.SUBCTA:"?",supFisica:void 0!==e.SUPFISICA?e.SUPFISICA:"?",supRiego:void 0!==e.SUPRIEGO?e.SUPRIEGO:"?",tenencia:void 0!==e.TENENCIA?e.TENENCIA:"?",unidad:void 0!==e.UNIDAD?e.UNIDAD:"?",zona:void 0!==e.ZONA?e.ZONA:"?",reacomodo:void 0!==e.reacomodo&&e.reacomodo},t=Ra.collection("derechos").doc("".concat(a.cuenta,"-").concat(a.subcta));c.set(t,a),l===i&&(c.commit().then((function(){console.log("Se termino de subir batch")})).catch((function(e){console.error(e)})),c=Ra.batch(),l=0),l++}));case 22:c.commit().then((function(){console.log("Se termino de actualizar el padron"),ka.a.fire("Padron actualizado","Se actualizo con \xe9xito el padr\xf3n de usuarios.","success"),t(fn())})).catch((function(e){console.error(e)})),a.next=27;break;case 25:t(fn()),ka.a.fire("Formato incorrecto","Verifique que el documento que intenta cargar corresponda a un padr\xf3n de usuarios v\xe1lido.","error");case 27:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(e))},title:"Cargar Padron",updating:e,fileExtension:".xlsx"})},Mn=function(e){var a=!0;return["CTA","SC","LLAVE","EJI","HAS","RE","CVEPRO"].forEach((function(t){void 0===e[0][t]&&(a=!1)})),a?console.log("ok, todo en orden!"):console.log("Esto no es un padron"),a},kn=function(){var e=Object(l.c)((function(e){return e.scenes.padronScreen})).updatingReacomodos,a=Object(l.b)();return r.a.createElement(Dn,{actionFunction:function(e){a(function(e){return function(){var a=Object(Pa.a)(ya.a.mark((function a(t){var n,r,o;return ya.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t({type:Z});case 2:return a.next=4,On(e);case 4:n=a.sent,r=Ra.batch(),o=1,500,Mn(n)?(n.forEach((function(e){var a={cuenta:void 0!==e.CTA?e.CTA:"?",subCuenta:void 0!==e.SC?e.SC:"?",llave:void 0!==e.LLAVE?e.LLAVE:"?",modulo:void 0!==e.MODULO?e.MODULO:"?",claveEjido:void 0!==e.CVEEJI?e.CVEEJI:"?",ejido:void 0!==e.EJI?e.EJI:"?",predio:void 0!==e.PRE?e.PRE:"?",hectareas:void 0!==e.HAS?e.HAS:"?",reacomodo:void 0!==e.RE?e.RE:"?",claveProcedencia:void 0!==e.CVEPRO?e.CVEPRO:"?",ejidoProcedencia:void 0!==e.EJIPRO?e.EJIPRO:"?",predioProcedencia:void 0!==e.PREPRO?e.PREPRO:"?"},t=Ra.collection("reacomodos").doc("".concat(a.cuenta,"-").concat(a.subCuenta));r.set(t,a),500===o&&(r.commit().then((function(){console.log("Se termino de subir batch")})).catch((function(e){console.error(e)})),r=Ra.batch(),o=0),o++})),r.commit().then((function(){console.log("Se terminaron de actualizar los reacomodos"),ka.a.fire("Reacomodos actualizados","Se actualizaron con \xe9xito los reacomodos.","success"),t(vn())})).catch((function(e){console.error(e)}))):(t(vn()),ka.a.fire("Formato incorrecto","Verifique que el documento que intenta cargar corresponda a una tabla de reacomodos v\xe1lida.","error"));case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(e))},title:"Cargar Reacomodos",updating:e,fileExtension:".xlsx"})},Tn=t(132),Ln=t.n(Tn),Fn=function(e,a,t,n,r){var o=gn.utils.book_new();o.Props={Title:t,Author:n,CreatedDate:new Date},o.SheetNames.push(r);var c=gn.utils.json_to_sheet(e,a);o.Sheets[r]=c;var l=Object(gn.write)(o,{bookType:"xlsx",type:"array"});Gn(l,t)},Gn=function(e,a){var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ln.a.saveAs(t,"".concat(a,".xlsx"))},Vn=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.modulo,t=e.name,n="PadronM".concat(a),o={header:["CUENTA","APPATERNO","APMATERNO","NOMBRE","MODULO","SECCION","LOCALIDAD","PREDIO","REACOMODO","HA","SISTEMA"]},c=function(){var e=Object(Pa.a)(ya.a.mark((function e(){return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ka.a.fire({title:"Atenci\xf3n!!",text:"Al confirmar se iniciar\xe1 la descarga del padr\xf3n de usuarios en formato excel.",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Descargar",cancelButtonText:"Cancelar"}).then(function(){var e=Object(Pa.a)(ya.a.mark((function e(r){var c,l;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isConfirmed){e.next=7;break}return e.next=4,tn("",a);case 4:c=e.sent,l=c.map((function(e){return{CUENTA:e.id,APPATERNO:e.apPaterno,APMATERNO:e.apMaterno,NOMBRE:e.nombre,MODULO:e.modulo,SECCION:e.seccion,LOCALIDAD:e.nombreLocalidad,PREDIO:e.predio,REACOMODO:e.reacomodo,HA:e.supRiego,SISTEMA:e.sistemaRiego}})),Fn(l,o,n,t,n);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("button",{onClick:c,className:"btn btn-outline-primary m-3"},r.a.createElement("i",{className:"fas fa-download mr-2"}),"Descargar Padron")},Bn=function(){var e=Object(l.c)((function(e){return e.entidades})),a=e.usuarios,t=e.usuario,o=Object(l.c)((function(e){return e.auth})).privilegios,c=Object(l.b)();Object(n.useEffect)((function(){c(En()),c({type:G})}),[c]);var i=[];return a&&(i=Object.values(a)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-3 d-flex justify-content-start"},r.a.createElement(Nn,null),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement(Vn,null))),a&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8 mb-3"},r.a.createElement(qt,{title:0===i.length?"No se encontraron usuarios":"Usuarios",columns:_t,data:i,setFunction:mn})),r.a.createElement("div",{className:"col-sm-4"},t&&r.a.createElement(hn,null))),o.actualizarPadron&&r.a.createElement("div",{className:"border border-info rounded p-3 mt-3"},r.a.createElement("h3",{className:"row d-flex justify-content-center"},"Actualizar padron de usuarios y reacomodos"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 mt-3 mb-3"},r.a.createElement(Un,null)),r.a.createElement("div",{className:"col-sm-6 mt-3 mb-3"},r.a.createElement(kn,null)))))},Yn=t(13),qn=t.n(Yn),Zn=function(e){return{type:te,payload:e}},Hn=function(){return{type:A}},_n=function(){return{type:oe}},Kn=t(14),Xn=t.n(Kn),Jn=function(){var e=Object(Pa.a)(ya.a.mark((function e(a,t){var n,r;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=[],["clave","nombre"].forEach((function(e){n.push(Ra.collection("cultivos").orderBy(e).startAt(a).endAt(a+"\uf8ff").get()),n.push(Ra.collection("cultivos").where(e,"==",Number(a)).get())})),e.next=6,Promise.all(n);case 6:return e.sent.forEach((function(e){e.forEach((function(e){switch(t){case"nuevo":0!==e.data().clave&&r.push(Object(u.a)({id:e.id},e.data()));break;default:r.push(Object(u.a)({id:e.id},e.data()))}}))})),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Qn=function(){return{type:y}},Wn=function(){return{type:P}},$n=function(){return{type:j}},er=function(e,a){return function(){var t=Object(Pa.a)(ya.a.mark((function t(n){var r,o;return ya.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jn(e,"nuevo");case 2:r=t.sent,o=[],r.forEach((function(e){o.push(Object(u.a)(Object(u.a)({},e),{},{modulo:a}))})),n(ar(o));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ar=function(e){return{type:z,payload:e}},tr=function(e){return{type:S,payload:e}},nr=function(){var e=Object(Pa.a)(ya.a.mark((function e(a,t,n){var r,o,c;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("permisos").doc(a).collection("modulos").doc("Modulo-".concat(t)).collection("permisosPorCultivo").doc(n).get();case 2:return r=e.sent,o=Object(u.a)({},r.data()),c={gravedadNormal:o.hasOwnProperty("gravedadNormal")?o.gravedadNormal:0,gravedadExtra:o.hasOwnProperty("gravedadExtra")?o.gravedadExtra:0,pozoNormal:o.hasOwnProperty("pozoNormal")?o.pozoNormal:0,pozoExtra:o.hasOwnProperty("pozoExtra")?o.pozoExtra:0},e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),rr=function(e){return function(){var a=Object(Pa.a)(ya.a.mark((function a(t){var n,r;return ya.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,cn();case 2:return n=a.sent,a.next=5,nr(n,e.modulo,"".concat(e.clave,"-").concat(e.nombre));case 5:r=a.sent,t(or(Object(u.a)(Object(u.a)({},e),{},{superficiePrevia:r}))),ln("superficieInput");case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},or=function(e){return{type:R,payload:e}},cr=function(){return{type:I}},lr=function(e){return ln("productorInput"),{type:D,payload:e}},ir=function(){return{type:U}},sr=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t,n;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("productores").orderBy("apPaterno").startAt(a).endAt(a+"\uf8ff").get();case 2:return t=e.sent,n=[],t.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ur=function(){return{type:_}},dr=function(){return{type:K}},mr=function(e){return function(){var a=Object(Pa.a)(ya.a.mark((function a(t){var n;return ya.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,sr(e);case 2:n=a.sent,t(pr(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},pr=function(e){return{type:X,payload:e}},Er=function(e){return ln("variedadInput"),{type:Q,payload:e}},fr=function(){return{type:W}},vr=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t,n,r,o,c;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"ALGODONERO"===(t={idUsuarioSelected:a.idUsuarioSelected,cuenta:a.cuenta,usuario:a.usuario,supDerecho:a.supDerecho,lote:a.lote,localidad:a.nombreLocalidad,nombreLocalidad:a.nombreLocalidad,municipio:a.municipio,estado:a.estado,modulo:a.modulo,zona:a.zona,seccion:a.seccion,canal:a.canal,toma:a.toma,sistema:a.sistema,idProductorSelected:a.idProductorSelected,nombreProductor:a.nombreProductor,rfcProductor:a.rfcProductor,curpProductor:a.curpProductor?a.curpProductor:"",idCultivoSelected:a.idCultivoSelected,nombreCultivo:a.nombreCultivo,claveCultivo:a.claveCultivo,subciclo:a.subciclo,cuotaCultivo:a.cuotaCultivo,supPrevia:a.supPrevia,tipo:a.tipo,ciclo:a.ciclo,numeroPermiso:a.numeroPermiso,fechaEmicion:qn()(a.fechaEmicion).toDate(),fechaLimite:qn()(a.fechaLimite).toDate(),vigencia:qn()(a.vigencia).toDate(),variedad:a.variedad,supAutorizada:a.supAutorizada,fuenteCredito:a.fuenteCredito,latitud:a.latitud,longitud:a.longitud,cultivoAnterior:a.cultivoAnterior,idCultivoAnteriorSelected:a.idCultivoAnteriorSelected,claveCultivoAnterior:a.claveCultivoAnterior,observaciones:a.observaciones,uid:a.uid,name:a.name,dotacionGravedad:a.dotacionGravedad,dotacionPozo:a.dotacionPozo,titular:a.titular,transferencia:a.transferencia,estadoPermiso:a.estadoPermiso,reacomodo:a.reacomodo?a.reacomodo:"",direccion:a.direccion}).nombreCultivo&&(t.tecnico="sinAsignar",t.desfoliado=!1,t.cosechado=!1,t.desvarado=!1,t.disqueado=!1,t.desarraigado=!1,t.superficieMapeada=0,t.pagado=!1,t.constanciaFitosanitaria=!1),n=Ra.collection("permisos").doc(t.ciclo).collection("modulos").doc("Modulo-".concat(t.modulo)).collection("permisosPorCultivo").doc("".concat(t.claveCultivo,"-").concat(t.nombreCultivo)),r=Ra.collection("permisos").doc(t.ciclo).collection("modulos").doc("Modulo-".concat(t.modulo)).collection("permisos").doc(t.numeroPermiso),o=Ra.collection("permisos").doc(t.ciclo).collection("modulos").doc("Modulo-".concat(t.modulo)),e.prev=5,e.next=8,Ra.runTransaction(function(){var e=Object(Pa.a)(ya.a.mark((function e(c){var l,i;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get(r);case 2:return l=e.sent,e.next=5,c.get(n);case 5:if(i=e.sent,!l.exists){e.next=11;break}throw ka.a.fire("El permiso ya existe","Est\xe1 intentando sobreescribir un permiso ya existente, verifique su conexi\xf3n.","error"),new Error("El permiso ya existe!");case 11:if(c.set(r,t),c.update(o,{numeroPermisosModulo:wa.a.firestore.FieldValue.increment(1),superficieModulo:wa.a.firestore.FieldValue.increment(a.supAutorizada)}),!i.exists){e.next=30;break}e.t0=a.sistema,e.next="Gravedad"===e.t0?17:"Pozo Federal"===e.t0?20:"Pozo Particular"===e.t0?23:26;break;case 17:return"normal"===a.tipo&&c.update(n,{numeroPermisos:wa.a.firestore.FieldValue.increment(1),superficie:wa.a.firestore.FieldValue.increment(a.supAutorizada),gravedadNormal:wa.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&c.update(n,{numeroPermisos:wa.a.firestore.FieldValue.increment(1),superficie:wa.a.firestore.FieldValue.increment(a.supAutorizada),gravedadExtra:wa.a.firestore.FieldValue.increment(a.supAutorizada)}),e.abrupt("break",28);case 20:return"normal"===a.tipo&&c.update(n,{numeroPermisos:wa.a.firestore.FieldValue.increment(1),superficie:wa.a.firestore.FieldValue.increment(a.supAutorizada),pozoNormal:wa.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&c.update(n,{numeroPermisos:wa.a.firestore.FieldValue.increment(1),superficie:wa.a.firestore.FieldValue.increment(a.supAutorizada),pozoExtra:wa.a.firestore.FieldValue.increment(a.supAutorizada)}),e.abrupt("break",28);case 23:return"normal"===a.tipo&&c.update(n,{numeroPermisos:wa.a.firestore.FieldValue.increment(1),superficie:wa.a.firestore.FieldValue.increment(a.supAutorizada),pozoParticularNormal:wa.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&c.update(n,{numeroPermisos:wa.a.firestore.FieldValue.increment(1),superficie:wa.a.firestore.FieldValue.increment(a.supAutorizada),pozoParticularExtra:wa.a.firestore.FieldValue.increment(a.supAutorizada)}),e.abrupt("break",28);case 26:return console.log("Sistema de riego indefinido"),e.abrupt("break",28);case 28:e.next=44;break;case 30:e.t1=a.sistema,e.next="Gravedad"===e.t1?33:"Pozo Federal"===e.t1?36:"Pozo Particular"===e.t1?39:42;break;case 33:return"normal"===a.tipo&&c.set(n,{subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:wa.a.firestore.FieldValue.increment(1),superficie:wa.a.firestore.FieldValue.increment(a.supAutorizada),gravedadNormal:wa.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&c.set(n,{subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:wa.a.firestore.FieldValue.increment(1),superficie:wa.a.firestore.FieldValue.increment(a.supAutorizada),gravedadExtra:wa.a.firestore.FieldValue.increment(a.supAutorizada)}),e.abrupt("break",44);case 36:return"normal"===a.tipo&&c.set(n,{subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:wa.a.firestore.FieldValue.increment(1),superficie:wa.a.firestore.FieldValue.increment(a.supAutorizada),pozoNormal:wa.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&c.set(n,{subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:wa.a.firestore.FieldValue.increment(1),superficie:wa.a.firestore.FieldValue.increment(a.supAutorizada),pozoExtra:wa.a.firestore.FieldValue.increment(a.supAutorizada)}),e.abrupt("break",44);case 39:return"normal"===a.tipo&&c.set(n,{subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:wa.a.firestore.FieldValue.increment(1),superficie:wa.a.firestore.FieldValue.increment(a.supAutorizada),pozoParticularNormal:wa.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&c.set(n,{subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:wa.a.firestore.FieldValue.increment(1),superficie:wa.a.firestore.FieldValue.increment(a.supAutorizada),pozoParticularExtra:wa.a.firestore.FieldValue.increment(a.supAutorizada)}),e.abrupt("break",44);case 42:return console.log("Sistema de riego indefinido"),e.abrupt("break",44);case 44:return e.abrupt("return",!0);case 45:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 8:return(c=e.sent)&&ka.a.fire("Permiso Guardado","Se registr\xf3 con \xe9xito el nuevo permiso de riego.","success"),e.abrupt("return",c);case 13:throw e.prev=13,e.t0=e.catch(5),console.error(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(a){return e.apply(this,arguments)}}(),br={content:{width:"1125px",height:"1500px",overflow:"auto"}},Nr=function(e){var a=e.data,t=e.isNew,n=Object(l.c)((function(e){return e.altaPermisos})),o=n.openPrintPermisoModal,c=n.enableSaveButton,i=n.enablePrintButton,s=n.enEspera,u=Object(l.b)(),d=function(){u({type:x}),u({type:ne}),u(cr()),u(ir()),u(fr()),u(En()),u({type:ce}),u({type:se}),u(_n())},m=function(){var e=Object(Pa.a)(ya.a.mark((function e(){return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u({type:le}),u({type:re}),e.next=4,vr(a);case 4:if(!e.sent){e.next=7;break}u(_n()),u({type:ie});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){window.print()},E=function(e){return"Gravedad"===e?a.dotacionGravedad:"Pozo Federal"===e||"Pozo Particular"===e?a.dotacionPozo:void 0},f=function(){switch(a.modulo){case"UNI01":case"UNI02":case"UNI03":return 9===a.zona?"9A":92===a.zona?"9B":a.zona;default:return a.modulo}};return r.a.createElement(Xn.a,{isOpen:o,onRequestClose:d,style:br,closeTimeoutMS:200,className:"printModal pl-5 pr-5 pb-0 mb-0",overlayClassName:"modal-fondo"},"activo"===a.estadoPermiso?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"watermark rotar"},a.estadoPermiso),r.a.createElement("div",{className:"row mt-5"}),r.a.createElement("div",{className:"row mt-5 d-flex justify-content-center"},r.a.createElement("div",{className:"col-3 d-flex flex-column justify-content-center"}),r.a.createElement("div",{className:"col-6 d-flex flex-column justify-content-center"},r.a.createElement("h2",{className:"d-flex justify-content-center"},r.a.createElement("b",null,"Ciclo Agr\xedcola ",a.ciclo))),r.a.createElement("div",{className:"col-3 d-flex flex-column justify-content-center"},r.a.createElement("div",{className:"d-flex justify-content-center"}),r.a.createElement("div",{className:"border border-dark rounded d-flex justify-content-center"},r.a.createElement("h2",{className:"m-0"},r.a.createElement("b",null,"Folio: ",a.numeroPermiso))),r.a.createElement("div",{className:"d-flex justify-content-center"},qn()(a.fechaEmicion).format("DD/MM/YYYY")))),r.a.createElement("div",{className:"row mt-4"}),r.a.createElement("div",{className:"row mt-5"}),r.a.createElement("h3",{className:"row d-flex justify-content-center"},r.a.createElement("div",null,a.direccion)),r.a.createElement("div",{className:"row m-3 d-flex flex-column justify-content-center border border-dark rounded"},r.a.createElement("div",{className:"d-flex justify-content-center "},"DATOS DEL USUARIO"),r.a.createElement("div",{className:"d-flex justify-content-center border-top border-dark p-1 pb-0"},r.a.createElement("div",null,"El/la C.",r.a.createElement("b",null," ",a.usuario)," con cuenta: ",r.a.createElement("b",null,a.cuenta)," tiene un derecho normal de ",r.a.createElement("b",null,a.supDerecho," "),"hect\xe1reas del lote: ",r.a.createElement("b",null,a.lote)," en la colonia/ejido ",r.a.createElement("b",null,a.nombreLocalidad),", ",r.a.createElement("b",null,a.municipio),", ",r.a.createElement("b",null,a.estado),". M\xf3dulo ",r.a.createElement("b",null,f()),", secci\xf3n"," ",r.a.createElement("b",null,a.seccion)," del canal ",r.a.createElement("b",null,a.canal)," toma ",r.a.createElement("b",null,a.toma)," con sistema de riego por ",r.a.createElement("b",null,a.sistema),".",r.a.createElement("br",null),a.reacomodo&&r.a.createElement("b",null," Reacomodo: ",a.reacomodo)))),r.a.createElement("div",{className:"row m-3 d-flex flex-column justify-content-center"},r.a.createElement("div",null,"Con base en el Acuerdo Nacional de Colaboraci\xf3n entre la Secretar\xeda de Agricultura, Ganader\xeda, Desarrollo Rural, Pesca y Alimentaci\xf3n y el Acuerdo de Concertaci\xf3n entre la SAGARPA, CONAGUA, Distrito de Riego R\xedo Colorado y la Sociedad de Responsabilidad Limitada con el objetivo de regular en forma ordenada la expedici\xf3n de Permisos \xdanicos de Siembra con Derechos de Agua, y con fundamento en los art\xedculos 66, 67, 68, 69 y 69 Bis de la Ley de Aguas Nacionales; Reglamento de la Ley de Sanidad Fitopecuaria de los Estados Unidos Mexicanos, en materia de sanidad vegetal, Normas Mexicanas, NOM-026-FITO-1995, que establece el control de plagas de algodonero, NOM-001-FITO-2001, para el manejo y eliminaci\xf3n de focos de infecci\xf3n de plagas, mediante el reordenamiento de fechas de siembra y destrucci\xf3n de residuos. Se otorga el Permiso \xdanico de Siembra para que establezca exclusivamente el cultivo y superficie que se indica, apercibiendose que se puede suspender el servicio de riego si se siembra superficie adicional o cultivo diferente al autorizado en este permiso.")),r.a.createElement("div",{className:"row m-3 mt-0 d-flex"},r.a.createElement("div",{className:"col-4 d-flex flex-column border border-dark rounded p-0"},r.a.createElement("div",{className:"d-flex justify-content-center "},"DETALLES DEL CULTIVO"),r.a.createElement("div",{className:"border-top border-dark p-1"},"Tipo de permiso: ",r.a.createElement("b",null,function(e){var a="";return e&&(a=e),a.toUpperCase()}(a.tipo)),r.a.createElement("br",null),"Cultivo:"," ",r.a.createElement("b",null,a.nombreCultivo," (Clave: ",a.claveCultivo,")"),r.a.createElement("br",null),"Subciclo: ",r.a.createElement("b",null,a.subciclo),r.a.createElement("br",null),"Superficie autorizada: ",r.a.createElement("b",null,a.supAutorizada," ha"),r.a.createElement("br",null),"Fecha l\xedmite de siembra: ",r.a.createElement("b",null,qn()(a.fechaLimite).format("DD/MM/YYYY")),r.a.createElement("br",null))),r.a.createElement("div",{className:"col-1"}),r.a.createElement("div",{className:"col-7 d-flex flex-column border border-dark rounded"},r.a.createElement("div",{className:"d-flex justify-content-center "},"SUPERFICIE Y DOTACI\xd3N VOLUM\xc9TRICA"),r.a.createElement("div",{className:"row border-top border-dark d-flex text-dotacion"},r.a.createElement("div",{className:"col-3 border"},r.a.createElement("div",null,"Descripci\xf3n")),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,"Derecho de riego")),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,"Utilizada Previamente")),r.a.createElement("div",{className:"col-3 border"},r.a.createElement("div",null,"Autorizada en este permiso")),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,"Disponible"))),r.a.createElement("div",{className:"row border-top d-flex text-dotacion"},r.a.createElement("div",{className:"col-3 border"},r.a.createElement("div",null,"Hect\xe1reas")),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,a.supDerecho)),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,a.supPrevia)),r.a.createElement("div",{className:"col-3 border"},r.a.createElement("div",null,a.supAutorizada)),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,mt(a.supDerecho-a.supPrevia-a.supAutorizada,3)))),r.a.createElement("div",{className:"row border-top d-flex text-dotacion"},r.a.createElement("div",{className:"col-3 border p-0"},r.a.createElement("div",{className:"p-0 ml-2",style:{fontSize:12}},"l.p.s./24 hrs en Parcela")),r.a.createElement("div",{className:"col-2 border align-self-start"},r.a.createElement("div",null,mt(a.supDerecho*E(a.sistema),3))),r.a.createElement("div",{className:"col-2 border align-self-start"},r.a.createElement("div",null,mt(a.supPrevia*E(a.sistema),3))),r.a.createElement("div",{className:"col-3 border align-self-start"},r.a.createElement("div",null,mt(a.supAutorizada*E(a.sistema),3))),r.a.createElement("div",{className:"col-2 border align-self-start"},r.a.createElement("div",null,mt((a.supDerecho-a.supPrevia-a.supAutorizada)*E(a.sistema),3))),r.a.createElement("div",{className:""},r.a.createElement("div",{className:"ml-2",style:{fontSize:12}},"Dotaci\xf3n en condiciones normales. No incluye ajuste por reducciones establecidas en el acta 323 de la CILA que deber\xe1 ser aplicado por el M\xf3dulo de Riego."))))),r.a.createElement("div",{className:"row m-3 d-flex"},r.a.createElement("div",{className:"col-4 d-flex flex-column border border-dark rounded p-0"},r.a.createElement("div",{className:"d-flex justify-content-center "},"DATOS COMPLEMENTARIOS"),r.a.createElement("div",{className:"border-top border-dark p-1"},"Cultivo Anterior: ",r.a.createElement("b",null,a.cultivoAnterior),r.a.createElement("br",null),"Fuente de cr\xe9dito: ",r.a.createElement("b",null,a.fuenteCredito),r.a.createElement("br",null),"Variedad: ",r.a.createElement("b",null,a.variedad),r.a.createElement("br",null),"Productor:"," ",r.a.createElement("b",null,a.nombreProductor," (",a.curpProductor,")"),r.a.createElement("br",null))),r.a.createElement("div",{className:"col-1"}),r.a.createElement("div",{className:"col-7 d-flex flex-column border border-dark rounded"},r.a.createElement("div",{className:"d-flex justify-content-center "},"OBSERVACIONES"),r.a.createElement("div",{className:"row border-top border-dark d-flex text-dotacion p-1"},r.a.createElement("p",null,a.observaciones)))),r.a.createElement("div",{className:"row m-3 d-flex flex-column justify-content-center border border-dark rounded"},r.a.createElement("div",{className:"d-flex justify-content-center "},"TRANSFERENCIA"),r.a.createElement("div",{className:"d-flex border-top border-dark p-1"},a.transferencia)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4 d-flex flex-column"},r.a.createElement("div",{className:"border-top border-dark firma d-flex justify-content-center"},"M\xf3dulo"),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("b",null,a.titular)),r.a.createElement("div",{className:"d-flex justify-content-center"},function(){switch(a.modulo){case"UNI01":case"UNI02":case"UNI03":return"ENCARGADO/A";default:return"PRESIDENTE"}}())),r.a.createElement("div",{className:"col-4 d-flex flex-column"},r.a.createElement("div",{className:"border-top border-dark firma d-flex justify-content-center"},"Sanidad Vegetal")),r.a.createElement("div",{className:"col-4 d-flex flex-column"},r.a.createElement("div",{className:"border-top border-dark firma d-flex justify-content-center"},"FIRMA DEL USUARIO"),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("b",null,a.usuario)),r.a.createElement("div",{className:"d-flex justify-content-center"},"Acepto de conformidad"))),r.a.createElement("div",{className:"row m-2"},r.a.createElement("b",null,r.a.createElement("u",null,"ADVERTENCIAS: (1) Es responsabilidad del usuario de este permiso, disponer de la totalidad del volumen adicional requerido por el cultivo a establecer. (2) Para los sistemas de Gravedad y Pozo Federal un derecho de riego de 20 ha. alcanza para regar una superficie sembrada para el cultivo de Trigo = 20ha., Algod\xf3n = 15ha., Alfalfa 13ha., Esparrago = 16ha., y Sorgo forrajero temprano = 18ha."))),r.a.createElement("div",{className:"row m-3 mt-5"},r.a.createElement("div",{className:"col-2"}),r.a.createElement("div",{className:"col-10"},r.a.createElement("div",{className:"row d-flex justify-content-between"},r.a.createElement("div",{className:"border border-dark rounded mt-2 p-2"},"Folio: ",a.numeroPermiso),r.a.createElement("div",{className:"border border-dark rounded mt-2 p-2"},"Bueno por: $ ",mt(a.cuotaCultivo*a.supAutorizada,3)," pesos M.N.")),r.a.createElement("div",{className:"row"},r.a.createElement("u",null,"Recibimos de El/la C."," ",r.a.createElement("b",null,a.usuario," La cantidad de ",mt(a.cuotaCultivo*a.supAutorizada,3)," ","pesos M.N.")," ","Por concepto de aportaci\xf3n a las campa\xf1as Fitosanitarias, para el sostenimiento del comit\xe9 Estatal de Sanidad Vegetal.")))),r.a.createElement("div",{className:"row m-3"},r.a.createElement("div",{className:"col-2 d-flex flex-column"}),r.a.createElement("div",{className:"col-10 d-flex flex-column border border-dark rounded p-0"},r.a.createElement("div",{className:"d-flex justify-content-center border-bottom border-dark"},"DATOS DEL USUARIO"),r.a.createElement("p",{className:"m-2"},"El/la C.",r.a.createElement("b",null," ",a.usuario)," con cuenta: ",r.a.createElement("b",null,a.cuenta)," tiene un derecho normal de ",r.a.createElement("b",null,a.supDerecho," "),"hect\xe1reas del lote: ",r.a.createElement("b",null,a.lote)," en la colonia ",r.a.createElement("b",null,a.nombreLocalidad),","," ",r.a.createElement("b",null,a.municipio),", ",r.a.createElement("b",null,a.estado),". M\xf3dulo ",r.a.createElement("b",null,f()),", secci\xf3n"," ",r.a.createElement("b",null,a.seccion)," del canal ",r.a.createElement("b",null,a.canal)," toma ",r.a.createElement("b",null,a.toma)," con sistema de riego por ",r.a.createElement("b",null,a.sistema),"."))),r.a.createElement("div",{className:"row mb-0 pb-0"},r.a.createElement("div",{className:"col-12 d-flex justify-content-center align-items-center pt-2"},c?t?r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary ml-5 d-print-none",onClick:m},r.a.createElement("i",{className:"far fa-save"}),r.a.createElement("span",null," Guardar")):r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none",onClick:p},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")):r.a.createElement(r.a.Fragment,null),s?r.a.createElement("div",{className:"spinner-border border-dark text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):r.a.createElement(r.a.Fragment,null),i?r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none",onClick:p},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")):r.a.createElement(r.a.Fragment,null),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none ml-3",onClick:d},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),r.a.createElement("span",null," Cerrar")))))},hr=function(){var e=Object(l.c)((function(e){return e.permisosScreen})),a=e.preCancelPermits,t=e.permitToCancelSelected,n=Object(l.c)((function(e){return e.auth})).uid,o=a.find((function(e){return e.id===t})),c=o.numeroPermiso,i=o.motivoCancelacion,s=o.modulo,u=o.claveCultivo,d=o.nombreCultivo,m=o.sistema,p=o.tipo,E=o.supAutorizada,f={MODULO:o.modulo,CUENTA:o.cuenta,USUARIO:o.usuario,CULTIVO:o.nombreCultivo,"SUPERFICIE (ha)":o.supAutorizada},v=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual,b=Object(l.b)();return r.a.createElement("div",{className:"border border-info rounded detallePermiso"},r.a.createElement("div",{className:"d-flex bg-light border-info border-bottom rounded-top p-1 justify-content-center font-weight-bold text-secondary pt-3"},r.a.createElement("h5",null,c)),r.a.createElement("div",{className:"m-3"},r.a.createElement("div",{className:"row p-1 pl-2 text-warning"},r.a.createElement("div",{className:"col-4"},"MOTIVO: "),r.a.createElement("div",{className:"col-8"},i)),Object.entries(f).map((function(e){return r.a.createElement("div",{className:"row p-1 pl-2",key:e[0]},r.a.createElement("div",{className:"col-4"},e[0],": "),r.a.createElement("div",{className:"col-8"},e[1]))}))),r.a.createElement("div",{className:"mb-3 d-flex justify-content-center"},r.a.createElement("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){ka.a.fire({title:"Atenci\xf3n!!",text:"Est\xe1 a punto de cancelar el permiso ".concat(c,", \xbfRealmente desea cancelar este permiso?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then((function(e){e.isConfirmed&&(!function(e,a,t,n,r){Ra.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisos").doc(e).update({estadoPermiso:"Cancelado",fechaCancelacion:n,apruebaCancelacion:r})}(t,s,v,new Date,n),function(e,a,t,n,r,o,c){var l=Ra.collection("permisos").doc(e).collection("modulos").doc("Modulo-".concat(a)).collection("permisosPorCultivo").doc("".concat(t,"-").concat(n));switch(r){case"Gravedad":"normal"===o&&l.update({numeroPermisos:wa.a.firestore.FieldValue.increment(-1),superficie:wa.a.firestore.FieldValue.increment(-1*c),gravedadNormal:wa.a.firestore.FieldValue.increment(-1*c)}),"extra"===o&&l.update({numeroPermisos:wa.a.firestore.FieldValue.increment(-1),superficie:wa.a.firestore.FieldValue.increment(-1*c),gravedadExtra:wa.a.firestore.FieldValue.increment(-1*c)});break;case"Pozo Federal":"normal"===o&&l.update({numeroPermisos:wa.a.firestore.FieldValue.increment(-1),superficie:wa.a.firestore.FieldValue.increment(-1*c),pozoNormal:wa.a.firestore.FieldValue.increment(-1*c)}),"extra"===o&&l.update({numeroPermisos:wa.a.firestore.FieldValue.increment(-1),superficie:wa.a.firestore.FieldValue.increment(-1*c),pozoExtra:wa.a.firestore.FieldValue.increment(-1*c)});break;case"Pozo Particular":"normal"===o&&l.update({numeroPermisos:wa.a.firestore.FieldValue.increment(-1),superficie:wa.a.firestore.FieldValue.increment(-1*c),pozoParticularNormal:wa.a.firestore.FieldValue.increment(-1*c)}),"extra"===o&&l.update({numeroPermisos:wa.a.firestore.FieldValue.increment(-1),superficie:wa.a.firestore.FieldValue.increment(-1*c),pozoParticularExtra:wa.a.firestore.FieldValue.increment(-1*c)});break;default:console.log("Sistema de riego indefinido")}}(v,s,u,d,m,p,E),function(e,a,t){Ra.collection("permisos").doc(e).collection("modulos").doc("Modulo-".concat(a)).update({superficieModulo:wa.a.firestore.FieldValue.increment(-1*t)})}(v,s,E),b(xt(v)),b({type:he}),ka.a.fire("Permiso cancelado","Se cancel\xf3 con exito el permiso ".concat(c),"success"))}))}},r.a.createElement("i",{className:"fas fa-times"}),r.a.createElement("span",null," Cancelar"))))},gr=function(){var e=Object(l.c)((function(e){return e.permisosScreen})).preCancelPermits,a=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual,t=Object(l.b)();e||t(xt(a));var n=[];return e&&e.forEach((function(e){n.push(Object(u.a)(Object(u.a)({},e),{},{fechaEmicion:qn()(e.fechaEmicion.toDate()).format("DD/MM/YYYY"),fechaLimite:qn()(e.fechaLimite.toDate()).format("DD/MM/YYYY"),vigencia:qn()(e.vigencia.toDate()).format("DD/MM/YYYY")}))})),r.a.createElement(qt,{title:"Permisos en proceso de cancelaci\xf3n",columns:Wt,data:n,setFunction:St})},Or=function(){var e=Object(l.c)((function(e){return e.permisosScreen})).permitToCancelSelected;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(gr,null)),r.a.createElement("div",{className:"col-sm-4"},e&&r.a.createElement(hr,null)))},Ar=function(){var e=Object(l.b)(),a=Qa({palabra:""}),t=Object(Ca.a)(a,2),o=t[0],c=t[1],i=o.palabra,s=Object(l.c)((function(e){return e.permisosScreen})),d=s.permisos,m=s.permisoSelected,p=Object(l.c)((function(e){return e.auth})),E=p.modulo,f=p.privilegios,v=p.expedicionActivaModulo,b=p.uid,N=Object(l.c)((function(e){return e.auth})).variablesGlobales,h=N.cicloActual,g=N.expedicionActiva;Object(n.useEffect)((function(){e(At(E,h)),e(yt(E,h)),e(En())}),[e,E,h]);var O,A=function(){i.length>0?e(function(e,a,t){return function(){var n=Object(Pa.a)(ya.a.mark((function n(r){var o;return ya.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ht(e,a,t);case 2:o=n.sent,r(Ct(o));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(i,E,h)):ka.a.fire("Nada para buscar","Ingrese n\xfamero de permiso, n\xfamero de cuenta o el apellido paterno del usuario.","warning")},x=[];d.forEach((function(e){x.push(Object(u.a)(Object(u.a)({},e),{},{fechaEmicion:qn()(e.fechaEmicion.toDate()).format("DD/MM/YYYY"),fechaLimite:qn()(e.fechaLimite.toDate()).format("DD/MM/YYYY"),vigencia:qn()(e.vigencia.toDate()).format("DD/MM/YYYY")}))})),d.forEach((function(e){e.id===m&&(O=e)}));var y={};void 0!==O&&(y=Object(u.a)(Object(u.a)({},O),{},{fechaEmicion:O.fechaEmicion.toDate(),fechaLimite:O.fechaLimite.toDate(),vigencia:O.vigencia.toDate()}));var P;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"d-flex justify-content-center col-sm-4 p-2"},g&&v&&f.expedirPermisos&&r.a.createElement(Ft,null)),r.a.createElement("div",{className:"col-sm-8 d-inline-flex p-2 pr-4"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"N\xfamero de permiso, n\xfamero de cuenta o apellido paterno",name:"palabra",autoComplete:"off",value:i,onChange:c,onKeyUp:function(e){"Enter"===e.key&&A()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:A},r.a.createElement("i",{className:"fas fa-search"})))))),r.a.createElement("div",{className:"row pt-3 pb-4"},r.a.createElement("div",{className:"col-sm-8 pr-0 mt-3"},r.a.createElement(qt,{title:"Permisos",columns:Wt,data:x,setFunction:zt})),m&&void 0!==O?r.a.createElement("div",{className:"col-sm-4 mt-3"},r.a.createElement("div",{className:"border border-info rounded detallePermiso"},r.a.createElement("div",{className:"d-flex bg-light border-info border-bottom rounded-top p-1 justify-content-center font-weight-bold text-secondary pt-3"},r.a.createElement("h5",null,O.numeroPermiso)),r.a.createElement("div",{className:"row p-1 pl-2 pt-2"},r.a.createElement("div",{className:"col-4"},"CUENTA:"),r.a.createElement("div",{className:"col-8"},O.cuenta)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"USUARIO:"),r.a.createElement("div",{className:"col-8"},O.usuario)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"PRODUCTOR:"),r.a.createElement("div",{className:"col-8"},O.nombreProductor)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"CULTIVO:"),r.a.createElement("div",{className:"col-8"},O.nombreCultivo)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SUBCICLO:"),r.a.createElement("div",{className:"col-8"},O.subciclo)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SUPERFICIE:"),r.a.createElement("div",{className:"col-8"},O.supAutorizada," ha")),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"DOTACION:"),r.a.createElement("div",{className:"col-8"},mt(("Gravedad"===(P=O.sistema)?O.dotacionGravedad:"Pozo Federal"===P||"Pozo Particular"===P?O.dotacionPozo:void 0)*O.supAutorizada,3)," lts")),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SISTEMA:"),r.a.createElement("div",{className:"col-8"},O.sistema)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"LOCALIDAD:"),r.a.createElement("div",{className:"col-8"},O.localidad)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"LOTE:"),r.a.createElement("div",{className:"col-8"},O.lote)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SECCION:"),r.a.createElement("div",{className:"col-8"},O.seccion)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"MODULO:"),r.a.createElement("div",{className:"col-8"},O.modulo)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"EXPEDICION:"),r.a.createElement("div",{className:"col-8"},qn()(O.fechaEmicion.toDate()).format("DD/MM/YYYY"))),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"FECHA LIMITE:"),r.a.createElement("div",{className:"col-8"},qn()(O.fechaLimite.toDate()).format("DD/MM/YYYY"))),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"VIGENCIA:"),r.a.createElement("div",{className:"col-8"},qn()(O.vigencia.toDate()).format("DD/MM/YYYY"))),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"ESTADO:"),r.a.createElement("div",{className:"col-8"},O.estadoPermiso)),r.a.createElement("div",{className:"row p-1 pl-2 pt-4 pb-4"},r.a.createElement("div",{className:"col-6 d-flex justify-content-center"},r.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:function(){e(Hn())}},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir"))),r.a.createElement("div",{className:"col-6 d-flex justify-content-center"},"activo"===O.estadoPermiso&&f.solicitarCancelarPermisos&&r.a.createElement("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){ka.a.fire({input:"textarea",inputPlaceholder:"Indique la raz\xf3n por la que desea cancelar el permiso",title:"Atenci\xf3n!!",text:"Est\xe1 a punto de cancelar el permiso ".concat(O.numeroPermiso,", \xbfRealmente desea cancelar este permiso?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then((function(a){var t=a.isConfirmed,n=a.value;t&&(n.length>0?(!function(e,a,t,n,r){Ra.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisos").doc(e).update({estadoPermiso:"En proceso de cancelaci\xf3n",motivoCancelacion:n,solicitanteCancelacion:r,fechaSolicitudCancelacion:new Date})}(m,E,h,n,b),e(At(E,h)),ka.a.fire("Solicitud recibida","Se inici\xf3 el proceso de cancelaci\xf3n para el permiso ".concat(O.numeroPermiso),"success")):ka.a.fire("Error","Indique la raz\xf3n por la que desea cancelar el permiso","warning"))}))}},r.a.createElement("i",{className:"fas fa-times"}),r.a.createElement("span",null," Cancelar")))))):r.a.createElement("div",{className:"col-sm-4 mt-3"},r.a.createElement("div",{className:"border border-info rounded detallePermiso"},r.a.createElement(ft,null)))),f.cancelarPermisos&&r.a.createElement(Or,null),r.a.createElement(Nr,{data:y,isNew:!1}))},xr={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};Xn.a.setAppElement("#root");var yr=function(){var e,a=Object(l.b)(),t=Object(l.c)((function(e){return e.altaPermisos})),n=t.openCultivosModal,o=t.cultivos;e=Object.values(o);return r.a.createElement(Xn.a,{isOpen:n,onRequestClose:function(){a(Wn())},style:xr,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement(qt,{title:0===e.length?"No se encontraron cultivos":"Cultivos",columns:Xt,data:e,setFunction:rr,closeFunction:Wn}))},Pr={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};Xn.a.setAppElement("#root");var Cr=function(){var e,a=Object(l.b)(),t=Object(l.c)((function(e){return e.altaPermisos})),n=t.openUsuariosModal,o=t.usuarios;e=Object.values(o);return r.a.createElement(Xn.a,{isOpen:n,onRequestClose:function(){a(sn())},style:Pr,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement(qt,{title:0===e.length?"No se encontraron usuarios":"Usuarios",columns:_t,data:e,setFunction:mn,closeFunction:sn}))},jr=function(){return{type:ee}},zr={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};Xn.a.setAppElement("#root");var Sr=function(){var e,a=Object(l.b)(),t=Object(l.c)((function(e){return e.altaPermisos})),n=t.openProductoresModal,o=t.productores;e=Object.values(o);return r.a.createElement(Xn.a,{isOpen:n,onRequestClose:function(){a(dr())},style:zr,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement(qt,{title:0===e.length?"No se encontraron productores":"Productores",columns:Kt,data:e,setFunction:Er,closeFunction:dr}),r.a.createElement("div",{className:"row d-flex justify-content-center pt-3"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:function(){a(dr()),a({type:$})}},r.a.createElement("span",null,"Registrar nuevo productor "),r.a.createElement("i",{className:"fas fa-plus"}))))},wr={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};Xn.a.setAppElement("#root");var Rr=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.altaPermisos})).isOpenNuevoProductorModal,t=Object(l.c)((function(e){return e.ui})).msgError,n=Object(l.c)((function(e){return e.auth})).uid,o=bn(),c=Object(Ca.a)(o,2),i=c[0],s=c[1],d=i.apPaterno,m=void 0===d?"":d,p=i.direccion,E=void 0===p?"":p,f=i.apMaterno,v=void 0===f?"":f,b=i.estado,N=void 0===b?"":b,h=i.nombre,g=void 0===h?"":h,O=i.municipio,A=void 0===O?"":O,x=i.rfc,y=void 0===x?"":x,P=i.cp,C=void 0===P?"":P,j=i.genero,z=void 0===j?"":j,S=i.telefono,w=void 0===S?"":S,R=i.curp,I=void 0===R?"":R,D=function(){return console.log(z.length),0===m.trim().length?(e(Ia("Se requiere apellido paterno")),!1):0===E.trim().length?(e(Ia("Se requiere direccion")),!1):0===v.trim().length?(e(Ia("Se requiere apellido materno")),!1):0===N.trim().length?(e(Ia("Se requiere estado")),!1):0===g.trim().length?(e(Ia("Se requiere nombre")),!1):0===A.trim().length?(e(Ia("Se requiere municipio")),!1):I.trim().length<18||I.trim().length>18?(e(Ia("CURP no valido")),!1):0===z.length?(e(Ia("Se requiere genero")),!1):"MORAL"===z&&12!==y.trim().length||"MORAL"!==z&&13!==y.trim().length?(e(Ia("RFC no valido")),!1):C.trim().length<5?(e(Ia("Codigo postal no valido")),!1):w.replace(/ /g,"").length<10?(e(Ia("Telefono no valido")),!1):(e(Da()),!0)};return r.a.createElement(Xn.a,{isOpen:a,onRequestClose:function(){e(jr()),e(Da())},style:wr,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement("div",{className:"row m-3 d-flex justify-content-center"},r.a.createElement("h1",null,"Registro de nuevo productor")),r.a.createElement("div",{className:"row m-3 d-flex justify-content-center"},"* Campos obligatorios"),r.a.createElement("form",{className:"container pb-4",autoComplete:"waa",onSubmit:function(a){var t;a.preventDefault(),D()&&e((t=Object(u.a)(Object(u.a)({},i),{},{apPaterno:m.toUpperCase(),apMaterno:v.toUpperCase(),nombre:g.toUpperCase(),direccion:E.toUpperCase(),estado:N.toUpperCase(),municipio:A.toUpperCase(),rfc:y.toUpperCase(),curp:I.toUpperCase(),telefono:w.replace(/ /g,""),uid:n,fechaRegistro:new Date}),function(e){var a=Ra.collection("productores").doc(t.curp);"MORAL"===t.genero&&(a=Ra.collection("productores").doc("".concat(t.curp,"-PM"))),a.get().then((function(n){if(n.exists){var r=n.data(),o=r.apPaterno,c=r.apMaterno,l=r.nombre,i=r.curp;ka.a.fire("El CURP ".concat(i," ya existe!"),"NOMBRE: ".concat(o," ").concat(c," ").concat(l),"error")}else a.set(t).then((function(){ka.a.fire("Productor registrado","Se registr\xf3 con \xe9xito el nuevo productor.","success"),e(jr())}))}))}))}},t&&r.a.createElement("div",{className:"auth__alert-error"},t),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Apellido Paterno",name:"apPaterno",value:m,autoComplete:"off",onChange:s})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Direccion",name:"direccion",value:E,autoComplete:"waa",onChange:s}))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Apellido Materno",name:"apMaterno",value:v,autoComplete:"waa",onChange:s})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Estado",name:"estado",value:N,autoComplete:"waa",onChange:s}))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Nombre",name:"nombre",value:g,autoComplete:"off",onChange:s})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Municipio",name:"municipio",value:A,autoComplete:"waa",onChange:s}))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* CURP",name:"curp",value:I,autoComplete:"waa",onChange:s})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* CP",name:"cp",value:C,autoComplete:"waa",onChange:s}))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* RFC",name:"rfc",value:y,autoComplete:"off",onChange:s})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Telefono",name:"telefono",value:w,autoComplete:"off",onChange:s}))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-12 d-flex align-items-baseline pt-2"},r.a.createElement("span",null,"*"),r.a.createElement("div",{className:"px-4"},r.a.createElement("input",{type:"radio",id:"masculino",name:"genero",value:"MASCULINO",onChange:s}),r.a.createElement("span",null," "),r.a.createElement("label",{htmlFor:"masculino"}," Masculino")),r.a.createElement("div",{className:"px-4"},r.a.createElement("input",{type:"radio",id:"femenino",name:"genero",value:"FEMENINO",onChange:s}),r.a.createElement("span",null," "),r.a.createElement("label",{htmlFor:"femenino"}," Femenino")),r.a.createElement("div",{className:"px-4"},r.a.createElement("input",{type:"radio",id:"femenino",name:"genero",value:"MORAL",onChange:s}),r.a.createElement("span",null," "),r.a.createElement("label",{htmlFor:"femenino"}," Persona Moral")))),r.a.createElement("div",{className:"row d-flex justify-content-center pt-3"},r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary"},r.a.createElement("i",{className:"far fa-save"}),r.a.createElement("span",null," Guardar")))))},Ir=function(){var e=Object(l.b)();Object(n.useEffect)((function(){e(cr()),e(Wn())}),[e]);var a=function(){o(),f.length>0?e(Qn()):ka.a.fire("Nada para buscar","Ingrese nombre del cultivo","warning")},t=Object(l.c)((function(e){return e.auth})).claveEntidad,o=function(){e(er(f.toUpperCase(),t))},c=Object(l.c)((function(e){return e.altaPermisos})),i=c.idCultivoSelected,s=c.nombreCultivo,u="";i&&(u=s);var d=bn({cultivo:""}),m=Object(Ca.a)(d,2),p=m[0],E=m[1],f=p.cultivo;return r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},r.a.createElement("span",{className:"text-warning"},"* "),"Cultivo:"," "),r.a.createElement("label",{className:""},u," "),i?r.a.createElement("div",{className:"fas fa-check text-success p-3"}):r.a.createElement(r.a.Fragment,null),i?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex-grow-1"},r.a.createElement("input",{id:"cultivoInput",tabIndex:"2",type:"text",className:"form-control",placeholder:"Clave o nombre del cultivo",name:"cultivo",autoComplete:"off",value:f,onChange:E,onKeyUp:function(e){"Enter"===e.key&&a()}})),i?r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){e(cr()),p.cultivo=""}},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:a},r.a.createElement("i",{className:"fas fa-search"}))))},Dr=function(){var e=Object(l.b)();Object(n.useEffect)((function(){e(fr()),e(dr())}),[e]);var a=function(){t(),E.length>0?e(ur()):ka.a.fire("Nada para buscar","Ingrese apellido paterno del productor","warning")},t=function(){e(mr(E.toUpperCase()))},o=Object(l.c)((function(e){return e.altaPermisos})),c=o.idProductorSelected,i=o.nombreProductor,s="";c&&(s=i);var u=bn({productor:""}),d=Object(Ca.a)(u,2),m=d[0],p=d[1],E=m.productor;return r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},r.a.createElement("span",{className:"text-warning"},"* "),"Productor:"," "),r.a.createElement("label",null,s," "),c?r.a.createElement("div",{className:"fas fa-check text-success p-3"}):r.a.createElement(r.a.Fragment,null),c?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex-grow-1"},r.a.createElement("input",{id:"productorInput",tabIndex:"5",type:"text",className:"form-control",placeholder:"Apellido paterno",name:"productor",autoComplete:"off",value:E,onChange:p,onKeyUp:function(e){"Enter"===e.key&&a()}})),c?r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){e(fr()),m.productor=""}},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:a},r.a.createElement("i",{className:"fas fa-search"}))))},Ur=function(){var e=Object(l.c)((function(e){return e.altaPermisos})),a=e.usuarios,t=e.idUsuarioSelected,n=e.supPrevia,o=a.find((function(e){return e.id===t}));return r.a.createElement("div",{className:"border rounded mb-4 p-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},"Cuenta: ","".concat(o.cuenta,".").concat(o.subcta)),r.a.createElement("div",{className:"col-sm-3"},"Colonia/Ejido: ",o.nombreLocalidad),r.a.createElement("div",{className:"col-sm-3"},"Sup. Derecho: ",o.supRiego)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},"Usuario: ","".concat(o.apPaterno," ").concat(o.apMaterno," ").concat(o.nombre)),r.a.createElement("div",{className:"col-sm-3"},"Lote: ",o.predio),o.supRiego-n===0?r.a.createElement("div",{className:"col-sm-3 text-danger"},"Sup. Disponible: ",o.supRiego-n):r.a.createElement("div",{className:"col-sm-3"},"Sup. Disponible: ",o.supRiego-n)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},o.reacomodo&&r.a.createElement("div",{className:"text-info"},"Reacomodo: ",o.reacomodo)),r.a.createElement("div",{className:"col-sm-3"},"Seccion: ",o.seccion),r.a.createElement("div",{className:"col-sm-3"},"Sistema: ",o.sistRiego)))},Mr=function(){var e=Object(l.c)((function(e){return e.altaPermisos})),a=e.productores,t=e.idProductorSelected,n="",o="",c="";return a.forEach((function(e){e.id===t&&(n=e.rfc,c=e.curp,o="".concat(e.apPaterno," ").concat(e.apMaterno," ").concat(e.nombre))})),r.a.createElement("div",{className:"border rounded mb-4 p-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-5"},"Productor: ",o),r.a.createElement("div",{className:"col-sm-4"},"CURP: ",c),r.a.createElement("div",{className:"col-sm-3"},"RFC: ",n)))},kr=function(){var e=Object(Pa.a)(ya.a.mark((function e(a,t){var n;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.next=3,Ra.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).get().then((function(e){e.exists?n=e.data().numeroPermisosModulo:Ra.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).set({numeroPermisosModulo:0})})).catch((function(e){console.log(" Error: ",e)}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Tr=function(){var e=Object(l.c)((function(e){return e.altaPermisos})),a=e.nombreCultivo,t=e.claveCultivo,n=e.subciclo,o=e.superficiePreviaCultivo,c=Object(l.c)((function(e){return e.autorizadosScreen})).autorizadosPorCultivo;return r.a.createElement("div",{className:"border rounded mb-4 p-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 d-inline-flex"},r.a.createElement("div",{className:"mr-4"},"Cultivo: ",a),r.a.createElement("div",{className:"mr-4"},"Clave: ",t),r.a.createElement("div",{className:"mr-4"},"Subciclo: ",n))),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Superficie"),r.a.createElement("th",{scope:"col",className:"text-center"},"Autorizada"),r.a.createElement("th",{scope:"col",className:"text-center"},"Asignada"),r.a.createElement("th",{scope:"col",className:"text-center"},"Previa"),r.a.createElement("th",{scope:"col",className:"text-center"},"Disponible"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Gravedad Normal"),r.a.createElement("td",{className:"text-center"},c.gravedadNormalAsignada),r.a.createElement("td",{className:"text-center"},c.gravedadNormalAutorizada),r.a.createElement("td",{className:"text-center"},o.gravedadNormal),c.gravedadNormalAutorizada-o.gravedadNormal<=0?r.a.createElement("td",{className:"text-center text-danger"},c.gravedadNormalAutorizada-o.gravedadNormal):r.a.createElement("td",{className:"text-center"},c.gravedadNormalAutorizada-o.gravedadNormal)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Normal"),r.a.createElement("td",{className:"text-center"},c.pozoNormalAsignada),r.a.createElement("td",{className:"text-center"},c.pozoNormalAutorizada),r.a.createElement("td",{className:"text-center"},o.pozoNormal),c.pozoNormalAutorizada-o.pozoNormal<=0?r.a.createElement("td",{className:"text-center text-danger"},c.pozoNormalAutorizada-o.pozoNormal):r.a.createElement("td",{className:"text-center"},c.pozoNormalAutorizada-o.pozoNormal)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Gravedad Extra"),r.a.createElement("td",{className:"text-center"},c.gravedadExtraAsignada),r.a.createElement("td",{className:"text-center"},c.gravedadExtraAutorizada),r.a.createElement("td",{className:"text-center"},o.gravedadExtra),c.gravedadExtraAutorizada-o.gravedadExtra<=0?r.a.createElement("td",{className:"text-center text-danger"},c.gravedadExtraAutorizada-o.gravedadExtra):r.a.createElement("td",{className:"text-center"},c.gravedadExtraAutorizada-o.gravedadExtra)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Extra"),r.a.createElement("td",{className:"text-center"},c.pozoExtraAsignada),r.a.createElement("td",{className:"text-center"},c.pozoExtraAutorizada),r.a.createElement("td",{className:"text-center"},o.pozoExtra),c.pozoExtraAutorizada-o.pozoExtra<=0?r.a.createElement("td",{className:"text-center text-danger"},c.pozoExtraAutorizada-o.pozoExtra):r.a.createElement("td",{className:"text-center"},c.pozoExtraAutorizada-o.pozoExtra))))))))},Lr={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};Xn.a.setAppElement("#root");var Fr=function(){var e,a=Object(l.b)(),t=Object(l.c)((function(e){return e.altaPermisos})),n=t.openCultivoAnteriorModal,o=t.cultivosAnteriores;e=Object.values(o);return r.a.createElement(Xn.a,{isOpen:n,onRequestClose:function(){a($n())},style:Lr,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement(qt,{title:0===e.length?"No se encontraron cultivos":"Cultivo Anterior",columns:Xt,data:e,setFunction:lr,closeFunction:$n}))},Gr=function(){var e=Object(l.b)();Object(n.useEffect)((function(){e(ir()),e($n())}),[e]);var a=function(){t(),E.length>0?e({type:C}):ka.a.fire("Nada para buscar","Ingrese nombre del cultivo","warning")},t=function(){var a;e((a=E.toUpperCase(),function(){var e=Object(Pa.a)(ya.a.mark((function e(t){var n;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jn(a,"anterior");case 2:n=e.sent,t(tr(n));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()))},o=Object(l.c)((function(e){return e.altaPermisos})),c=o.idCultivoAnteriorSelected,i=o.cultivoAnterior,s="";c&&(s=i);var u=bn({nombreCultivoAnterior:""}),d=Object(Ca.a)(u,2),m=d[0],p=d[1],E=m.nombreCultivoAnterior;return r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},r.a.createElement("span",{className:"text-warning"},"* "),"Cultivo Anterior:"," "),r.a.createElement("label",{className:""},s," "),c?r.a.createElement("div",{className:"fas fa-check text-success p-3"}):r.a.createElement(r.a.Fragment,null),c?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex-grow-1"},r.a.createElement("input",{tabIndex:"4",type:"text",className:"form-control",placeholder:"Clave o nombre del cultivo",name:"nombreCultivoAnterior",autoComplete:"off",value:E,onChange:p,onKeyUp:function(e){"Enter"===e.key&&a()}})),c?r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){e(ir()),m.cultivoAnterior=""}},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:a},r.a.createElement("i",{className:"fas fa-search"}))))},Vr=function(){var e=Object(l.c)((function(e){return e.altaPermisos})),a=e.idUsuarioSelected,t=e.idProductorSelected,o=e.idCultivoSelected,c=e.subciclo,i=e.nombreCultivo,s=e.superficiePreviaCultivo,d=Object(l.c)((function(e){return e.altaPermisos})),m=Object(l.c)((function(e){return e.auth})),p=m.variablesGlobales,E=m.expedicionActivaModulo,f=p.cicloActual,v=p.expedicionActiva,b=Object(l.c)((function(e){return e.ui})).msgError,N=Object(l.c)((function(e){return e.autorizadosScreen})).autorizadosPorCultivo,h=bn({variedad:"",supAutorizada:0,fuenteCredito:"",latitud:"",longitud:"",observaciones:"",transferencia:"",cuotaSanidad:!0}),g=Object(Ca.a)(h,2),O=g[0],A=g[1],x=O.variedad,y=O.supAutorizada,P=O.fuenteCredito,C=O.observaciones,j=O.transferencia,z=O.cuotaSanidad,S=Object(u.a)(Object(u.a)(Object(u.a)({},O),d),m),w=Object(l.b)();Object(n.useEffect)((function(){w(Da())}),[w]),Object(n.useEffect)((function(){w(function(e,a,t){return function(){var n=Object(Pa.a)(ya.a.mark((function n(r){var o;return ya.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,st(e,a,t);case 2:o=n.sent,r(It(o));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(f,m.modulo,d.claveCultivo))}),[f,w,m.modulo,d.claveCultivo]),Object(n.useEffect)((function(){var e,a=d.cultivos.find((function(e){return e.id===d.idCultivoSelected}));w((e=z?d.idCultivoSelected?a.costoHectarea:void 0:0,{type:M,payload:e}))}),[f,w,d.cuotaCultivo,z,d.cultivos,d.idCultivoSelected]);var R=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:if(!e.sent){e.next=13;break}return a.preventDefault(),w({type:ae,payload:O}),e.t0=w,e.t1=Zn,e.next=9,D();case 9:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3),w(Hn());case 13:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),I=function(){return v&&E?d.usuario?d.nombreProductor?d.nombreCultivo?y<=0?(w(Ia("Ingrese la superficie que ser\xe1 autorizada en este permiso.")),!1):d.supDerecho-d.supPrevia<y?(w(Ia("La superficie excede la superficie disponible de la cuenta seleccionada.")),!1):P?d.cultivoAnterior?void 0===N||"Superficie no disponible"===U(s,N)?(w(Ia("La superficie asignada para el cultivo no es suficiente.")),!1):(w(Da()),!0):(w(Ia("Especifique el cultivo anterior.")),!1):(w(Ia("Especifique la fuente de cr\xe9dito.")),!1):(w(Ia("El campo cultivo es obligatorio.")),!1):(w(Ia("El campo productor es obligatorio.")),!1):(w(Ia("El campo usuario es obligatorio.")),!1):(w(Ia("Expedici\xf3n cerrada! Por el momento no es posible expedir permisos.")),!1)},D=function(){var e=Object(Pa.a)(ya.a.mark((function e(){var a;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=U(s,N),e.t1=f,e.next=4,k();case 4:return e.t2=e.sent,e.t3=qn()(),e.t4=G(i),e.t5=L(c),e.next=10,F(i);case 10:return e.t6=e.sent,a={tipo:e.t0,ciclo:e.t1,numeroPermiso:e.t2,fechaEmicion:e.t3,fechaLimite:e.t4,vigencia:e.t5,estadoPermiso:e.t6},e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(e,a){var t=a.gravedadNormalAsignada,n=a.gravedadExtraAsignada,r=a.pozoNormalAsignada,o=a.pozoExtraAsignada,c=e.gravedadNormal,l=e.gravedadExtra,i=e.pozoNormal,s=e.pozoExtra;switch(d.sistema){case"Gravedad":return t-c>=y?"normal":n-l>=y?"extra":"Superficie no disponible";case"Pozo Federal":case"Pozo Particular":return r-i>=y?"normal":o-s>=y?"extra":"Superficie no disponible";default:return"Superficie no disponible"}},k=function(){var e=Object(Pa.a)(ya.a.mark((function e(){var a,t;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Pozo Particular"!==d.sistema){e.next=12;break}return e.t0="".concat(m.modulo,"-"),e.t1=T,e.next=5,kr(m.modulo,f);case 5:return e.t2=e.sent,e.t3=e.t2+1,e.t4=(0,e.t1)(e.t3,3),a=e.t0.concat.call(e.t0,e.t4),e.abrupt("return",a);case 12:return e.t5="MOD".concat(m.modulo,"-"),e.t6=T,e.next=16,kr(m.modulo,f);case 16:return e.t7=e.sent,e.t8=e.t7+1,e.t9=(0,e.t6)(e.t8,3),t=e.t5.concat.call(e.t5,e.t9),e.abrupt("return",t);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(e,a){return"0".repeat(a-e.toString().length)+e.toString()},L=function(e){var a=null;if(e)switch(e){case"PRIMAVERA-VERANO":case"OTO\xd1O-INVIERNO":case"PERENNES":case"PERENES":a=qn()("09/30/2022");break;default:a=""}return a},F=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",t="ALGODONERO"===a?"pendiente":"activo",e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),G=function(e){return"TRIGO"===e?qn()("12/31/2021"):qn()("03/31/2022")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row m-3 d-flex justify-content-center"},r.a.createElement("h1",null,"Alta de permiso unico de siembra")),r.a.createElement("form",{className:"container pb-4"},b&&r.a.createElement("div",{className:"auth__alert-error"},b),a&&r.a.createElement(Ur,null),t&&r.a.createElement(Mr,null),o&&N&&s&&r.a.createElement(Tr,null),r.a.createElement("div",{className:"row text-warning"},"* Campos obligatorios"),r.a.createElement("div",{className:"row"},r.a.createElement(Nn,null),r.a.createElement(Dr,null)),r.a.createElement("div",{className:"row"},r.a.createElement(Ir,null),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},r.a.createElement("span",{className:"text-warning"},"* "),"Variedad:"),r.a.createElement("div",{className:"flex-grow-1 "},r.a.createElement("input",{id:"variedadInput",tabIndex:"6",type:"text",className:"form-control",placeholder:"variedad",name:"variedad",value:x,autoComplete:"off",onChange:A}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},r.a.createElement("span",{className:"text-warning"},"* "),"Superficie:"),r.a.createElement("div",{className:"flex-grow-1 "},r.a.createElement("input",{id:"superficieInput",tabIndex:"3",type:"number",className:"form-control",placeholder:"superficie",name:"supAutorizada",value:y,autoComplete:"off",onChange:A})))),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},r.a.createElement("span",{className:"text-warning"},"* "),"Fuente de credito:"),r.a.createElement("div",{className:"flex-grow-1 "},r.a.createElement("input",{tabIndex:"7",type:"text",className:"form-control",placeholder:"fuente de credito",name:"fuenteCredito",value:P,autoComplete:"off",onChange:A}))))),r.a.createElement("div",{className:"row"},r.a.createElement(Gr,null),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},"Transferencia interna:"),r.a.createElement("div",{className:"flex-grow-1 "},r.a.createElement("input",{tabIndex:"8",type:"text",className:"form-control",placeholder:"Cuenta destino",name:"transferencia",value:j,autoComplete:"off",onChange:A}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group row p-3"},r.a.createElement("label",{className:"mr-3"},r.a.createElement("span",{className:"text-warning"},"* ")),r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{tabIndex:"9",type:"checkbox",className:"form-check-input",id:"cuotaSanidad",name:"cuotaSanidad",value:z,onChange:A,checked:z}),r.a.createElement("label",{className:"form-check-label",htmlFor:"cuotaSanidad"},"Cobrar cuota de sanidad vegetal"))))),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{tabIndex:"10",type:"text",className:"form-control",placeholder:"Observaciones",rows:"5",name:"observaciones",value:C,onChange:A}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Informaci\xf3n adicional")),b&&r.a.createElement("div",{className:"auth__alert-error"},b),r.a.createElement("div",{className:"row d-flex justify-content-center pt-5 d-print-none"},r.a.createElement("button",{tabIndex:"11",type:"button",className:"btn btn-outline-primary",onClick:R},r.a.createElement("i",{className:"far fa-file"}),r.a.createElement("span",null," Revisar")))),r.a.createElement(yr,null),r.a.createElement(Fr,null),r.a.createElement(Cr,null),r.a.createElement(Sr,null),r.a.createElement(Rr,null),r.a.createElement(Nr,{data:S,isNew:!0}))},Br=function(){var e=Object(l.c)((function(e){return e.entidades})).usuario;if(e){var a="".concat(e.cuenta,".").concat(e.subcta),t=e.localidad,n=e.supRiego,o=e.predio,c=n-e.supPrevia,i="".concat(e.apPaterno," ").concat(e.apMaterno," ").concat(e.nombre),s=e.seccion;return r.a.createElement("div",{className:"row border border-info rounded m-1"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row border-bottom border-info p-2"},r.a.createElement("div",{className:"col-12 d-flex justify-content-center"},r.a.createElement("h3",null,"Cuenta: ",a))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 d-flex flex-column p-4"},r.a.createElement("div",null,"Usuario: ",i),r.a.createElement("div",null,"Lote: ",o),r.a.createElement("div",null,"Colonia/Ejido: ",t),r.a.createElement("div",null,"Seccion: ",s),r.a.createElement("div",null,"Sup. Derecho: ",n),r.a.createElement("div",null,"Sup. Disponible: ",c)))))}return r.a.createElement(r.a.Fragment,null)},Yr=function(e){var a=e.productor,t=e.handleInputChange,n=Object(l.b)(),o=function(){c(),a.length>0?n(ur()):ka.a.fire("Nada para buscar","Ingrese apellido paterno del productor","warning")},c=function(){n(mr(a.toUpperCase()))},i=Object(l.c)((function(e){return e.altaPermisos})),s=i.idProductorSelected,u=i.nombreProductor,d="";s&&(d=u);return r.a.createElement("div",{className:"form-group d-flex flex-column row p-3"},r.a.createElement("label",{className:"mr-2"},r.a.createElement("span",{className:"text-warning"},"* "),"Productor:"),s?r.a.createElement("div",{className:"d-flex align-items-baseline"},r.a.createElement("label",null,d," "),r.a.createElement("i",{className:"fas fa-check text-success p-3"}),r.a.createElement("button",{className:"btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){n(fr())}},r.a.createElement("i",{className:"fas fa-trash"}))):r.a.createElement("div",{className:"d-flex align-items-baseline"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Apellido paterno",name:"productor",autoComplete:"off",value:a,onChange:t,onKeyUp:function(e){"Enter"===e.key&&o()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:o},r.a.createElement("i",{className:"fas fa-search"}))))},qr=function(e){var a=e.cultivo,t=e.handleInputChange,n=Object(l.b)(),o=function(){c(),a.length>0?n(Qn()):ka.a.fire("Nada para buscar","Ingrese nombre del cultivo","warning")},c=function(){n(er(a.toUpperCase()))},i=Object(l.c)((function(e){return e.altaPermisos})),s=i.idCultivoSelected,u=i.nombreCultivo,d="";s&&(d=u);return r.a.createElement("div",{className:"form-group flex-column row p-3"},r.a.createElement("label",{className:"mr-2"},r.a.createElement("span",{className:"text-warning"},"* "),"Cultivo:"),s?r.a.createElement("div",{className:"d-flex align-items-baseline"},r.a.createElement("label",{className:""},d," "),r.a.createElement("i",{className:"fas fa-check text-success p-3"}),r.a.createElement("button",{className:"btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){n(cr()),a=""}},r.a.createElement("i",{className:"fas fa-trash"}))):r.a.createElement("div",{className:"d-flex"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Cultivo",name:"cultivo",autoComplete:"off",value:a,onChange:t,onKeyUp:function(e){"Enter"===e.key&&o()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:o},r.a.createElement("i",{className:"fas fa-search"}))))},Zr=function(){var e=Object(Pa.a)(ya.a.mark((function e(){var a,t;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ra.collectionGroup("permisos").where("tecnico","==","sinAsignar"),t=[],e.next=4,a.get().then((function(e){e.forEach((function(e){t.includes(e.data().localidad)||t.push(e.data().localidad)}))}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Hr=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t,n,r,o;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],r=[],o=function(e){r.push(Ra.collection("colonias").where("nombre","in",e).get())},a.forEach((function(e,a){t.push(e),10===t.length&&(o(t),t.splice(0,t.length))})),t.length>0&&o(t),e.next=8,Promise.all(r);case 8:return e.sent.forEach((function(e){e.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))}))})),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),_r=function(){var e=Object(Pa.a)(ya.a.mark((function e(a,t,n,r){var o,c,l;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],c=[],l=function(e){c.push(Ra.collection("permisos").doc(a).collection("modulos").doc("Modulo-".concat(t)).collection("permisos").where("localidad","in",e).where("tecnico","==","sinAsignar").get())},n.forEach((function(e,a){o.push(e),10===o.length&&(l(o),o.splice(0,o.length))})),o.length>0&&l(o),e.next=7,Promise.all(c).then((function(e){e.forEach((function(e){e.forEach((function(e){Ra.runTransaction(function(){var a=Object(Pa.a)(ya.a.mark((function a(t){return ya.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",t.get(e.ref).then((function(a){a.exists||console.log("Document does not exist!"),t.update(e.ref,{tecnico:r})})));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).then((function(){return console.log("Transaction successfully committed!"),!0})).catch((function(e){console.log("Transaction failed: ",e)}))})),ka.a.fire("T\xe9cnico asignado","El t\xe9cnico se asign\xf3 con \xe9xito en las localidades seleccionadas.","success")}))}));case 7:case"end":return e.stop()}}),e)})));return function(a,t,n,r){return e.apply(this,arguments)}}(),Kr=function(){return function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t,n;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zr();case 2:return t=e.sent,e.next=5,Hr(t);case 5:n=e.sent,a(Xr(n));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},Xr=function(e){return{type:aa,payload:e}},Jr=function(){return{type:ta}},Qr=function(e){return{type:na,payload:e}},Wr=function(){return{type:ra}},$r=function(e){return{type:oa,payload:e}},eo=function(){return{type:ca}},ao=function(){return{type:ia}},to=function(e){var a=e.localtie,t=e.handleInputChange,n=Object(l.b)(),o=function(){c(),a.length>0?n({type:la}):ka.a.fire("Nada para buscar","Ingrese nombre de la localidad","warning")},c=function(){n(function(e){return function(){var a=Object(Pa.a)(ya.a.mark((function a(t){var n;return ya.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,An(e);case 2:n=a.sent,t(Xr(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(a.toUpperCase()))},i=Object(l.c)((function(e){return e.entidades})).localtieSelected,s="",u="";i&&(s=i.nombre,u=i.id);return r.a.createElement("div",{className:"form-group d-flex flex-column row p-3"},r.a.createElement("label",{className:"mr-2"},r.a.createElement("span",{className:"text-warning"},"* "),"Localidad destino:"),u?r.a.createElement("div",{className:"d-flex align-items-baseline"},r.a.createElement("label",null,s," "),r.a.createElement("i",{className:"fas fa-check text-success p-3"}),r.a.createElement("button",{className:"btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){n(eo())}},r.a.createElement("i",{className:"fas fa-trash"}))):r.a.createElement("div",{className:"d-flex"},r.a.createElement("input",{type:"text",className:"form-control d-flex",placeholder:"Localidad",name:"localtie",autoComplete:"off",value:a,onChange:t,onKeyUp:function(e){"Enter"===e.key&&o()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:o},r.a.createElement("i",{className:"fas fa-search"}))))},no=function(){var e,a=Object(l.c)((function(e){return e.entidades})),t=a.usuario,n=a.localtieSelected,o=Object(l.c)((function(e){return e.altaPermisos})),c=o.nombreProductor,i=o.rfcProductor,s=o.nombreCultivo,u=o.claveCultivo,d=Qa({superficieTransferida:0,loteDestino:"",moduloDestino:"",cultivo:"",productor:"",localtie:""}),m=Object(Ca.a)(d,3),p=m[0],E=p.superficieTransferida,f=p.loteDestino,v=p.moduloDestino,b=p.cultivo,N=p.productor,h=p.localtie,g=m[1],O=m[2],A=Object(l.c)((function(e){return e.ui})).msgError;t&&(e=t.supRiego-t.supPrevia);var x=Object(l.b)(),y=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual,P=function(a){(a.preventDefault(),parseInt(E)<=0?(x(Ia("Indique superficie a transferir")),0):parseInt(E)>e?(x(Ia("La superficie a transferir excede a la superficie disponible")),0):0===v.trim().length?(x(Ia("Indique el m\xf3dulo destino")),0):0===f.trim().length?(x(Ia("Indique el lote en el que se aplicar\xe1 la transferencia")),0):null===i?(x(Ia("Indique Productor")),0):null===s?(x(Ia("Indique Cultivo")),0):null===n?(x(Ia("Indique la localidad destino")),0):(x(Da()),1))&&(!function(e,a){Ra.collection("transferencias").doc(a).collection("transferencias").add(e).then((function(){return ka.a.fire("Transferencia Guardada","Se registr\xf3 con \xe9xito la nueva transferencia.","success"),!0})).catch((function(e){console.log(e),ka.a.fire("Error",e,"error")}))}({superficieTransferida:parseInt(E),loteDestino:f,localidadDestino:n.nombre,clavelocalidadDestino:n.clave,moduloDestino:v,cuentaOrigen:"".concat(t.cuenta,".").concat(t.subcta),usuario:"".concat(t.apPaterno," ").concat(t.apMaterno," ").concat(t.nombre),loteOrigen:t.predio,localidadOrigen:t.ejido,moduloOrigen:t.modulo,nombreProductor:c,rfcProductor:i,nombreCultivo:s,claveCultivo:u,fecha:new Date},y),x(mn(t)),O(),x(cr()),x(fr()),x(eo()))},C=function(e){"Enter"===e.key&&P(e)};return t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row border border-info rounded mt-4 m-1"},r.a.createElement("div",{className:"col-12 d-flex justify-content-center border-bottom border-info p-2"},r.a.createElement("h3",null,"Transferencia")),r.a.createElement("div",{className:"col-12 d-flex flex-column p-3"},r.a.createElement("div",{className:"row d-flex p-3 text-warning"},"* Campos obligatorios"),A&&r.a.createElement("div",{className:"auth__alert-error"},A),r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement("label",{htmlFor:""},r.a.createElement("span",{className:"text-warning"},"* "),"Superficie a transferir (ha):"),r.a.createElement("input",{type:"number",className:"form-control ml-1",placeholder:"0 ha",name:"superficieTransferida",autoComplete:"off",value:E,onChange:g,onKeyUp:C})),r.a.createElement("div",{className:"pt-3"},r.a.createElement(qr,{cultivo:b,handleInputChange:g})),r.a.createElement("div",{className:"pt-3"},r.a.createElement(Yr,{productor:N,handleInputChange:g})),r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement("label",{htmlFor:""},r.a.createElement("span",{className:"text-warning"},"* "),"Modulo destino:"),r.a.createElement("select",{type:"text",name:"moduloDestino",value:v,onChange:g,className:"form-control ml-1"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"Modulo"),r.a.createElement("option",{value:"1"},"Modulo 1"),r.a.createElement("option",{value:"2"},"Modulo 2"),r.a.createElement("option",{value:"3"},"Modulo 3"),r.a.createElement("option",{value:"4"},"Modulo 4"),r.a.createElement("option",{value:"5"},"Modulo 5"),r.a.createElement("option",{value:"6"},"Modulo 6"),r.a.createElement("option",{value:"7"},"Modulo 7"),r.a.createElement("option",{value:"8"},"Modulo 8"),r.a.createElement("option",{value:"9"},"Modulo 9A"),r.a.createElement("option",{value:"92"},"Modulo 9B"),r.a.createElement("option",{value:"10"},"Modulo 10"),r.a.createElement("option",{value:"11"},"Modulo 11"),r.a.createElement("option",{value:"12"},"Modulo 12"),r.a.createElement("option",{value:"14"},"Modulo 14"),r.a.createElement("option",{value:"15"},"Modulo 15"),r.a.createElement("option",{value:"16"},"Modulo 16"),r.a.createElement("option",{value:"17"},"Modulo 17"),r.a.createElement("option",{value:"18"},"Modulo 18"),r.a.createElement("option",{value:"19"},"Modulo 19"),r.a.createElement("option",{value:"20"},"Modulo 20"),r.a.createElement("option",{value:"21"},"Modulo 21"),r.a.createElement("option",{value:"22"},"Modulo 22"),r.a.createElement("option",{value:"23"},"Modulo FL"))),r.a.createElement("div",{className:"pt-3"},r.a.createElement(to,{localtie:h,handleInputChange:g})),r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement("label",{htmlFor:""},r.a.createElement("span",{className:"text-warning"},"* "),"Lote destino:"),r.a.createElement("input",{type:"text",className:"form-control ml-1",placeholder:"Lote",name:"loteDestino",autoComplete:"off",value:f,onChange:g,onKeyUp:C})),r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement("button",{className:" btn btn-outline-primary flex-fill",type:"button",onClick:P},r.a.createElement("span",null,"Guardar "),r.a.createElement("i",{className:"fas fa-save"})))))):r.a.createElement(r.a.Fragment,null)},ro=function(){var e=Object(l.c)((function(e){return e.auth})).modulo,a=Object(l.b)(),t=function(){s.length>0?a(un(s.toUpperCase(),e)):ka.a.fire("Nada para buscar","Ingrese apellido paterno o cuenta del usuario","warning")},n=Qa({usuario:""}),o=Object(Ca.a)(n,2),c=o[0],i=o[1],s=c.usuario;return r.a.createElement("div",null,r.a.createElement("div",{className:"row form-group d-flex align-items-baseline pt-3"},r.a.createElement("label",{className:"col-sm-3"},"Usuario: "),r.a.createElement("div",{className:"col-sm-9 d-flex"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Apellido paterno o numero de cuenta",name:"usuario",autoComplete:"off",value:s,onChange:i,onKeyUp:function(e){"Enter"===e.key&&t()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:t},r.a.createElement("i",{className:"fas fa-search"})))))},oo=function(){var e=Object(l.c)((function(e){return e.entidades})).usuarios,a=[];return e?(a=Object.values(e),r.a.createElement(qt,{title:0===a.length?"No se encontraron usuarios":"Usuarios",columns:_t,data:a,setFunction:mn})):r.a.createElement(r.a.Fragment,null)},co={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};Xn.a.setAppElement("#root");var lo=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.entidades})),t=a.openLocaltiesModal,n=a.localties,o=[];n&&(o=Object.values(n));return r.a.createElement(Xn.a,{isOpen:t,onRequestClose:function(){e(ao())},style:co,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement(qt,{title:0===o.length?"No se encontraron localidades":"Localidades",columns:Qt,data:o,setFunction:$r,closeFunction:ao}))},io=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(ro,null))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(oo,null)),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement(Br,null),r.a.createElement(no,null))),r.a.createElement(Sr,null),r.a.createElement(Rr,null),r.a.createElement(yr,null),r.a.createElement(lo,null))},so=function(){var e=Object(l.c)((function(e){return e.entidades})).selectedLocalties,a=Object(l.c)((function(e){return e.auth})),t=a.uid,n=a.modulo,o=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual,c=Object(l.b)(),i=[];e&&e.forEach((function(e){i.push(e.nombre)}));return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:function(){c(function(e,a,t,n){return _r(e,a,t,n),function(){var e=Object(Pa.a)(ya.a.mark((function e(a){return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Kr());case 2:a(Jr()),a(Wr());case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}(o,n,i,t))}},r.a.createElement("span",null,"Asignar t\xe9cnico "),r.a.createElement("i",{className:"fas fa-plus"})))},uo=function(e){var a=e.title,t=e.columns,n=e.data,o=e.setSelectedRowsFunction,c=e.contextMessage,i=Object(l.b)();return r.a.createElement(Yt.a,{columns:t,data:n,title:a,pagination:!0,paginationComponentOptions:{rowsPerPageText:"Filas por pagina",rangesSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"},fixedHeader:!0,persistTableHead:!0,fixedHeaderScrollHeight:"380px",highlightOnHover:!0,striped:!0,pointerOnHover:!0,dense:!0,selectableRows:!0,onSelectedRowsChange:function(e){i(o(e.selectedRows))},contextMessage:c})},mo=function(){var e=Object(l.c)((function(e){return e.entidades})).localties,a=Object(l.b)();e||a(Kr());return e?r.a.createElement(uo,{title:"Localidades disponibles",columns:Qt,data:e,setSelectedRowsFunction:Qr,contextMessage:{singular:"localidad",plural:"localidades",message:"para asignar"}}):r.a.createElement(r.a.Fragment,null)},po=function(){var e=Object(l.c)((function(e){return e.entidades})).selectedLocalties;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row d-flex justify-content-center p-4"},r.a.createElement("h1",null,"Asignaci\xf3n de t\xe9cnico")),e&&e.length>0?r.a.createElement(so,null):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"row pt-3"},r.a.createElement(mo,null)))},Eo=function(){var e=Object(Pa.a)(ya.a.mark((function e(){var a,t;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t=Ra.collectionGroup("permisos").where("nombreCultivo","==","ALGODONERO"),e.next=4,t.get().then((function(e){e.forEach((function(e){a.push(Object(u.a)({id:e.id},e.data()))}))}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fo=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t,n,r,o;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=Ra.collectionGroup("permisos").where("nombreCultivo","==","ALGODONERO").orderBy("usuario").startAt(a.toUpperCase()).endAt(a.toUpperCase()+"\uf8ff"),e.next=4,n.get().then((function(e){e.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}))}));case 4:return r=Ra.collectionGroup("permisos").where("nombreCultivo","==","ALGODONERO").orderBy("cuenta").startAt(a.toUpperCase()).endAt(a.toUpperCase()+"\uf8ff"),e.next=7,r.get().then((function(e){e.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}))}));case 7:return o=Ra.collectionGroup("permisos").where("nombreCultivo","==","ALGODONERO").orderBy("numeroPermiso").startAt(a.toUpperCase()).endAt(a.toUpperCase()+"\uf8ff"),e.next=10,o.get().then((function(e){e.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}))}));case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),vo=function(){return function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eo();case 2:t=e.sent,a(bo(t));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},bo=function(e){return{type:Te,payload:e}},No=function(e){return{type:me,payload:e.id}},ho=function(e,a,t,n){Ra.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisos").doc(e).update(n)},go=function(){var e,a=Object(l.b)(),t=Object(l.c)((function(e){return e.algodoneroScreen})),n=t.permisos,o=t.permisoSelected;n.forEach((function(a){a.id===o&&(e=a)}));var c=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual,i=function(t,n){n.preventDefault(),ho(o,e.modulo,c,t),a(vo())},s=new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"});return r.a.createElement("div",{className:"col-sm-4 mt-3"},r.a.createElement("div",{className:"border border-info rounded detallePermiso"},r.a.createElement("div",{className:"d-flex bg-light border-info border-bottom rounded-top p-1 justify-content-center font-weight-bold text-secondary pt-3"},r.a.createElement("h5",null,e.numeroPermiso)),r.a.createElement("div",{className:"row p-1 pl-2 pt-2"},r.a.createElement("div",{className:"col-4"},"CUENTA:"),r.a.createElement("div",{className:"col-8"},e.cuenta)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"USUARIO:"),r.a.createElement("div",{className:"col-8"},e.usuario)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"PRODUCTOR:"),r.a.createElement("div",{className:"col-8"},e.nombreProductor)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SUPERFICIE:"),r.a.createElement("div",{className:"col-8"},e.supAutorizada," ha")),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"LOTE:"),r.a.createElement("div",{className:"col-8"},e.lote)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"LOCALIDAD:"),r.a.createElement("div",{className:"col-8"},e.localidad)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SECCION:"),r.a.createElement("div",{className:"col-8"},e.seccion)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"MODULO:"),r.a.createElement("div",{className:"col-8"},e.modulo)),r.a.createElement("div",{className:"row p-1 pl-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-4"},"DESFOLIADO:"),r.a.createElement("div",{className:"col-8"},e.desfoliado?r.a.createElement("button",{className:" btn btn-success btn-sm ",type:"button",onClick:function(e){return i({desfoliado:!1},e)}},r.a.createElement("i",{className:"fas fa-check"})):r.a.createElement("button",{className:" btn btn-outline-success btn-sm ",type:"button",onClick:function(e){return i({desfoliado:!0},e)}},r.a.createElement("i",{className:"fas fa-check"})))),r.a.createElement("div",{className:"row p-1 pl-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-4"},"COSECHADO:"),r.a.createElement("div",{className:"col-8"},e.cosechado?r.a.createElement("button",{className:" btn btn-success btn-sm ",type:"button",onClick:function(e){return i({cosechado:!1},e)}},r.a.createElement("i",{className:"fas fa-check"})):e.desfoliado?r.a.createElement("button",{className:" btn btn-outline-success btn-sm ",type:"button",onClick:function(e){return i({cosechado:!0},e)}},r.a.createElement("i",{className:"fas fa-check"})):r.a.createElement("button",{className:" btn btn-outline-secondary btn-sm ",type:"button"},r.a.createElement("i",{className:"fas fa-check"})))),r.a.createElement("div",{className:"row p-1 pl-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-4"},"DESVARADO:"),r.a.createElement("div",{className:"col-8"},e.desvarado?r.a.createElement("button",{className:" btn btn-success btn-sm ",type:"button",onClick:function(e){return i({desvarado:!1},e)}},r.a.createElement("i",{className:"fas fa-check"})):e.cosechado?r.a.createElement("button",{className:" btn btn-outline-success btn-sm ",type:"button",onClick:function(e){return i({desvarado:!0},e)}},r.a.createElement("i",{className:"fas fa-check"})):r.a.createElement("button",{className:" btn btn-outline-secondary btn-sm ",type:"button"},r.a.createElement("i",{className:"fas fa-check"})))),r.a.createElement("div",{className:"row p-1 pl-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-4"},"DISQUEADO:"),r.a.createElement("div",{className:"col-8"},e.disqueado?r.a.createElement("button",{className:" btn btn-success btn-sm ",type:"button",onClick:function(e){return i({disqueado:!1},e)}},r.a.createElement("i",{className:"fas fa-check"})):e.desvarado?r.a.createElement("button",{className:" btn btn-outline-success btn-sm ",type:"button",onClick:function(e){return i({disqueado:!0},e)}},r.a.createElement("i",{className:"fas fa-check"})):r.a.createElement("button",{className:" btn btn-outline-secondary btn-sm ",type:"button"},r.a.createElement("i",{className:"fas fa-check"})))),r.a.createElement("div",{className:"row p-1 pl-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-4"},"DESARRAIGADO:"),r.a.createElement("div",{className:"col-8"},e.desarraigado?r.a.createElement("button",{className:" btn btn-success btn-sm ",type:"button",onClick:function(e){return i({desarraigado:!1},e)}},r.a.createElement("i",{className:"fas fa-check"})):e.disqueado?r.a.createElement("button",{className:" btn btn-outline-success btn-sm ",type:"button",onClick:function(e){return i({desarraigado:!0},e)}},r.a.createElement("i",{className:"fas fa-check"})):r.a.createElement("button",{className:" btn btn-outline-secondary btn-sm ",type:"button"},r.a.createElement("i",{className:"fas fa-check"})))),e.desarraigado?r.a.createElement("div",{className:"row border rounded m-2 p-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-6 "},"SUPERFICIE MAPEADA:"),r.a.createElement("div",{className:"col-3"},e.superficieMapeada," Ha"),r.a.createElement("div",{className:"col-3"},r.a.createElement("button",{className:" btn btn-outline-primary btn-sm ",type:"button",onClick:function(){return t=e.superficieMapeada,void ka.a.fire({title:"Actualizar superficie mapeada",input:"number",inputPlaceholder:t,inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar"}).then((function(t){t.isConfirmed&&(ho(o,e.modulo,c,{superficieMapeada:t.value}),a(vo()),ka.a.fire("OK","Se actualiso la superficie mapeada","success"))}));var t}},r.a.createElement("i",{className:"fas fa-plus"})))):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"MONTO A PAGAR:"),r.a.createElement("div",{className:"col-8"},s.format(20*e.supAutorizada)," MN")),r.a.createElement("div",{className:"row p-1 pl-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-4"},"PAGADO:"),r.a.createElement("div",{className:"col-8"},e.pagado?r.a.createElement("button",{className:" btn btn-success btn-sm ",type:"button",onClick:function(e){return i({pagado:!1},e)}},r.a.createElement("i",{className:"fas fa-check"})):e.desarraigado?r.a.createElement("button",{className:" btn btn-outline-success btn-sm ",type:"button",onClick:function(e){return i({pagado:!0},e)}},r.a.createElement("i",{className:"fas fa-check"})):r.a.createElement("button",{className:" btn btn-outline-secondary btn-sm ",type:"button"},r.a.createElement("i",{className:"fas fa-check"})))),r.a.createElement("div",{className:"row p-1 pl-2 pt-4 pb-4"},r.a.createElement("div",{className:"col-6 d-flex justify-content-center"},e.pagado?r.a.createElement("button",{type:"button",className:"btn btn-outline-success",onClick:function(){a({type:Fe})}},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")):r.a.createElement(r.a.Fragment,null)))))},Oo=function(e){var a=e.data,t=Object(l.c)((function(e){return e.algodoneroScreen})).printSanidadModal,n=Object(l.b)(),o=function(){n({type:Ge})};return r.a.createElement(Xn.a,{isOpen:t,onRequestClose:o,style:{content:{width:"1125px",height:"1500px",overflow:"auto"}},closeTimeoutMS:200,className:"printModalSanidad",overlayClassName:"modal-fondo"},r.a.createElement("div",{className:"row p-5"},r.a.createElement("div",{className:"col-2"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("img",{src:"./logos/sader.png",alt:"Logo sader",style:{maxHeight:50}}))),r.a.createElement("div",{className:"col-8 text-center"},r.a.createElement("h5",null,"SECRETARIA DE AGRICULTURA Y DESARROLLO RURAL ",r.a.createElement("br",null),"DISTRITO DE DESARROLLO RURAL 002, RIO COLORADO ",r.a.createElement("br",null),"COMIT\xc9 ESTATAL DE SANIDAD VEGETAL DE BAJA CALIFORNIA")),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("img",{src:"./logos/cesvbc.webp",alt:"Logo sanidad vegetal",style:{maxHeight:80}})))),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row dflex justify-content-center"},r.a.createElement("h4",null,r.a.createElement("b",null,"CONSTANCIA DE EJECUCI\xd3N DE LABORES FITOSANITARIAS"))),r.a.createElement("div",{className:"row dflex justify-content-center"},r.a.createElement("h5",null,r.a.createElement("b",null,"ALGODONERO CICLO P-V ",a.ciclo))),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row d-flex justify-content-center pt-5 text-justify"},r.a.createElement("div",{className:"col-8"},r.a.createElement("p",null,"POR LA PRESENTE HACEMOS CONSTAR QUE EL C. ",a.nombreProductor,", PRODUCTOR DEL LOTE NO.",a.lote," DEL EJIDO/COLONIA ",a.localidad,", CON SUPERFICIE SEMBRADA DE:",a.supAutorizada," HA; REALIZ\xd3 LAS LABORES FITOSANITARIAS EN UNA SUPERFICIE DESVARADA DE: ",a.supAutorizada," HA; SUPERFICIE DISQUEADA DE: ",a.supAutorizada," HA; SUPERFICIE BARBECHADA DE: ",a.supAutorizada," HA; SUPERFICIE CON DESARRAIGO TOTAL DE:",a.supAutorizada," HA."),r.a.createElement("p",null,"DANDO AS\xcd CUMPLIMIENTO A LO ESTABLECIDO EN LA LEY FEDERAL DE SANIDAD VEGETAL, LA NORMA OFICIAL MEXICANA: NOM-026-SAG/FITO-2014 POR LA QUE SE ESTABLECE EL CONTROL DE PLAGAS REGLAMENTADAS DEL ALGODONERO Y LA NOM-081-FITO-2001-MANEJO Y ELIMINACI\xd3N DE FOCOS DE INFESTACI\xd3N DE PLAGAS, MEDIANTE EL ESTABLECIMIENTO O REORDENAMIENTO DE FECHAS DE SIEMBRA, COSECHA Y DESTRUCCI\xd3N DE RESIDUOS."),r.a.createElement("p",null,"SIRVA EL PRESENTE DOCUMENTO PARA LA LIBERACI\xd3N DE CARTA DE GARANT\xcdA EMITIDA."),r.a.createElement("p",null,"PROPIETARIO: ",a.usuario),r.a.createElement("div",{className:" d-flex justify-content-end pt-5"},r.a.createElement("p",null,"MEXICALI, B.C., dia DE mes De anio")))),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row pt-5 d-flex "},r.a.createElement("div",{className:"col-4 d-flex flex-column "},r.a.createElement("p",{className:"pb-5 text-center"},"NOMBRE Y FIRMA"),r.a.createElement("hr",null),r.a.createElement("div",{className:"text-center"},r.a.createElement("b",null,"T\xc9CNICO FITOSANITARIO DEL CESVBC"))),r.a.createElement("div",{className:"col-4 d-flex align-items-end justify-content-center"},r.a.createElement("div",{className:"text-center"},r.a.createElement("b",null,"SELLO DE CESVBC"))),r.a.createElement("div",{className:"col-4 d-flex align-items-end justify-content-center"},r.a.createElement("div",{className:"text-center"},r.a.createElement("b",null,"SELLO DE CADER")))),r.a.createElement("div",{className:"row p-5"},"C.c.p. -DISTRITO DE DESARROLLO RURAL 002-RIO COLORADO ",r.a.createElement("br",null),"C.c.p. -ARCHIVO"),r.a.createElement("div",{className:"row m-3 d-flex justify-content-center pt-5"},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none",onClick:function(){window.print()}},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none ml-3",onClick:o},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),r.a.createElement("span",null," Cerrar"))))},Ao=function(){var e=Object(l.b)(),a=Qa({palabra:""}),t=Object(Ca.a)(a,2),n=t[0],o=t[1],c=n.palabra,i=Object(l.c)((function(e){return e.algodoneroScreen})),s=i.permisos,d=i.permisoSelected;0===s.length&&e(vo());var m,p=function(){c.length>0?e(function(e){return function(){var a=Object(Pa.a)(ya.a.mark((function a(t){var n;return ya.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fo(e);case 2:n=a.sent,t(bo(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(c)):ka.a.fire("Nada para buscar","Ingrese n\xfamero de permiso, n\xfamero de cuenta o el apellido paterno del usuario.","warning")},E=[];return s.forEach((function(e){E.push(Object(u.a)(Object(u.a)({},e),{},{fechaEmicion:qn()(e.fechaEmicion.toDate()).format("DD/MM/YYYY"),fechaLimite:qn()(e.fechaLimite.toDate()).format("DD/MM/YYYY"),vigencia:qn()(e.vigencia.toDate()).format("DD/MM/YYYY")}))})),s.forEach((function(e){e.id===d&&(m=e)})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-sm-4 d-inline-flex p-3 "},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"N\xfamero de permiso, n\xfamero de cuenta o apellido paterno",name:"palabra",autoComplete:"off",value:c,onChange:o,onKeyUp:function(e){"Enter"===e.key&&p()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:p},r.a.createElement("i",{className:"fas fa-search"})))),r.a.createElement("div",{className:"row pt-3 pb-4"},r.a.createElement("div",{className:"col-sm-8 pr-0 mt-3"},r.a.createElement(qt,{title:"Permisos",columns:Wt,data:E,setFunction:No})),d&&void 0!==m?r.a.createElement(go,null):r.a.createElement(r.a.Fragment,null)),void 0!==m?r.a.createElement(Oo,{data:m}):r.a.createElement(r.a.Fragment,null))},xo={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"430px",width:"1000px"}};Xn.a.setAppElement("#root");var yo=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.autorizadosScreen})),t=a.openAutorizadosModal,n=a.autorizadoSelected,o=a.autorizados,c=a.formError,i=Qa({clave:n.clave,cultivo:n.cultivo,subciclo:n.subciclo,gravedadNormalAutorizada:n.gravedadNormalAutorizada,gravedadNormalAsignada:n.gravedadNormalAsignada,gravedadExtraAutorizada:n.gravedadExtraAutorizada,gravedadExtraAsignada:n.gravedadExtraAsignada,pozoNormalAutorizada:n.pozoNormalAutorizada,pozoNormalAsignada:n.pozoNormalAsignada,pozoExtraAutorizada:n.pozoExtraAutorizada,pozoExtraAsignada:n.pozoExtraAsignada}),s=Object(Ca.a)(i,2),u=s[0],d=s[1],m=u.clave,p=u.cultivo,E=u.subciclo,f=u.gravedadNormalAutorizada,v=u.gravedadNormalAsignada,b=u.gravedadExtraAutorizada,N=u.gravedadExtraAsignada,h=u.pozoNormalAutorizada,g=u.pozoNormalAsignada,O=u.pozoExtraAutorizada,A=u.pozoExtraAsignada,x=[],y=function(){C()&&(o.forEach((function(e){e.cultivo===n.cultivo?x.push({clave:m,cultivo:p,subciclo:E,gravedadNormalAutorizada:Number(f),gravedadNormalAsignada:Number(v),gravedadExtraAutorizada:Number(b),gravedadExtraAsignada:Number(N),pozoNormalAutorizada:Number(h),pozoNormalAsignada:Number(g),pozoExtraAutorizada:Number(O),pozoExtraAsignada:Number(A)}):x.push(e)})),e(Rt(x)),e(Dt()))},P=function(e){"Enter"===e.key&&y()},C=function(){var a="No se permiten valores negativos !",t="La superficie asignada no puede ser mayor a la superficie autorizada !",n="Es necesario asignar un valor a todas las superficies !";return Number(f)<0||Number(v)<0||Number(b)<0||Number(N)<0||Number(h)<0||Number(g)<0||Number(O)<0||Number(A)<0?(e(kt(a)),!1):""===f||""===v||""===b||""===N||""===h||""===g||""===O||""===A?(e(kt(n)),!1):v>f||N>b||g>h||A>O?(e(kt(t)),!1):(e(Tt()),!0)};return r.a.createElement(Xn.a,{isOpen:t,onRequestClose:function(){e(Dt()),e(Tt())},style:xo,closeTimeoutMS:200,className:"autorizadosModal",overlayClassName:"modal-fondo"},r.a.createElement("form",null,r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center pt-2"},r.a.createElement("h5",null,"".concat(m," - ").concat(p)))),c?r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center pt-2"},r.a.createElement("div",{className:"border border-danger rounded text-danger p-2"},c))):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-borderless table-hover table-striped table-info mt-4 border-info text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"}),r.a.createElement("th",{colSpan:"2"},"Superficie Normal"),r.a.createElement("th",{colSpan:"2"},"Superficie Extra")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Gravedad"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Gravedad Normal Autorizada",name:"gravedadNormalAutorizada",value:f,autoComplete:"off",onChange:d,onKeyUp:P})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"gravedad Normal Asignada",name:"gravedadNormalAsignada",value:v,autoComplete:"off",onChange:d,onKeyUp:P})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Gravedad Extra Autorizada",name:"gravedadExtraAutorizada",value:b,autoComplete:"off",onChange:d,onKeyUp:P})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Gravedad Extra Asignada",name:"gravedadExtraAsignada",value:N,autoComplete:"off",onChange:d,onKeyUp:P}))),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Federal"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Normal Autorizada",name:"pozoNormalAutorizada",value:h,autoComplete:"off",onChange:d,onKeyUp:P})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Normal Asignada",name:"pozoNormalAsignada",value:g,autoComplete:"off",onChange:d,onKeyUp:P})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Extra Autorizada",name:"pozoExtraAutorizada",value:O,autoComplete:"off",onChange:d,onKeyUp:P})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Extra Asignada",name:"pozoExtraAsignada",value:A,autoComplete:"off",onChange:d,onKeyUp:P})))))),r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"d-flex justify-content-center col-sm-12"},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:y},r.a.createElement("i",{className:"fas fa-check"}))))))},Po={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"430px",width:"1000px"}};Xn.a.setAppElement("#root");var Co=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.autorizadosScreen})),t=a.openAutorizadosModal,n=a.autorizadoSelected,o=a.autorizados,c=a.formError,i=Qa({clave:n.clave,cultivo:n.cultivo,subciclo:n.subciclo,gravedadNormalAutorizada:n.gravedadNormalAutorizada,gravedadNormalAsignada:n.gravedadNormalAsignada,gravedadExtraAutorizada:n.gravedadExtraAutorizada,gravedadExtraAsignada:n.gravedadExtraAsignada,pozoNormalAutorizada:n.pozoNormalAutorizada,pozoNormalAsignada:n.pozoNormalAsignada,pozoExtraAutorizada:n.pozoExtraAutorizada,pozoExtraAsignada:n.pozoExtraAsignada}),s=Object(Ca.a)(i,2),u=s[0],d=s[1],m=u.clave,p=u.cultivo,E=u.subciclo,f=u.gravedadNormalAutorizada,v=u.gravedadNormalAsignada,b=u.gravedadExtraAutorizada,N=u.gravedadExtraAsignada,h=u.pozoNormalAutorizada,g=u.pozoNormalAsignada,O=u.pozoExtraAutorizada,A=u.pozoExtraAsignada,x=[],y=function(){C()&&(o.forEach((function(e){e.cultivo===n.cultivo?x.push({clave:m,cultivo:p,subciclo:E,gravedadNormalAutorizada:Number(f),gravedadNormalAsignada:Number(v),gravedadExtraAutorizada:Number(b),gravedadExtraAsignada:Number(N),pozoNormalAutorizada:Number(h),pozoNormalAsignada:Number(g),pozoExtraAutorizada:Number(O),pozoExtraAsignada:Number(A)}):x.push(e)})),e(Rt(x)),e(Dt()))},P=function(e){"Enter"===e.key&&y()},C=function(){var a="No se permiten valores negativos !",t="La superficie asignada no puede ser mayor a la superficie autorizada !",n="Es necesario asignar un valor a todas las superficies !";return Number(f)<0||Number(v)<0||Number(b)<0||Number(N)<0||Number(h)<0||Number(g)<0||Number(O)<0||Number(A)<0?(e(kt(a)),!1):""===f||""===v||""===b||""===N||""===h||""===g||""===O||""===A?(e(kt(n)),!1):v>f||N>b||g>h||A>O?(e(kt(t)),!1):(e(Tt()),!0)};return r.a.createElement(Xn.a,{isOpen:t,onRequestClose:function(){e(Dt()),e(Tt())},style:Po,closeTimeoutMS:200,className:"autorizadosModal",overlayClassName:"modal-fondo"},r.a.createElement("form",null,r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center pt-2"},r.a.createElement("h5",null,"".concat(m," - ").concat(p)))),c?r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center pt-2"},r.a.createElement("div",{className:"border border-danger rounded text-danger p-2"},c))):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-borderless table-hover table-striped table-info mt-4 border-info text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"}),r.a.createElement("th",{colSpan:"2"},"Superficie Normal"),r.a.createElement("th",{colSpan:"2"},"Superficie Extra")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Particular"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Normal Autorizada",name:"pozoNormalAutorizada",value:h,autoComplete:"off",onChange:d,onKeyUp:P})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Normal Asignada",name:"pozoNormalAsignada",value:g,autoComplete:"off",onChange:d,onKeyUp:P})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Extra Autorizada",name:"pozoExtraAutorizada",value:O,autoComplete:"off",onChange:d,onKeyUp:P})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Extra Asignada",name:"pozoExtraAsignada",value:A,autoComplete:"off",onChange:d,onKeyUp:P})))))),r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"d-flex justify-content-center col-sm-12"},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:y},r.a.createElement("i",{className:"fas fa-check"}))))))},jo=function(e){var a=e.autorizados,t=e.modulo,n=0,o=0,c=0,l=0;return null!==t&&a.forEach((function(e){n+=e.pozoNormalAutorizada,o+=e.pozoNormalAsignada,c+=e.pozoExtraAutorizada,l+=e.pozoExtraAsignada})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex bg-light border-info border-bottom rounded-top p-1 justify-content-center font-weight-bold text-secondary pt-3"},r.a.createElement("h5",null," ",t)),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-info mb-0 text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"3"},"Total Superficie Normal")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Particular"),r.a.createElement("td",null,n),r.a.createElement("td",null,o))))),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-table-secondary text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"3"},"Total Superficie Extra")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Particular"),r.a.createElement("td",null,c),r.a.createElement("td",null,l))))))},zo=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.autorizadosScreen})),t=a.modulo,n=a.autorizados,o=a.autorizadoSelected,c=a.superficieReferencia,i=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual,s=0,u=0,d=0,m=0,p=0,E=0,f=0,v=0,b=0;null!==t&&(n.forEach((function(e){s+=e.gravedadNormalAutorizada,u+=e.gravedadNormalAsignada,d+=e.gravedadExtraAutorizada,m+=e.gravedadExtraAsignada,p+=e.pozoNormalAutorizada,E+=e.pozoNormalAsignada,f+=e.pozoExtraAutorizada,v+=e.pozoExtraAsignada})),b=s+u+d+m+p+E+f+v);var N=function(a){e(function(e){return{type:ge,payload:e}}(a)),e(wt(i,a))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row pt-3 .autorizadosModal"},r.a.createElement("div",{className:"col-sm-8 "},yn.map((function(e){return t===e?r.a.createElement("button",{key:e,className:"btn btn-primary m-1",type:"button",onClick:function(){return N(e)}},r.a.createElement("span",null,"M-",e)):r.a.createElement("button",{key:e,className:"btn btn-outline-primary m-1",type:"button",onClick:function(){return N(e)}},r.a.createElement("span",null,"M-",e))})))),r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"col-sm-8 pr-0 mt-3"},"Pozo Particular"===t?r.a.createElement(qt,{title:"Autorizados",columns:an,data:n,setFunction:Ut}):r.a.createElement(qt,{title:"Autorizados",columns:en,data:n,setFunction:Ut})),t?r.a.createElement("div",{className:"col-sm-4 pl-3 mt-3"},r.a.createElement("div",{className:"d-flex flex-column border rounded border-info"},n.length>0?"Pozo Particular"===t?r.a.createElement(jo,{autorizados:n,modulo:t}):r.a.createElement(vt,{autorizados:n,modulo:t}):r.a.createElement(r.a.Fragment,null),c===b?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"row p-1 pl-2  d-flex flex-column"},r.a.createElement("div",{className:"d-flex justify-content-center pt-5 text-warning"},"! Hay modificaciones sin guardar !"),r.a.createElement("div",{className:"d-flex justify-content-center pt-4 pb-4"},r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary",onClick:function(){!function(e,a,t){var n=Ra.batch();t.forEach((function(t){var r=Ra.collection("autorizados").doc(e).collection("modulos").doc("Modulo-".concat(a)).collection("autorizados").doc("".concat(t.clave,"-").concat(t.cultivo)),o=t.gravedadNormalAutorizada+t.pozoNormalAutorizada,c=t.gravedadExtraAutorizada+t.pozoExtraAutorizada,l=o+c,i=function(e){return 1===e||2===e||3===e?"Sonora":"Baja California"}(a);n.set(r,{estado:i,modulo:a,clave:t.clave,cultivo:t.cultivo,subciclo:t.subciclo,superficieNormal:o,superficieExtra:c,superficieTotal:l,gravedadNormalAutorizada:t.gravedadNormalAutorizada,gravedadNormalAsignada:t.gravedadNormalAsignada,gravedadExtraAutorizada:t.gravedadExtraAutorizada,gravedadExtraAsignada:t.gravedadExtraAsignada,pozoNormalAutorizada:t.pozoNormalAutorizada,pozoNormalAsignada:t.pozoNormalAsignada,pozoExtraAutorizada:t.pozoExtraAutorizada,pozoExtraAsignada:t.pozoExtraAsignada})})),n.commit().then((function(){console.log("Se registraron con \xe9xito los cambios."),ka.a.fire("Autorizados Guardados","Se registraron con \xe9xito los cambios.","success")})).catch((function(e){console.error("Error writing document: ",e)}))}(i,t,n),e(wt(i,t))}},r.a.createElement("i",{className:"far fa-save"}),r.a.createElement("span",null," Guardar Cambios")))))):r.a.createElement(r.a.Fragment,null)),o?"UNI01"===t||"UNI02"===t||"UNI03"===t?r.a.createElement(Co,null):r.a.createElement(yo,null):r.a.createElement(r.a.Fragment,null))},So=function(e){var a=e.titulo,t=e.subtitulo1,n=e.subtitulo2,o=e.etiquetas,c=e.dataSet,l=e.ancho,i={labels:o,datasets:[{label:a,data:c,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(20, 200, 132, 0.2)","rgba(230, 2, 134, 0.2)","rgba(80, 150, 80, 0.2)","rgba(150, 50, 150,0.21)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(20, 200, 132, 1)","rgba(230, 2, 134, 1)","rgba(80, 150, 80, 1)","rgba(150, 50, 150, 1)"],borderWidth:1}]};return r.a.createElement("div",{className:"pt-4 text-secondary"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h5",null,a)),r.a.createElement("div",{className:"d-flex flex-column pt-4 pb-4 pl-3"},r.a.createElement("div",null,r.a.createElement("h6",null,t)),r.a.createElement("div",null,r.a.createElement("h6",null,n))),r.a.createElement("div",{className:"pb-4"},r.a.createElement(Et.HorizontalBar,{data:i,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},width:l})))},wo=function(){var e=Object(l.c)((function(e){return e.entidades})),a=e.permisos,t=e.campoOrdenador,n=[],o=0,c=0;a&&((n=function(e,a){var t={};e.forEach((function(e){var n=e[a];t[n]?(t[n].superficie+=e.supAutorizada,t[n].numeroPermisos++):t[n]={label:n,superficie:e.supAutorizada,numeroPermisos:1}}));var n=Object.values(t);n.sort((function(e,a){return e.superficie<a.superficie?1:e.superficie>a.superficie?-1:0}));var r=[],o=[],c=[],l=8,i=0,s=0;return n.forEach((function(e){l>=0?(r.push("".concat(e.label," (").concat(e.superficie,"ha)")),o.push(e.superficie),c.push(e.numeroPermisos),l--):(i+=e.superficie,s+=e.numeroPermisos)})),r.push("Otros ".concat(a," (").concat(i,"ha)")),o.push(i),c.push(s),{labels:r,superficiesCultivos:o,numeroPermisos:c}}(a,t)).superficiesCultivos.forEach((function(e){o+=e})),n.numeroPermisos.forEach((function(e){c+=e})));var i="Superficie incluida: ".concat(o," ha"),s="Permisos incluidos: ".concat(c);return r.a.createElement("div",null,n?r.a.createElement(So,{titulo:"Superficies por ".concat(function(e){switch(e){case"nombreCultivo":return"cultivo";case"usuario":return"usuario";case"nombreProductor":return"productor";case"localidad":return"localidad"}}(t)),subtitulo1:i,subtitulo2:s,etiquetas:n.labels,dataSet:n.superficiesCultivos,ancho:220}):r.a.createElement(r.a.Fragment,null))},Ro=t(83),Io=t.n(Ro),Do=function(e,a,t,n,r,o,c,l,i){return function(){var s=Object(Pa.a)(ya.a.mark((function s(u){var d;return ya.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ht(e,a,t,n,r,o,c,l,i);case 2:d=s.sent,u(Uo(d)),u(Mo(n[0]));case 5:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},Uo=function(e){return{type:Be,payload:e}},Mo=function(e){return{type:Ye,payload:e}},ko=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.auth})).modulo,t=Qa({palabra:""}),o=Object(Ca.a)(t,2),c=o[0],i=o[1],s=c.palabra,u=c.campo,d=c.activosCancelados,m=c.tipoSuperficie,p=c.sistema,E=Object(n.useState)(new Date(2021,8,1)),f=Object(Ca.a)(E,2),v=f[0],b=f[1],N=Object(n.useState)(new Date),h=Object(Ca.a)(N,2),g=h[0],O=h[1],A=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual,x=function(){u?e(Do(s,a,A,[u],d,m,p,v,g)):ka.a.fire("Nada para buscar","Seleccione un campo.","warning")};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 d-inline-flex p-0"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"parametro de busqueda",name:"palabra",autoComplete:"off",value:s,onChange:i,onKeyUp:function(e){"Enter"===e.key&&x()}}),r.a.createElement("select",{name:"campo",value:u,onChange:i,className:"form-control ml-2"},r.a.createElement("option",{value:""},"-"),r.a.createElement("option",{value:"nombreCultivo"},"Cultivo"),r.a.createElement("option",{value:"usuario"},"Usuario"),r.a.createElement("option",{value:"nombreProductor"},"Productor"),r.a.createElement("option",{value:"localidad"},"Localidad")),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-2 no-printme",type:"button",onClick:x},r.a.createElement("i",{className:"fas fa-search"})))),r.a.createElement("div",{className:"row justify-content-between pt-2"},r.a.createElement("div",{className:"col-sm-4 border rounded pt-2 pb-2"},r.a.createElement("p",null,"ESTADO DE LOS PERMISOS"),r.a.createElement("div",{className:"form-check d-flex flex-column"},r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"activosCancelados",id:"todos",value:"todos",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"todos"},"Todos los permisos")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"activosCancelados",id:"activos",value:"activo",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"activos"},"Permisos activos")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"activosCancelados",id:"cancelados",value:"cancelado",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"cancelados"},"Permisos cancelados")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"activosCancelados",id:"En proceso de cancelaci\xf3n",value:"En proceso de cancelaci\xf3n",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"En proceso de cancelaci\xf3n"},"En proceso de cancelaci\xf3n")))),r.a.createElement("div",{className:"col-sm-4 border rounded pt-2 pb-2"},r.a.createElement("p",null,"TIPO DE EXPEDICI\xd3N"),r.a.createElement("div",{className:"form-check d-flex flex-column"},r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"tipoSuperficie",id:"toda",value:"todos",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"toda"},"Toda la superficie")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"tipoSuperficie",id:"superficieNormal",value:"normal",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"superficieNormal"},"Superficie normal")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"tipoSuperficie",id:"superficieExtra",value:"extra",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"superficieExtra"},"Superficie extra")))),r.a.createElement("div",{className:"col-sm-3 border rounded pt-2 pb-2"},r.a.createElement("p",null,"SISTEMA DE RIEGO"),r.a.createElement("div",{className:"form-check d-flex flex-column"},r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"sistema",id:"gravedadPozo",value:"todos",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"gravedadPozo"},"Gravedad y pozo")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"sistema",id:"gravedad",value:"Gravedad",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"gravedad"},"Gravedad")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"sistema",id:"pozo",value:"Pozo",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"pozo"},"Pozo"))))),r.a.createElement("div",{className:"row justify-content-between border rounded mt-2"},r.a.createElement("div",{className:"col-sm-12 p-2"},r.a.createElement("p",null,"RANGO DE EXPEDICI\xd3N")),r.a.createElement("div",{className:"col-sm-5  pb-2"},r.a.createElement("label",{className:"form-check-label"},"Fecha inicial"),r.a.createElement("div",null,r.a.createElement(Io.a,{type:"date",onChange:b,value:v,format:"dd/MM/yyyy"}))),r.a.createElement("div",{className:"col-sm-5 pb-2"},r.a.createElement("label",{className:"form-check-label"},"Fecha final"),r.a.createElement("div",null,r.a.createElement(Io.a,{type:"date",onChange:O,value:g,format:"dd/MM/yyyy"})))),r.a.createElement("div",{className:" row d-flex pt-3"},r.a.createElement("button",{className:"btn btn-outline-primary flex-fill no-printme",type:"button",onClick:function(){window.print()}},r.a.createElement("span",null,"Imprimir informe "),r.a.createElement("i",{className:"fas fa-print"})))))},To=function(e){var a=e.title,t=e.data,n=e.columns,o=e.setFunction,c=e.closeFunction,i=Object(l.b)();return r.a.createElement("div",{className:"table table-responsive table-striped"},r.a.createElement(Yt.a,{columns:n,data:t,title:a,highlightOnHover:!0,striped:!0,pointerOnHover:!0,dense:!0,onRowClicked:function(e){void 0!==o&&i(o(e)),void 0!==c&&i(c())},customStyles:{headCells:{style:{paddingLeft:"5px",paddingRight:"5px"}},headRow:{style:{backgroundColor:"lightgray"}},cells:{style:{fontSize:"10px",paddingLeft:"5px",paddingRight:"5px"}}}}))},Lo=function(){var e=Object(l.c)((function(e){return e.entidades})).permisos,a=Object(l.c)((function(e){return e.auth})).modulo,t=Object(l.b)(),n=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual,o=Date.now(),c=new Date(o);e||t(Do("",a,n,["nombreCultivo"]));var i=[];if(e){var s={numeroPermiso:"TOTALES",supAutorizada:0,cuotaCultivo:0};e.forEach((function(e){s.supAutorizada=s.supAutorizada+e.supAutorizada,s.cuotaCultivo=s.cuotaCultivo+mt(e.cuotaCultivo*e.supAutorizada,3),i.push(Object(u.a)(Object(u.a)({},e),{},{fechaEmicion:qn()(e.fechaEmicion.toDate()).format("DD/MM/YYYY"),fechaLimite:qn()(e.fechaLimite.toDate()).format("DD/MM/YYYY"),vigencia:qn()(e.vigencia.toDate()).format("DD/MM/YYYY"),cuotaCultivo:mt(e.cuotaCultivo*e.supAutorizada,3)}))})),i.push(s)}return r.a.createElement("div",{className:"printme"},r.a.createElement(To,{title:"",columns:$t,data:i}),r.a.createElement("div",{className:"mt-1"},c.toLocaleDateString()))},Fo=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row m-0 "},r.a.createElement("div",{className:"col-sm-12 p-3 d-flex justify-content-center"},r.a.createElement("h2",null,"Reporte de permisos"))),r.a.createElement("div",{className:"row p-3 d-flex justify-content-center"},r.a.createElement("div",{className:"col-sm-9 no-printme"},r.a.createElement(ko,null))),r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("div",{className:"col-sm-5 no-printme"},r.a.createElement(wo,null))),r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("div",{className:"col-lg-9"},r.a.createElement(Lo,null))))},Go={supGravedadProgramada:0,supGravedadExpedida:0,supGravedadRealizada:0,supPozoProgramada:0,supPozoExpedida:0,supPozoRealizada:0,supPozoPartProgramada:0,supPozoPartExpedida:0,supPozoPartRealizada:0},Vo=Object(u.a)({},{"OTO\xd1O-INVIERNO":{"3-TRIGO":{},"8-AVENA":{},"2-CEBADA":{},"4-RYE-GRASS":{},"12-CEBOLLIN O-I":{},VARIOS:{},SUBTOTAL:{}},PERENNES:{"50-ALFALFA":{},"52-ESPARRAGO":{},"53-VID":{},FRUTALES:{},"117-ZACATE BERMUDA":{},"60-PALMA DATILERA":{},VARIOS:{},SUBTOTAL:{}},"PRIMAVERA-VERANO":{"80-ALGODONERO":{},"81-SORGO GRANO TEMP.(SUDAN)":{},"82-SORGO GRANO TARDIO":{},"83-SORGO FORRAJERO TEMP.(SUDAN)":{},"84-SORGO FORRAJERO TARDIO":{},"87-MAIZ BLANCO TEMPRANO":{},"88-MAIZ BLANCO TARDIO":{},"12.1-CEBOLLIN P-V":{},"12.2-CEBOLLIN TARDIO":{},VARIOS:{},SUBTOTAL:{}}}),Bo=function(e,a,t,n,r,o,c,l,i){e.supGravedadProgramada=e.supGravedadProgramada+a,e.supGravedadExpedida=e.supGravedadExpedida+t,e.supGravedadRealizada=e.supGravedadRealizada+n,e.supPozoProgramada=e.supPozoProgramada+r,e.supPozoExpedida=e.supPozoExpedida+o,e.supPozoRealizada=e.supPozoRealizada+c,e.supPozoPartProgramada=e.supPozoPartProgramada+l,e.supPozoPartExpedida=e.supPozoPartExpedida+i},Yo=function(e,a,t){return Object.keys(Vo).forEach((function(e){Object.keys(Vo[e]).forEach((function(a){Vo[e][a]=Object(u.a)({},Go)}))})),Object.values(e).forEach((function(e){var n=e.subciclo,r=e.cultivo,o=e.modulo,c=e.estado,l=e.supGravedadProgramada,i=e.supGravedadExpedida,s=e.supGravedadRealizada,u=e.supPozoProgramada,d=e.supPozoExpedida,m=e.supPozoRealizada,p=e.supPozoPartProgramada,E=e.supPozoPartExpedida;(function(e,a,t,n){switch(e){case"modulos":case"modulo":return function(e,a){var t=!1;return e.length>0?e.forEach((function(e){a.toString()===e&&(t=!0)})):t=!0,t}(a,t);case"Baja California":case"Sonora":return e===n;case"global":return!0;default:return!1}})(a,t,o,c)&&(Vo[n][r]?(Bo(Vo[n][r],l,i,s,u,d,m,p,E),Bo(Vo[n].SUBTOTAL,l,i,s,u,d,m,p,E)):(Bo(Vo[n].VARIOS,l,i,s,u,d,m,p,E),Bo(Vo[n].SUBTOTAL,l,i,s,u,d,m,p,E)))})),Vo},qo={},Zo={cultivo:"",modulo:"",subciclo:"",estado:"",supGravedadProgramada:0,supGravedadExpedida:0,supGravedadRealizada:0,supPozoProgramada:0,supPozoExpedida:0,supPozoRealizada:0,supPozoPartProgramada:0,supPozoPartExpedida:0,supPozoPartRealizada:0},Ho=function(e,a){return e.forEach((function(e){!function(e){var a=e.id,t=e.modulo,n=e.subciclo,r=e.estado,o=void 0===r?"":r,c=e.gravedadExtraAutorizada,l=void 0===c?0:c,i=e.gravedadNormalAutorizada,s=void 0===i?0:i,d=e.pozoExtraAutorizada,m=void 0===d?0:d,p=e.pozoNormalAutorizada,E=void 0===p?0:p;"PERENES"===n&&(n="PERENNES"),_o(t)?qo["".concat(a,"-").concat(t)]=Object(u.a)(Object(u.a)({},Zo),{},{cultivo:a,modulo:t,subciclo:n,estado:o,supGravedadProgramada:s+l,supPozoPartProgramada:E+m}):qo["".concat(a,"-").concat(t)]=Object(u.a)(Object(u.a)({},Zo),{},{cultivo:a,modulo:t,subciclo:n,estado:o,supGravedadProgramada:s+l,supPozoProgramada:E+m})}(e)})),a.forEach((function(e){qo["".concat(e.id,"-").concat(e.modulo)]&&function(e){var a=e.id,t=e.modulo,n=e.gravedadNormal,r=void 0===n?0:n,o=e.gravedadExtra,c=void 0===o?0:o,l=e.pozoNormal,i=void 0===l?0:l,s=e.pozoExtra,d=void 0===s?0:s,m=e.pozoParticularNormal,p=void 0===m?0:m,E=e.pozoParticularExtra,f=void 0===E?0:E;qo["".concat(a,"-").concat(t)]=Object(u.a)(Object(u.a)({},qo["".concat(a,"-").concat(t)]),{},{supGravedadExpedida:qo["".concat(a,"-").concat(t)].supGravedadExpedida+r+c,supPozoExpedida:qo["".concat(a,"-").concat(t)].supPozoExpedida+i+d,supPozoPartExpedida:qo["".concat(a,"-").concat(t)].supPozoPartExpedida+p+f})}(e)})),qo},_o=function(e){switch(e){case"UNI01":case"UNI02":case"UNI03":return!0;default:return!1}},Ko=function(e,a){var t=e.unidades,n=e.modulosPorUnidad,r=a.type,o=a.payload;switch(r){case"setUnidad":if(t[o])return Object(u.a)(Object(u.a)({},e),{},{unidades:Object(u.a)(Object(u.a)({},t),{},Object(Ja.a)({},o,!1))});var c={};return Object.keys(t).forEach((function(e){c[e]=!1})),Object(u.a)(Object(u.a)({},e),{},{unidades:Object(u.a)(Object(u.a)({},c),{},Object(Ja.a)({},o,!0))});case"changeModulo":var l=o.unidad,i=o.modulo;return Object(u.a)(Object(u.a)({},e),{},{modulosPorUnidad:Object(u.a)(Object(u.a)({},n),{},Object(Ja.a)({},l,Object(u.a)(Object(u.a)({},n[l]),{},Object(Ja.a)({},i,!n[l][i]))))});case"changeGroup":var s=Object(u.a)({},n);return Object.keys(e.unidades).forEach((function(a){Object.keys(e.modulosPorUnidad[a]).forEach((function(t){s[a][t]=e.unidades[a]}))})),Object(u.a)(Object(u.a)({},e),{},{modulosPorUnidad:s})}},Xo=function(e){var a=e.data,t=e.modulos,n=Object(l.c)((function(e){return e.auth})).name;return r.a.createElement("div",{className:"table-responsive-sm"},r.a.createElement("table",{className:"table table-sm table-bordered font12"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row",rowSpan:"2"},"CULTIVO"),r.a.createElement("th",{scope:"row",colSpan:"3"},"SUP. GRAVEDAD"),r.a.createElement("th",{scope:"row",colSpan:"3"},"SUP. POZO FEDERAL"),r.a.createElement("th",{scope:"row",colSpan:"3"},"SUP. POZO PARTICULAR"),r.a.createElement("th",{scope:"row",colSpan:"3"},"SUP. TOTAL")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Programada"),r.a.createElement("th",{scope:"col"},"Expedida"),r.a.createElement("th",{scope:"col"},"Realizado"),r.a.createElement("th",{scope:"col"},"Programada"),r.a.createElement("th",{scope:"col"},"Expedida"),r.a.createElement("th",{scope:"col"},"Realizado"),r.a.createElement("th",{scope:"col"},"Programada"),r.a.createElement("th",{scope:"col"},"Expedida"),r.a.createElement("th",{scope:"col"},"Realizado"),r.a.createElement("th",{scope:"col"},"Programada"),r.a.createElement("th",{scope:"col"},"Expedida"),r.a.createElement("th",{scope:"col"},"Realizado"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row",colSpan:"13",className:"pt-4"},"OTO\xd1O - INVIERNO")),Object.values(a["OTO\xd1O-INVIERNO"]).map((function(e,t){var n=Object.keys(a["OTO\xd1O-INVIERNO"])[t];return r.a.createElement("tr",{key:n},r.a.createElement("th",{scope:"row"},n),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadProgramada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadExpedida,3)),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadRealizada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoProgramada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoExpedida,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoRealizada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoPartProgramada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoPartExpedida,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoPartRealizada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadProgramada+e.supPozoProgramada+e.supPozoPartProgramada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadExpedida+e.supPozoExpedida+e.supPozoPartExpedida,3)),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadRealizada+e.supPozoRealizada+e.supPozoPartRealizada,3)))})),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row",colSpan:"13",className:"pt-4"},"PERENNES")),Object.values(a.PERENNES).map((function(e,t){var n=Object.keys(a.PERENNES)[t];return r.a.createElement("tr",{key:n},r.a.createElement("th",{scope:"row"},n),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadProgramada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadExpedida,3)),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadRealizada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoProgramada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoExpedida,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoRealizada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoPartProgramada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoPartExpedida,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoPartRealizada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadProgramada+e.supPozoProgramada+e.supPozoPartProgramada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadExpedida+e.supPozoExpedida+e.supPozoPartExpedida,3)),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadRealizada+e.supPozoRealizada+e.supPozoPartRealizada,3)))})),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row",colSpan:"13",className:"pt-4"},"PRIMAVERA-VERANO")),Object.values(a["PRIMAVERA-VERANO"]).map((function(e,t){var n=Object.keys(a["PRIMAVERA-VERANO"])[t];return r.a.createElement("tr",{key:n},r.a.createElement("th",{scope:"row"},n),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadProgramada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadExpedida,3)),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadRealizada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoProgramada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoExpedida,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoRealizada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoPartProgramada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoPartExpedida,3)),r.a.createElement("td",{className:"text-right"},mt(e.supPozoPartRealizada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadProgramada+e.supPozoProgramada+e.supPozoPartProgramada,3)),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadExpedida+e.supPozoExpedida+e.supPozoPartExpedida,3)),r.a.createElement("td",{className:"text-right"},mt(e.supGravedadRealizada+e.supPozoRealizada+e.supPozoPartRealizada,3)))})))),r.a.createElement("button",{type:"button",onClick:function(){var e=Qo(t);Fn(Jo(a),{header:["CULTIVO","GRAVEDAD PROGRAMADA","GRAVEDAD EXPEDIDA","GRAVEDAD REALIZADA","POZO PROGRAMADA","POZO EXPEDIDA","POZO REALIZADA","POZO PART PROGRAMADA","POZO PART EXPEDIDA","POZO PART REALIZADA","TOTAL PROGRAMADA","TOTAL EXPEDIDA","TOTAL REALIZADA"]},e,n,e)},className:"btn btn-outline-primary d-print-none"},r.a.createElement("i",{className:"fas fa-download"}),r.a.createElement("span",null," Descargar")),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none",onClick:function(){return window.print()}},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")))},Jo=function(e){var a=[];return Object.entries(e).forEach((function(e){a.push({cultivo:e[0]}),Object.entries(e[1]).forEach((function(e){a.push(Object(u.a)({cultivo:e[0]},e[1]))}))})),a.map((function(e){return Object.keys(e).length>1?{CULTIVO:e.cultivo,"GRAVEDAD PROGRAMADA":e.supGravedadProgramada,"GRAVEDAD EXPEDIDA":e.supGravedadExpedida,"GRAVEDAD REALIZADA":e.supGravedadRealizada,"POZO PROGRAMADA":e.supPozoProgramada,"POZO EXPEDIDA":e.supPozoExpedida,"POZO REALIZADA":e.supPozoRealizada,"POZO PART PROGRAMADA":e.supPozoPartProgramada,"POZO PART EXPEDIDA":e.supPozoPartExpedida,"POZO PART REALIZADA":e.supPozoPartRealizada,"TOTAL PROGRAMADA":e.supGravedadProgramada+e.supPozoProgramada+e.supPozoPartProgramada,"TOTAL EXPEDIDA":e.supGravedadExpedida+e.supPozoExpedida+e.supPozoPartExpedida,"TOTAL REALIZADA":e.supGravedadRealizada+e.supPozoRealizada+e.supPozoPartRealizada}:{CULTIVO:e.cultivo}}))},Qo=function(e){switch(e.length){case 0:return"ExpedicionGlobal";case 1:return"ExpedicionM".concat(e[0]);default:return"Expedicion"}},Wo=function(e){var a=e.inputName,t=e.options,n=e.formValues,o=e.setFunction,c=e.styles;return r.a.createElement("div",{className:c.group},t.map((function(e){var t,l=e.id,i=e.label;return r.a.createElement("label",{key:l,className:"".concat(c.button," ").concat((t=l,t===n[a]&&"active"))},r.a.createElement("input",{type:"radio",name:a,id:l,value:l,onChange:o}),i)})))},$o=function(e){var a=e.options,t=e.setFunction,n=e.groupStyles,o=e.buttonStyles;return r.a.createElement("div",{className:n},Object.entries(a).map((function(e){var a;return r.a.createElement("button",{className:(a=e[1],a?o.on:o.off),type:"button",key:e[0],onClick:function(){t(e[0])}},r.a.createElement("span",null,e[0]))})))},ec=function(e){var a=e.state,t=e.dispatch,n=a.unidades,o=a.modulosPorUnidad,c=o.primeraUnidad,l=o.segundaUnidad,i=o.terceraUnidad,s=o.pozosParticulares,u={on:"btn btn-primary",off:"btn btn-outline-primary"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row justify-content-center mt-5"},r.a.createElement($o,{options:n,setFunction:function(e){t({type:"setUnidad",payload:e})},groupStyles:"btn-group btn-group-toggle",buttonStyles:u})),r.a.createElement("div",{className:"row d-flex justify-content-around"},r.a.createElement("div",{className:"mt-3"},r.a.createElement($o,{options:c,setFunction:function(e){t({type:"changeModulo",payload:{unidad:"primeraUnidad",modulo:e}})},groupStyles:"btn-group btn-group-toggle",buttonStyles:u})),r.a.createElement("div",{className:"mt-3"},r.a.createElement($o,{options:l,setFunction:function(e){t({type:"changeModulo",payload:{unidad:"segundaUnidad",modulo:e}})},groupStyles:"btn-group btn-group-toggle",buttonStyles:u})),r.a.createElement("div",{className:"mt-3"},r.a.createElement($o,{options:i,setFunction:function(e){t({type:"changeModulo",payload:{unidad:"terceraUnidad",modulo:e}})},groupStyles:"btn-group btn-group-toggle",buttonStyles:u})),r.a.createElement("div",{className:"mt-3"},r.a.createElement($o,{options:s,setFunction:function(e){t({type:"changeModulo",payload:{unidad:"pozosParticulares",modulo:e}})},groupStyles:"btn-group btn-group-toggle",buttonStyles:u}))))},ac={unidades:{primeraUnidad:!1,segundaUnidad:!1,terceraUnidad:!1,pozosParticulares:!1},modulosPorUnidad:{primeraUnidad:{4:!1,5:!1,6:!1,14:!1,15:!1,16:!1},segundaUnidad:{7:!1,8:!1,"9A":!1,"9B":!1,10:!1,11:!1,12:!1,17:!1,18:!1,19:!1,20:!1},terceraUnidad:{1:!1,2:!1,3:!1,21:!1,22:!1,23:!1},pozosParticulares:{UNI01:!1,UNI02:!1,UNI03:!1}}},tc=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.privilegios,t=e.modulo,o=Object(l.c)((function(e){return e.scenes.reportesScreen})),c=o.autorizados,i=o.expedicion,s=Qa(),u=Object(Ca.a)(s,4),d=u[0],m=u[1],p=u[3];0===Object.keys(d).length&&p({opcion:"modulo"});var E=Object(n.useReducer)(Ko,ac),f=Object(Ca.a)(E,2),v=f[0],b=f[1],N=v.unidades,h=v.modulosPorUnidad,g=h.primeraUnidad,O=h.segundaUnidad,A=h.terceraUnidad,x=h.pozosParticulares;Object(n.useEffect)((function(){b({type:"changeGroup"})}),[N]);var y=function(){var e=[];return Object.keys(g).forEach((function(a){g[a]&&e.push(a)})),Object.keys(O).forEach((function(a){O[a]&&e.push(a)})),Object.keys(A).forEach((function(a){A[a]&&e.push(a)})),Object.keys(x).forEach((function(a){x[a]&&e.push(a)})),e};return r.a.createElement("div",null,r.a.createElement("div",{className:"row m-0 "},r.a.createElement("div",{className:"col-sm-12 p-3 d-flex justify-content-center"},r.a.createElement("h2",null,"Reporte Expedici\xf3n"))),r.a.createElement("div",{className:"row justify-content-center"},a.accesoGlobal&&r.a.createElement(Wo,{inputName:"opcion",options:[{id:"global",label:"Global"},{id:"Baja California",label:"Baja California"},{id:"Sonora",label:"Sonora"},{id:"modulos",label:"Modulos"}],formValues:d,setFunction:m,styles:{group:"btn-group btn-group-toggle",button:"btn btn-outline-primary"}})),"modulos"===d.opcion&&r.a.createElement(ec,{state:v,dispatch:b}),(a.accesoGlobal&&"global"===d.opcion||"Baja California"===d.opcion||"Sonora"===d.opcion)&&r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-sm-12 pt-5"},r.a.createElement(Xo,{modulos:[],data:Yo(Ho(c,i),d.opcion,[])}))),a.accesoGlobal&&"modulos"===d.opcion&&y().length>0&&r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-sm-12 pt-5"},r.a.createElement(Xo,{modulos:y(),data:Yo(Ho(c,i),d.opcion,y())}))),!a.accesoGlobal&&r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-sm-12 pt-5"},c&&i&&r.a.createElement(Xo,{modulos:[t],data:Yo(Ho(c,i),d.opcion,[t])}))))},nc=function(e,a){return Ra.collection("autorizados").doc(a).collection("modulos").doc("Modulo-".concat(e)).collection("autorizados").orderBy("modulo").get()},rc=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t,n;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=yn.map((function(e){return nc("dev"!==e?e:99,a)})),e.next=4,Promise.all(n);case 4:return e.sent.forEach((function(e){e.forEach((function(e){"0-SIN CULTIVO"!==e.id&&t.push(Object(u.a)({id:e.id},e.data()))}))})),0===t.length&&(t=!1),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),oc=function(e,a){return Ra.collection("permisos").doc(a).collection("modulos").doc("Modulo-".concat(e)).collection("permisosPorCultivo").orderBy("modulo").get()},cc=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t,n;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=yn.map((function(e){return oc("dev"!==e?e:99,a)})),e.next=4,Promise.all(n);case 4:return e.sent.forEach((function(e){e.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}))})),0===t.length&&(t=!1),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),lc=function(e){return{type:sa,payload:e}},ic=function(e){return{type:ua,payload:e}},sc=function(){var e=Object(Pa.a)(ya.a.mark((function e(a,t,n,r){var o,c,l;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],c=[],l=Ra.collection("permisos").doc(r).collection("modulos").doc("Modulo-".concat(n)).collection("permisos"),c.push(l.orderBy(t).startAt(a.toUpperCase()).endAt(a.toUpperCase()+"\uf8ff").get()),c.push(l.where(t,"==",Number(a)).get()),e.next=7,Promise.all(c);case 7:return e.sent.forEach((function(e){e.forEach((function(e){o.push(Object(u.a)({id:e.id},e.data()))}))})),0===o.length&&ka.a.fire("No se encontraron permisos ","...","warning"),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(a,t,n,r){return e.apply(this,arguments)}}(),uc=t(133),dc=t.n(uc),mc=function(e){var a=e.title,t=e.pages,n=e.page,o=Object(l.c)((function(e){return e.auth})),c=o.name,i=o.entidad,s=o.img,u=o.variablesGlobales,d=Date.now(),m=new Date(d);return r.a.createElement("div",{className:"row border rounded border-dark m-0"},r.a.createElement("div",{className:"col-2 p-3"},r.a.createElement("img",{className:"align-self-center",src:"./logos/".concat(s),alt:"Logo de la entidad",style:{maxHeight:80}})),r.a.createElement("div",{className:"col-4 p-3"},r.a.createElement("div",{className:""},i," "),r.a.createElement("div",{className:""},"Distrito de riego 014 Rio Colorado"),r.a.createElement("div",{className:""},"Operador: ".concat(c)," ")),r.a.createElement("div",{className:"col-3 p-3 d-flex flex-column"},r.a.createElement("b",null,a),r.a.createElement("b",null,"Ciclo: ",u.cicloActual)),r.a.createElement("div",{className:"col-3 p-3 d-flex flex-column"},r.a.createElement("div",null,"Fecha: ",m.toLocaleDateString()),r.a.createElement("div",null,"Pagina ",n," de ",t)))},pc=Object(n.forwardRef)((function(e,a){for(var t=e.title,n=e.headers,o=e.data,c=e.rowsPerPage,l=e.orientation,i=void 0===l?"portrait":l,s=[],u=0;u<o.length;u+=c){var d=o.slice(u,u+c);s.push(d)}return r.a.createElement("div",{ref:a},s.map((function(e,a){return r.a.createElement("div",{key:a,className:"page-break"},r.a.createElement("style",null,"@page { margin: ".concat(60," ").concat(60," ").concat(60," ").concat(60," !important; size:letter ").concat(i,";}")),r.a.createElement(mc,{title:t,pages:s.length,page:a+1}),r.a.createElement("table",{className:"table table-sm table-striped border mt-4",style:{fontSize:12}},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,n.map((function(e){return r.a.createElement("th",{key:"".concat(a,"-").concat(e.id),scope:"col",className:e.styles},e.header)})))),r.a.createElement("tbody",null,e&&e.map((function(e,t){return r.a.createElement("tr",{key:"".concat(a,"-").concat(t,"-").concat(e[0])},n.map((function(t,n){return r.a.createElement("td",{key:"".concat(a,"-").concat(n,"-").concat(t.id),className:t.styles},e[t.id])})))})))))})))})),Ec=function(e){var a=e.title,t=e.headers,o=e.data,c=e.rowsPerPage,l=e.orientation,i=Object(n.createRef)();return r.a.createElement("div",{className:"container"},r.a.createElement(dc.a,{trigger:function(){return r.a.createElement("button",{className:"btn btn-outline-primary d-print-none mb-4"},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir"))},content:function(){return i.current},pageStyle:"bootstrap/dist/css/bootstrap.min.css"}),r.a.createElement(pc,{title:a,headers:t,data:o,ref:i,rowsPerPage:c,orientation:l,className:"mt-0"}))},fc=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.modulo,t=e.variablesGlobales.cicloActual,o=Qa({palabra:""}),c=Object(Ca.a)(o,2),i=c[0],s=c[1],u=i.palabra,d=Object(n.useState)([]),m=Object(Ca.a)(d,2),p=m[0],E=m[1],f="localidad",v=function(){var e=Object(Pa.a)(ya.a.mark((function e(){var n;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sc(u,"seccion",a,t);case 2:n=e.sent,E(b(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(e){var a=function(e,a){var t=[];return e.forEach((function(e){-1===t.indexOf(e[a])&&t.push(e[a])})),t.sort((function(e,a){return e>a?1:e<a?-1:0})),t}(e,"seccion"),t=[],n=[];return a.forEach((function(a){t.push(e.filter((function(e){return e.seccion===a})))})),t.forEach((function(e){e.sort((function(e,a){return e[f]>a[f]?1:e[f]<a[f]?-1:0})),e.forEach((function(e){n.push(e)}))})),n};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container d-flex mb-4 col-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Seccion",name:"palabra",autoComplete:"off",value:u,onChange:s,onKeyUp:function(e){"Enter"===e.key&&v()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:v},r.a.createElement("i",{className:"fas fa-search"}))),p.length>0&&r.a.createElement(Ec,{title:"Reporte de permisos",headers:[{id:"cuenta",header:"CUENTA",styles:"",sum:!1,count:!1},{id:"numeroPermiso",header:"PERMISO",styles:"",sum:!1,count:!0},{id:"usuario",header:"USUARIO",styles:"",sum:!1,count:!1},{id:"nombreProductor",header:"PRODUCTOR",styles:"longCell",sum:!1,count:!1},{id:"seccion",header:"SECCION",styles:"text-center",sum:!1,count:!1},{id:"localidad",header:"LOCALIDAD",styles:"",sum:!1,count:!1},{id:"lote",header:"LOTE",styles:"text-center",sum:!1,count:!1},{id:"nombreCultivo",header:"CULTIVO",styles:"",sum:!1,count:!1},{id:"supAutorizada",header:"SUPERFICIE",styles:"text-center",sum:!0,count:!1}],data:p,rowsPerPage:24,orientation:"landscape"}))},vc=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.privilegios,t=e.variablesGlobales.cicloActual,o=Qa(),c=Object(Ca.a)(o,2),i=c[0],s=c[1],u=Object(l.b)();return Object(n.useEffect)((function(){u(function(e){return function(){var a=Object(Pa.a)(ya.a.mark((function a(t){var n;return ya.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,cc(e);case 2:n=a.sent,t(lc(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t)),u(function(e){return function(){var a=Object(Pa.a)(ya.a.mark((function a(t){var n;return ya.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,rc(e);case 2:n=a.sent,t(ic(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t))}),[u,t]),r.a.createElement("div",{className:"mt-5"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(Wo,{inputName:"reportType",options:[{id:"expedicion",label:"expedicion"},{id:"permisos",label:"permisos"},{id:"permisos/seccion",label:"permisos/seccion"}],formValues:i,setFunction:s,styles:{group:"btn-group btn-group-toggle d-print-none",button:"btn btn-outline-primary"}})),r.a.createElement("div",{className:"mt-5"},"expedicion"===i.reportType&&a.consultarExpedicion&&r.a.createElement(tc,null)),r.a.createElement("div",{className:"mt-5"},"permisos"===i.reportType&&a.consultarPermisos&&r.a.createElement(Fo,null)),r.a.createElement("div",{className:"mt-5"},"permisos/seccion"===i.reportType&&a.consultarPermisos&&r.a.createElement(fc,null)),r.a.createElement("div",{className:"pb-5"}))},bc=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],"dev"!==a){e.next=6;break}return e.next=4,Ra.collection("usuarios").orderBy("claveEntidad").get();case 4:e.sent.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}));case 6:if("CNA"!==a){e.next=11;break}return e.next=9,Ra.collection("usuarios").where("claveEntidad","!=","CESVBC").orderBy("claveEntidad").get();case 9:e.sent.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}));case 11:if("CESVBC"!==a){e.next=16;break}return e.next=14,Ra.collection("usuarios").where("claveEntidad","==","CESVBC").get();case 14:e.sent.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}));case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Nc=function(){var e=Object(Pa.a)(ya.a.mark((function e(){var a;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,Ra.collection("roles").get();case 3:return e.sent.forEach((function(e){a.push(e.id)})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hc=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("roles").doc(a).get();case 2:return t=e.sent,e.abrupt("return",t.data());case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),gc=function(e){return function(){var a=Object(Pa.a)(ya.a.mark((function a(t){var n;return ya.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,bc(e);case 2:n=a.sent,t(Oc(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Oc=function(e){return{type:He,payload:e}},Ac=function(e){return function(a){a(Da()),a(function(e){return{type:_e,payload:e}}(e))}},xc=function(){return function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nc();case 2:t=e.sent,a(yc(t));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},yc=function(e){return{type:Xe,payload:e}},Pc=function(e){return{type:Qe,payload:e}},Cc=function(e){return{type:$e,payload:e}},jc=function(){var e=Qa({newRole:""}),a=Object(Ca.a)(e,2),t=a[0],n=a[1],o=t.newRole,c=Object(l.b)(),i=function(){var e;o.length>0&&(e=o,Ra.collection("roles").doc(e).set({}).then((function(){return console.log("Se guardo rol -> ".concat(e)),!0})).catch((function(e){console.log(e)})),c(xc()))};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("label",null,"Crear nuevo rol:")),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Nuevo Rol",name:"newRole",autoComplete:"off",value:o,onChange:n,onKeyUp:function(e){"Enter"===e.key&&i()}})),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:i},r.a.createElement("span",null,"Agregar "),r.a.createElement("i",{className:"fas fa-plus"}))))},zc=function(){var e=Object(Pa.a)(ya.a.mark((function e(a){return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ra.collection("roles").doc(a).delete().then((function(){console.log("Rol de usuario borrado (".concat(a,")"))})).catch((function(e){console.error("Error removing document: ",e)}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Sc=function(){var e=Object(l.c)((function(e){return e.entidades})).userRoles,a=Object(l.b)(),t=Qa(),n=Object(Ca.a)(t,2),o=n[0],c=n[1],i=o.selectedRole;if(e||a(xc()),e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},"Gestionar rol:"),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("select",{type:"text",name:"selectedRole",value:i,onChange:c,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"Rol"),e.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"col-sm-4 d-flex"},i?r.a.createElement("button",{onClick:function(e){var t;e.preventDefault(),i&&a((t=i,function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var n;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hc(t);case 2:n=e.sent,a(Pc(t)),a({type:ea}),a(Cc(n));case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()))},className:"btn btn-outline-primary"},r.a.createElement("span",null,"Editar Rol "),r.a.createElement("i",{className:"fas fa-edit"})):r.a.createElement(r.a.Fragment,null),i?r.a.createElement("button",{onClick:function(){ka.a.fire({title:"Atenci\xf3n!!",text:"Esta apunto de borrar el rol de usuario ".concat(i,", \xbfRealmente desea borrarlo?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then((function(e){e.isConfirmed&&(zc(i),a({type:Je}),a({type:We}),a(xc()),ka.a.fire("Rol: ".concat(i),"Se borro el rol con \xe9xito !","success"))}))},className:" btn btn-outline-danger ml-4"},r.a.createElement("span",null,"Borrar")):r.a.createElement(r.a.Fragment,null)))}return r.a.createElement(r.a.Fragment,null)},wc=function(){var e=Object(Pa.a)(ya.a.mark((function e(a,t){return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ra.collection("roles").doc(a).set(t).then((function(){ka.a.fire("Rol: ".concat(a),"Se actualizaron los privilegios con \xe9xito !","success")})).catch((function(e){console.error("Error writing document: ",e)}));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Rc=function(){var e=Object(l.c)((function(e){return e.entidades})),a=e.userRoleSelected,t=e.privilegesToEdit;Object.getOwnPropertyNames(t).map((function(e){return Pn[e]=t[e],!0}));var n=Qa(Pn),o=Object(Ca.a)(n,2),c=o[0],i=o[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),wc(a,c)},className:"border rounded p-4"},r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-sm-8"},"PRIVILEGIOS PARA EL ROL:","  ",r.a.createElement("span",{className:"text-success font-weight-bold"},a)),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("button",{type:"submit",className:" btn btn-outline-primary"},"Guardar"))),r.a.createElement("div",{className:"form-check d-flex flex-wrap"},Object.getOwnPropertyNames(Pn).map((function(e){return r.a.createElement("div",{key:e,className:"w-25 p-1"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",name:e,id:e,onChange:i,checked:c[e]}),r.a.createElement("label",{className:"form-check-label",htmlFor:"todos"},e))}))))},Ic={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};Xn.a.setAppElement("#root");var Dc=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.ui})).isOpenUserRoleModal,t=Object(l.c)((function(e){return e.entidades})),n=t.privilegesToEdit,o=t.userRoleSelected;return r.a.createElement(Xn.a,{isOpen:a,onRequestClose:function(){e({type:ma})},style:Ic,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement("div",{className:"p-4"},r.a.createElement(jc,null)),r.a.createElement("div",{className:"p-4"},r.a.createElement(Sc,null)),r.a.createElement("div",{className:"p-4"},n&&o?r.a.createElement(Rc,null):r.a.createElement(r.a.Fragment,null)))},Uc=function(){var e=Object(l.b)();return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:function(){e({type:da})}},r.a.createElement("span",null,"Gestionar Roles "),r.a.createElement("i",{className:"fa fa-edit"})))},Mc=function(){var e=Object(l.c)((function(e){return e.entidades})).systemUserSelected,a=Object(l.c)((function(e){return e.ui})).msgError,t=Object(l.c)((function(e){return e.auth})),n=t.claveEntidad,o=t.privilegios,c=Object(l.c)((function(e){return e.entidades})).userRoles,i=Qa(),s=Object(Ca.a)(i,2),u=s[0],d=s[1],m=u.rol,p=Object(l.b)();c||p(xc());var E=function(){return m?(p(Da()),!0):(p(Ia("Seleccione un rol de usuario")),!1)};return e?r.a.createElement("div",{className:"row border border-info rounded m-1"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row border-bottom border-info p-2"},r.a.createElement("div",{className:"col-12 d-flex justify-content-center"},r.a.createElement("h5",null,"Cuenta: ",e.email))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 d-flex flex-column p-4"},r.a.createElement("div",null,"Usuario: ",e.displayName),r.a.createElement("div",null,"Clave Entidad: ",e.claveEntidad),"sinAsignar"===e.rol?r.a.createElement("div",{className:"text-warning"},"Rol: ",e.rol):r.a.createElement("div",{className:"text-success"},"Rol: ",e.rol),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),E()&&(!function(e,a){Ra.collection("usuarios").doc(e).update({rol:a}).then((function(){return ka.a.fire("Usuario habilitado","Se asign\xf3 correctamente el rol de usuario","success"),!0})).catch((function(e){console.log(e),ka.a.fire("Error",e,"error")}))}(e.id,m),p(gc(n)),p({type:Ke}))},className:"form-group pt-3"},r.a.createElement("select",{type:"text",name:"rol",value:m,onChange:d,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"Rol"),r.a.createElement("option",{value:"sinAsignar"},"Sin Asignar"),c.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-block mt-3 mb-5"},"Asignar Rol"),a&&r.a.createElement("div",{className:"auth__alert-error"},a)),o.editarRoles?r.a.createElement(Uc,null):r.a.createElement(r.a.Fragment,null))))):r.a.createElement(r.a.Fragment,null)},kc=function(){var e=Object(l.c)((function(e){return e.entidades})).systemUsers,a=Object(l.c)((function(e){return e.auth})).claveEntidad,t=Object(l.b)(),n=[];return e||t(gc(a)),e?(n=Object.values(e),r.a.createElement(qt,{title:0===n.length?"No se encontraron usuarios":"Usuarios",columns:Jt,data:n,setFunction:Ac})):r.a.createElement(r.a.Fragment,null)},Tc=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:""},r.a.createElement("h3",null,"Gesti\xf3n de roles de usuarios")),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(kc,null)),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement(Mc,null))))},Lc=function(){var e=Object(Pa.a)(ya.a.mark((function e(){var a,t,n,r=arguments;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:Cn,t=Ra.collection("entidades"),n=[],a.forEach((function(e){t.doc(e.clave).get().then((function(a){a.exist?n.push(t.doc(e.clave).update(e)):n.push(t.doc(e.clave).set(e))})).catch((function(a){console.log("Error al actualizar entidad (".concat(e.clave,")"),a)}))})),e.next=6,Promise.all(n).then(ka.a.fire("Cambios guardados","Se actualizaron con \xe9xito los datos de las entidades.","success"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fc=function(){var e=Object(l.c)((function(e){return e.entidades})).entities,a=Object(l.c)((function(e){return e.auth})).privilegios,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=Object(n.useState)(e),t=Object(Ca.a)(a,2),r=t[0],o=t[1],c=function(){o(e)},l=function(e){var a=e.target,t=a.name.split("-"),n=t[0],c=t[1],l=r.slice();"button"===a.type?l[n][c]=!l[n][c]:"number"===a.type?l[n][c]=Number(a.value):l[n][c]=a.value,o(l)};return[r,l,c]}(e),o=Object(Ca.a)(t,2),c=o[0],i=o[1],s=function(){Lc(c)};return r.a.createElement("div",null,r.a.createElement("div",{className:"mb-4"},r.a.createElement("h3",null,"Edici\xf3n de entidades")),e!==c&&a.editarEntidades&&r.a.createElement("div",{className:"row mb-3 d-flex justify-content-center mt-4"},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:s},r.a.createElement("span",null," Actualizar Entidades"))),r.a.createElement("form",null,e.map((function(t,n){return"dev"!==t.clave?r.a.createElement("div",{key:t.clave,className:"d-flex flex-column mb-5"},r.a.createElement("h5",null,t.nombre),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-2 mt-3 h-100 d-flex justify-content-center align-items-center"},r.a.createElement("img",{className:"align-self-center",src:"./logos/".concat(t.img),alt:"Logo de la entidad",style:{maxHeight:70,maxWidth:100}})),r.a.createElement("div",{className:"col-sm-8 mt-3"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("label",{className:"align-self-center col-sm-2",htmlFor:"".concat(n,"-titular")},"Titular:"),r.a.createElement("input",{type:"text",className:"form-control ml-2",id:"".concat(n,"-titular"),name:"".concat(n,"-titular"),autoComplete:"off",value:c[n].titular,onChange:i})),r.a.createElement("div",{className:"d-flex mt-2"},r.a.createElement("label",{className:"align-self-center col-sm-2",htmlFor:"".concat(n,"-direccion")},"Direccion:"),r.a.createElement("input",{type:"text",className:"form-control ml-2",id:"".concat(n,"-direccion"),name:"".concat(n,"-direccion"),autoComplete:"off",value:e[n].direccion,onChange:i})),"SADER"!==t.clave&&"CNA"!==t.clave&&"SRL"!==t.clave&&"CESVBC"!==t.clave&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex mt-2"},r.a.createElement("label",{className:"align-self-center col-sm-2",htmlFor:"".concat(n,"-dotacionGravedad")},"Dotaci\xf3n Gravedad:"),r.a.createElement("input",{type:"number",className:"form-control ml-2 w-25",id:"".concat(n,"-dotacionGravedad"),name:"".concat(n,"-dotacionGravedad"),autoComplete:"off",value:e[n].dotacionGravedad,onChange:i})),r.a.createElement("div",{className:"d-flex mt-2"},r.a.createElement("label",{className:"align-self-center col-sm-2",htmlFor:"".concat(n,"-dotacionPozo")},"Dotaci\xf3n Pozo:"),r.a.createElement("input",{type:"number",className:"form-control ml-2 w-25",id:"".concat(n,"-dotacionPozo"),name:"".concat(n,"-dotacionPozo"),autoComplete:"off",value:e[n].dotacionPozo,onChange:i})))),a.cerrarExpedicionModulos&&"SADER"!==t.clave&&"CNA"!==t.clave&&"SRL"!==t.clave&&"CESVBC"!==t.clave&&r.a.createElement("div",{className:"col-sm-2 mt-3"},"Expedici\xf3n:",r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("button",{type:"button",name:"".concat(n,"-expedicionActivaModulo"),className:e[n].expedicionActivaModulo?"btn btn-primary":"btn btn-outline-primary",onClick:i},"Activa"),r.a.createElement("button",{type:"button",name:"".concat(n,"-expedicionActivaModulo"),className:e[n].expedicionActivaModulo?"btn btn-outline-primary":"btn btn-primary",onClick:i},"Cerrada"))))):r.a.createElement("div",{key:t.clave})}))),e!==c&&a.editarEntidades&&r.a.createElement("div",{className:"mb-3 d-flex justify-content-center mt-4"},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:s},r.a.createElement("span",null," Actualizar Entidades"))))},Gc=function(){var e=Object(Pa.a)(ya.a.mark((function e(){var a,t;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra.collection("entidades").orderBy("nombre").get();case 2:return a=e.sent,t=[],a.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Vc=function(e){return{type:O,payload:e}},Bc=function(){var e=Object(l.c)((function(e){return e.auth})).privilegios,a=Object(l.c)((function(e){return e.entidades})).entities,t=Object(l.b)();a||t(function(){var e=Object(Pa.a)(ya.a.mark((function e(a){var t;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gc();case 2:t=e.sent,a(Vc(t));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());var n=Qa(),o=Object(Ca.a)(n,2),c=o[0],i=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row pt-4"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center"},r.a.createElement("h1",null,"Configuracion"))),r.a.createElement("div",{className:"row justify-content-center pt-4"},r.a.createElement(Wo,{inputName:"module",options:[{id:"usuarios",label:"usuarios"},{id:"entidades",label:"entidades"}],formValues:c,setFunction:i,styles:{group:"btn-group btn-group-toggle d-print-none",button:"btn btn-outline-primary"}})),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-12"},"usuarios"===c.module&&e.asignarRoles&&r.a.createElement(Tc,null))),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-12"},"entidades"===c.module&&e.editarEntidades&&r.a.createElement(Fc,null))),r.a.createElement(Dc,null))},Yc=function(){var e=[{id:"cuenta",header:"CUENTA",styles:"",sum:!1,count:!1},{id:"numeroPermiso",header:"PERMISO",styles:"",sum:!1,count:!0},{id:"usuario",header:"USUARIO",styles:"",sum:!1,count:!1},{id:"nombreProductor",header:"PRODUCTOR",styles:"longCell",sum:!1,count:!1},{id:"seccion",header:"SECCION",styles:"text-center",sum:!1,count:!1},{id:"localidad",header:"LOCALIDAD",styles:"",sum:!1,count:!1},{id:"lote",header:"LOTE",styles:"text-center",sum:!1,count:!1},{id:"nombreCultivo",header:"CULTIVO",styles:"",sum:!1,count:!1},{id:"supAutorizada",header:"SUPERFICIE",styles:"text-center",sum:!0,count:!1}],a=Object(l.c)((function(e){return e.auth})),t=a.modulo,o=a.variablesGlobales.cicloActual,c=Qa({palabra:"",campo:"",filter:"",order1:""}),i=Object(Ca.a)(c,2),s=i[0],u=i[1],d=s.palabra,m=s.campo,p=s.filter,E=s.order1,f=Object(n.useState)([]),v=Object(Ca.a)(f,2),b=v[0],N=v[1];console.log(b);var h=function(){var a=e.find((function(e){return e.id===m}));return a?"REPORTE DE PERMISOS POR ".concat(a.header):"REPORTE DE PERMISOS"}(),g=function(){var e=Object(Pa.a)(ya.a.mark((function e(){var a;return ya.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.length){e.next=5;break}return e.next=3,sc(d,m,t,o);case 3:a=e.sent,N(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container mb-4 col-sm-8"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"d-flex col-sm-8"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"PARAMETRO DE BUSQUEDA",name:"palabra",autoComplete:"off",value:d,onChange:u,onKeyUp:function(e){"Enter"===e.key&&g()}})),r.a.createElement("div",{className:"d-flex col-sm-4"},r.a.createElement("select",{name:"campo",type:"text",value:m,onChange:u,className:"form-control ml-2"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"BUSCAR EN"),e.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.header)}))),r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:g},r.a.createElement("i",{className:"fas fa-search"})))),b.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"d-flex col-sm-8"},r.a.createElement("select",{name:"filter",type:"text",value:p,onChange:u,className:"form-control ml-2"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"ORDENAR POR"),e.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.header)}))))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"d-flex col-sm-8"},r.a.createElement("select",{name:"order1",type:"text",value:E,onChange:u,className:"form-control ml-2"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"ORDENAR POR"),e.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.header)})))),r.a.createElement("div",{className:"d-flex col-sm-4"},r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-2 ",type:"button",onClick:function(){return function(){var a=b.filter((function(e){return"SUBTOTAL"!==e.cuenta&&"TOTAL"!==e.cuenta})),t=function(e,a){var t=[];return e.forEach((function(e){-1===t.indexOf(e[a])&&t.push(e[a])})),t.sort((function(e,a){return e>a?1:e<a?-1:0})),t}(a,p),n=[],r=[],o={cuenta:"TOTAL"};t.forEach((function(e){n.push(a.filter((function(a){return a[p]===e})))})),n.forEach((function(a){var t={cuenta:"SUBTOTAL"};a.sort((function(e,a){return e[E]<a[E]?1:e[E]>a[E]?-1:0})),a.forEach((function(a){e.forEach((function(e){e.sum&&(t[e.id]?t[e.id]+=a[e.id]:t[e.id]=a[e.id],o[e.id]?o[e.id]+=a[e.id]:o[e.id]=a[e.id]),e.count&&(t[e.id]?t[e.id]++:t[e.id]=1,o[e.id]?o[e.id]++:o[e.id]=1)})),r.push(a)})),r.push(t)})),r.push(o),N(r)}()}},"Filtrar"))))),b.length>0&&r.a.createElement(Ec,{title:h,headers:e,data:b,rowsPerPage:24,orientation:"landscape"}))},qc=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row justify-content-center pt-5"},r.a.createElement("h1",null,"TestArea")),r.a.createElement("div",{className:"row"},r.a.createElement(Yc,null)))},Zc=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.name,t=e.entidad,n=e.img,o=e.variablesGlobales,c=e.claveEntidad;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row d-flex justify-content-between header"},r.a.createElement("div",{className:"col-sm-2 text-center "},r.a.createElement("div",{className:"border rounded h-100 d-flex justify-content-center"},r.a.createElement("img",{className:"align-self-center",src:"./logos/".concat(n),alt:"Logo de la entidad",style:function(e){switch(e){case"SADER":case"CNA":case"UNI01":case"UNI02":case"UNI03":return{maxWidth:140};default:return{maxHeight:100}}}(c)}))),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("div",{className:"card border"},r.a.createElement("div",{className:"card-header d-inline-flex"},r.a.createElement("div",{className:"div"},"".concat(t," - Operador: ").concat(a)," "),r.a.createElement("div",{className:"div ml-5"},r.a.createElement("b",null,"Ciclo: ",o.cicloActual))),r.a.createElement("div",{className:"card-body text-dark"},r.a.createElement("h5",{className:"card-title"},"Plataforma digital"),r.a.createElement("p",{className:"card-text"},"Distrito de riego 014 Rio Colorado"))))))},Hc=function(){return r.a.createElement("div",{className:"container-fluid pr-4"},r.a.createElement(ct,null),r.a.createElement(Zc,null),r.a.createElement(za.d,null,r.a.createElement(za.b,{exact:!0,path:"/sicper",component:Vt}),r.a.createElement(za.b,{exact:!0,path:"/padron",component:Bn}),r.a.createElement(za.b,{exact:!0,path:"/permisos",component:Ar}),r.a.createElement(za.b,{exact:!0,path:"/nuevo-permiso",component:Vr}),r.a.createElement(za.b,{exact:!0,path:"/transferencias",component:io}),r.a.createElement(za.b,{exact:!0,path:"/asignacion",component:po}),r.a.createElement(za.b,{exact:!0,path:"/labores",component:Ao}),r.a.createElement(za.b,{exact:!0,path:"/autorizados",component:zo}),r.a.createElement(za.b,{exact:!0,path:"/reportes",component:vc}),r.a.createElement(za.b,{exact:!0,path:"/configuracion",component:Bc}),r.a.createElement(za.b,{exact:!0,path:"/test",component:qc}),r.a.createElement(za.a,{to:"/sicper"})))},_c=t(57),Kc=function(e){var a=e.isAuthenticated,t=e.component,n=Object(_c.a)(e,["isAuthenticated","component"]);return localStorage.setItem("lastPath",n.location.pathname),r.a.createElement(za.b,Object.assign({},n,{component:function(e){return a?r.a.createElement(t,e):r.a.createElement(za.a,{to:"/auth/login"})}}))},Xc=function(e){var a=e.isAuthenticated,t=e.component,n=Object(_c.a)(e,["isAuthenticated","component"]);return r.a.createElement(za.b,Object.assign({},n,{component:function(e){return a?r.a.createElement(za.a,{to:"/"}):r.a.createElement(t,e)}}))},Jc=function(){var e=Object(l.b)(),a=Object(n.useState)(!0),t=Object(Ca.a)(a,2),o=t[0],c=t[1],i=Object(n.useState)(!1),s=Object(Ca.a)(i,2),u=s[0],d=s[1];return Object(n.useEffect)((function(){wa.a.auth().onAuthStateChanged(function(){var a=Object(Pa.a)(ya.a.mark((function a(t){var n,r,o,l,i,s,u,m,p,E,f,v;return ya.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(null===t||void 0===t?void 0:t.uid)){a.next=21;break}return a.next=3,Ba(t.uid);case 3:return n=a.sent,a.next=6,Ya(n.claveEntidad);case 6:return r=a.sent,a.next=9,qa(n.rol);case 9:return o=a.sent,l=r.nombre,i=r.img,s=r.clave,u=r.dotacionGravedad,m=r.dotacionPozo,p=r.titular,E=r.direccion,f=r.expedicionActivaModulo,e(La(t.uid,t.displayName)),e(Fa(l,i,s,u,m,p,E,f,n.rol,n.modulo)),e(Ha(o)),a.next=16,Za();case 16:v=a.sent,e(Ga(v)),d(!0),a.next=22;break;case 21:d(!1);case 22:c(!1);case 23:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}),[e,c,d]),o?r.a.createElement("div",{className:"container pt-5 d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Cargando..."))):r.a.createElement(ja.a,null,r.a.createElement("div",null,r.a.createElement(za.d,null,r.a.createElement(Xc,{path:"/auth",component:tt,isAuthenticated:u}),r.a.createElement(Kc,{exat:!0,isAuthenticated:u,path:"/",component:Hc}),r.a.createElement(za.a,{to:"/auth/login"}))))},Qc=function(){return r.a.createElement("div",null,r.a.createElement("script",{srs:"filesaver.js"}),r.a.createElement(l.a,{store:Aa},r.a.createElement(Jc,null)))};t(347),t(348);c.a.render(r.a.createElement(Qc,null),document.getElementById("root"))}},[[134,1,2]]]);
//# sourceMappingURL=main.1464e101.chunk.js.map