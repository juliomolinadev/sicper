(this.webpackJsonpsicper=this.webpackJsonpsicper||[]).push([[0],{134:function(e,a,t){e.exports=t(350)},148:function(e,a,t){},349:function(e,a,t){},350:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(24),c=t.n(o),l=t(3),s=t(36),i=t(126),u=t(1),m="[Login] Login",d="[Login] Entity",p="[Login] Logout",E="[Login] Privilegios",f="[UI] Set Error",b="[UI] Remove Error",v="[UI] Start Loading",N="[UI] Finish Loading",h="[Alta Permisos] Open permiso modal",g="[Alta Permisos] Close permiso modal",O="[Alta Permisos] Open cultivos modal",x="[Alta Permisos] Close cultivos modal",y="[Alta Permisos] Load cultivos",A="[Alta Permisos] Clear cultivos",j="[Alta Permisos] Set cultivo",C="[Alta Permisos] unset cultivo",P="[Alta Permisos] Open usuarios modal",z="[Alta Permisos] Close usuarios modal",w="[Alta Permisos] Clear usuarios",S="[Alta Permisos] Set usuarios",R="[Alta Permisos] Set usuario",D="[Alta Permisos] Unset usuario",k="[Alta Permisos] Open productores modal",I="[Alta Permisos] Close productores modal",M="[Alta Permisos] Load prosuctores",L="[Alta Permisos] Clear prosuctores",U="[Alta Permisos] Set productor",F="[Alta Permisos] Unset productor",T="[Alta Permisos] Open nuevo prouctor modal",G="[Alta Permisos] Close nuevo prouctor modal",V="[Alta Permisos] Set form value",B="[Alta Permisos] Set onSubmit data",Y="[Alta Permisos] unSet onSubmit data",q="[Alta Permisos] Set en espera",H="[Alta Permisos] unSet en espera",_="[Alta Permisos] Enable save button",K="[Alta Permisos] Disable save button",Z="[Alta Permisos] Enable print button",X="[Alta Permisos] Disable print button",J="[Permisos Screen] Set permisos",W="[Permisos Screen] Unset permisos",Q="[Permisos Screen] Set permiso selected",$="[Permisos Screen] Unset permiso selected",ee="[Permisos Screen] Set superficies",ae="[Permisos Screen] Unset superficies",te="[Autorizados Screen] Set modulo",ne="[Autorizados Screen] Unset modulo",re="[Autorizados Screen] Set autorizados",oe="[Autorizados Screen] Unset autorizados",ce="[Autorizados Screen] Open autorizados modal",le="[Autorizados Screen] Close autorizados modal",se="[Autorizados Screen] Set autorizado selected",ie="[Autorizados Screen] Unset autorizado selected",ue="[Autorizados Screen] Set superficie referencia",me="[Autorizados Screen] Unset superficie referencia",de="[Autorizados Screen] Set Form Error",pe="[Autorizados Screen] Unset Form Error",Ee="[Sicper Screen] Set expedicion",fe="[Sicper Screen] Unset expedicion",be="[Sicper Screen] Set superficie normal",ve="[Sicper Screen] Set superficie extra",Ne="[Algodonero Screen] Set permisos",he="[Algodonero Screen] Unset permisos",ge="[Algodonero Screen] Open Modal Sanidad",Oe="[Algodonero Screen] Close Modal Sanidad",xe="[Entidades] Set Data Principales Cultivos",ye="[Entidades] Set permisos",Ae="[Entidades] Set Campo Ordenador",je="[Scenes] Open Imprimir Reporte Modal",Ce="[Scenes] Close Imprimir Reporte Modal",Pe="[Entidades] Set System Users",ze="[Entidades] Set System User Selected",we="[Entidades] Unset System User Selected",Se="[Entidades] Set Users Roles",Re="[Entidades] Unset Users Roles",De="[Entidades] Set User Role Selected",ke="[Entidades] Unset User Role Selected",Ie="[Entidades] Set Privileges To Edit",Me="[Entidades] Unset Privileges To Edit",Le="[Entidades] Set Localties",Ue="[Entidades] Unset Localties",Fe="[Entidades] Set Selected Localties",Te="[Entidades] Unset Selected Localties",Ge="[Entidades] Set Localtie Selected",Ve="[Entidades] Unset Localtie Selected",Be="[Entidades] Open Localties Modal",Ye="[Entidades] Close Localties Modal",qe="[UI] Open User Role Modal",He="[UI] Close User Role Modal",_e={loading:!1,msgError:null},Ke={enEspera:!1,enableSaveButton:!0,enablePrintButton:!1,openUsuariosModal:!1,openProductoresModal:!1,isOpenNuevoProductorModal:!1,openCultivosModal:!1,isOpenPrintPermisoModal:!1,usuarios:[],cultivos:[],productores:[],idUsuarioSelected:null,cuenta:null,usuario:null,supDerecho:null,lote:null,localidad:null,municipio:null,estado:null,modulo:null,seccion:null,canal:null,toma:null,sistema:null,idProductorSelected:null,nombreProductor:null,rfcProductor:null,idCultivoSelected:null,nombreCultivo:null,claveCultivo:null,subciclo:null,cuotaCultivo:null,supPrevia:0,tipo:null,ciclo:null,numeroPermiso:null,fechaEmicion:null,fechaLimite:null,vigencia:null,estadoPermiso:null,variedad:"",supAutorizada:0,fuenteCredito:"",latitud:"",longitud:"",cultivoAnterior:"",observaciones:""},Ze={permisos:[],permisoSelected:null,superficies:null},Xe={modulo:null,openAutorizadosModal:!1,autorizados:[],autorizadoSelected:null,superficieReferencia:null,formError:null},Je={expedicion:null,superficie:"normal"},We={permisos:[],permisoSelected:null,printSanidadModal:!1},Qe={reportesScreen:{openImprimirReporteModal:!1}},$e="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,ea=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case m:return{uid:a.payload.uid,name:a.payload.displayName};case d:return Object(u.a)(Object(u.a)({},e),{},{entidad:a.payload.entidad,img:a.payload.img,claveEntidad:a.payload.claveEntidad,dotacion:a.payload.dotacion,titular:a.payload.titular,rol:a.payload.rol,modulo:a.payload.modulo});case E:return Object(u.a)(Object(u.a)({},e),{},{privilegios:a.payload});case p:return{};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case f:return Object(u.a)(Object(u.a)({},e),{},{msgError:a.payload});case b:return Object(u.a)(Object(u.a)({},e),{},{msgError:null});case v:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case N:return Object(u.a)(Object(u.a)({},e),{},{loading:!1});case qe:return Object(u.a)(Object(u.a)({},e),{},{isOpenUserRoleModal:!0});case He:return Object(u.a)(Object(u.a)({},e),{},{isOpenUserRoleModal:!1});default:return e}},scenes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case je:return Object(u.a)(Object(u.a)({},e),{},{reportesScreen:{openImprimirReporteModal:!0}});case Ce:return Object(u.a)(Object(u.a)({},e),{},{reportesScreen:{openImprimirReporteModal:!1}});default:return e}},entidades:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case xe:return Object(u.a)(Object(u.a)({},e),{},{principalesCultivos:{labels:a.payload.labels,superficiesCultivos:a.payload.superficiesCultivos,numeroPermisos:a.payload.numeroPermisos}});case ye:return Object(u.a)(Object(u.a)({},e),{},{permisos:a.payload});case Ae:return Object(u.a)(Object(u.a)({},e),{},{campoOrdenador:a.payload});case S:return Object(u.a)(Object(u.a)({},e),{},{usuarios:a.payload});case R:return Object(u.a)(Object(u.a)({},e),{},{usuario:a.payload});case Se:return Object(u.a)(Object(u.a)({},e),{},{userRoles:a.payload});case Re:return Object(u.a)(Object(u.a)({},e),{},{userRoles:!1});case De:return Object(u.a)(Object(u.a)({},e),{},{userRoleSelected:a.payload});case ke:return Object(u.a)(Object(u.a)({},e),{},{userRoleSelected:!1});case Ie:return Object(u.a)(Object(u.a)({},e),{},{privilegesToEdit:a.payload});case Me:return Object(u.a)(Object(u.a)({},e),{},{privilegesToEdit:!1});case Pe:return Object(u.a)(Object(u.a)({},e),{},{systemUsers:a.payload});case ze:return Object(u.a)(Object(u.a)({},e),{},{systemUserSelected:a.payload});case we:return Object(u.a)(Object(u.a)({},e),{},{systemUserSelected:null});case Le:return Object(u.a)(Object(u.a)({},e),{},{localties:a.payload});case Ue:return Object(u.a)(Object(u.a)({},e),{},{localties:null});case Fe:return Object(u.a)(Object(u.a)({},e),{},{selectedLocalties:a.payload});case Te:return Object(u.a)(Object(u.a)({},e),{},{selectedLocalties:null});case Ge:return Object(u.a)(Object(u.a)({},e),{},{localtieSelected:a.payload});case Ve:return Object(u.a)(Object(u.a)({},e),{},{localtieSelected:null});case Be:return Object(u.a)(Object(u.a)({},e),{},{openLocaltiesModal:!0});case Ye:return Object(u.a)(Object(u.a)({},e),{},{openLocaltiesModal:!1});default:return e}},sicperScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Ee:return Object(u.a)(Object(u.a)({},e),{},{expedicion:a.payload});case fe:return Object(u.a)(Object(u.a)({},e),{},{expedicion:null});case be:return Object(u.a)(Object(u.a)({},e),{},{superficie:"normal"});case ve:return Object(u.a)(Object(u.a)({},e),{},{superficie:"extra"});default:return e}},permisosScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case J:return Object(u.a)(Object(u.a)({},e),{},{permisos:a.payload});case W:return Object(u.a)(Object(u.a)({},e),{},{permisos:[]});case Q:return Object(u.a)(Object(u.a)({},e),{},{permisoSelected:a.payload});case $:return Object(u.a)(Object(u.a)({},e),{},{permisoSelected:null});case ee:return Object(u.a)(Object(u.a)({},e),{},{superficies:a.payload});case ae:return Object(u.a)(Object(u.a)({},e),{},{superficies:null});default:return e}},algodoneroScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Ne:return Object(u.a)(Object(u.a)({},e),{},{permisos:a.payload});case he:return Object(u.a)(Object(u.a)({},e),{},{permisos:[]});case Q:return Object(u.a)(Object(u.a)({},e),{},{permisoSelected:a.payload});case $:return Object(u.a)(Object(u.a)({},e),{},{permisoSelected:null});case ge:return Object(u.a)(Object(u.a)({},e),{},{printSanidadModal:!0});case Oe:return Object(u.a)(Object(u.a)({},e),{},{printSanidadModal:!1});default:return e}},altaPermisos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case h:return Object(u.a)(Object(u.a)({},e),{},{openPrintPermisoModal:!0});case g:return Object(u.a)(Object(u.a)({},e),{},{openPrintPermisoModal:!1});case O:return Object(u.a)(Object(u.a)({},e),{},{openCultivosModal:!0});case x:return Object(u.a)(Object(u.a)({},e),{},{openCultivosModal:!1});case y:return Object(u.a)(Object(u.a)({},e),{},{cultivos:a.payload});case A:return Object(u.a)(Object(u.a)({},e),{},{cultivos:[]});case j:return Object(u.a)(Object(u.a)({},e),{},{idCultivoSelected:a.payload.id,nombreCultivo:a.payload.nombre,claveCultivo:a.payload.clave,subciclo:a.payload.subciclo,cuotaCultivo:a.payload.costoHectarea});case C:return Object(u.a)(Object(u.a)({},e),{},{idCultivoSelected:null,nombreCultivo:null,claveCultivo:null,subciclo:null,cuotaCultivo:null});case P:return Object(u.a)(Object(u.a)({},e),{},{openUsuariosModal:!0});case z:return Object(u.a)(Object(u.a)({},e),{},{openUsuariosModal:!1});case S:return Object(u.a)(Object(u.a)({},e),{},{usuarios:a.payload});case w:return Object(u.a)(Object(u.a)({},e),{},{usuarios:[]});case R:return Object(u.a)(Object(u.a)({},e),{},{idUsuarioSelected:a.payload.id,cuenta:"".concat(a.payload.cuenta,".").concat(a.payload.subcta),usuario:"".concat(a.payload.apPaterno," ").concat(a.payload.apMaterno," ").concat(a.payload.nombre),supDerecho:a.payload.supRiego,lote:a.payload.predio,localidad:a.payload.localidad,municipio:a.payload.municipio,estado:a.payload.estado,modulo:a.payload.modulo,seccion:a.payload.seccion,canal:"".concat(a.payload.cp,"-").concat(a.payload.lt,"-").concat(a.payload.slt,"-").concat(a.payload.ra,"-").concat(a.payload.sra,"-").concat(a.payload.ssra),toma:a.payload.pControl,sistema:a.payload.sistRiego,supPrevia:a.payload.supPrevia});case D:return Object(u.a)(Object(u.a)({},e),{},{idUsuarioSelected:null,cuenta:null,usuario:null,supDerecho:null,lote:null,localidad:null,municipio:null,estado:null,modulo:null,seccion:null,canal:null,toma:null,sistema:null});case k:return Object(u.a)(Object(u.a)({},e),{},{openProductoresModal:!0});case I:return Object(u.a)(Object(u.a)({},e),{},{openProductoresModal:!1});case M:return Object(u.a)(Object(u.a)({},e),{},{productores:a.payload});case L:return Object(u.a)(Object(u.a)({},e),{},{productores:[]});case U:return Object(u.a)(Object(u.a)({},e),{},{idProductorSelected:a.payload.id,nombreProductor:"".concat(a.payload.apPaterno," ").concat(a.payload.apMaterno," ").concat(a.payload.nombre),rfcProductor:a.payload.rfc});case F:return Object(u.a)(Object(u.a)({},e),{},{idProductorSelected:null,nombreProductor:null,rfcProductor:null});case T:return Object(u.a)(Object(u.a)({},e),{},{isOpenNuevoProductorModal:!0});case G:return Object(u.a)(Object(u.a)({},e),{},{isOpenNuevoProductorModal:!1});case V:return Object(u.a)(Object(u.a)({},e),{},{supAutorizada:Number(a.payload.supAutorizada),variedad:a.payload.variedad,fuenteCredito:a.payload.fuenteCredito,latitud:a.payload.latitud,longitud:a.payload.longitud,cultivoAnterior:a.payload.cultivoAnterior,observaciones:a.payload.observaciones});case B:return Object(u.a)(Object(u.a)({},e),{},{tipo:a.payload.tipo,ciclo:a.payload.ciclo,numeroPermiso:a.payload.numeroPermiso,fechaEmicion:a.payload.fechaEmicion,fechaLimite:a.payload.fechaLimite,vigencia:a.payload.vigencia,estadoPermiso:a.payload.estadoPermiso});case Y:return Object(u.a)(Object(u.a)({},e),{},{tipo:null,ciclo:null,numeroPermiso:null,fechaEmicion:null,fechaLimite:null,vigencia:null});case q:return Object(u.a)(Object(u.a)({},e),{},{enEspera:!0});case H:return Object(u.a)(Object(u.a)({},e),{},{enEspera:!1});case _:return Object(u.a)(Object(u.a)({},e),{},{enableSaveButton:!0});case K:return Object(u.a)(Object(u.a)({},e),{},{enableSaveButton:!1});case Z:return Object(u.a)(Object(u.a)({},e),{},{enablePrintButton:!0});case X:return Object(u.a)(Object(u.a)({},e),{},{enablePrintButton:!1});default:return e}},autorizadosScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case te:return Object(u.a)(Object(u.a)({},e),{},{modulo:a.payload});case ne:return Object(u.a)(Object(u.a)({},e),{},{modulo:null});case re:return Object(u.a)(Object(u.a)({},e),{},{autorizados:a.payload});case oe:return Object(u.a)(Object(u.a)({},e),{},{autorizados:[]});case ce:return Object(u.a)(Object(u.a)({},e),{},{openAutorizadosModal:!0});case le:return Object(u.a)(Object(u.a)({},e),{},{autorizadoSelected:null,openAutorizadosModal:!1});case se:return Object(u.a)(Object(u.a)({},e),{},{openAutorizadosModal:!0,autorizadoSelected:a.payload});case ie:return Object(u.a)(Object(u.a)({},e),{},{openAutorizadosModal:!1,autorizadoSelected:null});case ue:return Object(u.a)(Object(u.a)({},e),{},{superficieReferencia:a.payload});case me:return Object(u.a)(Object(u.a)({},e),{},{superficieReferencia:null});case de:return Object(u.a)(Object(u.a)({},e),{},{formError:a.payload});case pe:return Object(u.a)(Object(u.a)({},e),{},{formError:null});default:return e}}}),aa=Object(s.e)(ea,$e(Object(s.a)(i.a))),ta=t(4),na=t.n(ta),ra=t(5),oa=t(9),ca=t(15),la=t(16),sa=t(12),ia=t.n(sa);t(90),t(146);ia.a.initializeApp({apiKey:"AIzaSyCPGzYLWjSE-8cCojpCClhkbDZouZVqVVo",authDomain:"sicper-e1812.firebaseapp.com",databaseURL:"https://sicper-e1812.firebaseio.com",projectId:"sicper-e1812",storageBucket:"sicper-e1812.appspot.com",messagingSenderId:"868337651917",appId:"1:868337651917:web:ce83022e99f450f19dd984"});var ua=ia.a.firestore(),ma=(new ia.a.auth.GoogleAuthProvider,function(e){return{type:f,payload:e}}),da=function(){return{type:b}},pa=function(){return{type:N}},Ea=t(10),fa=t.n(Ea),ba=function(e,a){return function(t){t({type:v}),ia.a.auth().signInWithEmailAndPassword(e,a).then(function(){var e=Object(ra.a)(na.a.mark((function e(a){var n,r,o,c,l,s,i,u,m;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.user,e.next=3,ga(n.uid);case 3:return r=e.sent,e.next=6,Oa(r.claveEntidad);case 6:return o=e.sent,e.next=9,xa(r.rol);case 9:c=e.sent,l=o.nombre,s=o.img,i=o.clave,u=o.dotacion,m=o.titular,t(va(n.uid,n.displayName)),t(Na(l,s,i,u,m,r.rol,r.modulo)),t(ya(c)),t(pa());case 15:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),t(pa()),fa.a.fire("Error","Usuoario o contrase\xf1a incorrecto.","error")}))}},va=function(e,a){return{type:m,payload:{uid:e,displayName:a}}},Na=function(e,a,t,n,r,o,c){return{type:d,payload:{entidad:e,img:a,claveEntidad:t,dotacion:n,titular:r,rol:o,modulo:c}}},ha=function(){return{type:p}},ga=function(){var e=Object(ra.a)(na.a.mark((function e(a){var t,n;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.collection("usuarios").get();case 2:return t=e.sent,n={},t.forEach((function(e){e.id===a&&(n=Object(u.a)({},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Oa=function(){var e=Object(ra.a)(na.a.mark((function e(a){var t,n;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.collection("entidades").get();case 2:return t=e.sent,n={},t.forEach((function(e){e.data().clave===a&&(n=Object(u.a)({},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),xa=function(){var e=Object(ra.a)(na.a.mark((function e(a){var t,n;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.collection("roles").get();case 2:return t=e.sent,n={},t.forEach((function(e){e.id===a&&(n=Object(u.a)({},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ya=function(e){return{type:E,payload:e}},Aa=t(25),ja=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(n.useState)(e),t=Object(oa.a)(a,2),r=t[0],o=t[1],c=function(){o(e)},l=function(e){var a=e.target;"checkbox"===a.type?o(Object(u.a)(Object(u.a)({},r),{},Object(Aa.a)({},a.name,a.checked))):o(Object(u.a)(Object(u.a)({},r),{},Object(Aa.a)({},a.name,a.value)))};return[r,l,c]},Ca=(t(148),function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.ui})).loading,t=ja({email:"",password:""}),n=Object(oa.a)(t,2),o=n[0],c=n[1],s=o.email,i=o.password;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"auth__title"},"Login"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e(ba(s,i))}},r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",className:"auth__input",autoComplete:"off",value:s,onChange:c}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",className:"auth__input",value:i,onChange:c}),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-block mt-3",disabled:a},"Login"),r.a.createElement("div",{className:"pt-4"},r.a.createElement(ca.b,{to:"/auth/register",className:"link"},"Crear nuevo usuario"))))}),Pa=t(127),za=t.n(Pa),wa=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.ui})).msgError,t=ja(),n=Object(oa.a)(t,2),o=n[0],c=n[1],s=o.name,i=o.email,u=o.password,m=o.password2,d=o.modulo,p=function(){return d?s?i?za.a.isEmail(i)?u?u!==m||u.length<5?(e(ma("Password diferentes o menor de 5 caracteres")),!1):(e(da()),!0):(e(ma("Se requiere password")),!1):(e(ma("Email no valido")),!1):(e(ma("Se requiere email")),!1):(e(ma("Se requiere el nombre")),!1):(e(ma("Seleccione entidad")),!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"auth__title"},"Registro"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),p()&&e(function(e,a,t,n){return function(r){ia.a.auth().createUserWithEmailAndPassword(e,a).then(function(){var a=Object(ra.a)(na.a.mark((function a(o){var c;return na.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=o.user,a.next=3,c.updateProfile({displayName:t});case 3:return r(va(c.uid,c.displayName)),a.next=6,ua.collection("usuarios").doc(c.uid).set({claveEntidad:n,modulo:n,rol:"sinAsignar",email:e,displayName:t});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.log(e),fa.a.fire("Error","El usuario ya existe.","error")}))}}(i,u,s,d))}},a&&r.a.createElement("div",{className:"auth__alert-error"},a),r.a.createElement("select",{type:"text",name:"modulo",value:d,onChange:c,className:"auth__input"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"Entidad"),r.a.createElement("option",{value:"1"},"Modulo 1"),r.a.createElement("option",{value:"2"},"Modulo 2"),r.a.createElement("option",{value:"3"},"Modulo 3"),r.a.createElement("option",{value:"4"},"Modulo 4"),r.a.createElement("option",{value:"5"},"Modulo 5"),r.a.createElement("option",{value:"6"},"Modulo 6"),r.a.createElement("option",{value:"7"},"Modulo 7"),r.a.createElement("option",{value:"8"},"Modulo 8"),r.a.createElement("option",{value:"9"},"Modulo 9"),r.a.createElement("option",{value:"9B"},"Modulo 9B"),r.a.createElement("option",{value:"10"},"Modulo 10"),r.a.createElement("option",{value:"11"},"Modulo 11"),r.a.createElement("option",{value:"12"},"Modulo 12"),r.a.createElement("option",{value:"14"},"Modulo 14"),r.a.createElement("option",{value:"15"},"Modulo 15"),r.a.createElement("option",{value:"16"},"Modulo 16"),r.a.createElement("option",{value:"17"},"Modulo 17"),r.a.createElement("option",{value:"18"},"Modulo 18"),r.a.createElement("option",{value:"19"},"Modulo 19"),r.a.createElement("option",{value:"20"},"Modulo 20"),r.a.createElement("option",{value:"21"},"Modulo 21"),r.a.createElement("option",{value:"22"},"Modulo 22"),r.a.createElement("option",{value:"FL"},"Modulo FL"),r.a.createElement("option",{value:"SADER"},"SADER"),r.a.createElement("option",{value:"CNA"},"CNA"),r.a.createElement("option",{value:"CESVBC"},"CESVBC"),r.a.createElement("option",{value:"SRL"},"SRL")),r.a.createElement("input",{type:"text",placeholder:"Nombre",name:"name",className:"auth__input",autoComplete:"off",onChange:c}),r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",className:"auth__input",autoComplete:"off",onChange:c}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",className:"auth__input",onChange:c}),r.a.createElement("input",{type:"password",placeholder:"Confirmar password",name:"password2",className:"auth__input",onChange:c}),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-block mt-3 mb-5"},"Crear usuario"),r.a.createElement(ca.b,{to:"/auth/login",className:"link"},"Ya esta registrado?")))},Sa=function(){return r.a.createElement("div",{className:"auth__main"},r.a.createElement("div",{className:"auth__box-container"},r.a.createElement(la.d,null,r.a.createElement(la.b,{exact:!0,path:"/auth/login",component:Ca}),r.a.createElement(la.b,{exact:!0,path:"/auth/register",component:wa}),r.a.createElement(la.a,{to:"/auth/login"}))))},Ra=t(357),Da=t(358),ka=t(356),Ia=function(){var e=Object(l.c)((function(e){return e.auth})).privilegios,a=Object(l.b)();return r.a.createElement("div",{className:"fixed-top"},r.a.createElement(Ra.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(Ra.a.Brand,{href:"/"},r.a.createElement("img",{src:"./logos/cna.png",height:"50",className:"d-inline-block align-top",alt:"Logo comisi\xf3n nacional del agua"})),r.a.createElement(Ra.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(Ra.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(Da.a,{className:"mr-auto"},e.pantallaInicio&&r.a.createElement(ca.c,{to:"/sicper",className:"nav-link"},"Inicio"),e.pantallaPadron&&r.a.createElement(ca.c,{to:"/padron",className:"nav-link"},"Padron"),e.pantallaPermisos&&r.a.createElement(ca.c,{to:"/permisos",className:"nav-link"},"Permisos"),e.pantallaTransferencias&&r.a.createElement(ca.c,{to:"/transferencias",className:"nav-link"},"Transferencias"),e.pantallaAsignacion&&r.a.createElement(ca.c,{to:"/asignacion",className:"nav-link"},"Asignacion"),e.pantallaLabores&&r.a.createElement(ca.c,{to:"/labores",className:"nav-link"},"Labores"),e.pantallaAutorizados&&r.a.createElement(ca.c,{to:"/autorizados",className:"nav-link"},"Autorizados"),e.pantallaReportes&&r.a.createElement(ca.c,{to:"/reportes",className:"nav-link"},"Reportes"),e.pantallaConfiguracion&&r.a.createElement(ca.c,{to:"/configuracion",className:"nav-link"},"Configuracion"),e.testArea&&r.a.createElement(ca.c,{to:"/test",className:"nav-link"},"Test")),r.a.createElement(ka.a,{variant:"outline-secondary btn-sm",onClick:function(){a(function(){var e=Object(ra.a)(na.a.mark((function e(a){return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ia.a.auth().signOut();case 2:a(ha());case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())},to:"/login"},"Salir"))))},Ma=function(){var e=Object(ra.a)(na.a.mark((function e(){var a,t;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.collection("cultivos").orderBy("clave").get();case 2:return a=e.sent,t=[],a.forEach((function(e){t.push({clave:e.data().clave,cultivo:e.data().nombre,subciclo:e.data().subciclo})})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),La=function(){var e=Object(ra.a)(na.a.mark((function e(a,t){var n,r,o;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.collection("autorizados").doc(a).collection("modulos").doc("Modulo-".concat(t)).collection("autorizados").orderBy("clave").get();case 2:return n=e.sent,r=[],n.forEach((function(e){r.push(Object(u.a)({},e.data()))})),e.next=7,Ma();case 7:return o=e.sent,0===r.length&&o.forEach((function(e){r.push({clave:e.clave,cultivo:e.cultivo,subciclo:e.subciclo,gravedadNormalAutorizada:0,gravedadNormalAsignada:0,gravedadExtraAutorizada:0,gravedadExtraAsignada:0,pozoNormalAutorizada:0,pozoNormalAsignada:0,pozoExtraAutorizada:0,pozoExtraAsignada:0})})),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Ua=function(){var e=Object(ra.a)(na.a.mark((function e(a,t){var n;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,ua.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisosPorCultivo").orderBy("superficie","desc").get().then((function(e){e.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))}))})).catch((function(e){console.log(" Error: ",e)}));case 3:return 0===n.length&&(n=!1),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Fa=function(e){return{type:Ee,payload:e}},Ta=function(){var e=Object(l.c)((function(e){return e.sicperScreen})),a=e.expedicion,t=e.superficie,n=Object(l.c)((function(e){return e.auth})).modulo,o=Object(l.b)();null===a&&o(function(e,a){return function(){var t=Object(ra.a)(na.a.mark((function t(n){var r,o,c;return na.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ua(e,a);case 2:return r=t.sent,t.next=5,La(a,e);case 5:o=t.sent,c=[],r&&r.forEach((function(e){o.forEach((function(a){e.id==="".concat(a.clave,"-").concat(a.cultivo)&&c.push(Object(u.a)(Object(u.a)({},a),e))}))})),c.forEach((function(e){void 0===e.gravedadNormal&&(e.gravedadNormal=0),void 0===e.gravedadExtra&&(e.gravedadExtra=0),void 0===e.pozoNormal&&(e.pozoNormal=0),void 0===e.pozoExtra&&(e.pozoExtra=0)})),0===c.length&&(c=[{clave:"-",cultivo:"Sin expedicion",gravedadNormalAutorizada:0,gravedadNormalAsignada:0,gravedadExtraAutorizada:0,gravedadExtraAsignada:0,pozoNormalAutorizada:0,pozoNormalAsignada:0,pozoExtraAutorizada:0,pozoExtraAsignada:0,gravedadNormal:0,pozoNormal:0,gravedadExtra:0,pozoExtra:0}]),n(Fa(c));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(n,"2020-2021"));var c=function(){o({type:be})},s=function(){o({type:ve})};return r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"btn-group",role:"group"},"normal"===t?r.a.createElement("button",{type:"button",className:"btn btn-info",onClick:c},"Superficie Normal"):r.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:c},"Superficie Normal"),"extra"===t?r.a.createElement("button",{type:"button",className:"btn btn-info",onClick:s},"Superficie Extra"):r.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:s},"Superficie Extra"))),r.a.createElement("div",{className:"border border-info rounded p-0 mt-3"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-sm table-striped text-secondary"},r.a.createElement("thead",{className:"table-info"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"text-center"},"Clave"),r.a.createElement("th",{scope:"col"},"Cultivo"),r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col",className:"text-center"},"Superficie Autorizada"),r.a.createElement("th",{scope:"col",className:"text-center"},"Superficie Asignada"),r.a.createElement("th",{scope:"col",className:"text-center"},"Superficie Expedida"),r.a.createElement("th",{scope:"col",className:"text-center"},"Superficie Disponible"))),a&&"normal"===t?r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:"".concat(e.id,"-").concat(e.clave)},r.a.createElement("th",{scope:"row",className:"text-center"},e.clave),r.a.createElement("td",null,e.cultivo),r.a.createElement("td",null,r.a.createElement("div",null,"Gravedad"),r.a.createElement("div",null,"Pozo")),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},e.gravedadNormalAutorizada),r.a.createElement("div",{className:"text-center"},e.pozoNormalAutorizada)),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},e.gravedadNormalAsignada),r.a.createElement("div",{className:"text-center"},e.pozoNormalAsignada)),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},e.gravedadNormal),r.a.createElement("div",{className:"text-center"},e.pozoNormal)),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},e.gravedadNormalAsignada-e.gravedadNormal),r.a.createElement("div",{className:"text-center"},e.pozoNormalAsignada-e.pozoNormal)))}))):r.a.createElement(r.a.Fragment,null),a&&"extra"===t?r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:"".concat(e.id,"-").concat(e.clave)},r.a.createElement("th",{scope:"row",className:"text-center"},e.clave),r.a.createElement("td",null,e.cultivo),r.a.createElement("td",null,r.a.createElement("div",null,"Gravedad"),r.a.createElement("div",null,"Pozo")),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},e.gravedadExtraAutorizada),r.a.createElement("div",{className:"text-center"},e.pozoExtraAutorizada)),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},e.gravedadExtraAsignada),r.a.createElement("div",{className:"text-center"},e.pozoExtraAsignada)),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},e.gravedadExtra),r.a.createElement("div",{className:"text-center"},e.pozoExtra)),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},e.gravedadExtraAsignada-e.gravedadExtra),r.a.createElement("div",{className:"text-center"},e.pozoExtraAsignada-e.pozoExtra)))}))):r.a.createElement(r.a.Fragment,null)))))},Ga=t(55),Va=function(){var e,a,t=Object(l.c)((function(e){return e.permisosScreen})).superficies,n={},o=0,c=0;null!==t&&(a="Superficie por cultivo",n={labels:(e=t).labels,datasets:[{label:a,data:e.superficiesCultivos,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},t.superficiesCultivos.forEach((function(e){o+=e})),t.numeroPermisos.forEach((function(e){c+=e})));return r.a.createElement("div",{className:"pt-4 text-secondary"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h5",null,"Superficies por cultivo")),r.a.createElement("div",{className:"d-flex flex-column pt-4 pb-4 pl-3"},r.a.createElement("div",null,r.a.createElement("h6",null,"Superficie expedida: ",o.toFixed(2)," ha")),r.a.createElement("div",null,r.a.createElement("h6",null,"Permisos expedidos: ",c))),r.a.createElement("div",{className:"pb-4"},r.a.createElement(Ga.HorizontalBar,{data:n,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},width:220})))},Ba=function(e){var a=e.autorizados,t=e.modulo,n=0,o=0,c=0,l=0,s=0,i=0,u=0,m=0;return null!==t&&a.forEach((function(e){n+=e.gravedadNormalAutorizada,o+=e.gravedadNormalAsignada,c+=e.gravedadExtraAutorizada,l+=e.gravedadExtraAsignada,s+=e.pozoNormalAutorizada,i+=e.pozoNormalAsignada,u+=e.pozoExtraAutorizada,m+=e.pozoExtraAsignada})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex bg-light border-primary border-bottom rounded-top p-1 justify-content-center font-weight-bold text-secondary pt-3"},r.a.createElement("h5",null,"M\xf3dulo ",t)),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-primary mb-0 text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"3"},"Total Superficie Normal")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Gravedad"),r.a.createElement("td",null,n),r.a.createElement("td",null,o)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Federal"),r.a.createElement("td",null,s),r.a.createElement("td",null,i))))),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-table-secondary text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"3"},"Total Superficie Extra")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Gravedad"),r.a.createElement("td",null,c),r.a.createElement("td",null,l)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Federal"),r.a.createElement("td",null,u),r.a.createElement("td",null,m))))))},Ya=function(){var e=Object(ra.a)(na.a.mark((function e(a,t){var n,r;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisos").orderBy("fechaEmicion","desc").limit(20).get();case 2:return n=e.sent,r=[],n.forEach((function(e){r.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),qa=function(){var e=Object(ra.a)(na.a.mark((function e(a,t,n){var r,o,c,l,s,i,m,d,p,E,f,b,v=arguments;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>3&&void 0!==v[3]?v[3]:["nombreCultivo","usuario","cuenta","numeroPermiso"],o=v.length>4&&void 0!==v[4]?v[4]:"todos",c=v.length>5&&void 0!==v[5]?v[5]:"todos",l=v.length>6&&void 0!==v[6]?v[6]:"todos",s=v.length>7&&void 0!==v[7]?v[7]:new Date(2020,9,1),i=v.length>8&&void 0!==v[8]?v[8]:new Date(2021,8,30),m=[],d=[],p=ua.collection("permisos").doc(n).collection("modulos").doc("Modulo-".concat(t)).collection("permisos"),E=p,"todos"!==o&&(E=E.where("estadoPermiso","==",o)),"todos"!==c&&(E=E.where("tipo","==",c)),"todos"!==l&&(E=E.where("sistema","==",l)),r.forEach((function(e){d.push(E.orderBy(e).startAt(a.toUpperCase()).endAt(a.toUpperCase()+"\uf8ff").get())})),e.next=16,Promise.all(d);case 16:for(f=e.sent,b=0;b<f.length;b++)f[b].forEach((function(e){var a=e.data().fechaEmicion.toDate();a>=s&&a<=i&&m.push(Object(u.a)({id:e.id},e.data()))}));return 0===m.length&&fa.a.fire("No se encontraron permisos ","Se mostrar\xe1n los \xfaltimos permisos registrados.","warning"),e.abrupt("return",m);case 20:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),Ha=function(){var e=Object(ra.a)(na.a.mark((function e(a,t){var n;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,ua.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisosPorCultivo").orderBy("superficie","desc").get().then((function(e){var a=[];e.forEach((function(e){a.push(Object(u.a)({id:e.id},e.data()))}));var t=[],r=[],o=[],c=4,l=0,s=0;a.forEach((function(e){c>=0?(t.push("".concat(e.id," (").concat(e.superficie,"ha)")),r.push(e.superficie),o.push(e.numeroPermisos),c--):(l=+e.superficie,s=+e.numeroPermisos)})),t.push("Otros cultivos (".concat(l,"ha)")),r.push(l),o.push(s),n={labels:t,superficiesCultivos:r,numeroPermisos:o}})).catch((function(e){console.log(" Error: ",e)}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),_a=function(e,a){return function(){var t=Object(ra.a)(na.a.mark((function t(n){var r;return na.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ya(e,a);case 2:r=t.sent,n(Xa(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ka=function(e,a){return function(){var t=Object(ra.a)(na.a.mark((function t(n){var r;return na.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ha(e,a);case 2:r=t.sent,n(Za(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Za=function(e){return{type:ee,payload:e}},Xa=function(e){return{type:J,payload:e}},Ja=function(e){return{type:Q,payload:e.id}},Wa=function(e,a){return function(){var t=Object(ra.a)(na.a.mark((function t(n){var r,o;return na.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,La(e,a);case 2:r=t.sent,o=0,r.forEach((function(e){o+=e.gravedadNormalAutorizada,o+=e.gravedadNormalAsignada,o+=e.gravedadExtraAutorizada,o+=e.gravedadExtraAsignada,o+=e.pozoNormalAutorizada,o+=e.pozoNormalAsignada,o+=e.pozoExtraAutorizada,o+=e.pozoExtraAsignada})),n(Qa(r)),n(at(o));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Qa=function(e){return{type:re,payload:e}},$a=function(){return{type:le}},et=function(e){return{type:se,payload:e}},at=function(e){return{type:ue,payload:e}},tt=function(e){return{type:de,payload:e}},nt=function(){return{type:pe}},rt=function(){var e=Object(l.c)((function(e){return e.autorizadosScreen})).autorizados,a=Object(l.c)((function(e){return e.auth})).modulo,t=Object(l.c)((function(e){return e.permisosScreen})).superficies,n=Object(l.b)();return 0===e.length&&n(Wa(a)),null===t&&n(Ka(a,"2020-2021")),r.a.createElement("div",{className:"border border-primary rounded detallePermiso text-secondary mt-3"},r.a.createElement(Va,null),e.length>0&&r.a.createElement(Ba,{autorizados:e,modulo:a}))},ot=function(){return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(ca.b,{to:"/nuevo-permiso"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button"},r.a.createElement("span",null,"Nuevo Permiso "),r.a.createElement("i",{className:"fas fa-plus"}))))},ct=function(){return r.a.createElement("div",{className:"border border-warning rounded p-4"},r.a.createElement("h3",null,"\xa1A\xfan no tiene privilegios !"),r.a.createElement("p",null,"Por favor p\xf3ngase en contacto con el administrador del sistema para que se le asignen privilegios de usuario."))},lt=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.privilegios,t=e.rol;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row pt-5"},r.a.createElement("div",{className:"col-sm-8"},a.consultarAutorizados&&r.a.createElement(Ta,null)),r.a.createElement("div",{className:"col-sm-4"},a.expedirPermisos&&r.a.createElement(ot,null),a.consultarExpedicion&&r.a.createElement(rt,null))),r.a.createElement("div",{className:"row d-flex justify-content-center pt-5"},r.a.createElement("div",{className:"col-sm-6"},"sinAsignar"===t&&r.a.createElement(ct,null))))},st=t(37),it=t.n(st),ut=function(e){var a=e.title,t=e.columns,n=e.data,o=e.setFunction,c=e.closeFunction,s=Object(l.b)();return r.a.createElement(it.a,{columns:t,data:n,title:a,pagination:!0,paginationComponentOptions:{rowsPerPageText:"Filas por pagina",rangesSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"},fixedHeader:!0,persistTableHead:!0,fixedHeaderScrollHeight:"380px",highlightOnHover:!0,striped:!0,pointerOnHover:!0,dense:!0,onRowClicked:function(e){void 0!==o&&s(o(e)),void 0!==c&&s(c())}})},mt=t(133);function dt(){var e=Object(mt.a)(["\n\theight: 32px;\n\twidth: 200px;\n\tborder-radius: 3px;\n\tborder-top-left-radius: 5px;\n\tborder-bottom-left-radius: 5px;\n\tborder-top-right-radius: 0;\n\tborder-bottom-right-radius: 0;\n\tborder: 1px solid #e5e5e5;\n\tpadding: 0 32px 0 16px;\n\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n"]);return dt=function(){return e},e}t(80).default.input(dt());var pt=[{name:"id",selector:"id",omit:!0},{name:"CUENTA",selector:"cuenta",sortable:!0,width:"80px"},{name:"SUBCTA",selector:"subcta",sortable:!0,width:"40px",center:!0},{name:"PATERNO",selector:"apPaterno",width:"140px",sortable:!0},{name:"MATERNO",selector:"apMaterno",width:"140px",sortable:!0},{name:"NOMBRE",selector:"nombre",width:"200px",sortable:!0},{name:"DERECHO(ha)",selector:"supRiego",sortable:!0,width:"80px",center:!0},{name:"LOTE",selector:"predio",sortable:!0,width:"60px",center:!0},{name:"EJIDO",selector:"ejido",sortable:!0,width:"60px",center:!0},{name:"SECCION",selector:"seccion",sortable:!0,width:"60px",center:!0},{name:"MODULO",selector:"modulo",sortable:!0,width:"60px",center:!0}],Et=[{name:"id",selector:"id",omit:!0},{name:"PATERNO",selector:"apPaterno",width:"140px",sortable:!0},{name:"MATERNO",selector:"apMaterno",width:"140px",sortable:!0},{name:"NOMBRE",selector:"nombre",width:"200px",sortable:!0},{name:"RFC",selector:"rfc",sortable:!0,width:"140px",center:!0}],ft=[{name:"id",selector:"id",omit:!0},{name:"CLAVE",selector:"clave",sortable:!0,width:"60px",center:!0},{name:"NOMBRE",selector:"nombre",sortable:!0,center:!0},{name:"SUBCICLO",selector:"subciclo",sortable:!0,center:!0}],bt=[{name:"id",selector:"id",omit:!0},{name:"CLAVE ENTIDAD",selector:"claveEntidad",sortable:!0,center:!0},{name:"NOMBRE",selector:"displayName",sortable:!0},{name:"CORREO",selector:"email",sortable:!0},{name:"ROL",selector:"rol",sortable:!0}],vt=[{name:"id",selector:"id",omit:!0},{name:"CLAVE",selector:"clave",sortable:!0,center:!0},{name:"NOMBRE",selector:"nombre",sortable:!0},{name:"TIPO",selector:"tipo",sortable:!0},{name:"MUNICIPIO",selector:"municipio",sortable:!0},{name:"ESTADO",selector:"estado",sortable:!0}],Nt=[{name:"id",selector:"id",omit:!0},{name:"PERMISO",selector:"numeroPermiso",sortable:!0,width:"110px"},{name:"CUENTA",selector:"cuenta",sortable:!0,width:"80px"},{name:"USUARIO",selector:"usuario",sortable:!0,width:"250px"},{name:"PRODUCTOR",selector:"nombreProductor",width:"250px",sortable:!0},{name:"CULTIVO",selector:"nombreCultivo",width:"150px",sortable:!0},{name:"SUP(ha)",selector:"supAutorizada",width:"60px",sortable:!0,center:!0},{name:"LOTE",selector:"lote",sortable:!0,width:"60px",center:!0},{name:"LOCALIDAD",selector:"localidad",sortable:!0,width:"150px"},{name:"EMICION",selector:"fechaEmicion",sortable:!0,width:"100px"},{name:"VIGENCIA",selector:"vigencia",sortable:!0,width:"100px"},{name:"ESTADO",selector:"estadoPermiso",sortable:!0,width:"100px"}],ht=[{name:"id",selector:"id",omit:!0},{name:"CLAVE",selector:"clave",sortable:!0,width:"80px",center:!0},{name:"CULTIVO",selector:"cultivo",sortable:!0,width:"160px"},{name:"GRAVEDAD NORMAL AUTORIZADA",selector:"gravedadNormalAutorizada",sortable:!0,center:!0},{name:"GRAVEDAD NORMAL ASIGNADA",selector:"gravedadNormalAsignada",sortable:!0,center:!0},{name:"GRAVEDAD EXTRA AUTORIZADA",selector:"gravedadExtraAutorizada",sortable:!0,center:!0},{name:"GRAVEDAD EXTRA ASIGNADA",selector:"gravedadExtraAsignada",sortable:!0,center:!0},{name:"POZO NORMAL AUTORIZADA",selector:"pozoNormalAutorizada",sortable:!0,center:!0},{name:"POZO NORMAL ASIGNADA",selector:"pozoNormalAsignada",sortable:!0,center:!0},{name:"POZO EXTRA AUTORIZADA",selector:"pozoExtraAutorizada",sortable:!0,center:!0},{name:"POZO EXTRA ASIGNADA",selector:"pozoExtraAsignada",sortable:!0,center:!0}],gt=[{name:"id",selector:"id",omit:!0},{name:"CLAVE",selector:"clave",sortable:!0,width:"80px",center:!0},{name:"CULTIVO",selector:"cultivo",sortable:!0,width:"160px"},{name:"POZO NORMAL AUTORIZADA",selector:"pozoNormalAutorizada",sortable:!0,center:!0},{name:"POZO NORMAL ASIGNADA",selector:"pozoNormalAsignada",sortable:!0,center:!0},{name:"POZO EXTRA AUTORIZADA",selector:"pozoExtraAutorizada",sortable:!0,center:!0},{name:"POZO EXTRA ASIGNADA",selector:"pozoExtraAsignada",sortable:!0,center:!0}],Ot=function(){var e=Object(ra.a)(na.a.mark((function e(a,t){var n,r,o,c;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=["apPaterno","cuenta"],r=[],o=[],c=ua.collection("derechos").where("modulo","==",parseInt(t)),n.forEach((function(e){r.push(c.orderBy(e).startAt(a).endAt(a+"\uf8ff").get()),r.push(c.where(e,"==",Number(a)).get())})),e.next=7,Promise.all(r);case 7:return e.sent.forEach((function(e){e.forEach((function(e){o.push(Object(u.a)({id:e.id},e.data()))}))})),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),xt=function(){var e=Object(ra.a)(na.a.mark((function e(a){var t,n;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.collection("colonias").where("clave","==",a).get();case 2:if(t=e.sent,n=[],t.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))})),0!==n.length){e.next=9;break}return e.abrupt("return","");case 9:return e.abrupt("return",n[0].nombre);case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),yt=function(){var e=Object(ra.a)(na.a.mark((function e(a,t,n){var r,o,c;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.collection("permisos").doc(n).collection("modulos").doc("Modulo-".concat(t)).collection("permisos").where("cuenta","==",a).get();case 2:return r=e.sent,o=[],r.forEach((function(e){o.push(Object(u.a)({id:e.id},e.data()))})),c=0,o.forEach((function(e){c+=e.supAutorizada})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),At=function(){var e=Object(ra.a)(na.a.mark((function e(a,t,n){var r,o,c;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.collection("transferencias").doc(n).collection("transferencias").where("cuentaOrigen","==",a).where("moduloOrigen","==",t).get();case 2:return r=e.sent,o=[],r.forEach((function(e){o.push(Object(u.a)({id:e.id},e.data()))})),c=0,o.forEach((function(e){c+=e.superficieTransferida})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),jt=function(){return{type:z}},Ct=function(e,a){return function(){var t=Object(ra.a)(na.a.mark((function t(n){var r;return na.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ot(e,a);case 2:r=t.sent,n(Pt(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Pt=function(e){return{type:S,payload:e}},zt=function(e){St();return function(){var a=Object(ra.a)(na.a.mark((function a(t){var n,r,o;return na.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,xt(e.ejido);case 2:return n=a.sent,a.next=5,yt("".concat(e.cuenta,".").concat(e.subcta),e.modulo,"2020-2021");case 5:return r=a.sent,a.next=8,At("".concat(e.cuenta,".").concat(e.subcta),e.modulo,"2020-2021");case 8:o=a.sent,e.localidad=n,e.supPrevia=r+o,t(wt(e));case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},wt=function(e){return 26===e.estado&&(e.estado="Sonora"),2===e.estado&&(e.estado="Baja California"),2===e.municipio&&(e.municipio="Mexicali"),55===e.municipio&&(e.municipio="San Luis Rio Colorado"),1===e.sistRiego&&(e.sistRiego="Gravedad"),2===e.sistRiego&&1===e.equipo&&(e.sistRiego="Pozo Particular"),2===e.sistRiego&&2===e.equipo&&(e.sistRiego="Pozo Federal"),{type:R,payload:e}},St=function(){return{type:D}},Rt=function(){var e=Object(l.c)((function(e){return e.auth})).modulo,a=Object(l.c)((function(e){return e.altaPermisos})),t=a.idUsuarioSelected,n=a.usuario,o=Object(l.b)(),c=function(){s(),E.length>0?o({type:P}):fa.a.fire("Nada para buscar","Ingrese apellido paterno o cuenta del usuario","warning")},s=function(){o(Ct(E.toUpperCase(),e))},i="";t&&(i=n);var u=ja({usuario:""}),m=Object(oa.a)(u,2),d=m[0],p=m[1],E=d.usuario;return r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},"* Usuario: "),r.a.createElement("label",null,i," "),t?r.a.createElement("div",{className:"fas fa-check text-success p-3"}):r.a.createElement(r.a.Fragment,null),t?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex-grow-1"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Apellido paterno o numero de cuenta",name:"usuario",autoComplete:"off",value:E,onChange:p,onKeyUp:function(e){"Enter"===e.key&&c()}})),t?r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){o(St()),d.usuario=""}},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:c},r.a.createElement("i",{className:"fas fa-search"}))))},Dt=function(){var e=Object(l.c)((function(e){return e.altaPermisos})),a=e.usuarios,t=e.idUsuarioSelected,n=e.supPrevia,o="",c="",s="",i="",u="",m="",d="";return a.forEach((function(e){e.id===t&&(c="".concat(e.cuenta,".").concat(e.subcta),o=e.localidad,s=e.supRiego,i=e.predio,u=s-n,m="".concat(e.apPaterno," ").concat(e.apMaterno," ").concat(e.nombre),d=e.seccion)})),r.a.createElement("div",{className:"border rounded mb-4 p-2"},r.a.createElement("div",null,"Cuenta: ",c),r.a.createElement("div",null,"Colonia/Ejido: ",o),r.a.createElement("div",null,"Sup. Derecho: ",s),r.a.createElement("div",null,"Usuario: ",m),r.a.createElement("div",null,"Lote: ",i),r.a.createElement("div",null,"Sup. Disponible: ",u),r.a.createElement("div",null),r.a.createElement("div",null,"Seccion: ",d))},kt=function(){var e=Object(l.c)((function(e){return e.altaPermisos})),a=e.usuarios,t=e.idUsuarioSelected,n=[];return a.length>0&&(n=Object.values(a)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-3 d-flex justify-content-start"},r.a.createElement(Rt,null)),n.length>0&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8 mb-3"},r.a.createElement(ut,{title:0===n.length?"No se encontraron usuarios":"Usuarios",columns:pt,data:n,setFunction:zt})),r.a.createElement("div",{className:"col-sm-4"},t&&r.a.createElement(Dt,null))))},It=t(13),Mt=t.n(It),Lt=function(e){return{type:B,payload:e}},Ut=function(){return{type:h}},Ft=t(14),Tt=t.n(Ft),Gt=function(){var e=Object(ra.a)(na.a.mark((function e(a){var t,n;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.collection("cultivos").orderBy("nombre").startAt(a).endAt(a+"\uf8ff").get();case 2:return t=e.sent,n=[],t.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Vt=function(){return{type:O}},Bt=function(){return{type:x}},Yt=function(e){return function(){var a=Object(ra.a)(na.a.mark((function a(t){var n;return na.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Gt(e);case 2:n=a.sent,t(qt(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},qt=function(e){return{type:y,payload:e}},Ht=function(e){return{type:j,payload:e}},_t=function(){return{type:C}},Kt=function(){var e=Object(ra.a)(na.a.mark((function e(a){var t,n;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.collection("productores").orderBy("apPaterno").startAt(a).endAt(a+"\uf8ff").get();case 2:return t=e.sent,n=[],t.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Zt=function(){return{type:k}},Xt=function(){return{type:I}},Jt=function(e){return function(){var a=Object(ra.a)(na.a.mark((function a(t){var n;return na.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Kt(e);case 2:n=a.sent,t(Wt(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Wt=function(e){return{type:M,payload:e}},Qt=function(e){return{type:U,payload:e}},$t=function(){return{type:F}},en=function(){var e=Object(ra.a)(na.a.mark((function e(a){var t,n,r;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"ALGODONERO"===(t={idUsuarioSelected:a.idUsuarioSelected,cuenta:a.cuenta,usuario:a.usuario,supDerecho:a.supDerecho,lote:a.lote,localidad:a.localidad,municipio:a.municipio,estado:a.estado,modulo:a.modulo,seccion:a.seccion,canal:a.canal,toma:a.toma,sistema:a.sistema,idProductorSelected:a.idProductorSelected,nombreProductor:a.nombreProductor,rfcProductor:a.rfcProductor,idCultivoSelected:a.idCultivoSelected,nombreCultivo:a.nombreCultivo,claveCultivo:a.claveCultivo,subciclo:a.subciclo,cuotaCultivo:a.cuotaCultivo,supPrevia:a.supPrevia,tipo:a.tipo,ciclo:a.ciclo,numeroPermiso:a.numeroPermiso,fechaEmicion:Mt()(a.fechaEmicion).toDate(),fechaLimite:Mt()(a.fechaLimite).toDate(),vigencia:Mt()(a.vigencia).toDate(),variedad:a.variedad,supAutorizada:a.supAutorizada,fuenteCredito:a.fuenteCredito,latitud:a.latitud,longitud:a.longitud,cultivoAnterior:a.cultivoAnterior,observaciones:a.observaciones,uid:a.uid,name:a.name,dotacion:a.dotacion,titular:a.titular,transferencia:a.transferencia,estadoPermiso:a.estadoPermiso}).nombreCultivo&&(t.tecnico="sinAsignar",t.desfoliado=!1,t.cosechado=!1,t.desvarado=!1,t.disqueado=!1,t.desarraigado=!1,t.superficieMapeada=0,t.pagado=!1,t.constanciaFitosanitaria=!1),n=ua.collection("permisos").doc(t.ciclo).collection("modulos").doc("Modulo-".concat(t.modulo)).collection("permisosPorCultivo").doc("".concat(t.claveCultivo,"-").concat(t.nombreCultivo)),e.next=5,ua.collection("permisos").doc(t.ciclo).collection("modulos").doc("Modulo-".concat(t.modulo)).collection("permisos").add(t).then((function(){return ua.collection("permisos").doc(t.ciclo).collection("modulos").doc("Modulo-".concat(t.modulo)).update({numeroPermisosModulo:ia.a.firestore.FieldValue.increment(1),superficieModulo:ia.a.firestore.FieldValue.increment(a.supAutorizada)}),n.get().then((function(e){if(e.exists)switch(a.sistema){case"Gravedad":"normal"===a.tipo&&n.update({numeroPermisos:ia.a.firestore.FieldValue.increment(1),superficie:ia.a.firestore.FieldValue.increment(a.supAutorizada),gravedadNormal:ia.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&n.update({numeroPermisos:ia.a.firestore.FieldValue.increment(1),superficie:ia.a.firestore.FieldValue.increment(a.supAutorizada),gravedadExtra:ia.a.firestore.FieldValue.increment(a.supAutorizada)});break;case"Pozo Federal":"normal"===a.tipo&&n.update({numeroPermisos:ia.a.firestore.FieldValue.increment(1),superficie:ia.a.firestore.FieldValue.increment(a.supAutorizada),pozoNormal:ia.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&n.update({numeroPermisos:ia.a.firestore.FieldValue.increment(1),superficie:ia.a.firestore.FieldValue.increment(a.supAutorizada),pozoExtra:ia.a.firestore.FieldValue.increment(a.supAutorizada)});break;case"Pozo Particular":"normal"===a.tipo&&n.update({numeroPermisos:ia.a.firestore.FieldValue.increment(1),superficie:ia.a.firestore.FieldValue.increment(a.supAutorizada),pozoParticularNormal:ia.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&n.update({numeroPermisos:ia.a.firestore.FieldValue.increment(1),superficie:ia.a.firestore.FieldValue.increment(a.supAutorizada),pozoParticularExtra:ia.a.firestore.FieldValue.increment(a.supAutorizada)});break;default:console.log("Sistema de riego indefinido")}else switch(a.sistema){case"Gravedad":"normal"===a.tipo&&n.set({subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:ia.a.firestore.FieldValue.increment(1),superficie:ia.a.firestore.FieldValue.increment(a.supAutorizada),gravedadNormal:ia.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&n.set({subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:ia.a.firestore.FieldValue.increment(1),superficie:ia.a.firestore.FieldValue.increment(a.supAutorizada),gravedadExtra:ia.a.firestore.FieldValue.increment(a.supAutorizada)});break;case"Pozo Federal":"normal"===a.tipo&&n.set({subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:ia.a.firestore.FieldValue.increment(1),superficie:ia.a.firestore.FieldValue.increment(a.supAutorizada),pozoNormal:ia.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&n.set({subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:ia.a.firestore.FieldValue.increment(1),superficie:ia.a.firestore.FieldValue.increment(a.supAutorizada),pozoExtra:ia.a.firestore.FieldValue.increment(a.supAutorizada)});break;case"Pozo Particular":"normal"===a.tipo&&n.set({subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:ia.a.firestore.FieldValue.increment(1),superficie:ia.a.firestore.FieldValue.increment(a.supAutorizada),pozoParticularNormal:ia.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&n.set({subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:ia.a.firestore.FieldValue.increment(1),superficie:ia.a.firestore.FieldValue.increment(a.supAutorizada),pozoParticularExtra:ia.a.firestore.FieldValue.increment(a.supAutorizada)});break;default:console.log("Sistema de riego indefinido")}})).catch((function(e){console.log("Error al obtener permisos por cultivo",e)})),fa.a.fire("Permiso Guardado","Se registr\xf3 con \xe9xito el nuevo permiso de riego.","success"),!0})).catch((function(e){console.log("Error al guardar permiso",e)}));case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),an={content:{width:"1125px",height:"1500px",overflow:"auto"}},tn=function(e){var a=e.data,t=e.isNew,n=Object(l.c)((function(e){return e.altaPermisos})),o=n.openPrintPermisoModal,c=n.enableSaveButton,s=n.enablePrintButton,i=n.enEspera,u=Object(l.b)(),m=function(){u({type:g}),u({type:Y}),u(_t()),u($t()),u(St()),u({type:_}),u({type:X})},d=function(){var e=Object(ra.a)(na.a.mark((function e(){return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u({type:K}),u({type:q}),e.next=4,en(a);case 4:if(!e.sent){e.next=7;break}u({type:H}),u({type:Z});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){window.print()};return r.a.createElement(Tt.a,{isOpen:o,onRequestClose:m,style:an,closeTimeoutMS:200,className:"printModal",overlayClassName:"modal-fondo"},"activo"===a.estadoPermiso?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"watermark rotar"},a.estadoPermiso),r.a.createElement("div",{className:"row m-3 d-flex justify-content-center"},r.a.createElement("div",{className:"col-2 d-flex flex-column justify-content-center"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("img",{src:"./logos/sader.png",alt:"Logo SADER",style:{maxHeight:35}})),r.a.createElement("div",{className:"d-flex justify-content-center mt-3"},r.a.createElement("img",{src:"./logos/crl.png",alt:"Logo CRL",style:{maxHeight:70}})),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("span",{className:"printPermisoSubLogo"},"DISTRITO DE RIEGO R\xcdO COLORADO")),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("span",{className:"printPermisoSubLogo"},"S DE R.L. DE I.P. DE C.V.")),r.a.createElement("div",{className:"border rounded d-flex justify-content-left mt-4 w-200"},"Folio: ")),r.a.createElement("div",{className:"col-8 d-flex flex-column justify-content-center"},r.a.createElement("h1",{className:"d-flex justify-content-center"},r.a.createElement("b",null,"PERMISO \xdaNICO DE SIEMBRA")),r.a.createElement("h3",{className:"d-flex justify-content-center"},r.a.createElement("b",null,"DISTRITO DE RIEGO 014 R\xcdO COLORADO")),r.a.createElement("h2",{className:"d-flex justify-content-center pt-4"}," ",r.a.createElement("b",null,"Ciclo Agr\xedcola ",a.ciclo)," ")),r.a.createElement("div",{className:"col-2 d-flex flex-column justify-content-center"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("img",{src:"./logos/cna.png",alt:"Logo comisi\xf3n nacional del agua",style:{maxHeight:50}})),r.a.createElement("div",{className:"border rounded d-flex justify-content-center mt-4"},"Folio: ",a.numeroPermiso),r.a.createElement("div",{className:"d-flex justify-content-center mt-4"},Mt()(a.fechaEmicion).format("DD/MM/YYYY")))),r.a.createElement("div",{className:"row m-3 d-flex flex-column justify-content-center border rounded"},r.a.createElement("div",{className:"d-flex justify-content-center "},"DATOS DEL USUARIO"),r.a.createElement("div",{className:"d-flex justify-content-center border-top p-1"},r.a.createElement("p",null,"El/la C.",r.a.createElement("b",null," ",a.usuario)," con cuenta: ",r.a.createElement("b",null,a.cuenta)," tiene un derecho normal de ",r.a.createElement("b",null,a.supDerecho," "),"hect\xe1reas del lote: ",r.a.createElement("b",null,a.lote)," en la colonia/ejido ",r.a.createElement("b",null,a.localidad),","," ",r.a.createElement("b",null,a.municipio),", ",r.a.createElement("b",null,a.estado),". M\xf3dulo ",r.a.createElement("b",null,a.modulo),", secci\xf3n"," ",r.a.createElement("b",null,a.seccion)," del canal ",r.a.createElement("b",null,a.canal)," toma ",r.a.createElement("b",null,a.toma)," con sistema de riego por ",r.a.createElement("b",null,a.sistema),"."))),r.a.createElement("div",{className:"row m-3 d-flex flex-column justify-content-center"},r.a.createElement("p",null,"Con base en el Acuerdo Nacional de Colaboraci\xf3n entre la Secretar\xeda de Agricultura, Ganader\xeda, Desarrollo Rural, Pesca y Alimentaci\xf3n y el Acuerdo de Concertaci\xf3n entre la SAGARPA, CONAGUA, Distrito de Riego R\xedo Colorado y la Sociedad de Responsabilidad Limitada con el objetivo de regular en forma ordenada la expedici\xf3n de Permisos \xdanicos de Siembra con Derechos de Agua, y con fundamento en los art\xedculos 66, 67, 68, 69 y 69 Bis de la Ley de Aguas Nacionales; Reglamento de la Ley de Sanidad Fitopecuaria de los Estados Unidos Mexicanos, en materia de sanidad vegetal, Normas Mexicanas, NOM-026-FITO-1995, que establece el control de plagas de algodonero, NOM-001-FITO-2001, para el manejo y eliminaci\xf3n de focos de infecci\xf3n de plagas, mediante el reordenamiento de fechas de siembra y destrucci\xf3n de residuos. Se otorga el Permiso \xdanico de Siembra para que establezca exclusivamente el cultivo y superficie que se indica, apercibiendose que se puede suspender el servicio de riego si se siembra superficie adicional o cultivo diferente al autorizado en este permiso.")),r.a.createElement("div",{className:"row m-3 d-flex"},r.a.createElement("div",{className:"col-4 d-flex flex-column border rounded p-0"},r.a.createElement("div",{className:"d-flex justify-content-center "},"DETALLES DEL CULTIVO"),r.a.createElement("div",{className:"border-top p-1"},"Tipo de permiso: ",r.a.createElement("b",null,a.tipo),r.a.createElement("br",null),"Cultivo:"," ",r.a.createElement("b",null,a.nombreCultivo," (Clave: ",a.claveCultivo,")"),r.a.createElement("br",null),"Subciclo: ",r.a.createElement("b",null,a.subciclo),r.a.createElement("br",null),"Superficie autorizada: ",r.a.createElement("b",null,a.supAutorizada," ha"),r.a.createElement("br",null),"Fecha l\xedmite de siembra: ",r.a.createElement("b",null,Mt()(a.fechaLimite).format("DD/MM/YYYY")),r.a.createElement("br",null))),r.a.createElement("div",{className:"col-1"}),r.a.createElement("div",{className:"col-7 d-flex flex-column border rounded"},r.a.createElement("div",{className:"d-flex justify-content-center "},"SUPERFICIE Y DOTACI\xd3N VOLUM\xc9TRICA"),r.a.createElement("div",{className:"row border-top d-flex text-dotacion"},r.a.createElement("div",{className:"col-3 border"},r.a.createElement("div",null,"Descripci\xf3n")),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,"Derecho de riego")),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,"Utilizada Previamente")),r.a.createElement("div",{className:"col-3 border"},r.a.createElement("div",null,"Autorizada en este permiso")),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,"Disponible"))),r.a.createElement("div",{className:"row border-top d-flex text-dotacion"},r.a.createElement("div",{className:"col-3 border"},r.a.createElement("div",null,"Hect\xe1reas")),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,a.supDerecho)),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,a.supPrevia)),r.a.createElement("div",{className:"col-3 border"},r.a.createElement("div",null,a.supAutorizada)),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,a.supDerecho-a.supPrevia-a.supAutorizada))),r.a.createElement("div",{className:"row border-top d-flex text-dotacion"},r.a.createElement("div",{className:"col-3 border"},r.a.createElement("div",null,"l.p.s./24 hrs/hr Parcela")),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,a.supDerecho*a.dotacion)),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,a.supPrevia*a.dotacion)),r.a.createElement("div",{className:"col-3 border"},r.a.createElement("div",null,a.supAutorizada*a.dotacion)),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,(a.supDerecho-a.supPrevia-a.supAutorizada)*a.dotacion))))),r.a.createElement("div",{className:"row m-3 d-flex"},r.a.createElement("div",{className:"col-4 d-flex flex-column border rounded p-0"},r.a.createElement("div",{className:"d-flex justify-content-center "},"DATOS COMPLEMENTARIOS"),r.a.createElement("div",{className:"border-top p-1"},"Cultivo Anterior: ",r.a.createElement("b",null,a.cultivoAnterior),r.a.createElement("br",null),"Fuente de cr\xe9dito: ",r.a.createElement("b",null,a.fuenteCredito),r.a.createElement("br",null),"Variedad: ",r.a.createElement("b",null,a.variedad),r.a.createElement("br",null),"Productor:"," ",r.a.createElement("b",null,a.nombreProductor," (",a.rfcProductor,")"),r.a.createElement("br",null))),r.a.createElement("div",{className:"col-1"}),r.a.createElement("div",{className:"col-7 d-flex flex-column border rounded"},r.a.createElement("div",{className:"d-flex justify-content-center "},"OBSERVACIONES"),r.a.createElement("div",{className:"row border-top d-flex text-dotacion p-1"},r.a.createElement("p",null,a.observaciones)))),r.a.createElement("div",{className:"row m-3 d-flex flex-column justify-content-center border rounded"},r.a.createElement("div",{className:"d-flex justify-content-center "},"TRANSFERENCIA"),r.a.createElement("div",{className:"d-flex border-top p-1"},"Ninguna")),r.a.createElement("div",{className:"row m-3 "},r.a.createElement("div",{className:"col-4 d-flex flex-column"},r.a.createElement("div",{className:"border-top firma d-flex justify-content-center"},"M\xf3dulo"),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("b",null,a.titular)),r.a.createElement("div",{className:"d-flex justify-content-center"},"PRESIDENTE")),r.a.createElement("div",{className:"col-4 d-flex flex-column"},r.a.createElement("div",{className:"border-top firma d-flex justify-content-center"},"Sanidad Vegetal")),r.a.createElement("div",{className:"col-4 d-flex flex-column"},r.a.createElement("div",{className:"border-top firma d-flex justify-content-center"},"FIRMA DEL PRODUCTOR"),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("b",null,a.usuario)),r.a.createElement("div",{className:"d-flex justify-content-center"},"Acepto de conformidad"))),r.a.createElement("div",{className:"row m-3"},r.a.createElement("p",null,r.a.createElement("b",null,r.a.createElement("br",null),r.a.createElement("u",null,"ADVERTENCIAS: (1) Es responsabilidad del usuario de este permiso, disponer de la totalidad del volumen adicional requerido por el cultivo a establecer. (2) Para los sistemas de Gravedad y Pozo Federal un derecho de riego de 20 ha. alcanza para regar una superficie sembrada para el cultivo de Trigo = 20ha., Algod\xf3n = 15ha., Alfalfa 13ha., Esparrago = 16ha., y Sorgo forrajero temprano = 18ha.")))),r.a.createElement("div",{className:"row m-3 d-flex justify-content-between border-top"},r.a.createElement("div",{className:"border rounded mt-2 p-2"},"Folio: ",a.numeroPermiso),r.a.createElement("div",{className:"border rounded mt-2 p-2"},"Bueno por: $ ",a.cuotaCultivo*a.supAutorizada," pesos M.N.")),r.a.createElement("div",{className:"roe m-3"},r.a.createElement("u",null,"Recibimos de El/la C."," ",r.a.createElement("b",null,a.usuario," La cantidad de ",a.cuotaCultivo*a.supAutorizada," pesos M.N.")," ","Por concepto de aportaci\xf3n a las campa\xf1as Fitosanitarias, para el sostenimiento del comit\xe9 Estatal de Sanidad Vegetal.")),r.a.createElement("div",{className:"row m-3 d-flex flex-column justify-content-center border rounded"},r.a.createElement("div",{className:"d-flex justify-content-center "},"DATOS DEL USUARIO"),r.a.createElement("div",{className:"d-flex justify-content-center border-top p-1"},r.a.createElement("p",null,"El/la C.",r.a.createElement("b",null," ",a.usuario)," con cuenta: ",r.a.createElement("b",null,a.cuenta)," tiene un derecho normal de ",r.a.createElement("b",null,a.supDerecho," "),"hect\xe1reas del lote: ",r.a.createElement("b",null,a.lote)," en la colonia ",r.a.createElement("b",null,a.localidad),","," ",r.a.createElement("b",null,a.municipio),", ",r.a.createElement("b",null,a.estado),". M\xf3dulo ",r.a.createElement("b",null,a.modulo),", secci\xf3n"," ",r.a.createElement("b",null,a.seccion)," del canal ",r.a.createElement("b",null,a.canal)," toma ",r.a.createElement("b",null,a.toma)," con sistema de riego por ",r.a.createElement("b",null,a.sistema),"."))),r.a.createElement("div",{className:"row m-3 "},r.a.createElement("div",{className:"col-3 d-flex flex-column"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("img",{src:"./logos/sanidad.webp",alt:"Logo sanidad vegetal",style:{maxHeight:70}})),r.a.createElement("div",{className:"mt-4 d-flex justify-content-center"},"COMIT\xc9 ESTATAL DE"),r.a.createElement("div",{className:"d-flex justify-content-center"},"SANIDAD VEGETAL DE"),r.a.createElement("div",{className:"d-flex justify-content-center"},"BAJA CALIFORNIA")),r.a.createElement("div",{className:"col-6 d-flex justify-content-center align-items-center pt-5"},c?t?r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary ml-5 d-print-none",onClick:d},r.a.createElement("i",{className:"far fa-save"}),r.a.createElement("span",null," Guardar")):r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none",onClick:p},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")):r.a.createElement(r.a.Fragment,null),i?r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):r.a.createElement(r.a.Fragment,null),s?r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none",onClick:p},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")):r.a.createElement(r.a.Fragment,null),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none ml-3",onClick:m},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),r.a.createElement("span",null," Cerrar")))))},nn=function(){var e=Object(l.b)(),a=ja({palabra:""}),t=Object(oa.a)(a,2),n=t[0],o=t[1],c=n.palabra,s=Object(l.c)((function(e){return e.permisosScreen})),i=s.permisos,m=s.permisoSelected,d=s.superficies,p=Object(l.c)((function(e){return e.auth})),E=p.modulo,f=p.privilegios,b="2020-2021";0===i.length&&e(_a(E,b)),null===d&&e(Ka(E,b));var v,N=function(){c.length>0?e(function(e,a,t){return function(){var n=Object(ra.a)(na.a.mark((function n(r){var o;return na.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,qa(e,a,t);case 2:o=n.sent,r(Xa(o));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(c,E,b)):fa.a.fire("Nada para buscar","Ingrese n\xfamero de permiso, n\xfamero de cuenta o el apellido paterno del usuario.","warning")},h=[];i.forEach((function(e){h.push(Object(u.a)(Object(u.a)({},e),{},{fechaEmicion:Mt()(e.fechaEmicion.toDate()).format("DD/MM/YYYY"),fechaLimite:Mt()(e.fechaLimite.toDate()).format("DD/MM/YYYY"),vigencia:Mt()(e.vigencia.toDate()).format("DD/MM/YYYY")}))})),i.forEach((function(e){e.id===m&&(v=e)}));var g={};void 0!==v&&(g=Object(u.a)(Object(u.a)({},v),{},{fechaEmicion:v.fechaEmicion.toDate(),fechaLimite:v.fechaLimite.toDate(),vigencia:v.vigencia.toDate()}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"d-flex justify-content-center col-sm-4 p-2"},f.expedirPermisos?r.a.createElement(ot,null):r.a.createElement(r.a.Fragment,null)),r.a.createElement("div",{className:"col-sm-8 d-inline-flex p-2 pr-4"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"N\xfamero de permiso, n\xfamero de cuenta o apellido paterno",name:"palabra",autoComplete:"off",value:c,onChange:o,onKeyUp:function(e){"Enter"===e.key&&N()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:N},r.a.createElement("i",{className:"fas fa-search"})))))),r.a.createElement("div",{className:"row pt-3 pb-4"},r.a.createElement("div",{className:"col-sm-8 pr-0 mt-3"},r.a.createElement(ut,{title:"Permisos",columns:Nt,data:h,setFunction:Ja})),m&&void 0!==v?r.a.createElement("div",{className:"col-sm-4 mt-3"},r.a.createElement("div",{className:"border border-info rounded detallePermiso"},r.a.createElement("div",{className:"d-flex bg-light border-info border-bottom rounded-top p-1 justify-content-center font-weight-bold text-secondary pt-3"},r.a.createElement("h5",null,v.numeroPermiso)),r.a.createElement("div",{className:"row p-1 pl-2 pt-2"},r.a.createElement("div",{className:"col-4"},"CUENTA:"),r.a.createElement("div",{className:"col-8"},v.cuenta)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"USUARIO:"),r.a.createElement("div",{className:"col-8"},v.usuario)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"PRODUCTOR:"),r.a.createElement("div",{className:"col-8"},v.nombreProductor)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"CULTIVO:"),r.a.createElement("div",{className:"col-8"},v.nombreCultivo)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SUBCICLO:"),r.a.createElement("div",{className:"col-8"},v.subciclo)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SUPERFICIE:"),r.a.createElement("div",{className:"col-8"},v.supAutorizada," ha")),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"DOTACION:"),r.a.createElement("div",{className:"col-8"},v.dotacion*v.supAutorizada," lts")),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SISTEMA:"),r.a.createElement("div",{className:"col-8"},v.sistema)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"LOCALIDAD:"),r.a.createElement("div",{className:"col-8"},v.localidad)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"LOTE:"),r.a.createElement("div",{className:"col-8"},v.lote)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SECCION:"),r.a.createElement("div",{className:"col-8"},v.seccion)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"MODULO:"),r.a.createElement("div",{className:"col-8"},v.modulo)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"EXPEDICION:"),r.a.createElement("div",{className:"col-8"},Mt()(v.fechaEmicion.toDate()).format("DD/MM/YYYY"))),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"FECHA LIMITE:"),r.a.createElement("div",{className:"col-8"},Mt()(v.fechaLimite.toDate()).format("DD/MM/YYYY"))),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"VIGENCIA:"),r.a.createElement("div",{className:"col-8"},Mt()(v.vigencia.toDate()).format("DD/MM/YYYY"))),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"ESTADO:"),r.a.createElement("div",{className:"col-8"},v.estadoPermiso)),r.a.createElement("div",{className:"row p-1 pl-2 pt-4 pb-4"},r.a.createElement("div",{className:"col-6 d-flex justify-content-center"},r.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:function(){e(Ut())}},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir"))),r.a.createElement("div",{className:"col-6 d-flex justify-content-center"},"activo"===v.estadoPermiso&&f.cancelarPermisos?r.a.createElement("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){fa.a.fire({input:"textarea",inputPlaceholder:"Indique la raz\xf3n por la que desea cancelar el permiso",title:"Atenci\xf3n!!",text:"Est\xe1 a punto de cancelar el permiso ".concat(v.numeroPermiso,", \xbfRealmente desea cancelar este permiso?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then((function(a){var t=a.isConfirmed,n=a.value;t&&(n.length>0?(!function(e,a,t,n){ua.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisos").doc(e).update({estadoPermiso:"En proceso de cancelaci\xf3n",motivoCancelacion:n})}(m,E,b,n),e(_a(E,b)),fa.a.fire("Solicitud recibida","Se inici\xf3 el proceso de cancelaci\xf3n para el permiso ".concat(v.numeroPermiso),"success")):fa.a.fire("Error","Indique la raz\xf3n por la que desea cancelar el permiso","warning"))}))}},r.a.createElement("i",{className:"fas fa-times"}),r.a.createElement("span",null," Cancelar")):r.a.createElement(r.a.Fragment,null))))):r.a.createElement("div",{className:"col-sm-4 mt-3"},r.a.createElement("div",{className:"border border-info rounded detallePermiso"},r.a.createElement(Va,null)))),r.a.createElement(tn,{data:g,isNew:!1}))},rn={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};Tt.a.setAppElement("#root");var on=function(){var e,a=Object(l.b)(),t=Object(l.c)((function(e){return e.altaPermisos})),n=t.openCultivosModal,o=t.cultivos;e=Object.values(o);return r.a.createElement(Tt.a,{isOpen:n,onRequestClose:function(){a(Bt())},style:rn,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement(ut,{title:0===e.length?"No se encontraron cultivos":"Cultivos",columns:ft,data:e,setFunction:Ht,closeFunction:Bt}))},cn={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};Tt.a.setAppElement("#root");var ln=function(){var e,a=Object(l.b)(),t=Object(l.c)((function(e){return e.altaPermisos})),n=t.openUsuariosModal,o=t.usuarios;e=Object.values(o);return r.a.createElement(Tt.a,{isOpen:n,onRequestClose:function(){a(jt())},style:cn,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement(ut,{title:0===e.length?"No se encontraron usuarios":"Usuarios",columns:pt,data:e,setFunction:zt,closeFunction:jt}))},sn={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};Tt.a.setAppElement("#root");var un=function(){var e,a=Object(l.b)(),t=Object(l.c)((function(e){return e.altaPermisos})),n=t.openProductoresModal,o=t.productores;e=Object.values(o);return r.a.createElement(Tt.a,{isOpen:n,onRequestClose:function(){a(Xt())},style:sn,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement(ut,{title:0===e.length?"No se encontraron productores":"Productores",columns:Et,data:e,setFunction:Qt,closeFunction:Xt}),r.a.createElement("div",{className:"row d-flex justify-content-center pt-3"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:function(){a(Xt()),a({type:T})}},r.a.createElement("span",null,"Registrar nuevo productor "),r.a.createElement("i",{className:"fas fa-plus"}))))},mn={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};Tt.a.setAppElement("#root");var dn=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.altaPermisos})).isOpenNuevoProductorModal,t=Object(l.c)((function(e){return e.ui})).msgError,n=function(){e({type:G})},o=ja(),c=Object(oa.a)(o,2),s=c[0],i=c[1],m=s.apPaterno,d=void 0===m?"":m,p=s.direccion,E=void 0===p?"":p,f=s.apMaterno,b=void 0===f?"":f,v=s.estado,N=void 0===v?"":v,h=s.nombre,g=void 0===h?"":h,O=s.municipio,x=void 0===O?"":O,y=s.rfc,A=void 0===y?"":y,j=s.cp,C=void 0===j?"":j,P=s.genero,z=void 0===P?"":P,w=s.telefono,S=void 0===w?"":w,R=s.curp,D=void 0===R?"":R,k=function(){return 0===d.trim().length?(e(ma("Se requiere apellido paterno")),!1):0===E.trim().length?(e(ma("Se requiere direccion")),!1):0===b.trim().length?(e(ma("Se requiere apellido materno")),!1):0===N.trim().length?(e(ma("Se requiere estado")),!1):0===g.trim().length?(e(ma("Se requiere nombre")),!1):0===x.trim().length?(e(ma("Se requiere municipio")),!1):A.trim().length<12?(e(ma("RFC no valido")),!1):D.trim().length<18?(e(ma("CURP no valido")),!1):C.trim().length<5?(e(ma("Codigo postal no valido")),!1):z?S.replace(/ /g,"").length<10?(e(ma("Telefono no valido")),!1):(e(da()),!0):(e(ma("Se requiere genero")),!1)};return r.a.createElement(Tt.a,{isOpen:a,onRequestClose:n,style:mn,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement("div",{className:"row m-3 d-flex justify-content-center"},r.a.createElement("h1",null,"Registro de nuevo productor")),r.a.createElement("form",{className:"container pb-4",autoComplete:"waa",onSubmit:function(a){var t;a.preventDefault(),k()&&(e((t=Object(u.a)(Object(u.a)({},s),{},{apPaterno:d.toUpperCase(),apMaterno:b.toUpperCase(),nombre:g.toUpperCase(),direccion:E.toUpperCase(),estado:N.toUpperCase(),municipio:x.toUpperCase(),rfc:A.toUpperCase(),curp:D.toUpperCase(),telefono:S.replace(/ /g,"")}),function(){ua.collection("productores").add(t).then((function(){console.log("Productor registrado"),fa.a.fire("Productor registrado","Se registraron con \xe9xito los cambios.","success")})).catch((function(e){console.log(e),fa.a.fire("Error",e,"error")}))})),n())}},t&&r.a.createElement("div",{className:"auth__alert-error"},t),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Apellido Paterno",name:"apPaterno",autoComplete:"off",onChange:i})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Direccion",name:"direccion",autoComplete:"waa",onChange:i}))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Apellido Materno",name:"apMaterno",autoComplete:"waa",onChange:i})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Estado",name:"estado",autoComplete:"waa",onChange:i}))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Nombre",name:"nombre",autoComplete:"off",onChange:i})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Municipio",name:"municipio",autoComplete:"waa",onChange:i}))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* RFC",name:"rfc",autoComplete:"waa",onChange:i})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* CP",name:"cp",autoComplete:"waa",onChange:i}))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* CURP",name:"curp",autoComplete:"off",onChange:i})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Telefono",name:"telefono",autoComplete:"off",onChange:i}))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6 d-flex align-items-baseline pt-2"},r.a.createElement("span",null,"*"),r.a.createElement("div",{className:"px-4"},r.a.createElement("input",{type:"radio",id:"masculino",name:"genero",value:"MASCULINO",onChange:i}),r.a.createElement("span",null," "),r.a.createElement("label",{htmlFor:"masculino"}," Masculino")),r.a.createElement("div",{className:"px-4"},r.a.createElement("input",{type:"radio",id:"femenino",name:"genero",value:"FEMENINO",onChange:i}),r.a.createElement("span",null," "),r.a.createElement("label",{htmlFor:"femenino"}," Femenino")))),r.a.createElement("div",{className:"row d-flex justify-content-center pt-5"},r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary"},r.a.createElement("i",{className:"far fa-save"}),r.a.createElement("span",null," Guardar")))))},pn=function(){var e=Object(l.b)(),a=function(){t(),p.length>0?e(Vt()):fa.a.fire("Nada para buscar","Ingrese nombre del cultivo","warning")},t=function(){e(Yt(p.toUpperCase()))},n=Object(l.c)((function(e){return e.altaPermisos})),o=n.idCultivoSelected,c=n.nombreCultivo,s="";o&&(s=c);var i=ja({cultivo:""}),u=Object(oa.a)(i,2),m=u[0],d=u[1],p=m.cultivo;return r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},"* Cultivo: "),r.a.createElement("label",{className:""},s," "),o?r.a.createElement("div",{className:"fas fa-check text-success p-3"}):r.a.createElement(r.a.Fragment,null),o?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex-grow-1"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Cultivo",name:"cultivo",autoComplete:"off",value:p,onChange:d,onKeyUp:function(e){"Enter"===e.key&&a()}})),o?r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){e(_t()),m.cultivo=""}},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:a},r.a.createElement("i",{className:"fas fa-search"}))))},En=function(){var e=Object(l.b)(),a=function(){t(),p.length>0?e(Zt()):fa.a.fire("Nada para buscar","Ingrese apellido paterno del productor","warning")},t=function(){e(Jt(p.toUpperCase()))},n=Object(l.c)((function(e){return e.altaPermisos})),o=n.idProductorSelected,c=n.nombreProductor,s="";o&&(s=c);var i=ja({productor:""}),u=Object(oa.a)(i,2),m=u[0],d=u[1],p=m.productor;return r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},"* Productor: "),r.a.createElement("label",null,s," "),o?r.a.createElement("div",{className:"fas fa-check text-success p-3"}):r.a.createElement(r.a.Fragment,null),o?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex-grow-1"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Apellido paterno",name:"productor",autoComplete:"off",value:p,onChange:d,onKeyUp:function(e){"Enter"===e.key&&a()}})),o?r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){e($t()),m.productor=""}},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:a},r.a.createElement("i",{className:"fas fa-search"}))))},fn=function(){var e=Object(l.c)((function(e){return e.altaPermisos})),a=e.usuarios,t=e.idUsuarioSelected,n=e.supPrevia,o="",c="",s="",i="",u="",m="",d="";return a.forEach((function(e){e.id===t&&(c="".concat(e.cuenta,".").concat(e.subcta),o=e.localidad,s=e.supRiego,i=e.predio,u=s-n,m="".concat(e.apPaterno," ").concat(e.apMaterno," ").concat(e.nombre),d=e.seccion)})),r.a.createElement("div",{className:"border rounded mb-4 p-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},"Cuenta: ",c),r.a.createElement("div",{className:"col-sm-3"},"Colonia/Ejido: ",o),r.a.createElement("div",{className:"col-sm-3"},"Sup. Derecho: ",s)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},"Usuario: ",m),r.a.createElement("div",{className:"col-sm-3"},"Lote: ",i),r.a.createElement("div",{className:"col-sm-3"},"Sup. Disponible: ",u)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"}),r.a.createElement("div",{className:"col-sm-3"},"Seccion: ",d)))},bn=function(){var e=Object(l.c)((function(e){return e.altaPermisos})),a=e.productores,t=e.idProductorSelected,n="",o="";return a.forEach((function(e){e.id===t&&(n=e.rfc,o="".concat(e.apPaterno," ").concat(e.apMaterno," ").concat(e.nombre))})),r.a.createElement("div",{className:"border rounded mb-4 p-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},"Productor: ",o),r.a.createElement("div",{className:"col-sm-4"},"RFC Productor: ",n)))},vn=function(){var e=Object(ra.a)(na.a.mark((function e(a,t){var n;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.next=3,ua.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).get().then((function(e){e.exists?n=e.data().numeroPermisosModulo:ua.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).set({numeroPermisosModulo:0})})).catch((function(e){console.log(" Error: ",e)}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Nn=function(){var e=Object(l.c)((function(e){return e.altaPermisos})),a=e.idUsuarioSelected,t=e.idProductorSelected,n=e.subciclo,o=e.nombreCultivo,c=Object(l.c)((function(e){return e.altaPermisos})),s=Object(l.c)((function(e){return e.auth})),i=Object(l.c)((function(e){return e.ui})).msgError,m=Object(l.c)((function(e){return e.autorizadosScreen})).autorizados,d=ja({variedad:"",supAutorizada:0,fuenteCredito:"",latitud:"",longitud:"",observaciones:"",cultivoAnterior:"",transferencia:""}),p=Object(oa.a)(d,2),E=p[0],f=p[1],b=E.variedad,v=E.supAutorizada,N=E.fuenteCredito,h=E.observaciones,g=E.cultivoAnterior,O=E.transferencia,x=Object(u.a)(Object(u.a)(Object(u.a)({},E),c),s),y=Object(l.b)();0===m.length&&y(Wa("2020-2021",s.modulo));var A=function(){var e=Object(ra.a)(na.a.mark((function e(a){return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j()){e.next=11;break}return a.preventDefault(),y({type:V,payload:E}),e.t0=y,e.t1=Lt,e.next=7,C();case 7:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3),y(Ut());case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),j=function(){return c.usuario?c.nombreProductor?c.nombreCultivo?v<=0?(y(ma("Ingrese la superficie que ser\xe1 autorizada en este permiso.")),!1):c.supDerecho-c.supPrevia<v?(y(ma("La superficie excede la superficie disponible de la cuenta seleccionada.")),!1):N?g?"Superficie no disponible"===P()?(y(ma("Superficie no disponible.")),!1):(y(da()),!0):(y(ma("Especifique el cultivo anterior.")),!1):(y(ma("Especifique la fuente de cr\xe9dito.")),!1):(y(ma("El campo cultivo es obligatorio.")),!1):(y(ma("El campo productor es obligatorio.")),!1):(y(ma("El campo usuario es obligatorio.")),!1)},C=function(){var e=Object(ra.a)(na.a.mark((function e(){var a;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=P(),e.t1=z(),e.next=4,w();case 4:return e.t2=e.sent,e.t3=Mt()(),e.t4=Mt()().add(10,"days"),e.t5=R(n),e.next=10,D(o);case 10:return e.t6=e.sent,a={tipo:e.t0,ciclo:e.t1,numeroPermiso:e.t2,fechaEmicion:e.t3,fechaLimite:e.t4,vigencia:e.t5,estadoPermiso:e.t6},e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e="";return m.forEach((function(a){a.cultivo===c.nombreCultivo&&a.clave===c.claveCultivo&&("Gravedad"===c.sistema?e=a.gravedadNormalAsignada>=v?"normal":a.gravedadExtraAsignada>=v?"extra":"Superficie no disponible":"Pozo Federal"===c.sistema&&(e=a.pozoNormalAsignada>=v?"normal":a.pozoExtraAsignada>=v?"extra":"Superficie no disponible"))})),e},z=function(){return"2020-2021"},w=function(){var e=Object(ra.a)(na.a.mark((function e(){var a;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0="MOD".concat(s.modulo,"-"),e.t1=S,e.next=4,vn(s.modulo,z());case 4:return e.t2=e.sent,e.t3=e.t2+1,e.t4=(0,e.t1)(e.t3,3),a=e.t0.concat.call(e.t0,e.t4),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e,a){return"0".repeat(a-e.toString().length)+e.toString()},R=function(e){var a=null;if(e)switch(e){case"PRIMAVERA-VERANO":a=Mt()("09/30/2021");break;case"OTO\xd1O-INVIERNO":a=Mt()("05/31/2021");break;case"PERENNES":case"PERENES":a=Mt()("09/30/2021");break;default:a=""}return a},D=function(){var e=Object(ra.a)(na.a.mark((function e(a){var t;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",t="ALGODONERO"===a?"pendiente":"activo",e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row m-3 d-flex justify-content-center"},r.a.createElement("h1",null,"Alta de permiso unico de siembra")),r.a.createElement("form",{className:"container pb-4"},i&&r.a.createElement("div",{className:"auth__alert-error"},i),a?r.a.createElement(fn,null):r.a.createElement(r.a.Fragment,null),t?r.a.createElement(bn,null):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"row"},r.a.createElement(Rt,null),r.a.createElement(En,null)),r.a.createElement("div",{className:"row"},r.a.createElement(pn,null),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},"* Variedad:"),r.a.createElement("div",{className:"flex-grow-1 "},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"variedad",name:"variedad",value:b,autoComplete:"off",onChange:f}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},"* Superficie:"),r.a.createElement("div",{className:"flex-grow-1 "},r.a.createElement("input",{type:"number",className:"form-control",placeholder:"superficie",name:"supAutorizada",value:v,autoComplete:"off",onChange:f})))),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},"* Fuente de credito:"),r.a.createElement("div",{className:"flex-grow-1 "},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"fuente de credito",name:"fuenteCredito",value:N,autoComplete:"off",onChange:f}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},"* Cultivo anterior:"),r.a.createElement("div",{className:"flex-grow-1 "},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Cultivo anterior",name:"cultivoAnterior",value:g,autoComplete:"off",onChange:f})))),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},"Transferencia interna:"),r.a.createElement("div",{className:"flex-grow-1 "},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Cuenta destino",name:"transferencia",value:O,autoComplete:"off",onChange:f}))))),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{type:"text",className:"form-control",placeholder:"Observaciones",rows:"5",name:"observaciones",value:h,onChange:f}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Informaci\xf3n adicional")),i&&r.a.createElement("div",{className:"auth__alert-error"},i),r.a.createElement("div",{className:"row d-flex justify-content-center pt-5"},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:A},r.a.createElement("i",{className:"far fa-save"}),r.a.createElement("span",null," Guardar")))),r.a.createElement(on,null),r.a.createElement(ln,null),r.a.createElement(un,null),r.a.createElement(dn,null),r.a.createElement(tn,{data:x,isNew:!0}))},hn=function(){var e=Object(l.c)((function(e){return e.entidades})).usuario;if(e){var a="".concat(e.cuenta,".").concat(e.subcta),t=e.localidad,n=e.supRiego,o=e.predio,c=n-e.supPrevia,s="".concat(e.apPaterno," ").concat(e.apMaterno," ").concat(e.nombre),i=e.seccion;return r.a.createElement("div",{className:"row border border-info rounded m-1"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row border-bottom border-info p-2"},r.a.createElement("div",{className:"col-12 d-flex justify-content-center"},r.a.createElement("h3",null,"Cuenta: ",a))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 d-flex flex-column p-4"},r.a.createElement("div",null,"Usuario: ",s),r.a.createElement("div",null,"Lote: ",o),r.a.createElement("div",null,"Colonia/Ejido: ",t),r.a.createElement("div",null,"Seccion: ",i),r.a.createElement("div",null,"Sup. Derecho: ",n),r.a.createElement("div",null,"Sup. Disponible: ",c)))))}return r.a.createElement(r.a.Fragment,null)},gn=function(){var e=Object(l.b)(),a=function(){t(),p.length>0?e(Zt()):fa.a.fire("Nada para buscar","Ingrese apellido paterno del productor","warning")},t=function(){e(Jt(p.toUpperCase()))},n=Object(l.c)((function(e){return e.altaPermisos})),o=n.idProductorSelected,c=n.nombreProductor,s="";o&&(s=c);var i=ja({productor:""}),u=Object(oa.a)(i,2),m=u[0],d=u[1],p=m.productor;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",null,"* Productor: "),o?r.a.createElement("div",{className:"fas fa-check text-success p-3"}):r.a.createElement(r.a.Fragment,null),o?r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){e($t()),m.productor=""}},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:a},r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement("label",null,s," "),o?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex-grow-1"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Apellido paterno",name:"productor",autoComplete:"off",value:p,onChange:d,onKeyUp:function(e){"Enter"===e.key&&a()}}))))},On=function(){var e=Object(l.b)(),a=function(){t(),p.length>0?e(Vt()):fa.a.fire("Nada para buscar","Ingrese nombre del cultivo","warning")},t=function(){e(Yt(p.toUpperCase()))},n=Object(l.c)((function(e){return e.altaPermisos})),o=n.idCultivoSelected,c=n.nombreCultivo,s="";o&&(s=c);var i=ja({cultivo:""}),u=Object(oa.a)(i,2),m=u[0],d=u[1],p=m.cultivo;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",null,"* Cultivo: "),o?r.a.createElement("div",{className:"fas fa-check text-success p-3"}):r.a.createElement(r.a.Fragment,null),o?r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){e(_t()),m.cultivo=""}},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:a},r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement("label",{className:""},s," "),o?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex-grow-1"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Cultivo",name:"cultivo",autoComplete:"off",value:p,onChange:d,onKeyUp:function(e){"Enter"===e.key&&a()}}))))},xn=function(){var e=Object(ra.a)(na.a.mark((function e(){var a,t;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ua.collectionGroup("permisos").where("tecnico","==","sinAsignar"),t=[],e.next=4,a.get().then((function(e){e.forEach((function(e){t.includes(e.data().localidad)||t.push(e.data().localidad)}))}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),yn=function(){var e=Object(ra.a)(na.a.mark((function e(a){var t,n,r,o;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],r=[],o=function(e){r.push(ua.collection("colonias").where("nombre","in",e).get())},a.forEach((function(e,a){t.push(e),10===t.length&&(o(t),t.splice(0,t.length))})),t.length>0&&o(t),e.next=8,Promise.all(r);case 8:return e.sent.forEach((function(e){e.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))}))})),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),An=function(){var e=Object(ra.a)(na.a.mark((function e(a,t,n,r){var o,c,l;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],c=[],l=function(e){c.push(ua.collection("permisos").doc(a).collection("modulos").doc("Modulo-".concat(t)).collection("permisos").where("localidad","in",e).where("tecnico","==","sinAsignar").get())},n.forEach((function(e,a){o.push(e),10===o.length&&(l(o),o.splice(0,o.length))})),o.length>0&&l(o),e.next=7,Promise.all(c).then((function(e){e.forEach((function(e){e.forEach((function(e){ua.runTransaction(function(){var a=Object(ra.a)(na.a.mark((function a(t){return na.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",t.get(e.ref).then((function(a){a.exists||console.log("Document does not exist!"),t.update(e.ref,{tecnico:r})})));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).then((function(){return console.log("Transaction successfully committed!"),!0})).catch((function(e){console.log("Transaction failed: ",e)}))})),fa.a.fire("T\xe9cnico asignado","El t\xe9cnico se asign\xf3 con \xe9xito en las localidades seleccionadas.","success")}))}));case 7:case"end":return e.stop()}}),e)})));return function(a,t,n,r){return e.apply(this,arguments)}}(),jn=function(){var e=Object(ra.a)(na.a.mark((function e(a){var t,n;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.collection("colonias").orderBy("nombre").startAt(a).endAt(a+"\uf8ff").get();case 2:return t=e.sent,n=[],t.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Cn=function(){return function(){var e=Object(ra.a)(na.a.mark((function e(a){var t,n;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xn();case 2:return t=e.sent,e.next=5,yn(t);case 5:n=e.sent,a(Pn(n));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},Pn=function(e){return{type:Le,payload:e}},zn=function(){return{type:Ue}},wn=function(e){return{type:Fe,payload:e}},Sn=function(){return{type:Te}},Rn=function(e){return{type:Ge,payload:e}},Dn=function(){return{type:Ye}},kn=function(){var e=Object(l.b)(),a=function(){t(),d.length>0?e({type:Be}):fa.a.fire("Nada para buscar","Ingrese nombre de la localidad","warning")},t=function(){e(function(e){return function(){var a=Object(ra.a)(na.a.mark((function a(t){var n;return na.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,jn(e);case 2:n=a.sent,t(Pn(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(d.toUpperCase()))},n=Object(l.c)((function(e){return e.entidades})).localtieSelected,o="",c="";n&&(o=n.nombre,c=n.id);var s=ja({localtie:""}),i=Object(oa.a)(s,2),u=i[0],m=i[1],d=u.localtie;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",null,"* Localidad destino: "),c?r.a.createElement("div",{className:"fas fa-check text-success p-3"}):r.a.createElement(r.a.Fragment,null),c?r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){e({type:Ve}),u.localtie=""}},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:a},r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement("label",{className:""},o," "),c?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex-grow-1"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Localidad",name:"localtie",autoComplete:"off",value:d,onChange:m,onKeyUp:function(e){"Enter"===e.key&&a()}}))))},In=function(){var e,a=Object(l.c)((function(e){return e.entidades})),t=a.usuario,n=a.localtieSelected,o=Object(l.c)((function(e){return e.altaPermisos})),c=o.nombreProductor,s=o.rfcProductor,i=o.nombreCultivo,u=o.claveCultivo,m=ja({superficieTransferida:0,loteDestino:"",moduloDestino:""}),d=Object(oa.a)(m,2),p=d[0],E=p.superficieTransferida,f=p.loteDestino,b=p.moduloDestino,v=d[1],N=Object(l.c)((function(e){return e.ui})).msgError;t&&(e=t.supRiego-t.supPrevia);var h=Object(l.b)(),g=function(a){(a.preventDefault(),parseInt(E)<=0?(h(ma("Indique superficie a transferir")),0):parseInt(E)>e?(h(ma("La superficie a transferir excede a la superficie disponible")),0):0===b.trim().length?(h(ma("Indique el m\xf3dulo destino")),0):0===f.trim().length?(h(ma("Indique el lote en el que se aplicar\xe1 la transferencia")),0):null===s?(h(ma("Indique Productor")),0):null===i?(h(ma("Indique Cultivo")),0):null===n?(h(ma("Indique la localidad destino")),0):(h(da()),1))&&(!function(e,a){ua.collection("transferencias").doc(a).collection("transferencias").add(e).then((function(){return fa.a.fire("Transferencia Guardada","Se registr\xf3 con \xe9xito la nueva transferencia.","success"),!0})).catch((function(e){console.log(e),fa.a.fire("Error",e,"error")}))}({superficieTransferida:parseInt(E),loteDestino:f,localidadDestino:n.nombre,clavelocalidadDestino:n.clave,moduloDestino:b,cuentaOrigen:"".concat(t.cuenta,".").concat(t.subcta),usuario:"".concat(t.apPaterno," ").concat(t.apMaterno," ").concat(t.nombre),loteOrigen:t.predio,localidadOrigen:t.ejido,moduloOrigen:t.modulo,nombreProductor:c,rfcProductor:s,nombreCultivo:i,claveCultivo:u,fecha:new Date},"2020-2021"),h(zt(t)))},O=function(e){"Enter"===e.key&&g()};return t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row border border-info rounded mt-4 m-1"},r.a.createElement("div",{className:"col-12 d-flex justify-content-center border-bottom border-info p-2"},r.a.createElement("h3",null,"Transferencia")),r.a.createElement("div",{className:"col-12 d-flex flex-column p-3"},N&&r.a.createElement("div",{className:"auth__alert-error"},N),r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement("label",{htmlFor:""},"* Superficie a transferir (ha):"),r.a.createElement("input",{type:"number",className:"form-control ml-1",placeholder:"0 ha",name:"superficieTransferida",autoComplete:"off",value:E,onChange:v,onKeyUp:O})),r.a.createElement("div",{className:"row d-flex p-3"},r.a.createElement(On,null)),r.a.createElement("div",{className:"row d-flex p-3"},r.a.createElement(gn,null)),r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement("label",{htmlFor:""},"* Modulo destino:"),r.a.createElement("input",{type:"text",className:"form-control ml-1",placeholder:"Modulo",name:"moduloDestino",autoComplete:"off",value:b,onChange:v,onKeyUp:O})),r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement(kn,null)),r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement("label",{htmlFor:""},"* Lote destino:"),r.a.createElement("input",{type:"text",className:"form-control ml-1",placeholder:"Lote",name:"loteDestino",autoComplete:"off",value:f,onChange:v,onKeyUp:O})),r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement("button",{className:" btn btn-outline-primary flex-fill",type:"button",onClick:g},r.a.createElement("span",null,"Guardar "),r.a.createElement("i",{className:"fas fa-save"})))))):r.a.createElement(r.a.Fragment,null)},Mn=function(){var e=Object(l.c)((function(e){return e.auth})).modulo,a=Object(l.b)(),t=function(){i.length>0?a(Ct(i.toUpperCase(),e)):fa.a.fire("Nada para buscar","Ingrese apellido paterno o cuenta del usuario","warning")},n=ja({usuario:""}),o=Object(oa.a)(n,2),c=o[0],s=o[1],i=c.usuario;return r.a.createElement("div",null,r.a.createElement("div",{className:"row form-group d-flex align-items-baseline pt-3"},r.a.createElement("label",{className:"col-sm-3"},"Usuario: "),r.a.createElement("div",{className:"col-sm-9 d-flex"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Apellido paterno o numero de cuenta",name:"usuario",autoComplete:"off",value:i,onChange:s,onKeyUp:function(e){"Enter"===e.key&&t()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:t},r.a.createElement("i",{className:"fas fa-search"})))))},Ln=function(){var e=Object(l.c)((function(e){return e.entidades})).usuarios,a=[];return e?(a=Object.values(e),r.a.createElement(ut,{title:0===a.length?"No se encontraron usuarios":"Usuarios",columns:pt,data:a,setFunction:zt})):r.a.createElement(r.a.Fragment,null)},Un={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};Tt.a.setAppElement("#root");var Fn=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.entidades})),t=a.openLocaltiesModal,n=a.localties,o=[];n&&(o=Object.values(n));return r.a.createElement(Tt.a,{isOpen:t,onRequestClose:function(){e(Dn())},style:Un,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement(ut,{title:0===o.length?"No se encontraron localidades":"Localidades",columns:vt,data:o,setFunction:Rn,closeFunction:Dn}))},Tn=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(Mn,null))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(Ln,null)),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement(hn,null),r.a.createElement(In,null))),r.a.createElement(un,null),r.a.createElement(dn,null),r.a.createElement(on,null),r.a.createElement(Fn,null))},Gn=function(){var e=Object(l.c)((function(e){return e.entidades})).selectedLocalties,a=Object(l.c)((function(e){return e.auth})),t=a.uid,n=a.modulo,o=Object(l.b)(),c=[];e&&e.forEach((function(e){c.push(e.nombre)}));return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:function(){o(function(e,a,t,n){return An(e,a,t,n),function(){var e=Object(ra.a)(na.a.mark((function e(a){return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Cn());case 2:a(zn()),a(Sn());case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}("2020-2021",n,c,t))}},r.a.createElement("span",null,"Asignar t\xe9cnico "),r.a.createElement("i",{className:"fas fa-plus"})))},Vn=function(e){var a=e.title,t=e.columns,n=e.data,o=e.setSelectedRowsFunction,c=e.contextMessage,s=Object(l.b)();return r.a.createElement(it.a,{columns:t,data:n,title:a,pagination:!0,paginationComponentOptions:{rowsPerPageText:"Filas por pagina",rangesSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"},fixedHeader:!0,persistTableHead:!0,fixedHeaderScrollHeight:"380px",highlightOnHover:!0,striped:!0,pointerOnHover:!0,dense:!0,selectableRows:!0,onSelectedRowsChange:function(e){s(o(e.selectedRows))},contextMessage:c})},Bn=function(){var e=Object(l.c)((function(e){return e.entidades})).localties,a=Object(l.b)();e||a(Cn());return e?r.a.createElement(Vn,{title:"Localidades disponibles",columns:vt,data:e,setSelectedRowsFunction:wn,contextMessage:{singular:"localidad",plural:"localidades",message:"para asignar"}}):r.a.createElement(r.a.Fragment,null)},Yn=function(){var e=Object(l.c)((function(e){return e.entidades})).selectedLocalties;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row d-flex justify-content-center p-4"},r.a.createElement("h1",null,"Asignaci\xf3n de t\xe9cnico")),e&&e.length>0?r.a.createElement(Gn,null):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"row pt-3"},r.a.createElement(Bn,null)))},qn=function(){var e=Object(ra.a)(na.a.mark((function e(){var a,t;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t=ua.collectionGroup("permisos").where("nombreCultivo","==","ALGODONERO"),e.next=4,t.get().then((function(e){e.forEach((function(e){a.push(Object(u.a)({id:e.id},e.data()))}))}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Hn=function(){var e=Object(ra.a)(na.a.mark((function e(a){var t,n,r,o;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=ua.collectionGroup("permisos").where("nombreCultivo","==","ALGODONERO").orderBy("usuario").startAt(a.toUpperCase()).endAt(a.toUpperCase()+"\uf8ff"),e.next=4,n.get().then((function(e){e.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}))}));case 4:return r=ua.collectionGroup("permisos").where("nombreCultivo","==","ALGODONERO").orderBy("cuenta").startAt(a.toUpperCase()).endAt(a.toUpperCase()+"\uf8ff"),e.next=7,r.get().then((function(e){e.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}))}));case 7:return o=ua.collectionGroup("permisos").where("nombreCultivo","==","ALGODONERO").orderBy("numeroPermiso").startAt(a.toUpperCase()).endAt(a.toUpperCase()+"\uf8ff"),e.next=10,o.get().then((function(e){e.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}))}));case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),_n=function(){return function(){var e=Object(ra.a)(na.a.mark((function e(a){var t;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn();case 2:t=e.sent,a(Kn(t));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},Kn=function(e){return{type:Ne,payload:e}},Zn=function(e){return{type:Q,payload:e.id}},Xn=function(e,a,t,n){ua.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisos").doc(e).update(n)},Jn=function(){var e,a=Object(l.b)(),t=Object(l.c)((function(e){return e.algodoneroScreen})),n=t.permisos,o=t.permisoSelected;n.forEach((function(a){a.id===o&&(e=a)}));var c=function(t,n){n.preventDefault(),Xn(o,e.modulo,"2020-2021",t),a(_n())},s=new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"});return r.a.createElement("div",{className:"col-sm-4 mt-3"},r.a.createElement("div",{className:"border border-info rounded detallePermiso"},r.a.createElement("div",{className:"d-flex bg-light border-info border-bottom rounded-top p-1 justify-content-center font-weight-bold text-secondary pt-3"},r.a.createElement("h5",null,e.numeroPermiso)),r.a.createElement("div",{className:"row p-1 pl-2 pt-2"},r.a.createElement("div",{className:"col-4"},"CUENTA:"),r.a.createElement("div",{className:"col-8"},e.cuenta)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"USUARIO:"),r.a.createElement("div",{className:"col-8"},e.usuario)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"PRODUCTOR:"),r.a.createElement("div",{className:"col-8"},e.nombreProductor)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SUPERFICIE:"),r.a.createElement("div",{className:"col-8"},e.supAutorizada," ha")),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"LOTE:"),r.a.createElement("div",{className:"col-8"},e.lote)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"LOCALIDAD:"),r.a.createElement("div",{className:"col-8"},e.localidad)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SECCION:"),r.a.createElement("div",{className:"col-8"},e.seccion)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"MODULO:"),r.a.createElement("div",{className:"col-8"},e.modulo)),r.a.createElement("div",{className:"row p-1 pl-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-4"},"DESFOLIADO:"),r.a.createElement("div",{className:"col-8"},e.desfoliado?r.a.createElement("button",{className:" btn btn-success btn-sm ",type:"button",onClick:function(e){return c({desfoliado:!1},e)}},r.a.createElement("i",{className:"fas fa-check"})):r.a.createElement("button",{className:" btn btn-outline-success btn-sm ",type:"button",onClick:function(e){return c({desfoliado:!0},e)}},r.a.createElement("i",{className:"fas fa-check"})))),r.a.createElement("div",{className:"row p-1 pl-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-4"},"COSECHADO:"),r.a.createElement("div",{className:"col-8"},e.cosechado?r.a.createElement("button",{className:" btn btn-success btn-sm ",type:"button",onClick:function(e){return c({cosechado:!1},e)}},r.a.createElement("i",{className:"fas fa-check"})):e.desfoliado?r.a.createElement("button",{className:" btn btn-outline-success btn-sm ",type:"button",onClick:function(e){return c({cosechado:!0},e)}},r.a.createElement("i",{className:"fas fa-check"})):r.a.createElement("button",{className:" btn btn-outline-secondary btn-sm ",type:"button"},r.a.createElement("i",{className:"fas fa-check"})))),r.a.createElement("div",{className:"row p-1 pl-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-4"},"DESVARADO:"),r.a.createElement("div",{className:"col-8"},e.desvarado?r.a.createElement("button",{className:" btn btn-success btn-sm ",type:"button",onClick:function(e){return c({desvarado:!1},e)}},r.a.createElement("i",{className:"fas fa-check"})):e.cosechado?r.a.createElement("button",{className:" btn btn-outline-success btn-sm ",type:"button",onClick:function(e){return c({desvarado:!0},e)}},r.a.createElement("i",{className:"fas fa-check"})):r.a.createElement("button",{className:" btn btn-outline-secondary btn-sm ",type:"button"},r.a.createElement("i",{className:"fas fa-check"})))),r.a.createElement("div",{className:"row p-1 pl-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-4"},"DISQUEADO:"),r.a.createElement("div",{className:"col-8"},e.disqueado?r.a.createElement("button",{className:" btn btn-success btn-sm ",type:"button",onClick:function(e){return c({disqueado:!1},e)}},r.a.createElement("i",{className:"fas fa-check"})):e.desvarado?r.a.createElement("button",{className:" btn btn-outline-success btn-sm ",type:"button",onClick:function(e){return c({disqueado:!0},e)}},r.a.createElement("i",{className:"fas fa-check"})):r.a.createElement("button",{className:" btn btn-outline-secondary btn-sm ",type:"button"},r.a.createElement("i",{className:"fas fa-check"})))),r.a.createElement("div",{className:"row p-1 pl-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-4"},"DESARRAIGADO:"),r.a.createElement("div",{className:"col-8"},e.desarraigado?r.a.createElement("button",{className:" btn btn-success btn-sm ",type:"button",onClick:function(e){return c({desarraigado:!1},e)}},r.a.createElement("i",{className:"fas fa-check"})):e.disqueado?r.a.createElement("button",{className:" btn btn-outline-success btn-sm ",type:"button",onClick:function(e){return c({desarraigado:!0},e)}},r.a.createElement("i",{className:"fas fa-check"})):r.a.createElement("button",{className:" btn btn-outline-secondary btn-sm ",type:"button"},r.a.createElement("i",{className:"fas fa-check"})))),e.desarraigado?r.a.createElement("div",{className:"row border rounded m-2 p-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-6 "},"SUPERFICIE MAPEADA:"),r.a.createElement("div",{className:"col-3"},e.superficieMapeada," Ha"),r.a.createElement("div",{className:"col-3"},r.a.createElement("button",{className:" btn btn-outline-primary btn-sm ",type:"button",onClick:function(){return t=e.superficieMapeada,void fa.a.fire({title:"Actualizar superficie mapeada",input:"number",inputPlaceholder:t,inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar"}).then((function(t){t.isConfirmed&&(Xn(o,e.modulo,"2020-2021",{superficieMapeada:t.value}),a(_n()),fa.a.fire("OK","Se actualiso la superficie mapeada","success"))}));var t}},r.a.createElement("i",{className:"fas fa-plus"})))):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"MONTO A PAGAR:"),r.a.createElement("div",{className:"col-8"},s.format(20*e.supAutorizada)," MN")),r.a.createElement("div",{className:"row p-1 pl-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-4"},"PAGADO:"),r.a.createElement("div",{className:"col-8"},e.pagado?r.a.createElement("button",{className:" btn btn-success btn-sm ",type:"button",onClick:function(e){return c({pagado:!1},e)}},r.a.createElement("i",{className:"fas fa-check"})):e.desarraigado?r.a.createElement("button",{className:" btn btn-outline-success btn-sm ",type:"button",onClick:function(e){return c({pagado:!0},e)}},r.a.createElement("i",{className:"fas fa-check"})):r.a.createElement("button",{className:" btn btn-outline-secondary btn-sm ",type:"button"},r.a.createElement("i",{className:"fas fa-check"})))),r.a.createElement("div",{className:"row p-1 pl-2 pt-4 pb-4"},r.a.createElement("div",{className:"col-6 d-flex justify-content-center"},e.pagado?r.a.createElement("button",{type:"button",className:"btn btn-outline-success",onClick:function(){a({type:ge})}},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")):r.a.createElement(r.a.Fragment,null)))))},Wn=function(e){var a=e.data,t=Object(l.c)((function(e){return e.algodoneroScreen})).printSanidadModal,n=Object(l.b)(),o=function(){n({type:Oe})};return r.a.createElement(Tt.a,{isOpen:t,onRequestClose:o,style:{content:{width:"1125px",height:"1500px",overflow:"auto"}},closeTimeoutMS:200,className:"printModalSanidad",overlayClassName:"modal-fondo"},r.a.createElement("div",{className:"row p-5"},r.a.createElement("div",{className:"col-2"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("img",{src:"./logos/sader.png",alt:"Logo sader",style:{maxHeight:50}}))),r.a.createElement("div",{className:"col-8 text-center"},r.a.createElement("h5",null,"SECRETARIA DE AGRICULTURA Y DESARROLLO RURAL ",r.a.createElement("br",null),"DISTRITO DE DESARROLLO RURAL 002, RIO COLORADO ",r.a.createElement("br",null),"COMIT\xc9 ESTATAL DE SANIDAD VEGETAL DE BAJA CALIFORNIA")),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("img",{src:"./logos/sanidad.webp",alt:"Logo sanidad vegetal",style:{maxHeight:80}})))),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row dflex justify-content-center"},r.a.createElement("h4",null,r.a.createElement("b",null,"CONSTANCIA DE EJECUCI\xd3N DE LABORES FITOSANITARIAS"))),r.a.createElement("div",{className:"row dflex justify-content-center"},r.a.createElement("h5",null,r.a.createElement("b",null,"ALGODONERO CICLO P-V ",a.ciclo))),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row d-flex justify-content-center pt-5 text-justify"},r.a.createElement("div",{className:"col-8"},r.a.createElement("p",null,"POR LA PRESENTE HACEMOS CONSTAR QUE EL C. ",a.nombreProductor,", PRODUCTOR DEL LOTE NO.",a.lote," DEL EJIDO/COLONIA ",a.localidad,", CON SUPERFICIE SEMBRADA DE:",a.supAutorizada," HA; REALIZ\xd3 LAS LABORES FITOSANITARIAS EN UNA SUPERFICIE DESVARADA DE: ",a.supAutorizada," HA; SUPERFICIE DISQUEADA DE: ",a.supAutorizada," HA; SUPERFICIE BARBECHADA DE: ",a.supAutorizada," HA; SUPERFICIE CON DESARRAIGO TOTAL DE:",a.supAutorizada," HA."),r.a.createElement("p",null,"DANDO AS\xcd CUMPLIMIENTO A LO ESTABLECIDO EN LA LEY FEDERAL DE SANIDAD VEGETAL, LA NORMA OFICIAL MEXICANA: NOM-026-SAG/FITO-2014 POR LA QUE SE ESTABLECE EL CONTROL DE PLAGAS REGLAMENTADAS DEL ALGODONERO Y LA NOM-081-FITO-2001-MANEJO Y ELIMINACI\xd3N DE FOCOS DE INFESTACI\xd3N DE PLAGAS, MEDIANTE EL ESTABLECIMIENTO O REORDENAMIENTO DE FECHAS DE SIEMBRA, COSECHA Y DESTRUCCI\xd3N DE RESIDUOS."),r.a.createElement("p",null,"SIRVA EL PRESENTE DOCUMENTO PARA LA LIBERACI\xd3N DE CARTA DE GARANT\xcdA EMITIDA."),r.a.createElement("p",null,"PROPIETARIO: ",a.usuario),r.a.createElement("div",{className:" d-flex justify-content-end pt-5"},r.a.createElement("p",null,"MEXICALI, B.C., dia DE mes De anio")))),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row pt-5 d-flex "},r.a.createElement("div",{className:"col-4 d-flex flex-column "},r.a.createElement("p",{className:"pb-5 text-center"},"NOMBRE Y FIRMA"),r.a.createElement("hr",null),r.a.createElement("div",{className:"text-center"},r.a.createElement("b",null,"T\xc9CNICO FITOSANITARIO DEL CESVBC"))),r.a.createElement("div",{className:"col-4 d-flex align-items-end justify-content-center"},r.a.createElement("div",{className:"text-center"},r.a.createElement("b",null,"SELLO DE CESVBC"))),r.a.createElement("div",{className:"col-4 d-flex align-items-end justify-content-center"},r.a.createElement("div",{className:"text-center"},r.a.createElement("b",null,"SELLO DE CADER")))),r.a.createElement("div",{className:"row p-5"},"C.c.p. -DISTRITO DE DESARROLLO RURAL 002-RIO COLORADO ",r.a.createElement("br",null),"C.c.p. -ARCHIVO"),r.a.createElement("div",{className:"row m-3 d-flex justify-content-center pt-5"},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none",onClick:function(){window.print()}},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none ml-3",onClick:o},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),r.a.createElement("span",null," Cerrar"))))},Qn=function(){var e=Object(l.b)(),a=ja({palabra:""}),t=Object(oa.a)(a,2),n=t[0],o=t[1],c=n.palabra,s=Object(l.c)((function(e){return e.algodoneroScreen})),i=s.permisos,m=s.permisoSelected;0===i.length&&e(_n());var d,p=function(){c.length>0?e(function(e){return function(){var a=Object(ra.a)(na.a.mark((function a(t){var n;return na.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Hn(e);case 2:n=a.sent,t(Kn(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(c)):fa.a.fire("Nada para buscar","Ingrese n\xfamero de permiso, n\xfamero de cuenta o el apellido paterno del usuario.","warning")},E=[];return i.forEach((function(e){E.push(Object(u.a)(Object(u.a)({},e),{},{fechaEmicion:Mt()(e.fechaEmicion.toDate()).format("DD/MM/YYYY"),fechaLimite:Mt()(e.fechaLimite.toDate()).format("DD/MM/YYYY"),vigencia:Mt()(e.vigencia.toDate()).format("DD/MM/YYYY")}))})),i.forEach((function(e){e.id===m&&(d=e)})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-sm-4 d-inline-flex p-3 "},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"N\xfamero de permiso, n\xfamero de cuenta o apellido paterno",name:"palabra",autoComplete:"off",value:c,onChange:o,onKeyUp:function(e){"Enter"===e.key&&p()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:p},r.a.createElement("i",{className:"fas fa-search"})))),r.a.createElement("div",{className:"row pt-3 pb-4"},r.a.createElement("div",{className:"col-sm-8 pr-0 mt-3"},r.a.createElement(ut,{title:"Permisos",columns:Nt,data:E,setFunction:Zn})),m&&void 0!==d?r.a.createElement(Jn,null):r.a.createElement(r.a.Fragment,null)),void 0!==d?r.a.createElement(Wn,{data:d}):r.a.createElement(r.a.Fragment,null))},$n={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"430px",width:"1000px"}};Tt.a.setAppElement("#root");var er=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.autorizadosScreen})),t=a.openAutorizadosModal,n=a.autorizadoSelected,o=a.autorizados,c=a.formError,s=ja({clave:n.clave,cultivo:n.cultivo,subciclo:n.subciclo,gravedadNormalAutorizada:n.gravedadNormalAutorizada,gravedadNormalAsignada:n.gravedadNormalAsignada,gravedadExtraAutorizada:n.gravedadExtraAutorizada,gravedadExtraAsignada:n.gravedadExtraAsignada,pozoNormalAutorizada:n.pozoNormalAutorizada,pozoNormalAsignada:n.pozoNormalAsignada,pozoExtraAutorizada:n.pozoExtraAutorizada,pozoExtraAsignada:n.pozoExtraAsignada}),i=Object(oa.a)(s,2),u=i[0],m=i[1],d=u.clave,p=u.cultivo,E=u.subciclo,f=u.gravedadNormalAutorizada,b=u.gravedadNormalAsignada,v=u.gravedadExtraAutorizada,N=u.gravedadExtraAsignada,h=u.pozoNormalAutorizada,g=u.pozoNormalAsignada,O=u.pozoExtraAutorizada,x=u.pozoExtraAsignada,y=[],A=function(){C()&&(o.forEach((function(e){e.cultivo===n.cultivo?y.push({clave:d,cultivo:p,subciclo:E,gravedadNormalAutorizada:Number(f),gravedadNormalAsignada:Number(b),gravedadExtraAutorizada:Number(v),gravedadExtraAsignada:Number(N),pozoNormalAutorizada:Number(h),pozoNormalAsignada:Number(g),pozoExtraAutorizada:Number(O),pozoExtraAsignada:Number(x)}):y.push(e)})),e(Qa(y)),e($a()))},j=function(e){"Enter"===e.key&&A()},C=function(){var a="No se permiten valores negativos !",t="La superficie asignada no puede ser mayor a la superficie autorizada !",n="Es necesario asignar un valor a todas las superficies !";return Number(f)<0||Number(b)<0||Number(v)<0||Number(N)<0||Number(h)<0||Number(g)<0||Number(O)<0||Number(x)<0?(e(tt(a)),!1):""===f||""===b||""===v||""===N||""===h||""===g||""===O||""===x?(e(tt(n)),!1):b>f||N>v||g>h||x>O?(e(tt(t)),!1):(e(nt()),!0)};return r.a.createElement(Tt.a,{isOpen:t,onRequestClose:function(){e($a()),e(nt())},style:$n,closeTimeoutMS:200,className:"autorizadosModal",overlayClassName:"modal-fondo"},r.a.createElement("form",null,r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center pt-2"},r.a.createElement("h5",null,"".concat(d," - ").concat(p)))),c?r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center pt-2"},r.a.createElement("div",{className:"border border-danger rounded text-danger p-2"},c))):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-borderless table-hover table-striped table-info mt-4 border-info text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"}),r.a.createElement("th",{colSpan:"2"},"Superficie Normal"),r.a.createElement("th",{colSpan:"2"},"Superficie Extra")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Gravedad"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Gravedad Normal Autorizada",name:"gravedadNormalAutorizada",value:f,autoComplete:"off",onChange:m,onKeyUp:j})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"gravedad Normal Asignada",name:"gravedadNormalAsignada",value:b,autoComplete:"off",onChange:m,onKeyUp:j})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Gravedad Extra Autorizada",name:"gravedadExtraAutorizada",value:v,autoComplete:"off",onChange:m,onKeyUp:j})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Gravedad Extra Asignada",name:"gravedadExtraAsignada",value:N,autoComplete:"off",onChange:m,onKeyUp:j}))),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Federal"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Normal Autorizada",name:"pozoNormalAutorizada",value:h,autoComplete:"off",onChange:m,onKeyUp:j})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Normal Asignada",name:"pozoNormalAsignada",value:g,autoComplete:"off",onChange:m,onKeyUp:j})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Extra Autorizada",name:"pozoExtraAutorizada",value:O,autoComplete:"off",onChange:m,onKeyUp:j})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Extra Asignada",name:"pozoExtraAsignada",value:x,autoComplete:"off",onChange:m,onKeyUp:j})))))),r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"d-flex justify-content-center col-sm-12"},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:A},r.a.createElement("i",{className:"fas fa-check"}))))))},ar={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"430px",width:"1000px"}};Tt.a.setAppElement("#root");var tr=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.autorizadosScreen})),t=a.openAutorizadosModal,n=a.autorizadoSelected,o=a.autorizados,c=a.formError,s=ja({clave:n.clave,cultivo:n.cultivo,gravedadNormalAutorizada:n.gravedadNormalAutorizada,gravedadNormalAsignada:n.gravedadNormalAsignada,gravedadExtraAutorizada:n.gravedadExtraAutorizada,gravedadExtraAsignada:n.gravedadExtraAsignada,pozoNormalAutorizada:n.pozoNormalAutorizada,pozoNormalAsignada:n.pozoNormalAsignada,pozoExtraAutorizada:n.pozoExtraAutorizada,pozoExtraAsignada:n.pozoExtraAsignada}),i=Object(oa.a)(s,2),u=i[0],m=i[1],d=u.clave,p=u.cultivo,E=u.gravedadNormalAutorizada,f=u.gravedadNormalAsignada,b=u.gravedadExtraAutorizada,v=u.gravedadExtraAsignada,N=u.pozoNormalAutorizada,h=u.pozoNormalAsignada,g=u.pozoExtraAutorizada,O=u.pozoExtraAsignada,x=[],y=function(){j()&&(o.forEach((function(e){e.cultivo===n.cultivo?x.push({clave:d,cultivo:p,gravedadNormalAutorizada:Number(E),gravedadNormalAsignada:Number(f),gravedadExtraAutorizada:Number(b),gravedadExtraAsignada:Number(v),pozoNormalAutorizada:Number(N),pozoNormalAsignada:Number(h),pozoExtraAutorizada:Number(g),pozoExtraAsignada:Number(O)}):x.push(e)})),e(Qa(x)),e($a()))},A=function(e){"Enter"===e.key&&y()},j=function(){var a="No se permiten valores negativos !",t="La superficie asignada no puede ser mayor a la superficie autorizada !",n="Es necesario asignar un valor a todas las superficies !";return Number(E)<0||Number(f)<0||Number(b)<0||Number(v)<0||Number(N)<0||Number(h)<0||Number(g)<0||Number(O)<0?(e(tt(a)),!1):""===E||""===f||""===b||""===v||""===N||""===h||""===g||""===O?(e(tt(n)),!1):f>E||v>b||h>N||O>g?(e(tt(t)),!1):(e(nt()),!0)};return r.a.createElement(Tt.a,{isOpen:t,onRequestClose:function(){e($a()),e(nt())},style:ar,closeTimeoutMS:200,className:"autorizadosModal",overlayClassName:"modal-fondo"},r.a.createElement("form",null,r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center pt-2"},r.a.createElement("h5",null,"".concat(d," - ").concat(p)))),c?r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center pt-2"},r.a.createElement("div",{className:"border border-danger rounded text-danger p-2"},c))):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-borderless table-hover table-striped table-info mt-4 border-info text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"}),r.a.createElement("th",{colSpan:"2"},"Superficie Normal"),r.a.createElement("th",{colSpan:"2"},"Superficie Extra")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Particular"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Normal Autorizada",name:"pozoNormalAutorizada",value:N,autoComplete:"off",onChange:m,onKeyUp:A})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Normal Asignada",name:"pozoNormalAsignada",value:h,autoComplete:"off",onChange:m,onKeyUp:A})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Extra Autorizada",name:"pozoExtraAutorizada",value:g,autoComplete:"off",onChange:m,onKeyUp:A})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Extra Asignada",name:"pozoExtraAsignada",value:O,autoComplete:"off",onChange:m,onKeyUp:A})))))),r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"d-flex justify-content-center col-sm-12"},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:y},r.a.createElement("i",{className:"fas fa-check"}))))))},nr=function(e){var a=e.autorizados,t=e.modulo,n=0,o=0,c=0,l=0;return null!==t&&a.forEach((function(e){n+=e.pozoNormalAutorizada,o+=e.pozoNormalAsignada,c+=e.pozoExtraAutorizada,l+=e.pozoExtraAsignada})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex bg-light border-info border-bottom rounded-top p-1 justify-content-center font-weight-bold text-secondary pt-3"},r.a.createElement("h5",null," ",t)),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-info mb-0 text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"3"},"Total Superficie Normal")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Particular"),r.a.createElement("td",null,n),r.a.createElement("td",null,o))))),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-table-secondary text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"3"},"Total Superficie Extra")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Particular"),r.a.createElement("td",null,c),r.a.createElement("td",null,l))))))},rr=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.autorizadosScreen})),t=a.modulo,n=a.autorizados,o=a.autorizadoSelected,c=a.superficieReferencia,s=0,i=0,u=0,m=0,d=0,p=0,E=0,f=0,b=0;null!==t&&(n.forEach((function(e){s+=e.gravedadNormalAutorizada,i+=e.gravedadNormalAsignada,u+=e.gravedadExtraAutorizada,m+=e.gravedadExtraAsignada,d+=e.pozoNormalAutorizada,p+=e.pozoNormalAsignada,E+=e.pozoExtraAutorizada,f+=e.pozoExtraAsignada})),b=s+i+u+m+d+p+E+f);var v=function(a){e(function(e){return{type:te,payload:e}}(a)),e(Wa("2020-2021",a))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row pt-3 .autorizadosModal"},r.a.createElement("div",{className:"col-sm-8 "},[1,2,3,4,5,6,7,8,9,"9B",10,11,12,14,15,16,17,18,19,20,21,22,"FL","Pozo Particular"].map((function(e){return t===e?r.a.createElement("button",{key:e,className:"btn btn-primary m-1",type:"button",onClick:function(){return v(e)}},r.a.createElement("span",null,"M-",e)):r.a.createElement("button",{key:e,className:"btn btn-outline-primary m-1",type:"button",onClick:function(){return v(e)}},r.a.createElement("span",null,"M-",e))})))),r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"col-sm-8 pr-0 mt-3"},"Pozo Particular"===t?r.a.createElement(ut,{title:"Autorizados",columns:gt,data:n,setFunction:et}):r.a.createElement(ut,{title:"Autorizados",columns:ht,data:n,setFunction:et})),t?r.a.createElement("div",{className:"col-sm-4 pl-3 mt-3"},r.a.createElement("div",{className:"d-flex flex-column border rounded border-info"},n.length>0?"Pozo Particular"===t?r.a.createElement(nr,{autorizados:n,modulo:t}):r.a.createElement(Ba,{autorizados:n,modulo:t}):r.a.createElement(r.a.Fragment,null),c===b?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"row p-1 pl-2  d-flex flex-column"},r.a.createElement("div",{className:"d-flex justify-content-center pt-5 text-warning"},"! Hay modificaciones sin guardar !"),r.a.createElement("div",{className:"d-flex justify-content-center pt-4 pb-4"},r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary",onClick:function(){!function(e,a,t){t.forEach((function(t){var n=t.gravedadNormalAutorizada+t.pozoNormalAutorizada,r=t.gravedadExtraAutorizada+t.pozoExtraAutorizada,o=n+r,c=function(e){return 1===e||2===e||3===e?"Sonora":"Baja California"}(a);ua.collection("autorizados").doc(e).collection("modulos").doc("Modulo-".concat(a)).collection("autorizados").doc("".concat(t.clave,"-").concat(t.cultivo)).set({estado:c,modulo:a,clave:t.clave,cultivo:t.cultivo,subciclo:t.subciclo,superficieNormal:n,superficieExtra:r,superficieTotal:o,gravedadNormalAutorizada:t.gravedadNormalAutorizada,gravedadNormalAsignada:t.gravedadNormalAsignada,gravedadExtraAutorizada:t.gravedadExtraAutorizada,gravedadExtraAsignada:t.gravedadExtraAsignada,pozoNormalAutorizada:t.pozoNormalAutorizada,pozoNormalAsignada:t.pozoNormalAsignada,pozoExtraAutorizada:t.pozoExtraAutorizada,pozoExtraAsignada:t.pozoExtraAsignada}).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)}))})),fa.a.fire("Autorizados Guardados","Se registraron con \xe9xito los cambios.","success")}("2020-2021",t,n),e(Wa("2020-2021",t))}},r.a.createElement("i",{className:"far fa-save"}),r.a.createElement("span",null," Guardar Cambios")))))):r.a.createElement(r.a.Fragment,null)),o?"Pozo Particular"===t?r.a.createElement(tr,null):r.a.createElement(er,null):r.a.createElement(r.a.Fragment,null))},or=function(e){var a=e.titulo,t=e.subtitulo1,n=e.subtitulo2,o=e.etiquetas,c=e.dataSet,l=e.ancho,s={labels:o,datasets:[{label:a,data:c,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(20, 200, 132, 0.2)","rgba(230, 2, 134, 0.2)","rgba(80, 150, 80, 0.2)","rgba(150, 50, 150,0.21)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(20, 200, 132, 1)","rgba(230, 2, 134, 1)","rgba(80, 150, 80, 1)","rgba(150, 50, 150, 1)"],borderWidth:1}]};return r.a.createElement("div",{className:"pt-4 text-secondary"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h5",null,a)),r.a.createElement("div",{className:"d-flex flex-column pt-4 pb-4 pl-3"},r.a.createElement("div",null,r.a.createElement("h6",null,t)),r.a.createElement("div",null,r.a.createElement("h6",null,n))),r.a.createElement("div",{className:"pb-4"},r.a.createElement(Ga.HorizontalBar,{data:s,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},width:l})))},cr=function(){var e=Object(l.c)((function(e){return e.entidades})),a=e.permisos,t=e.campoOrdenador,n=[],o=0,c=0;a&&((n=function(e,a){var t={};e.forEach((function(e){var n=e[a];t[n]?(t[n].superficie+=e.supAutorizada,t[n].numeroPermisos++):t[n]={label:n,superficie:e.supAutorizada,numeroPermisos:1}}));var n=Object.values(t);n.sort((function(e,a){return e.superficie<a.superficie?1:e.superficie>a.superficie?-1:0}));var r=[],o=[],c=[],l=8,s=0,i=0;return n.forEach((function(e){l>=0?(r.push("".concat(e.label," (").concat(e.superficie,"ha)")),o.push(e.superficie),c.push(e.numeroPermisos),l--):(s+=e.superficie,i+=e.numeroPermisos)})),r.push("Otros ".concat(a," (").concat(s,"ha)")),o.push(s),c.push(i),{labels:r,superficiesCultivos:o,numeroPermisos:c}}(a,t)).superficiesCultivos.forEach((function(e){o+=e})),n.numeroPermisos.forEach((function(e){c+=e})));var s="Superficie incluida: ".concat(o," ha"),i="Permisos incluidos: ".concat(c);return r.a.createElement("div",null,n?r.a.createElement(or,{titulo:"Superficies por ".concat(function(e){switch(e){case"nombreCultivo":return"cultivo";case"usuario":return"usuario";case"nombreProductor":return"productor";case"localidad":return"localidad"}}(t)),subtitulo1:s,subtitulo2:i,etiquetas:n.labels,dataSet:n.superficiesCultivos,ancho:220}):r.a.createElement(r.a.Fragment,null))},lr=t(84),sr=t.n(lr),ir=function(e,a,t,n,r,o,c,l,s){return function(){var i=Object(ra.a)(na.a.mark((function i(u){var m;return na.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,qa(e,a,t,n,r,o,c,l,s);case 2:m=i.sent,u(ur(m)),u(mr(n[0]));case 5:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()},ur=function(e){return{type:ye,payload:e}},mr=function(e){return{type:Ae,payload:e}},dr=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.auth})).modulo,t=ja({palabra:""}),o=Object(oa.a)(t,2),c=o[0],s=o[1],i=c.palabra,u=c.campo,m=c.activosCancelados,d=c.tipoSuperficie,p=c.sistema,E=Object(n.useState)(new Date(2020,9,1)),f=Object(oa.a)(E,2),b=f[0],v=f[1],N=Object(n.useState)(new Date(2021,8,30)),h=Object(oa.a)(N,2),g=h[0],O=h[1],x=function(){u?e(ir(i,a,"2020-2021",[u],m,d,p,b,g)):fa.a.fire("Nada para buscar","Seleccione un campo.","warning")};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 d-inline-flex p-0"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"parametro de busqueda",name:"palabra",autoComplete:"off",value:i,onChange:s,onKeyUp:function(e){"Enter"===e.key&&x()}}),r.a.createElement("select",{name:"campo",value:u,onChange:s,className:"form-control ml-2"},r.a.createElement("option",{value:""},"-"),r.a.createElement("option",{value:"nombreCultivo"},"Cultivo"),r.a.createElement("option",{value:"usuario"},"Usuario"),r.a.createElement("option",{value:"nombreProductor"},"Productor"),r.a.createElement("option",{value:"localidad"},"Localidad")),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-2 no-printme",type:"button",onClick:x},r.a.createElement("i",{className:"fas fa-search"})))),r.a.createElement("div",{className:"row justify-content-between pt-2"},r.a.createElement("div",{className:"col-sm-4 border rounded pt-2 pb-2"},r.a.createElement("p",null,"ESTADO DE LOS PERMISOS"),r.a.createElement("div",{className:"form-check d-flex flex-column"},r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"activosCancelados",id:"todos",value:"todos",onChange:s}),r.a.createElement("label",{className:"form-check-label",htmlFor:"todos"},"Todos los permisos")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"activosCancelados",id:"activos",value:"activo",onChange:s}),r.a.createElement("label",{className:"form-check-label",htmlFor:"activos"},"Permisos activos")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"activosCancelados",id:"cancelados",value:"cancelado",onChange:s}),r.a.createElement("label",{className:"form-check-label",htmlFor:"cancelados"},"Permisos cancelados")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"activosCancelados",id:"En proceso de cancelaci\xf3n",value:"En proceso de cancelaci\xf3n",onChange:s}),r.a.createElement("label",{className:"form-check-label",htmlFor:"En proceso de cancelaci\xf3n"},"En proceso de cancelaci\xf3n")))),r.a.createElement("div",{className:"col-sm-4 border rounded pt-2 pb-2"},r.a.createElement("p",null,"TIPO DE EXPEDICI\xd3N"),r.a.createElement("div",{className:"form-check d-flex flex-column"},r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"tipoSuperficie",id:"toda",value:"todos",onChange:s}),r.a.createElement("label",{className:"form-check-label",htmlFor:"toda"},"Toda la superficie")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"tipoSuperficie",id:"superficieNormal",value:"normal",onChange:s}),r.a.createElement("label",{className:"form-check-label",htmlFor:"superficieNormal"},"Superficie normal")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"tipoSuperficie",id:"superficieExtra",value:"extra",onChange:s}),r.a.createElement("label",{className:"form-check-label",htmlFor:"superficieExtra"},"Superficie extra")))),r.a.createElement("div",{className:"col-sm-3 border rounded pt-2 pb-2"},r.a.createElement("p",null,"SISTEMA DE RIEGO"),r.a.createElement("div",{className:"form-check d-flex flex-column"},r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"sistema",id:"gravedadPozo",value:"todos",onChange:s}),r.a.createElement("label",{className:"form-check-label",htmlFor:"gravedadPozo"},"Gravedad y pozo")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"sistema",id:"gravedad",value:"Gravedad",onChange:s}),r.a.createElement("label",{className:"form-check-label",htmlFor:"gravedad"},"Gravedad")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"sistema",id:"pozo",value:"Pozo",onChange:s}),r.a.createElement("label",{className:"form-check-label",htmlFor:"pozo"},"Pozo"))))),r.a.createElement("div",{className:"row justify-content-between border rounded mt-2"},r.a.createElement("div",{className:"col-sm-12 p-2"},r.a.createElement("p",null,"RANGO DE EXPEDICI\xd3N")),r.a.createElement("div",{className:"col-sm-5  pb-2"},r.a.createElement("label",{className:"form-check-label"},"Fecha inicial"),r.a.createElement("div",null,r.a.createElement(sr.a,{onChange:v,value:b,format:"dd/MM/yyyy"}))),r.a.createElement("div",{className:"col-sm-5 pb-2"},r.a.createElement("label",{className:"form-check-label"},"Fecha final"),r.a.createElement("div",null,r.a.createElement(sr.a,{onChange:O,value:g,format:"dd/MM/yyyy"})))),r.a.createElement("div",{className:" row d-flex pt-3"},r.a.createElement("button",{className:"btn btn-outline-primary flex-fill no-printme",type:"button",onClick:function(){window.print()}},r.a.createElement("span",null,"Imprimir informe "),r.a.createElement("i",{className:"fas fa-print"})))))},pr=function(e){var a=e.title,t=e.data,n=e.setFunction,o=e.closeFunction,c=Object(l.b)();return r.a.createElement("div",{className:"table table-responsive table-striped"},r.a.createElement(it.a,{columns:[{name:"id",selector:"id",omit:!0},{name:"PERMISO",selector:"numeroPermiso",sortable:!0,width:"70px"},{name:"CUENTA",selector:"cuenta",sortable:!0,width:"60px"},{name:"USUARIO",selector:"usuario",sortable:!0,width:"180px"},{name:"PRODUCTOR",selector:"nombreProductor",width:"180px",sortable:!0},{name:"CULTIVO",selector:"nombreCultivo",width:"100px",sortable:!0},{name:"SUP(ha)",selector:"supAutorizada",width:"40px",sortable:!0,center:!0},{name:"LOTE",selector:"lote",sortable:!0,width:"40px",center:!0},{name:"LOCALIDAD",selector:"localidad",sortable:!0,width:"80px"},{name:"EMICION",selector:"fechaEmicion",sortable:!0,width:"70px"},{name:"VIGENCIA",selector:"vigencia",sortable:!0,width:"70px"},{name:"ESTADO",selector:"estadoPermiso",sortable:!0,width:"70px"}],data:t,title:a,highlightOnHover:!0,striped:!0,pointerOnHover:!0,dense:!0,onRowClicked:function(e){void 0!==n&&c(n(e)),void 0!==o&&c(o())},customStyles:{headCells:{style:{paddingLeft:"5px",paddingRight:"5px"}},headRow:{style:{backgroundColor:"lightgray"}},cells:{style:{fontSize:"10px",paddingLeft:"5px",paddingRight:"5px"}}}}))},Er=function(){var e=Object(l.c)((function(e){return e.entidades})).permisos,a=Object(l.c)((function(e){return e.auth})).modulo,t=Object(l.b)();e||t(ir("",a,"2020-2021",["nombreCultivo"]));var n=[];e&&e.forEach((function(e){n.push(Object(u.a)(Object(u.a)({},e),{},{fechaEmicion:Mt()(e.fechaEmicion.toDate()).format("DD/MM/YYYY"),fechaLimite:Mt()(e.fechaLimite.toDate()).format("DD/MM/YYYY"),vigencia:Mt()(e.vigencia.toDate()).format("DD/MM/YYYY")}))}));return r.a.createElement("div",null,r.a.createElement(pr,{title:"",columns:Nt,data:n}))},fr=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row m-0 "},r.a.createElement("div",{className:"col-sm-12 p-3 d-flex justify-content-center"},r.a.createElement("h2",null,"Reporte de permisos"))),r.a.createElement("div",{className:"row p-3 d-flex justify-content-center"},r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(dr,null))),r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("div",{className:"col-sm-5"},r.a.createElement(cr,null))),r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("div",{className:"col-lg-9"},r.a.createElement(Er,null))))},br=[1,2,3,4,5,6,7,8,9,"9B",10,11,12,14,15,16,17,18,19,20,21,22,"FL","Pozo Particular"],vr={pantallaInicio:!1,pantallaPadron:!1,pantallaPermisos:!1,pantallaTransferencias:!1,pantallaAsignacion:!1,pantallaLabores:!1,pantallaAutorizados:!1,pantallaReportes:!1,pantallaConfiguracion:!1,consultarExpedicion:!1,consultarAutorizados:!1,expedirPermisos:!1,consultarPermisos:!1,cancelarPermisos:!1,solicitarTransferencias:!1,"asignarT\xe9cnico":!1,consultarLabores:!1,registrarLabores:!1,pagarLabores:!1,imprimirLabores:!1,reportesPermisos:!1,"reportesExpedici\xf3n":!1,reportesAutorizados:!1,asignarRoles:!1,editarRoles:!1,testArea:!1},Nr=function(e,a){return ua.collection("autorizados").doc(a).collection("modulos").doc("Modulo-".concat(e)).collection("autorizados").orderBy("modulo").get()},hr=function(){var e=Object(ra.a)(na.a.mark((function e(){var a,t;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t=br.map((function(e){return Nr(e,"2020-2021")})),e.next=4,Promise.all(t);case 4:return e.sent.forEach((function(e){e.forEach((function(e){a.push(Object(u.a)({id:e.id},e.data()))}))})),0===a.length&&(a=!1),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),gr=function(e,a){return ua.collection("permisos").doc(a).collection("modulos").doc("Modulo-".concat(e)).collection("permisosPorCultivo").orderBy("modulo").get()},Or=function(){var e=Object(ra.a)(na.a.mark((function e(){var a,t;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t=br.map((function(e){return gr(e,"2020-2021")})),e.next=4,Promise.all(t);case 4:return e.sent.forEach((function(e){e.forEach((function(e){a.push(Object(u.a)({id:e.id},e.data()))}))})),0===a.length&&(a=!1),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xr={supGravedadProgramada:0,supGravedadExpedida:0,supGravedadRealizada:0,supPozoProgramada:0,supPozoExpedida:0,supPozoRealizada:0,supPozoPartProgramada:0,supPozoPartExpedida:0,supPozoPartRealizada:0},yr=Object(u.a)({},{"OTO\xd1O-INVIERNO":{"3-TRIGO":{},"8-AVENA":{},"2-CEBADA":{},"4-RYE-GRASS":{},"12-CEBOLLIN O-I":{},VARIOS:{},SUBTOTAL:{}},PERENNES:{"50-ALFALFA":{},"52-ESPARRAGO":{},"53-VID":{},FRUTALES:{},"117-ZACATE BERMUDA":{},"60-PALMA DATILERA":{},VARIOS:{},SUBTOTAL:{}},"PRIMAVERA-VERANO":{"80-ALGODONERO":{},"81-SORGO GRANO TEMP.(SUDAN)":{},"82-SORGO GRANO TARDIO":{},"83-SORGO FORRAJERO TEMP.(SUDAN)":{},"84-SORGO FORRAJERO TARDIO":{},"87-MAIZ BLANCO TEMPRANO":{},"88-MAIZ BLANCO TARDIO":{},"12.1-CEBOLLIN P-V":{},"12.2-CEBOLLIN TARDIO":{},VARIOS:{},SUBTOTAL:{}}}),Ar=function(e,a,t,n,r,o,c,l,s,i){e.supGravedadProgramada=e.supGravedadProgramada+a,e.supGravedadExpedida=e.supGravedadExpedida+t,e.supGravedadRealizada=e.supGravedadRealizada+n,e.supPozoProgramada=e.supPozoProgramada+r,e.supPozoExpedida=e.supPozoExpedida+o,e.supPozoRealizada=e.supPozoRealizada+c,e.supPozoPartProgramada=e.supPozoPartProgramada+l,e.supPozoPartExpedida=e.supPozoPartExpedida+s,e.supPozoPartRealizad=e.supPozoPartRealizad+i},jr=function(e,a,t){return Object.keys(yr).forEach((function(e){Object.keys(yr[e]).forEach((function(a){yr[e][a]=Object(u.a)({},xr)}))})),Object.values(e).forEach((function(e){var n=e.subciclo,r=e.cultivo,o=e.modulo,c=e.estado,l=e.supGravedadProgramada,s=e.supGravedadExpedida,i=e.supGravedadRealizada,u=e.supPozoProgramada,m=e.supPozoExpedida,d=e.supPozoRealizada,p=e.supPozoPartProgramada,E=e.supPozoPartExpedida,f=e.supPozoPartRealizad;(function(e,a,t,n){switch(e){case"modulos":return function(e,a){var t=!1;return e.length>0?e.forEach((function(e){a.toString()===e&&(t=!0)})):t=!0,t}(a,t);case"Baja California":case"Sonora":return e===n;case"global":return!0;default:return!1}})(a,t,o,c)&&(yr[n][r]?(Ar(yr[n][r],l,s,i,u,m,d,p,E,f),Ar(yr[n].SUBTOTAL,l,s,i,u,m,d,p,E,f)):(Ar(yr[n].VARIOS,l,s,i,u,m,d,p,E,f),Ar(yr[n].SUBTOTAL,l,s,i,u,m,d,p,E,f)))})),yr},Cr={},Pr={cultivo:"",modulo:"",subciclo:"",estado:"",supGravedadProgramada:0,supGravedadExpedida:0,supGravedadRealizada:0,supPozoProgramada:0,supPozoExpedida:0,supPozoRealizada:0,supPozoPartProgramada:0,supPozoPartExpedida:0,supPozoPartRealizada:0},zr=function(e,a){return e.forEach((function(e){!function(e){var a=e.id,t=e.modulo,n=e.subciclo,r=e.estado,o=void 0===r?"":r,c=e.gravedadExtraAutorizada,l=void 0===c?0:c,s=e.gravedadNormalAutorizada,i=void 0===s?0:s,m=e.pozoExtraAutorizada,d=void 0===m?0:m,p=e.pozoNormalAutorizada,E=void 0===p?0:p;"PERENES"===n&&(n="PERENNES"),Cr["".concat(a,"-").concat(t)]=Object(u.a)(Object(u.a)({},Pr),{},{cultivo:a,modulo:t,subciclo:n,estado:o,supGravedadProgramada:i+l,supPozoProgramada:E+d})}(e)})),a.forEach((function(e){Cr["".concat(e.id,"-").concat(e.modulo)]&&function(e){var a=e.id,t=e.modulo,n=e.gravedadNormal,r=void 0===n?0:n,o=e.gravedadExtra,c=void 0===o?0:o,l=e.pozoNormal,s=void 0===l?0:l,i=e.pozoExtra,m=void 0===i?0:i,d=e.pozoParticularNormal,p=void 0===d?0:d,E=e.pozoParticularExtra,f=void 0===E?0:E;Cr["".concat(a,"-").concat(t)]=Object(u.a)(Object(u.a)({},Cr["".concat(a,"-").concat(t)]),{},{supGravedadExpedida:Cr["".concat(a,"-").concat(t)].supGravedadExpedida+r+c,supPozoExpedida:Cr["".concat(a,"-").concat(t)].supPozoExpedida+s+m,supPozoPartExpedida:Cr["".concat(a,"-").concat(t)].supPozoPartExpedida+p+f})}(e)})),Cr},wr=function(e,a){var t=e.unidades,n=e.modulosPorUnidad,r=a.type,o=a.payload;switch(r){case"setUnidad":if(t[o])return Object(u.a)(Object(u.a)({},e),{},{unidades:Object(u.a)(Object(u.a)({},t),{},Object(Aa.a)({},o,!1))});var c={};return Object.keys(t).forEach((function(e){c[e]=!1})),Object(u.a)(Object(u.a)({},e),{},{unidades:Object(u.a)(Object(u.a)({},c),{},Object(Aa.a)({},o,!0))});case"changeModulo":var l=o.unidad,s=o.modulo;return Object(u.a)(Object(u.a)({},e),{},{modulosPorUnidad:Object(u.a)(Object(u.a)({},n),{},Object(Aa.a)({},l,Object(u.a)(Object(u.a)({},n[l]),{},Object(Aa.a)({},s,!n[l][s]))))});case"changeGroup":var i=Object(u.a)({},n);return Object.keys(e.unidades).forEach((function(a){Object.keys(e.modulosPorUnidad[a]).forEach((function(t){i[a][t]=e.unidades[a]}))})),Object(u.a)(Object(u.a)({},e),{},{modulosPorUnidad:i})}},Sr=function(e){var a=e.data;return r.a.createElement("div",{className:"table-responsive-sm"},r.a.createElement("table",{className:"table table-sm table-bordered font12"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row",rowSpan:"2"},"CULTIVO"),r.a.createElement("th",{scope:"row",colSpan:"3"},"GRAVEDAD"),r.a.createElement("th",{scope:"row",colSpan:"3"},"POZO FEDERAL"),r.a.createElement("th",{scope:"row",colSpan:"3"},"POZO PARTICULAR"),r.a.createElement("th",{scope:"row",colSpan:"3"},"TOTAL")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sup. Prog."),r.a.createElement("th",{scope:"col"},"Sup. Expedida"),r.a.createElement("th",{scope:"col"},"Realizado"),r.a.createElement("th",{scope:"col"},"Sup. Prog."),r.a.createElement("th",{scope:"col"},"Sup. Expedida"),r.a.createElement("th",{scope:"col"},"Realizado"),r.a.createElement("th",{scope:"col"},"Sup. Prog."),r.a.createElement("th",{scope:"col"},"Sup. Expedida"),r.a.createElement("th",{scope:"col"},"Realizado"),r.a.createElement("th",{scope:"col"},"Sup. Prog."),r.a.createElement("th",{scope:"col"},"Sup. Expedida"),r.a.createElement("th",{scope:"col"},"Realizado"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row",colSpan:"13",className:"pt-4"},"OTO\xd1O - INVIERNO")),Object.values(a["OTO\xd1O-INVIERNO"]).map((function(e,t){var n=Object.keys(a["OTO\xd1O-INVIERNO"])[t];return r.a.createElement("tr",{key:n},r.a.createElement("th",{scope:"row"},n),r.a.createElement("td",{className:"text-right"},e.supGravedadProgramada),r.a.createElement("td",{className:"text-right"},e.supGravedadExpedida),r.a.createElement("td",{className:"text-right"},e.supGravedadRealizada),r.a.createElement("td",{className:"text-right"},e.supPozoProgramada),r.a.createElement("td",{className:"text-right"},e.supPozoExpedida),r.a.createElement("td",{className:"text-right"},e.supPozoRealizada),r.a.createElement("td",{className:"text-right"},e.supPozoPartProgramada),r.a.createElement("td",{className:"text-right"},e.supPozoPartExpedida),r.a.createElement("td",{className:"text-right"},e.supPozoPartRealizada),r.a.createElement("td",{className:"text-right"},e.supGravedadProgramada+e.supPozoProgramada+e.supPozoPartProgramada),r.a.createElement("td",{className:"text-right"},e.supGravedadExpedida+e.supPozoExpedida+e.supPozoPartExpedida),r.a.createElement("td",{className:"text-right"},e.supGravedadRealizada+e.supPozoRealizada+e.supPozoPartRealizada))})),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row",colSpan:"13",className:"pt-4"},"PERENNES")),Object.values(a.PERENNES).map((function(e,t){var n=Object.keys(a.PERENNES)[t];return r.a.createElement("tr",{key:n},r.a.createElement("th",{scope:"row"},n),r.a.createElement("td",{className:"text-right"},e.supGravedadProgramada),r.a.createElement("td",{className:"text-right"},e.supGravedadExpedida),r.a.createElement("td",{className:"text-right"},e.supGravedadRealizada),r.a.createElement("td",{className:"text-right"},e.supPozoProgramada),r.a.createElement("td",{className:"text-right"},e.supPozoExpedida),r.a.createElement("td",{className:"text-right"},e.supPozoRealizada),r.a.createElement("td",{className:"text-right"},e.supPozoPartProgramada),r.a.createElement("td",{className:"text-right"},e.supPozoPartExpedida),r.a.createElement("td",{className:"text-right"},e.supPozoPartRealizada),r.a.createElement("td",{className:"text-right"},e.supGravedadProgramada+e.supPozoProgramada+e.supPozoPartProgramada),r.a.createElement("td",{className:"text-right"},e.supGravedadExpedida+e.supPozoExpedida+e.supPozoPartExpedida),r.a.createElement("td",{className:"text-right"},e.supGravedadRealizada+e.supPozoRealizada+e.supPozoPartRealizada))})),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row",colSpan:"13",className:"pt-4"},"PRIMAVERA-VERANO")),Object.values(a["PRIMAVERA-VERANO"]).map((function(e,t){var n=Object.keys(a["PRIMAVERA-VERANO"])[t];return r.a.createElement("tr",{key:n},r.a.createElement("th",{scope:"row"},n),r.a.createElement("td",{className:"text-right"},e.supGravedadProgramada),r.a.createElement("td",{className:"text-right"},e.supGravedadExpedida),r.a.createElement("td",{className:"text-right"},e.supGravedadRealizada),r.a.createElement("td",{className:"text-right"},e.supPozoProgramada),r.a.createElement("td",{className:"text-right"},e.supPozoExpedida),r.a.createElement("td",{className:"text-right"},e.supPozoRealizada),r.a.createElement("td",{className:"text-right"},e.supPozoPartProgramada),r.a.createElement("td",{className:"text-right"},e.supPozoPartExpedida),r.a.createElement("td",{className:"text-right"},e.supPozoPartRealizada),r.a.createElement("td",{className:"text-right"},e.supGravedadProgramada+e.supPozoProgramada+e.supPozoPartProgramada),r.a.createElement("td",{className:"text-right"},e.supGravedadExpedida+e.supPozoExpedida+e.supPozoPartExpedida),r.a.createElement("td",{className:"text-right"},e.supGravedadRealizada+e.supPozoRealizada+e.supPozoPartRealizada))})))))},Rr=function(e){var a=e.inputName,t=e.options,n=e.formValues,o=e.setFunction,c=e.styles;return r.a.createElement("div",{className:c.group},t.map((function(e){var t,l=e.id,s=e.label;return r.a.createElement("label",{key:l,className:"".concat(c.button," ").concat((t=l,t===n[a]&&"active"))},r.a.createElement("input",{type:"radio",name:a,id:l,value:l,onChange:o}),s)})))},Dr=function(e){var a=e.options,t=e.setFunction,n=e.groupStyles,o=e.buttonStyles;return r.a.createElement("div",{className:n},Object.entries(a).map((function(e){var a;return r.a.createElement("button",{className:(a=e[1],a?o.on:o.off),type:"button",key:e[0],onClick:function(){t(e[0])}},r.a.createElement("span",null,e[0]))})))},kr=function(e){var a=e.state,t=e.dispatch,n=a.unidades,o=a.modulosPorUnidad,c=o.primeraUnidad,l=o.segundaUnidad,s=o.terceraUnidad,i={on:"btn btn-primary",off:"btn btn-outline-primary"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row justify-content-center mt-5"},r.a.createElement(Dr,{options:n,setFunction:function(e){t({type:"setUnidad",payload:e})},groupStyles:"btn-group btn-group-toggle",buttonStyles:i})),r.a.createElement("div",{className:"row d-flex justify-content-around"},r.a.createElement("div",{className:"mt-3"},r.a.createElement(Dr,{options:c,setFunction:function(e){t({type:"changeModulo",payload:{unidad:"primeraUnidad",modulo:e}})},groupStyles:"btn-group btn-group-toggle",buttonStyles:i})),r.a.createElement("div",{className:"mt-3"},r.a.createElement(Dr,{options:l,setFunction:function(e){t({type:"changeModulo",payload:{unidad:"segundaUnidad",modulo:e}})},groupStyles:"btn-group btn-group-toggle",buttonStyles:i})),r.a.createElement("div",{className:"mt-3"},r.a.createElement(Dr,{options:s,setFunction:function(e){t({type:"changeModulo",payload:{unidad:"terceraUnidad",modulo:e}})},groupStyles:"btn-group btn-group-toggle",buttonStyles:i}))))},Ir=[],Mr=[],Lr={unidades:{primeraUnidad:!1,segundaUnidad:!1,terceraUnidad:!1},modulosPorUnidad:{primeraUnidad:{4:!1,5:!1,6:!1,14:!1,15:!1,16:!1},segundaUnidad:{7:!1,8:!1,"9A":!1,"9B":!1,10:!1,11:!1,12:!1,17:!1,18:!1,19:!1,20:!1},terceraUnidad:{1:!1,2:!1,3:!1,21:!1,22:!1,FL:!1}}},Ur=function(){var e=ja(),a=Object(oa.a)(e,2),t=a[0],o=a[1],c=Object(n.useReducer)(wr,Lr),l=Object(oa.a)(c,2),s=l[0],i=l[1],u=s.unidades,m=s.modulosPorUnidad,d=m.primeraUnidad,p=m.segundaUnidad,E=m.terceraUnidad,f=function(){var e=Object(ra.a)(na.a.mark((function e(){return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hr();case 2:Mr=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(ra.a)(na.a.mark((function e(){return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or();case 2:Ir=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){i({type:"changeGroup"})}),[u]),Object(n.useEffect)((function(){b(),f()}),[]);var v=function(){var e=[];return Object.keys(d).forEach((function(a){d[a]&&e.push(a)})),Object.keys(p).forEach((function(a){p[a]&&e.push(a)})),Object.keys(E).forEach((function(a){E[a]&&e.push(a)})),e};return r.a.createElement("div",null,r.a.createElement("div",{className:"row m-0 "},r.a.createElement("div",{className:"col-sm-12 p-3 d-flex justify-content-center"},r.a.createElement("h2",null,"Reporte Expedici\xf3n"))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(Rr,{inputName:"opcion",options:[{id:"global",label:"Global"},{id:"Baja California",label:"Baja California"},{id:"Sonora",label:"Sonora"},{id:"modulos",label:"Modulos"}],formValues:t,setFunction:o,styles:{group:"btn-group btn-group-toggle",button:"btn btn-outline-primary"}})),"modulos"===t.opcion&&r.a.createElement(kr,{state:s,dispatch:i}),("global"===t.opcion||"Baja California"===t.opcion||"Sonora"===t.opcion)&&r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-sm-12 pt-5"},r.a.createElement(Sr,{data:jr(zr(Mr,Ir),t.opcion,[])}))),"modulos"===t.opcion&&v().length>0&&r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-sm-12 pt-5"},r.a.createElement(Sr,{data:jr(zr(Mr,Ir),t.opcion,v())}))),function(){switch(t.opcion){case"global":case"Baja California":case"Sonora":return!0;case"modulos":if(v().length>0)return!0;break;default:return!1}}()&&r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none",onClick:function(){return window.print()}},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")))},Fr=function(){var e=Object(l.c)((function(e){return e.auth})).privilegios.reportesPermisos,a=ja(),t=Object(oa.a)(a,2),n=t[0],o=t[1];return r.a.createElement("div",{className:"mt-5"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(Rr,{inputName:"reportType",options:[{id:"expedicion",label:"expedicion"},{id:"permisos",label:"permisos"}],formValues:n,setFunction:o,styles:{group:"btn-group btn-group-toggle d-print-none",button:"btn btn-outline-primary"}})),r.a.createElement("div",{className:"mt-5"},"expedicion"===n.reportType&&r.a.createElement(Ur,null)),r.a.createElement("div",{className:"mt-5"},"permisos"===n.reportType&&e&&r.a.createElement(fr,null)),r.a.createElement("div",{className:"pb-5"}))},Tr=function(){var e=Object(ra.a)(na.a.mark((function e(a){var t;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],"dev"!==a){e.next=6;break}return e.next=4,ua.collection("usuarios").orderBy("claveEntidad").get();case 4:e.sent.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}));case 6:if("CNA"!==a){e.next=11;break}return e.next=9,ua.collection("usuarios").where("claveEntidad","!=","CESVBC").orderBy("claveEntidad").get();case 9:e.sent.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}));case 11:if("CESVBC"!==a){e.next=16;break}return e.next=14,ua.collection("usuarios").where("claveEntidad","==","CESVBC").get();case 14:e.sent.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}));case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Gr=function(){var e=Object(ra.a)(na.a.mark((function e(){var a;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,ua.collection("roles").get();case 3:return e.sent.forEach((function(e){a.push(e.id)})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Vr=function(){var e=Object(ra.a)(na.a.mark((function e(a){var t;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.collection("roles").doc(a).get();case 2:return t=e.sent,e.abrupt("return",t.data());case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Br=function(e){return function(){var a=Object(ra.a)(na.a.mark((function a(t){var n;return na.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Tr(e);case 2:n=a.sent,t(Yr(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Yr=function(e){return{type:Pe,payload:e}},qr=function(e){return function(a){a(da()),a(function(e){return{type:ze,payload:e}}(e))}},Hr=function(){return function(){var e=Object(ra.a)(na.a.mark((function e(a){var t;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gr();case 2:t=e.sent,a(_r(t));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},_r=function(e){return{type:Se,payload:e}},Kr=function(e){return{type:De,payload:e}},Zr=function(e){return{type:Ie,payload:e}},Xr=function(){var e=ja({newRole:""}),a=Object(oa.a)(e,2),t=a[0],n=a[1],o=t.newRole,c=Object(l.b)(),s=function(){var e;o.length>0&&(e=o,ua.collection("roles").doc(e).set({}).then((function(){return console.log("Se guardo rol -> ".concat(e)),!0})).catch((function(e){console.log(e)})),c(Hr()))};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("label",null,"Crear nuevo rol:")),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Nuevo Rol",name:"newRole",autoComplete:"off",value:o,onChange:n,onKeyUp:function(e){"Enter"===e.key&&s()}})),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:s},r.a.createElement("span",null,"Agregar "),r.a.createElement("i",{className:"fas fa-plus"}))))},Jr=function(){var e=Object(ra.a)(na.a.mark((function e(a){return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ua.collection("roles").doc(a).delete().then((function(){console.log("Rol de usuario borrado (".concat(a,")"))})).catch((function(e){console.error("Error removing document: ",e)}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Wr=function(){var e=Object(l.c)((function(e){return e.entidades})).userRoles,a=Object(l.b)(),t=ja(),n=Object(oa.a)(t,2),o=n[0],c=n[1],s=o.selectedRole;if(e||a(Hr()),e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},"Gestionar rol:"),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("select",{type:"text",name:"selectedRole",value:s,onChange:c,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"Rol"),e.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"col-sm-4 d-flex"},s?r.a.createElement("button",{onClick:function(e){var t;e.preventDefault(),s&&a((t=s,function(){var e=Object(ra.a)(na.a.mark((function e(a){var n;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr(t);case 2:n=e.sent,a(Kr(t)),a({type:Me}),a(Zr(n));case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()))},className:"btn btn-outline-primary"},r.a.createElement("span",null,"Editar Rol "),r.a.createElement("i",{className:"fas fa-edit"})):r.a.createElement(r.a.Fragment,null),s?r.a.createElement("button",{onClick:function(){fa.a.fire({title:"Atenci\xf3n!!",text:"Esta apunto de borrar el rol de usuario ".concat(s,", \xbfRealmente desea borrarlo?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then((function(e){e.isConfirmed&&(Jr(s),a({type:Re}),a({type:ke}),a(Hr()),fa.a.fire("Rol: ".concat(s),"Se borro el rol con \xe9xito !","success"))}))},className:" btn btn-outline-danger ml-4"},r.a.createElement("span",null,"Borrar")):r.a.createElement(r.a.Fragment,null)))}return r.a.createElement(r.a.Fragment,null)},Qr=function(){var e=Object(ra.a)(na.a.mark((function e(a,t){return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ua.collection("roles").doc(a).set(t).then((function(){fa.a.fire("Rol: ".concat(a),"Se actualizaron los privilegios con \xe9xito !","success")})).catch((function(e){console.error("Error writing document: ",e)}));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),$r=function(){var e=Object(l.c)((function(e){return e.entidades})),a=e.userRoleSelected,t=e.privilegesToEdit;Object.getOwnPropertyNames(t).map((function(e){return vr[e]=t[e],!0}));var n=ja(vr),o=Object(oa.a)(n,2),c=o[0],s=o[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),Qr(a,c)},className:"border rounded p-4"},r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-sm-8"},"PRIVILEGIOS PARA EL ROL:","  ",r.a.createElement("span",{className:"text-success font-weight-bold"},a)),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("button",{type:"submit",className:" btn btn-outline-primary"},"Guardar"))),r.a.createElement("div",{className:"form-check d-flex flex-wrap"},Object.getOwnPropertyNames(vr).map((function(e){return r.a.createElement("div",{key:e,className:"w-25 p-1"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",name:e,id:e,onChange:s,checked:c[e]}),r.a.createElement("label",{className:"form-check-label",htmlFor:"todos"},e))}))))},eo={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};Tt.a.setAppElement("#root");var ao=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.ui})).isOpenUserRoleModal,t=Object(l.c)((function(e){return e.entidades})),n=t.privilegesToEdit,o=t.userRoleSelected;return r.a.createElement(Tt.a,{isOpen:a,onRequestClose:function(){e({type:He})},style:eo,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement("div",{className:"p-4"},r.a.createElement(Xr,null)),r.a.createElement("div",{className:"p-4"},r.a.createElement(Wr,null)),r.a.createElement("div",{className:"p-4"},n&&o?r.a.createElement($r,null):r.a.createElement(r.a.Fragment,null)))},to=function(){var e=Object(l.b)();return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:function(){e({type:qe})}},r.a.createElement("span",null,"Gestionar Roles "),r.a.createElement("i",{className:"fa fa-edit"})))},no=function(){var e=Object(l.c)((function(e){return e.entidades})).systemUserSelected,a=Object(l.c)((function(e){return e.ui})).msgError,t=Object(l.c)((function(e){return e.auth})),n=t.claveEntidad,o=t.privilegios,c=Object(l.c)((function(e){return e.entidades})).userRoles,s=ja(),i=Object(oa.a)(s,2),u=i[0],m=i[1],d=u.rol,p=Object(l.b)();c||p(Hr());var E=function(){return d?(p(da()),!0):(p(ma("Seleccione un rol de usuario")),!1)};return e?r.a.createElement("div",{className:"row border border-info rounded m-1"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row border-bottom border-info p-2"},r.a.createElement("div",{className:"col-12 d-flex justify-content-center"},r.a.createElement("h5",null,"Cuenta: ",e.email))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 d-flex flex-column p-4"},r.a.createElement("div",null,"Usuario: ",e.displayName),r.a.createElement("div",null,"Clave Entidad: ",e.claveEntidad),"sinAsignar"===e.rol?r.a.createElement("div",{className:"text-warning"},"Rol: ",e.rol):r.a.createElement("div",{className:"text-success"},"Rol: ",e.rol),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),E()&&(!function(e,a){ua.collection("usuarios").doc(e).update({rol:a}).then((function(){return fa.a.fire("Usuario habilitado","Se asign\xf3 correctamente el rol de usuario","success"),!0})).catch((function(e){console.log(e),fa.a.fire("Error",e,"error")}))}(e.id,d),p(Br(n)),p({type:we}))},className:"form-group pt-3"},r.a.createElement("select",{type:"text",name:"rol",value:d,onChange:m,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"Rol"),r.a.createElement("option",{value:"sinAsignar"},"Sin Asignar"),c.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-block mt-3 mb-5"},"Asignar Rol"),a&&r.a.createElement("div",{className:"auth__alert-error"},a)),o.editarRoles?r.a.createElement(to,null):r.a.createElement(r.a.Fragment,null))))):r.a.createElement(r.a.Fragment,null)},ro=function(){var e=Object(l.c)((function(e){return e.entidades})).systemUsers,a=Object(l.c)((function(e){return e.auth})).claveEntidad,t=Object(l.b)(),n=[];return e||t(Br(a)),e?(n=Object.values(e),r.a.createElement(ut,{title:0===n.length?"No se encontraron usuarios":"Usuarios",columns:bt,data:n,setFunction:qr})):r.a.createElement(r.a.Fragment,null)},oo=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("h3",null,"Gesti\xf3n de roles de usuarios")),r.a.createElement("div",{className:"row pt-4"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(ro,null)),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement(no,null))))},co=function(){var e=Object(l.c)((function(e){return e.auth})).privilegios;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row pt-4"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center"},r.a.createElement("h1",null,"Configuracion"))),r.a.createElement("div",{className:"row pt-4"},r.a.createElement("div",{className:"col-sm-12"},e.asignarRoles?r.a.createElement(oo,null):r.a.createElement(r.a.Fragment,null))),r.a.createElement(ao,null))},lo=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row justify-content-center pt-5"},r.a.createElement("h1",null,"TestArea")))},so=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.name,t=e.entidad,n=e.img;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row d-flex justify-content-between header"},r.a.createElement("div",{className:"col-sm-2 text-center "},r.a.createElement("div",{className:"border rounded h-100 d-flex justify-content-center"},r.a.createElement("img",{className:"align-self-center",src:"./logos/".concat(n),alt:"Logo de modulo 19",style:{maxHeight:100}}))),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("div",{className:"card border"},r.a.createElement("div",{className:"card-header"},"".concat(t," - Operador: ").concat(a)),r.a.createElement("div",{className:"card-body text-dark"},r.a.createElement("h5",{className:"card-title"},"Plataforma digital"),r.a.createElement("p",{className:"card-text"},"Distrito de riego 014 Rio Colorado"))))))},io=function(){return r.a.createElement("div",{className:"container-fluid pr-4"},r.a.createElement(Ia,null),r.a.createElement(so,null),r.a.createElement(la.d,null,r.a.createElement(la.b,{exact:!0,path:"/sicper",component:lt}),r.a.createElement(la.b,{exact:!0,path:"/padron",component:kt}),r.a.createElement(la.b,{exact:!0,path:"/permisos",component:nn}),r.a.createElement(la.b,{exact:!0,path:"/nuevo-permiso",component:Nn}),r.a.createElement(la.b,{exact:!0,path:"/transferencias",component:Tn}),r.a.createElement(la.b,{exact:!0,path:"/asignacion",component:Yn}),r.a.createElement(la.b,{exact:!0,path:"/labores",component:Qn}),r.a.createElement(la.b,{exact:!0,path:"/autorizados",component:rr}),r.a.createElement(la.b,{exact:!0,path:"/reportes",component:Fr}),r.a.createElement(la.b,{exact:!0,path:"/configuracion",component:co}),r.a.createElement(la.b,{exact:!0,path:"/test",component:lo}),r.a.createElement(la.a,{to:"/sicper"})))},uo=t(57),mo=function(e){var a=e.isAuthenticated,t=e.component,n=Object(uo.a)(e,["isAuthenticated","component"]);return localStorage.setItem("lastPath",n.location.pathname),r.a.createElement(la.b,Object.assign({},n,{component:function(e){return a?r.a.createElement(t,e):r.a.createElement(la.a,{to:"/auth/login"})}}))},po=function(e){var a=e.isAuthenticated,t=e.component,n=Object(uo.a)(e,["isAuthenticated","component"]);return r.a.createElement(la.b,Object.assign({},n,{component:function(e){return a?r.a.createElement(la.a,{to:"/"}):r.a.createElement(t,e)}}))},Eo=function(){var e=Object(l.b)(),a=Object(n.useState)(!0),t=Object(oa.a)(a,2),o=t[0],c=t[1],s=Object(n.useState)(!1),i=Object(oa.a)(s,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){ia.a.auth().onAuthStateChanged(function(){var a=Object(ra.a)(na.a.mark((function a(t){var n,r,o,l,s,i,u,d;return na.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(null===t||void 0===t?void 0:t.uid)){a.next=17;break}return a.next=3,ga(t.uid);case 3:return n=a.sent,a.next=6,Oa(n.claveEntidad);case 6:return r=a.sent,a.next=9,xa(n.rol);case 9:o=a.sent,l=r.nombre,s=r.img,i=r.clave,u=r.dotacion,d=r.titular,e(va(t.uid,t.displayName)),e(Na(l,s,i,u,d,n.rol,n.modulo)),e(ya(o)),m(!0),a.next=18;break;case 17:m(!1);case 18:c(!1);case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}),[e,c,m]),o?r.a.createElement("div",{className:"container pt-5 d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Cargando..."))):r.a.createElement(ca.a,null,r.a.createElement("div",null,r.a.createElement(la.d,null,r.a.createElement(po,{path:"/auth",component:Sa,isAuthenticated:u}),r.a.createElement(mo,{exat:!0,isAuthenticated:u,path:"/",component:io}),r.a.createElement(la.a,{to:"/auth/login"}))))},fo=function(){return r.a.createElement("div",null,r.a.createElement(l.a,{store:aa},r.a.createElement(Eo,null)))};t(348),t(349);c.a.render(r.a.createElement(fo,null),document.getElementById("root"))}},[[134,1,2]]]);
//# sourceMappingURL=main.627a95cc.chunk.js.map