(this.webpackJsonpsicper=this.webpackJsonpsicper||[]).push([[0],{125:function(e,a){},140:function(e,a,t){"use strict";(function(e){t.d(a,"a",(function(){return d}));var n=t(2),r=t.n(n),o=t(1),c=t(4),l=t(5),i=t(7),s=t.n(i),u=t(16),d=function(){var e=Object(c.a)(r.a.mark((function e(a,t,n,c){var i,d,f,E,b,v,h,N,O,g;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=a[0],d=i.palabra,f=void 0===d?0:d,E=i.campo,b=[],v=[],h=[],N=l.a.collection("transferencias").doc(n).collection("modulos").doc("Modulo-".concat(t)).collection("transferencias"),e.t0=c,e.next="global"===e.t0||"salientes"===e.t0?8:"entrantes"===e.t0?10:12;break;case 8:return u.c.forEach((function(e){var a=l.a.collection("transferencias").doc(n).collection("modulos").doc("Modulo-".concat(e)).collection("transferencias");0===f.length?h.push(a.orderBy(E).get()):(h.push(a.orderBy(E).startAt(f.toUpperCase()).endAt(f.toUpperCase()+"\uf8ff").get()),h.push(a.orderBy(E).startAt(f).endAt(f+"\uf8ff").get()),h.push(a.where(E,"==",Number(f)).get()))})),e.abrupt("break",13);case 10:return 0===f.length?h.push(N.orderBy(E).get()):(h.push(N.orderBy(E).startAt(f.toUpperCase()).endAt(f.toUpperCase()+"\uf8ff").get()),h.push(N.orderBy(E).startAt(f).endAt(f+"\uf8ff").get()),h.push(N.where(E,"==",Number(f)).get())),e.abrupt("break",13);case 12:return e.abrupt("break",13);case 13:return e.next=16,Promise.all(h);case 16:if(e.sent.forEach((function(e){e.forEach((function(e){"salientes"===c?e.data().modulo===parseInt(t)&&b.push(Object(o.a)({},e.data())):b.push(Object(o.a)({},e.data()))}))})),v.push(b),a.length>1)for(O=function(e){var t=v.pop();v.push(t.filter((function(t){return t[a[e].campo]===m(a[e].campo,a[e].palabra)})))},g=1;g<=a.length-1;g++)O(g);return 0===b.length&&s.a.fire("No se encontraron transferencias ","...","warning"),e.abrupt("return",p(v.pop(),"folio"));case 22:case"end":return e.stop()}}),e)})));return function(a,t,n,r){return e.apply(this,arguments)}}(),m=function(e,a){switch(e){case"seccion":case"claveCultivo":return parseInt(a);case"modulo":return"9A"===a||"9B"===a?a:parseInt(a);default:return a}},p=function(e,a){var t=[],n=[];return e.forEach((function(e){-1===t.indexOf(e[a])&&(t.push(e[a]),n.push(e))})),n}}).call(this,t(25))},141:function(e,a,t){e.exports=t(361)},155:function(e,a,t){},16:function(e,a,t){"use strict";t.d(a,"d",(function(){return n})),t.d(a,"a",(function(){return r})),t.d(a,"c",(function(){return o})),t.d(a,"g",(function(){return c})),t.d(a,"e",(function(){return l})),t.d(a,"b",(function(){return i})),t.d(a,"f",(function(){return s}));var n={primeraUnidad:{4:!1,5:!1,6:!1,14:!1,15:!1,16:!1},segundaUnidad:{7:!1,8:!1,"9A":!1,"9B":!1,10:!1,11:!1,12:!1,17:!1,18:!1,19:!1,20:!1},terceraUnidad:{1:!1,2:!1,3:!1,21:!1,22:!1,23:!1},pozosParticulares:{UNI01:!1,UNI02:!1,UNI03:!1}},r={"OTO\xd1O-INVIERNO":{"3-TRIGO":{},"8-AVENA":{},"2-CEBADA":{},"1-CARTAMO":{},"4-RYE-GRASS":{},"12-CEBOLLIN O-I":{},VARIOS:{},SUBTOTAL:{}},PERENNES:{"50-ALFALFA":{},"145-COMP. VOL. ALFALFA":{},"51-ALFALFA NUEVA":{},"145.1-COMP. DE VOL. ALF. NVA.":{},"52-ESPARRAGO":{},"53-VID":{},FRUTALES:{},"117-ZACATE BERMUDA":{},"60-PALMA DATILERA":{},VARIOS:{},SUBTOTAL:{}},"PRIMAVERA-VERANO":{"80-ALGODONERO":{},"81-SORGO GRANO TEMP.(SUDAN)":{},"82-SORGO GRANO TARDIO":{},"83-SORGO FORRAJERO TEMP.(SUDAN)":{},"84-SORGO FORRAJERO TARDIO":{},"87-MAIZ BLANCO TEMPRANO":{},"88-MAIZ BLANCO TARDIO":{},"12.1-CEBOLLIN P-V":{},"12.2-CEBOLLIN TARDIO":{},VARIOS:{},SUBTOTAL:{}}},o=[1,2,3,4,5,6,7,8,"9A","9B",10,11,12,14,15,16,17,18,19,20,21,22,23,"UNI01","UNI02","UNI03","dev"],c=["1","2","3","4","5","6","7","8","9A","9B","10","11","12","14","15","16","17","18","19","20","21","22","23"],l={accesoGlobal:!1,pantallaInicio:!1,pantallaPadron:!1,pantallaPermisos:!1,pantallaTransferencias:!1,pantallaAsignacion:!1,pantallaLabores:!1,pantallaAutorizados:!1,pantallaReportes:!1,pantallaConfiguracion:!1,testArea:!1,actualizarPadron:!1,consultarPadron:!1,generarConstancias:!1,editarProductores:!1,expedirPermisos:!1,consultarPermisos:!1,solicitarCancelarPermisos:!1,cancelarPermisos:!1,consultarExpedicion:!1,consultarAutorizados:!1,editarAutorizados:!1,solicitarTransferencias:!1,consultarTransferencias:!1,asignarTecnico:!1,consultarLabores:!1,registrarLabores:!1,pagarLabores:!1,imprimirLabores:!1,borrarPermisos:!1,editarEntidades:!1,asignarRoles:!1,editarRoles:!1,cerrarExpedicionModulos:!1,variablesGlobales:!1},i=[{clave:"dev",dotacionGravedad:117,dotacionPozo:0,titular:"dev",direccion:"",nombre:"Desarrollo",img:"dev.png",expedicionActivaModulo:!0},{clave:"CNA",dotacionGravedad:117,dotacionPozo:0,nombre:"Comisi\xf3n Nacional del Agua",titular:"???",direccion:"",img:"cna.png"},{clave:"SADER",dotacionGravedad:117,dotacionPozo:0,nombre:"Secretar\xeda de Agricultura y Desarrollo Rural",titular:"???",direccion:"",img:"sader.png"},{clave:"CESVBC",dotacionGravedad:117,dotacionPozo:0,nombre:"Comit\xe9 Estatal de Sanidad Vegetal de Baja California",titular:"???",direccion:"",img:"cesvbc.webp"},{clave:"SRL",dotacionGravedad:117,dotacionPozo:0,nombre:"Distrito de Riego 014, R\xedo Colorado S. de R.L.",titular:"???",direccion:"",img:"srl.png"},{clave:"1",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 1",titular:"???",direccion:"",img:"m1.jpg",expedicionActivaModulo:!0},{clave:"2",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 2",titular:"???",direccion:"",img:"m2.jpg",expedicionActivaModulo:!0},{clave:"3",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 3",titular:"???",direccion:"",img:"m3.jpg",expedicionActivaModulo:!0},{clave:"4",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 4",titular:"???",direccion:"",img:"m4.jpg",expedicionActivaModulo:!0},{clave:"5",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 5",titular:"???",direccion:"",img:"m5.jpg",expedicionActivaModulo:!0},{clave:"6",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 6",titular:"???",direccion:"",img:"m6.jpg",expedicionActivaModulo:!0},{clave:"7",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 7",titular:"???",direccion:"",img:"m7.jpg",expedicionActivaModulo:!0},{clave:"8",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo 8",titular:"???",direccion:"",img:"m8.jpg",expedicionActivaModulo:!0},{clave:"9A",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 9A",titular:"???",direccion:"",img:"m9a.jpg",expedicionActivaModulo:!0},{clave:"9B",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 9B",titular:"???",direccion:"",img:"m9b.jpg",expedicionActivaModulo:!0},{clave:"10",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 10",titular:"???",direccion:"",img:"m10.jpg",expedicionActivaModulo:!0},{clave:"11",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 11",titular:"???",direccion:"",img:"m11.jpg",expedicionActivaModulo:!0},{clave:"12",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 12",titular:"???",direccion:"",img:"m12.jpg",expedicionActivaModulo:!0},{clave:"14",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 14",titular:"???",direccion:"",img:"m14.jpg",expedicionActivaModulo:!0},{clave:"15",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 15",titular:"???",direccion:"",img:"m15.jpg",expedicionActivaModulo:!0},{clave:"16",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 16",titular:"???",direccion:"",img:"m16.jpg",expedicionActivaModulo:!0},{clave:"17",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 17",titular:"???",direccion:"",img:"m17.jpg",expedicionActivaModulo:!0},{clave:"18",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 18",titular:"???",direccion:"",img:"m18.jpg",expedicionActivaModulo:!0},{clave:"19",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 19",titular:"???",direccion:"Carretera a San Felipe Km 1.5 S/N, Col. Xochimilco C.P. 21380. Mexicali B.C.",img:"m19.png",expedicionActivaModulo:!0},{clave:"20",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 20",titular:"???",direccion:"",img:"m20.jpg",expedicionActivaModulo:!0},{clave:"21",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 21",titular:"???",direccion:"",img:"m21.jpg",expedicionActivaModulo:!0},{clave:"22",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 22",titular:"???",direccion:"",img:"m22.jpg",expedicionActivaModulo:!0},{clave:"23",dotacionGravedad:117,dotacionPozo:0,nombre:"Usuarios del M\xf3dulo No. 23",titular:"???",direccion:"",img:"srl.png",expedicionActivaModulo:!0}],s=[{CUENTA:"dev",SUBCTA:0,UNIDAD:2,ZONA:"dev",SECCION:86,CP:1,LT:32,SLT:0,RA:0,SRA:0,SSRA:0,PCONTROL:300,TENENCIA:1,ESTADO:2,MUNICIPIO:2,EJIDO:224,GRUPO:0,PREDIO:23,SISTRIEGO:1,EQUIPO:0,APPATERNO:"LOPEZ",APMATERNO:"LOPEZ",NOMBRE:"JUAN DEV",SUPFISICA:100,SUPRIEGO:100,FECHA:"",REFERENCIA:3606,MODULO:"dev"},{CUENTA:"dev",SUBCTA:1,UNIDAD:2,ZONA:"dev",SECCION:88,CP:1,LT:5,SLT:0,RA:0,SRA:0,SSRA:0,PCONTROL:300,TENENCIA:1,ESTADO:2,MUNICIPIO:2,EJIDO:151,GRUPO:0,PREDIO:23,SISTRIEGO:2,EQUIPO:1,APPATERNO:"LOPEZ",APMATERNO:"GOMEZ",NOMBRE:"LUIS DEV",SUPFISICA:100,SUPRIEGO:100,FECHA:"",REFERENCIA:3606,MODULO:"dev"},{CUENTA:"dev",SUBCTA:2,UNIDAD:2,ZONA:"dev",SECCION:90,CP:1,LT:12,SLT:0,RA:0,SRA:0,SSRA:0,PCONTROL:300,TENENCIA:1,ESTADO:2,MUNICIPIO:2,EJIDO:224,GRUPO:0,PREDIO:23,SISTRIEGO:2,EQUIPO:2,APPATERNO:"LOPEZ",APMATERNO:"HERNANDEZ",NOMBRE:"CARLOS DEV",SUPFISICA:100,SUPRIEGO:100,FECHA:"",REFERENCIA:3606,MODULO:"dev"}]},336:function(e,a){},337:function(e,a){},360:function(e,a,t){},361:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(26),c=t.n(o),l=t(3),i=t(38),s=t(131),u=t(1),d="[Login] Login",m="[Login] Entity",p="[Login] Logout",f="[Login] Privilegios",E="[Login] Set Variables Globales",b="[Login] Set Estado Expedicion Modulo",v="[UI] Set Error",h="[UI] Remove Error",N="[UI] Start Loading",O="[UI] Finish Loading",g="[Configuracion] Set Entities",y="[Alta Permisos] Open permiso modal",A="[Alta Permisos] Close permiso modal",x="[Alta Permisos] Open cultivos modal",C="[Alta Permisos] Close cultivos modal",S="[Alta Permisos] Open cultivo anterior modal",P="[Alta Permisos] Close cultivo anterior modal",j="[Alta Permisos] Load cultivos",R="[Alta Permisos] Set Cultivos Anteriores",w="[Alta Permisos] Clear cultivos",I="[Alta Permisos] Set cultivo",z="[Alta Permisos] unset cultivo",D="[Alta Permisos] Set cultivo anterior",L="[Alta Permisos] unset cultivo anterior",T="[Alta Permisos] Set Cuota Cultivo",k="[Alta Permisos] Open usuarios modal",M="[Alta Permisos] Close usuarios modal",U="[Alta Permisos] Clear usuarios",F="[Alta Permisos] Set usuarios",G="[Alta Permisos] Unset usuarios",B="[Alta Permisos] Set usuario",V="[Alta Permisos] Unset usuario",q="[Padron] Set Updating Padron",Y="[TestArea] Set Updating Permisos",H="[TestArea] Unset Updating Permisos",Z="[Padron] Unset Updating Padron",J="[Padron] Set Updating Reacomodos",_="[Padron] Unset Updating Reacomodos",K="[Alta Permisos] Open productores modal",X="[Alta Permisos] Close productores modal",Q="[Alta Permisos] Load prosuctores",W="[Alta Permisos] Clear prosuctores",$="[Alta Permisos] Set productor",ee="[Alta Permisos] Unset productor",ae="[Alta Permisos] Open nuevo prouctor modal",te="[Alta Permisos] Close nuevo prouctor modal",ne="[Alta Permisos] Set form value",re="[Alta Permisos] Set onSubmit data",oe="[Alta Permisos] unSet onSubmit data",ce="[Alta Permisos] Set en espera",le="[Alta Permisos] unSet en espera",ie="[Alta Permisos] Enable save button",se="[Alta Permisos] Disable save button",ue="[Alta Permisos] Enable print button",de="[Alta Permisos] Disable print button",me="[Permisos Screen] Set permisos",pe="[Permisos Screen] Unset permisos",fe="[Permisos Screen] Set permiso selected",Ee="[Permisos Screen] Unset permiso selected",be="[Permisos Screen] Set superficies",ve="[Permisos Screen] Unset superficies",he="[Permisos Screen] Set Pre Cancel Permits",Ne="[Permisos Screen] Unset Pre Cancel Permits",Oe="[Permisos Screen] Set Pre Permit To Cancel",ge="[Permisos Screen] Unset Pre Permit To Cancel",ye="[Autorizados Screen] Set modulo",Ae="[Autorizados Screen] Unset modulo",xe="[Autorizados Screen] Set autorizados",Ce="[Autorizados Screen] Unset autorizados",Se="[Autorizados Screen] Open autorizados modal",Pe="[Autorizados Screen] Close autorizados modal",je="[Autorizados Screen] Set autorizado selected",Re="[Autorizados Screen] Unset autorizado selected",we="[Autorizados Screen] Set superficie referencia",Ie="[Autorizados Screen] Unset superficie referencia",ze="[Autorizados Screen] Set Form Error",De="[Autorizados Screen] Unset Form Error",Le="[Autorizados Screen] Set autorizados por cultivo",Te="[Sicper Screen] Set expedicion",ke="[Sicper Screen] Unset expedicion",Me="[Sicper Screen] Set superficie normal",Ue="[Sicper Screen] Set superficie extra",Fe="[Algodonero Screen] Set permisos",Ge="[Algodonero Screen] Unset permisos",Be="[Algodonero Screen] Open Modal Sanidad",Ve="[Algodonero Screen] Close Modal Sanidad",qe="[Transferencias Screen] Open Modal Transferencias",Ye="[Transferencias Screen] Close Modal Transferencias",He="[Transferencias Screen] Enable Print Button",Ze="[Transferencias Screen] Disable Print Button",Je="[Transferencias Screen] Set Nueva Transferencia",_e="[Transferencias Screen] Unset Nueva Transferencia",Ke="[Transferencias Screen] Set Transferencia",Xe="[Transferencias Screen] Unset Transferencia",Qe="[Transferencias Screen] Set Transferencias",We="[Transferencias Screen] Unset  Transferencias",$e="[Entidades] Set Data Principales Cultivos",ea="[Entidades] Set permisos",aa="[Entidades] Set Campo Ordenador",ta="[Scenes] Open Imprimir Reporte Modal",na="[Scenes] Close Imprimir Reporte Modal",ra="[Entidades] Set System Users",oa="[Entidades] Set System User Selected",ca="[Entidades] Unset System User Selected",la="[Entidades] Set Users Roles",ia="[Entidades] Unset Users Roles",sa="[Entidades] Set User Role Selected",ua="[Entidades] Unset User Role Selected",da="[Entidades] Set Privileges To Edit",ma="[Entidades] Unset Privileges To Edit",pa="[Entidades] Set Localties",fa="[Entidades] Unset Localties",Ea="[Entidades] Set Selected Localties",ba="[Entidades] Unset Selected Localties",va="[Entidades] Set Localtie Selected",ha="[Entidades] Unset Localtie Selected",Na="[Entidades] Open Localties Modal",Oa="[Entidades] Close Localties Modal",ga="[Reportes] Set Expedicion",ya="[Reportes] Set Autorizados",Aa="[UI] Open User Role Modal",xa="[UI] Close User Role Modal",Ca="[Asignacion Screen] Set Localties",Sa="[Asignacion Screen] Set Selected Localties",Pa="[Asignacion Screen] Set Technicians",ja="[Asignacion Screen] Update Technicians",Ra="[Asignacion Screen] Update Padron Localties",wa="[Asignacion Screen] Set Technician Selected",Ia="[Asignacion Screen] Set Busqueda",za="[Labores Screen] Set Folio Sanidad",Da="[Labores Screen] Update Permiso",La="[Labores Screen] Delete Permiso",Ta="[Labores Screen] Set Technicians Labores",ka="[Labores Checks] Set Check State",Ma="[Labores Checks] Check Desfoliado",Ua="[Labores Checks] Uncheck Desfoliado",Fa="[Labores Checks] Check Cosechado",Ga="[Labores Checks] Uncheck Cosechado",Ba="[Labores Checks] Check Desvarado",Va="[Labores Checks] Uncheck Desvarado",qa="[Labores Checks] Check Disqueado",Ya="[Labores Checks] Uncheck Disqueado",Ha="[Labores Checks] Check Desarraigado",Za="[Labores Checks] Uncheck Desarraigado",Ja="[Labores Checks] Check Barbechado",_a="[Labores Checks] Uncheck Barbechado",Ka="[Labores Checks] Check Pagado",Xa="[Labores Checks] Uncheck Pagado",Qa={loading:!1,msgError:null,updatingPermisos:!1},Wa={enEspera:!1,enableSaveButton:!0,enablePrintButton:!1,openUsuariosModal:!1,openProductoresModal:!1,isOpenNuevoProductorModal:!1,openCultivosModal:!1,openCultivoAnteriorModal:!1,isOpenPrintPermisoModal:!1,usuarios:[],cultivos:[],cultivosAnteriores:[],productores:[],idUsuarioSelected:null,cuenta:null,usuario:null,supDerecho:null,lote:null,localidad:null,municipio:null,estado:null,modulo:null,seccion:null,canal:null,toma:null,sistema:null,idProductorSelected:null,nombreProductor:null,rfcProductor:null,idCultivoSelected:null,nombreCultivo:null,claveCultivo:null,subciclo:null,cuotaCultivo:null,supPrevia:0,idCultivoAnteriorSelected:null,cultivoAnterior:null,claveCultivoAnterior:null,tipo:null,ciclo:null,numeroPermiso:null,fechaEmicion:null,fechaLimite:null,vigencia:null,estadoPermiso:null,variedad:"",supAutorizada:0,fuenteCredito:"",latitud:"",longitud:"",observaciones:""},$a={permisos:[],permisoSelected:null,superficies:null},et={modulo:null,openAutorizadosModal:!1,autorizados:[],autorizadoSelected:null,superficieReferencia:null,formError:null},at={expedicion:null,superficie:"normal"},tt={permisos:[],permisoSelected:null,printSanidadModal:!1,technicians:[]},nt={reportesScreen:{openImprimirReporteModal:!1},padronScreen:{updatingPadron:!1,updatingReacomodos:!1}},rt={printTransferModal:!1,nuevaTransferencia:null,transferencia:null,transferPrintButton:!1,transferencias:[]},ot="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,ct=Object(i.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case d:return{uid:a.payload.uid,name:a.payload.displayName,email:a.payload.email};case m:return Object(u.a)(Object(u.a)({},e),{},{entidad:a.payload.entidad,img:a.payload.img,claveEntidad:a.payload.claveEntidad,dotacionGravedad:a.payload.dotacionGravedad,dotacionPozo:a.payload.dotacionPozo,titular:a.payload.titular,direccion:a.payload.direccion,expedicionActivaModulo:a.payload.expedicionActivaModulo,rol:a.payload.rol,modulo:a.payload.modulo});case f:return Object(u.a)(Object(u.a)({},e),{},{privilegios:a.payload});case E:return Object(u.a)(Object(u.a)({},e),{},{variablesGlobales:a.payload});case b:return Object(u.a)(Object(u.a)({},e),{},{expedicionActivaModulo:a.payload});case p:return{};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qa,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case v:return Object(u.a)(Object(u.a)({},e),{},{msgError:a.payload});case h:return Object(u.a)(Object(u.a)({},e),{},{msgError:null});case N:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case O:return Object(u.a)(Object(u.a)({},e),{},{loading:!1});case Aa:return Object(u.a)(Object(u.a)({},e),{},{isOpenUserRoleModal:!0});case xa:return Object(u.a)(Object(u.a)({},e),{},{isOpenUserRoleModal:!1});case Y:return Object(u.a)(Object(u.a)({},e),{},{updatingPermisos:!0});case H:return Object(u.a)(Object(u.a)({},e),{},{updatingPermisos:!1});default:return e}},scenes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case ya:return Object(u.a)(Object(u.a)({},e),{},{reportesScreen:Object(u.a)(Object(u.a)({},e.reportesScreen),{},{autorizados:a.payload})});case ga:return Object(u.a)(Object(u.a)({},e),{},{reportesScreen:Object(u.a)(Object(u.a)({},e.reportesScreen),{},{expedicion:a.payload})});case ta:return Object(u.a)(Object(u.a)({},e),{},{reportesScreen:{openImprimirReporteModal:!0}});case na:return Object(u.a)(Object(u.a)({},e),{},{reportesScreen:{openImprimirReporteModal:!1}});case q:return Object(u.a)(Object(u.a)({},e),{},{padronScreen:{updatingPadron:!0}});case Z:return Object(u.a)(Object(u.a)({},e),{},{padronScreen:{updatingPadron:!1}});case J:return Object(u.a)(Object(u.a)({},e),{},{padronScreen:{updatingReacomodos:!0}});case _:return Object(u.a)(Object(u.a)({},e),{},{padronScreen:{updatingReacomodos:!1}});default:return e}},entidades:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case $e:return Object(u.a)(Object(u.a)({},e),{},{principalesCultivos:{labels:a.payload.labels,superficiesCultivos:a.payload.superficiesCultivos,numeroPermisos:a.payload.numeroPermisos}});case ea:return Object(u.a)(Object(u.a)({},e),{},{permisos:a.payload});case aa:return Object(u.a)(Object(u.a)({},e),{},{campoOrdenador:a.payload});case F:return Object(u.a)(Object(u.a)({},e),{},{usuarios:a.payload});case G:return Object(u.a)(Object(u.a)({},e),{},{usuarios:!1});case B:return Object(u.a)(Object(u.a)({},e),{},{usuario:a.payload});case V:return Object(u.a)(Object(u.a)({},e),{},{usuario:!1});case la:return Object(u.a)(Object(u.a)({},e),{},{userRoles:a.payload});case ia:return Object(u.a)(Object(u.a)({},e),{},{userRoles:!1});case sa:return Object(u.a)(Object(u.a)({},e),{},{userRoleSelected:a.payload});case ua:return Object(u.a)(Object(u.a)({},e),{},{userRoleSelected:!1});case da:return Object(u.a)(Object(u.a)({},e),{},{privilegesToEdit:a.payload});case ma:return Object(u.a)(Object(u.a)({},e),{},{privilegesToEdit:!1});case ra:return Object(u.a)(Object(u.a)({},e),{},{systemUsers:a.payload});case oa:return Object(u.a)(Object(u.a)({},e),{},{systemUserSelected:a.payload});case ca:return Object(u.a)(Object(u.a)({},e),{},{systemUserSelected:null});case pa:return Object(u.a)(Object(u.a)({},e),{},{localties:a.payload});case fa:return Object(u.a)(Object(u.a)({},e),{},{localties:null});case Ea:return Object(u.a)(Object(u.a)({},e),{},{selectedLocalties:a.payload});case ba:return Object(u.a)(Object(u.a)({},e),{},{selectedLocalties:null});case va:return Object(u.a)(Object(u.a)({},e),{},{localtieSelected:a.payload});case ha:return Object(u.a)(Object(u.a)({},e),{},{localtieSelected:null});case Na:return Object(u.a)(Object(u.a)({},e),{},{openLocaltiesModal:!0});case Oa:return Object(u.a)(Object(u.a)({},e),{},{openLocaltiesModal:!1});case g:return Object(u.a)(Object(u.a)({},e),{},{entities:a.payload});default:return e}},sicperScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Te:return Object(u.a)(Object(u.a)({},e),{},{expedicion:a.payload});case ke:return Object(u.a)(Object(u.a)({},e),{},{expedicion:null});case Me:return Object(u.a)(Object(u.a)({},e),{},{superficie:"normal"});case Ue:return Object(u.a)(Object(u.a)({},e),{},{superficie:"extra"});default:return e}},permisosScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case me:return Object(u.a)(Object(u.a)({},e),{},{permisos:a.payload});case pe:return Object(u.a)(Object(u.a)({},e),{},{permisos:[]});case he:return Object(u.a)(Object(u.a)({},e),{},{preCancelPermits:a.payload});case Ne:return Object(u.a)(Object(u.a)({},e),{},{preCancelPermits:[]});case fe:return Object(u.a)(Object(u.a)({},e),{},{permisoSelected:a.payload});case Ee:return Object(u.a)(Object(u.a)({},e),{},{permisoSelected:null});case Oe:return Object(u.a)(Object(u.a)({},e),{},{permitToCancelSelected:a.payload});case ge:return Object(u.a)(Object(u.a)({},e),{},{permitToCancelSelected:null});case be:return Object(u.a)(Object(u.a)({},e),{},{superficies:a.payload});case ve:return Object(u.a)(Object(u.a)({},e),{},{superficies:null});default:return e}},algodoneroScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Fe:return Object(u.a)(Object(u.a)({},e),{},{permisos:a.payload});case Ge:return Object(u.a)(Object(u.a)({},e),{},{permisos:[]});case fe:return Object(u.a)(Object(u.a)({},e),{},{permisoSelected:a.payload});case Ee:return Object(u.a)(Object(u.a)({},e),{},{permisoSelected:null});case Be:return Object(u.a)(Object(u.a)({},e),{},{printSanidadModal:a.payload});case Ve:return Object(u.a)(Object(u.a)({},e),{},{printSanidadModal:!1});case za:return Object(u.a)(Object(u.a)({},e),{},{permisoSelected:Object(u.a)(Object(u.a)({},e.permisoSelected),{},{folioSanidad:a.payload})});case Da:var t=e.permisos.map((function(e){return e.id===a.payload.id?a.payload:e}));return Object(u.a)(Object(u.a)({},e),{},{permisos:t});case La:var n=[];return e.permisos.forEach((function(e){e.id!==a.payload&&n.push(Object(u.a)({},e))})),Object(u.a)(Object(u.a)({},e),{},{permisoSelected:null,permisos:n});case Ta:return Object(u.a)(Object(u.a)({},e),{},{technicians:a.payload});default:return e}},transferenciasScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case qe:return Object(u.a)(Object(u.a)({},e),{},{printTransferModal:!0});case Ye:return Object(u.a)(Object(u.a)({},e),{},{printTransferModal:!1});case He:return Object(u.a)(Object(u.a)({},e),{},{transferPrintButton:!0});case Ze:return Object(u.a)(Object(u.a)({},e),{},{transferPrintButton:!1});case Je:return Object(u.a)(Object(u.a)({},e),{},{nuevaTransferencia:a.payload});case _e:return Object(u.a)(Object(u.a)({},e),{},{nuevaTransferencia:null});case Ke:return Object(u.a)(Object(u.a)({},e),{},{transferencia:a.payload});case Xe:return Object(u.a)(Object(u.a)({},e),{},{transferencia:null});case Qe:return Object(u.a)(Object(u.a)({},e),{},{transferencias:a.payload});case We:return Object(u.a)(Object(u.a)({},e),{},{transferencias:[]});default:return e}},altaPermisos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wa,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case y:return Object(u.a)(Object(u.a)({},e),{},{openPrintPermisoModal:!0});case A:return Object(u.a)(Object(u.a)({},e),{},{openPrintPermisoModal:!1});case x:return Object(u.a)(Object(u.a)({},e),{},{openCultivosModal:!0});case C:return Object(u.a)(Object(u.a)({},e),{},{openCultivosModal:!1});case S:return Object(u.a)(Object(u.a)({},e),{},{openCultivoAnteriorModal:!0});case P:return Object(u.a)(Object(u.a)({},e),{},{openCultivoAnteriorModal:!1});case j:return Object(u.a)(Object(u.a)({},e),{},{cultivos:a.payload});case R:return Object(u.a)(Object(u.a)({},e),{},{cultivosAnteriores:a.payload});case w:return Object(u.a)(Object(u.a)({},e),{},{cultivos:[]});case I:return Object(u.a)(Object(u.a)({},e),{},{idCultivoSelected:a.payload.id,nombreCultivo:a.payload.nombre,claveCultivo:a.payload.clave,subciclo:a.payload.subciclo,cuotaCultivo:a.payload.costoHectarea,superficiePreviaCultivo:a.payload.superficiePrevia});case T:return Object(u.a)(Object(u.a)({},e),{},{cuotaCultivo:a.payload});case z:return Object(u.a)(Object(u.a)({},e),{},{idCultivoSelected:null,nombreCultivo:null,claveCultivo:null,subciclo:null,cuotaCultivo:null});case D:return Object(u.a)(Object(u.a)({},e),{},{idCultivoAnteriorSelected:a.payload.id,cultivoAnterior:a.payload.nombre,claveCultivoAnterior:a.payload.clave});case L:return Object(u.a)(Object(u.a)({},e),{},{idCultivoAnteriorSelected:null,cultivoAnterior:null,claveCultivoAnterior:null});case k:return Object(u.a)(Object(u.a)({},e),{},{openUsuariosModal:!0});case M:return Object(u.a)(Object(u.a)({},e),{},{openUsuariosModal:!1});case F:return Object(u.a)(Object(u.a)({},e),{},{usuarios:a.payload});case U:return Object(u.a)(Object(u.a)({},e),{},{usuarios:[]});case B:return Object(u.a)(Object(u.a)({},e),{},{idUsuarioSelected:a.payload.id,cuenta:"".concat(a.payload.cuenta,".").concat(a.payload.subcta),usuario:"".concat(a.payload.apPaterno," ").concat(a.payload.apMaterno," ").concat(a.payload.nombre),supDerecho:a.payload.supRiego,lote:a.payload.predio,localidad:a.payload.localidad,municipio:a.payload.municipio,estado:a.payload.estado,modulo:a.payload.modulo,zona:a.payload.zona,seccion:a.payload.seccion,canal:"".concat(a.payload.cp,"-").concat(a.payload.lt,"-").concat(a.payload.slt,"-").concat(a.payload.ra,"-").concat(a.payload.sra,"-").concat(a.payload.ssra),toma:a.payload.pControl,sistema:a.payload.sistRiego,supPrevia:a.payload.supPrevia,reacomodo:a.payload.reacomodo,nombreLocalidad:a.payload.nombreLocalidad,tipoLocalidad:a.payload.tipoLocalidad,claveLocalidad:a.payload.ejido,laboresPendientes:a.payload.laboresPendientes});case V:return Object(u.a)(Object(u.a)({},e),{},{idUsuarioSelected:null,cuenta:null,usuario:null,supDerecho:null,lote:null,localidad:null,municipio:null,estado:null,modulo:null,seccion:null,canal:null,toma:null,sistema:null});case K:return Object(u.a)(Object(u.a)({},e),{},{openProductoresModal:!0});case X:return Object(u.a)(Object(u.a)({},e),{},{openProductoresModal:!1});case Q:return Object(u.a)(Object(u.a)({},e),{},{productores:a.payload});case W:return Object(u.a)(Object(u.a)({},e),{},{productores:[]});case $:return Object(u.a)(Object(u.a)({},e),{},{idProductorSelected:a.payload.id,nombreProductor:"".concat(a.payload.apPaterno," ").concat(a.payload.apMaterno," ").concat(a.payload.nombre),rfcProductor:a.payload.rfc,curpProductor:a.payload.curp});case ee:return Object(u.a)(Object(u.a)({},e),{},{idProductorSelected:null,nombreProductor:null,rfcProductor:null});case ae:return Object(u.a)(Object(u.a)({},e),{},{isOpenNuevoProductorModal:!0});case te:return Object(u.a)(Object(u.a)({},e),{},{isOpenNuevoProductorModal:!1});case ne:return Object(u.a)(Object(u.a)({},e),{},{supAutorizada:Number(a.payload.supAutorizada),variedad:a.payload.variedad,fuenteCredito:a.payload.fuenteCredito,latitud:a.payload.latitud,longitud:a.payload.longitud,observaciones:a.payload.observaciones});case re:return Object(u.a)(Object(u.a)({},e),{},{tipo:a.payload.tipo,ciclo:a.payload.ciclo,numeroPermiso:a.payload.numeroPermiso,fechaEmicion:a.payload.fechaEmicion,fechaLimite:a.payload.fechaLimite,vigencia:a.payload.vigencia,estadoPermiso:a.payload.estadoPermiso});case oe:return Object(u.a)(Object(u.a)({},e),{},{tipo:null,ciclo:null,numeroPermiso:null,fechaEmicion:null,fechaLimite:null,vigencia:null});case ce:return Object(u.a)(Object(u.a)({},e),{},{enEspera:!0});case le:return Object(u.a)(Object(u.a)({},e),{},{enEspera:!1});case ie:return Object(u.a)(Object(u.a)({},e),{},{enableSaveButton:!0});case se:return Object(u.a)(Object(u.a)({},e),{},{enableSaveButton:!1});case ue:return Object(u.a)(Object(u.a)({},e),{},{enablePrintButton:!0});case de:return Object(u.a)(Object(u.a)({},e),{},{enablePrintButton:!1});default:return e}},autorizadosScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case ye:return Object(u.a)(Object(u.a)({},e),{},{modulo:a.payload});case Ae:return Object(u.a)(Object(u.a)({},e),{},{modulo:null});case Le:return Object(u.a)(Object(u.a)({},e),{},{autorizadosPorCultivo:a.payload});case xe:return Object(u.a)(Object(u.a)({},e),{},{autorizados:a.payload});case Ce:return Object(u.a)(Object(u.a)({},e),{},{autorizados:[]});case Se:return Object(u.a)(Object(u.a)({},e),{},{openAutorizadosModal:!0});case Pe:return Object(u.a)(Object(u.a)({},e),{},{autorizadoSelected:null,openAutorizadosModal:!1});case je:return Object(u.a)(Object(u.a)({},e),{},{openAutorizadosModal:!0,autorizadoSelected:a.payload});case Re:return Object(u.a)(Object(u.a)({},e),{},{openAutorizadosModal:!1,autorizadoSelected:null});case we:return Object(u.a)(Object(u.a)({},e),{},{superficieReferencia:a.payload});case Ie:return Object(u.a)(Object(u.a)({},e),{},{superficieReferencia:null});case ze:return Object(u.a)(Object(u.a)({},e),{},{formError:a.payload});case De:return Object(u.a)(Object(u.a)({},e),{},{formError:null});default:return e}}}),lt=Object(i.e)(ct,ot(Object(i.a)(s.a))),it=t(2),st=t.n(it),ut=t(4),dt=t(8),mt=t(18),pt=t(19),ft=t(5),Et=function(e){return{type:v,payload:e}},bt=function(){return{type:h}},vt=function(){return{type:O}},ht=t(7),Nt=t.n(ht),Ot=function(e,a){return function(t){t({type:N}),ft.b.auth().signInWithEmailAndPassword(e,a).then(function(){var e=Object(ut.a)(st.a.mark((function e(a){var n,r,o,c,l,i,s,u,d,m,p,f,E;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.user,e.next=3,Ct(n.uid);case 3:return r=e.sent,e.next=6,St(r.claveEntidad);case 6:return o=e.sent,e.next=9,Pt(r.rol);case 9:return c=e.sent,l=o.nombre,i=o.img,s=o.clave,u=o.dotacionGravedad,d=o.dotacionPozo,m=o.titular,p=o.direccion,f=o.expedicionActivaModulo,t(gt(n.uid,n.displayName,n.email)),t(yt(l,i,s,u,d,m,p,f,r.rol,r.modulo)),t(Rt(c)),e.next=16,jt();case 16:E=e.sent,t(At(E)),t(vt());case 19:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),t(vt()),Nt.a.fire("Error","Usuoario o contrase\xf1a incorrecto.","error")}))}},gt=function(e,a,t){return{type:d,payload:{uid:e,displayName:a,email:t}}},yt=function(e,a,t,n,r,o,c,l,i,s){return{type:m,payload:{entidad:e,img:a,claveEntidad:t,dotacionGravedad:n,dotacionPozo:r,titular:o,direccion:c,expedicionActivaModulo:l,rol:i,modulo:s}}},At=function(e){return{type:E,payload:e}},xt=function(){return{type:p}},Ct=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("usuarios").get();case 2:return t=e.sent,n={},t.forEach((function(e){e.id===a&&(n=Object(u.a)({},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),St=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("entidades").get();case 2:return t=e.sent,n={},t.forEach((function(e){e.data().clave===a&&(n=Object(u.a)({},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Pt=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("roles").get();case 2:return t=e.sent,n={},t.forEach((function(e){e.id===a&&(n=Object(u.a)({},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),jt=function(){var e=Object(ut.a)(st.a.mark((function e(){var a;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("app").doc("variablesGlobales").get();case 2:return a=e.sent,e.abrupt("return",a.data());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Rt=function(e){return{type:f,payload:e}},wt=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("entidades").doc("".concat(a)).get();case 2:return t=e.sent,e.abrupt("return",t.data().expedicionActivaModulo);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),It=function(e){return function(){var a=Object(ut.a)(st.a.mark((function a(t){var n;return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,wt(e);case 2:n=a.sent,t(zt(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},zt=function(e){return{type:b,payload:e}},Dt=t(17),Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(n.useState)(e),t=Object(dt.a)(a,2),r=t[0],o=t[1],c=function(){o(e)},l=function(e){var a=e.target;"checkbox"===a.type?o(Object(u.a)(Object(u.a)({},r),{},Object(Dt.a)({},a.name,a.checked))):o(Object(u.a)(Object(u.a)({},r),{},Object(Dt.a)({},a.name,a.value)))},i=function(e){o(e)};return[r,l,c,i]},Tt=(t(155),function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.ui})).loading,t=Lt({email:"",password:""}),n=Object(dt.a)(t,2),o=n[0],c=n[1],i=o.email,s=o.password;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"auth__title"},"Login"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e(Ot(i,s))}},r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",className:"auth__input",autoComplete:"off",value:i,onChange:c}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",className:"auth__input",value:s,onChange:c}),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-block mt-3",disabled:a},"Login"),r.a.createElement("div",{className:"pt-4"},r.a.createElement(mt.b,{to:"/auth/register",className:"link"},"Crear nuevo usuario"))))}),kt=t(132),Mt=t.n(kt),Ut=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.ui})).msgError,t=Lt(),n=Object(dt.a)(t,2),o=n[0],c=n[1],i=o.name,s=o.email,u=o.password,d=o.password2,m=o.modulo,p=function(){return m?i?s?Mt.a.isEmail(s)?u?u!==d||u.length<6?(e(Et("Password diferentes o menor de 6 caracteres")),!1):(e(bt()),!0):(e(Et("Se requiere password")),!1):(e(Et("Email no valido")),!1):(e(Et("Se requiere email")),!1):(e(Et("Se requiere el nombre")),!1):(e(Et("Seleccione entidad")),!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"auth__title"},"Registro"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),p()&&e(function(e,a,t,n){return function(r){ft.b.auth().createUserWithEmailAndPassword(e,a).then(function(){var a=Object(ut.a)(st.a.mark((function a(o){var c;return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=o.user,a.next=3,c.updateProfile({displayName:t});case 3:return r(gt(c.uid,c.displayName)),a.next=6,ft.a.collection("usuarios").doc(c.uid).set({claveEntidad:n,modulo:n,rol:"sinAsignar",email:e,displayName:t});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.log(e),Nt.a.fire("Error","El usuario ya existe.","error")}))}}(s,u,i,function(e){return"9A"===e?"9":"9B"===e?"92":e}(m)))}},a&&r.a.createElement("div",{className:"auth__alert-error"},a),r.a.createElement("select",{type:"text",name:"modulo",value:m,onChange:c,className:"auth__input"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"Entidad"),r.a.createElement("option",{value:"1"},"Modulo 1"),r.a.createElement("option",{value:"2"},"Modulo 2"),r.a.createElement("option",{value:"3"},"Modulo 3"),r.a.createElement("option",{value:"4"},"Modulo 4"),r.a.createElement("option",{value:"5"},"Modulo 5"),r.a.createElement("option",{value:"6"},"Modulo 6"),r.a.createElement("option",{value:"7"},"Modulo 7"),r.a.createElement("option",{value:"8"},"Modulo 8"),r.a.createElement("option",{value:"9A"},"Modulo 9A"),r.a.createElement("option",{value:"9B"},"Modulo 9B"),r.a.createElement("option",{value:"10"},"Modulo 10"),r.a.createElement("option",{value:"11"},"Modulo 11"),r.a.createElement("option",{value:"12"},"Modulo 12"),r.a.createElement("option",{value:"14"},"Modulo 14"),r.a.createElement("option",{value:"15"},"Modulo 15"),r.a.createElement("option",{value:"16"},"Modulo 16"),r.a.createElement("option",{value:"17"},"Modulo 17"),r.a.createElement("option",{value:"18"},"Modulo 18"),r.a.createElement("option",{value:"19"},"Modulo 19"),r.a.createElement("option",{value:"20"},"Modulo 20"),r.a.createElement("option",{value:"21"},"Modulo 21"),r.a.createElement("option",{value:"22"},"Modulo 22"),r.a.createElement("option",{value:"23"},"Modulo FL"),r.a.createElement("option",{value:"UNI01"},"1ra Unidad"),r.a.createElement("option",{value:"UNI02"},"2da Unidad"),r.a.createElement("option",{value:"UNI03"},"3ra Unidad"),r.a.createElement("option",{value:"SADER"},"SADER"),r.a.createElement("option",{value:"CNA"},"CNA"),r.a.createElement("option",{value:"CESVBC"},"CESVBC"),r.a.createElement("option",{value:"SRL"},"SRL")),r.a.createElement("input",{type:"text",placeholder:"Nombre",name:"name",className:"auth__input",autoComplete:"off",onChange:c}),r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",className:"auth__input",autoComplete:"off",onChange:c}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",className:"auth__input",onChange:c}),r.a.createElement("input",{type:"password",placeholder:"Confirmar password",name:"password2",className:"auth__input",onChange:c}),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-block mt-3 mb-5"},"Crear usuario"),r.a.createElement(mt.b,{to:"/auth/login",className:"link"},"Ya esta registrado?")))},Ft=function(){return r.a.createElement("div",{className:"auth__main"},r.a.createElement("div",{className:"auth__box-container"},r.a.createElement(pt.d,null,r.a.createElement(pt.b,{exact:!0,path:"/auth/login",component:Tt}),r.a.createElement(pt.b,{exact:!0,path:"/auth/register",component:Ut}),r.a.createElement(pt.a,{to:"/auth/login"}))))},Gt=t(367),Bt=t(368),Vt=t(366),qt=function(){var e=Object(l.c)((function(e){return e.auth})).privilegios,a=Object(l.b)();return r.a.createElement("div",{className:"fixed-top"},r.a.createElement(Gt.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(Gt.a.Brand,{href:"/"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("img",{src:"./logos/cna.png",height:"50",className:"d-inline-block align-top align-self-center",alt:"Logo comisi\xf3n nacional del agua"}),r.a.createElement("img",{src:"./logos/sader.png",height:"25",className:"d-inline-block align-top align-self-center ml-2",alt:"Logo comisi\xf3n nacional del agua"}))),r.a.createElement(Gt.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(Gt.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(Bt.a,{className:"mr-auto"},e.pantallaInicio&&r.a.createElement(mt.c,{to:"/sicper",className:"nav-link"},"Inicio"),e.pantallaPadron&&r.a.createElement(mt.c,{to:"/padron",className:"nav-link"},"Padr\xf3n"),e.pantallaPermisos&&r.a.createElement(mt.c,{to:"/permisos",className:"nav-link"},"Permisos"),e.pantallaTransferencias&&r.a.createElement(mt.c,{to:"/transferencias",className:"nav-link"},"Transferencias"),e.pantallaAsignacion&&r.a.createElement(mt.c,{to:"/asignacion",className:"nav-link"},"Asignaci\xf3n"),e.pantallaLabores&&r.a.createElement(mt.c,{to:"/labores",className:"nav-link"},"Labores"),e.pantallaAutorizados&&r.a.createElement(mt.c,{to:"/autorizados",className:"nav-link"},"Autorizados"),e.pantallaReportes&&r.a.createElement(mt.c,{to:"/reportes",className:"nav-link"},"Reportes"),e.pantallaConfiguracion&&r.a.createElement(mt.c,{to:"/configuracion",className:"nav-link"},"Configuraci\xf3n"),e.testArea&&r.a.createElement(mt.c,{to:"/test",className:"nav-link"},"Test")),r.a.createElement(Vt.a,{variant:"outline-secondary btn-sm",onClick:function(){a(function(){var e=Object(ut.a)(st.a.mark((function e(a){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.b.auth().signOut();case 2:a(xt());case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())},to:"/login"},"Salir"))))},Yt=function(){var e=Object(ut.a)(st.a.mark((function e(){var a,t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("cultivos").orderBy("clave").get();case 2:return a=e.sent,t=[],a.forEach((function(e){t.push({clave:e.data().clave,cultivo:e.data().nombre,subciclo:e.data().subciclo})})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ht=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n,r,o;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("autorizados").doc(a).collection("modulos").doc("Modulo-".concat(t)).collection("autorizados").orderBy("clave").get();case 2:return n=e.sent,r=[],n.forEach((function(e){r.push(Object(u.a)({},e.data()))})),e.next=7,Yt();case 7:return o=e.sent,0===r.length?o.forEach((function(e){r.push({clave:e.clave,cultivo:e.cultivo,subciclo:e.subciclo,gravedadNormalAutorizada:0,gravedadNormalAsignada:0,gravedadExtraAutorizada:0,gravedadExtraAsignada:0,pozoNormalAutorizada:0,pozoNormalAsignada:0,pozoExtraAutorizada:0,pozoExtraAsignada:0})})):o.forEach((function(e){void 0===r.find((function(a){return a.clave===e.clave}))&&r.push({clave:e.clave,cultivo:e.cultivo,subciclo:e.subciclo,gravedadNormalAutorizada:0,gravedadNormalAsignada:0,gravedadExtraAutorizada:0,gravedadExtraAsignada:0,pozoNormalAutorizada:0,pozoNormalAsignada:0,pozoExtraAutorizada:0,pozoExtraAsignada:0})})),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Zt=function(){var e=Object(ut.a)(st.a.mark((function e(a,t,n){var r,o;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("autorizados").doc(a).collection("modulos").doc("Modulo-".concat(t)).collection("autorizados").where("clave","==",n).get();case 2:return r=e.sent,o=[],r.forEach((function(e){o.push(Object(u.a)({},e.data()))})),e.abrupt("return",o[0]);case 6:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),Jt=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,ft.a.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisosPorCultivo").orderBy("superficie","desc").get().then((function(e){e.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))}))})).catch((function(e){console.log(" Error: ",e)}));case 3:return 0===n.length&&(n=!1),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),_t=function(e,a){return function(){var t=Object(ut.a)(st.a.mark((function t(n){var r,o,c,l;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jt(e,a);case 2:return r=t.sent,t.next=5,Ht(a,e);case 5:o=t.sent,c=function(e,a){return!!e&&e.find((function(e){return e.id===a}))},l=[],o&&o.forEach((function(e){if(e.superficieTotal>0){var a=c(r,"".concat(e.clave,"-").concat(e.cultivo));a?l.push(Object(u.a)(Object(u.a)({},e),a)):l.push(Object(u.a)({},e))}})),l.forEach((function(e){void 0===e.gravedadNormal&&(e.gravedadNormal=0),void 0===e.gravedadExtra&&(e.gravedadExtra=0),void 0===e.pozoNormal&&(e.pozoNormal=0),void 0===e.pozoExtra&&(e.pozoExtra=0),void 0===e.pozoParticularNormal&&(e.pozoParticularNormal=0),void 0===e.pozoParticularExtra&&(e.pozoParticularExtra=0)})),0===l.length&&(l=[{clave:"-",cultivo:"Sin expedicion",gravedadNormalAutorizada:0,gravedadNormalAsignada:0,gravedadExtraAutorizada:0,gravedadExtraAsignada:0,pozoNormalAutorizada:0,pozoNormalAsignada:0,pozoExtraAutorizada:0,pozoExtraAsignada:0,gravedadNormal:0,pozoNormal:0,gravedadExtra:0,pozoExtra:0}]),n(Kt(l));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Kt=function(e){return{type:Te,payload:e}},Xt=function(e,a){return+(Math.round(e+"e+".concat(a))+"e-".concat(a))},Qt=function(){var e=Object(l.c)((function(e){return e.sicperScreen})),a=e.expedicion,t=e.superficie,o=Object(l.c)((function(e){return e.auth})).modulo,c=Object(l.b)(),i=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual;Object(n.useEffect)((function(){c(_t(o,i))}),[c,o,i]);var s=function(){c({type:Me})},u=function(){c({type:Ue})},d={gravedadNormalAutorizada:0,pozoNormalAutorizada:0,gravedadNormalAsignada:0,pozoNormalAsignada:0,gravedadNormal:0,pozoNormal:0,pozoParticularNormal:0,gravedadExtraAutorizada:0,pozoExtraAutorizada:0,gravedadExtraAsignada:0,pozoExtraAsignada:0,gravedadExtra:0,pozoExtra:0};a&&a.forEach((function(e){d.gravedadNormalAutorizada=d.gravedadNormalAutorizada+e.gravedadNormalAutorizada,d.pozoNormalAutorizada=d.pozoNormalAutorizada+e.pozoNormalAutorizada,d.gravedadNormalAsignada=d.gravedadNormalAsignada+e.gravedadNormalAsignada,d.pozoNormalAsignada=d.pozoNormalAsignada+e.pozoNormalAsignada,d.gravedadNormal=d.gravedadNormal+e.gravedadNormal,d.pozoNormal=d.pozoNormal+e.pozoNormal,d.pozoParticularNormal=d.pozoParticularNormal+e.pozoParticularNormal,d.gravedadExtraAutorizada=d.gravedadExtraAutorizada+e.gravedadExtraAutorizada,d.pozoExtraAutorizada=d.pozoExtraAutorizada+e.pozoExtraAutorizada,d.gravedadExtraAsignada=d.gravedadExtraAsignada+e.gravedadExtraAsignada,d.pozoExtraAsignada=d.pozoExtraAsignada+e.pozoExtraAsignada,d.gravedadExtra=d.gravedadExtra+e.gravedadExtra,d.pozoExtra=d.pozoExtra+e.pozoExtra}));var m=function(e){switch(e){case"UNI01":case"UNI02":case"UNI03":return!1;default:return!0}};return r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"btn-group",role:"group"},"normal"===t?r.a.createElement("button",{type:"button",className:"btn btn-info",onClick:s},"Superficie Normal"):r.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:s},"Superficie Normal"),"extra"===t?r.a.createElement("button",{type:"button",className:"btn btn-info",onClick:u},"Superficie Extra"):r.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:u},"Superficie Extra"))),r.a.createElement("div",{className:"border border-info rounded p-0 mt-3"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-sm table-striped text-secondary"},r.a.createElement("thead",{className:"table-info"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"text-center"},"Clave"),r.a.createElement("th",{scope:"col"},"Cultivo"),r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col",className:"text-center"},"Superficie Autorizada"),r.a.createElement("th",{scope:"col",className:"text-center"},"Superficie Asignada"),r.a.createElement("th",{scope:"col",className:"text-center"},"Superficie Expedida"),r.a.createElement("th",{scope:"col",className:"text-center"},"Superficie Disponible"))),a&&("normal"===t?r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:"".concat(e.id,"-").concat(e.clave)},r.a.createElement("th",{scope:"row",className:"text-center"},e.clave),r.a.createElement("td",null,e.cultivo),r.a.createElement("td",null,r.a.createElement("div",null,"Gravedad"),r.a.createElement("div",null,"Pozo")),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(e.gravedadNormalAutorizada,3)),r.a.createElement("div",{className:"text-center"},Xt(e.pozoNormalAutorizada,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(e.gravedadNormalAsignada,3)),r.a.createElement("div",{className:"text-center"},Xt(e.pozoNormalAsignada,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(e.gravedadNormal,3)),m(o)?r.a.createElement("div",{className:"text-center"},Xt(e.pozoNormal,3)):r.a.createElement("div",{className:"text-center"},Xt(e.pozoParticularNormal,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(e.gravedadNormalAsignada-e.gravedadNormal,3)),m(o)?r.a.createElement("div",{className:"text-center"},Xt(e.pozoNormalAsignada-e.pozoNormal,3)):r.a.createElement("div",{className:"text-center"},Xt(e.pozoNormalAsignada-e.pozoParticularNormal,3))))})),r.a.createElement("tr",{key:"".concat(d.id,"-").concat(d.clave)},r.a.createElement("th",{scope:"row",className:"text-center"},"-"),r.a.createElement("td",null,"TOTAL"),r.a.createElement("td",null,r.a.createElement("div",null,"Gravedad"),r.a.createElement("div",null,"Pozo")),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(d.gravedadNormalAutorizada,3)),r.a.createElement("div",{className:"text-center"},Xt(d.pozoNormalAutorizada,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(d.gravedadNormalAsignada,3)),r.a.createElement("div",{className:"text-center"},Xt(d.pozoNormalAsignada,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(d.gravedadNormal,3)),m(o)?r.a.createElement("div",{className:"text-center"},Xt(d.pozoNormal,3)):r.a.createElement("div",{className:"text-center"},Xt(d.pozoParticularNormal,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(d.gravedadNormalAsignada-d.gravedadNormal,3)),m(o)?r.a.createElement("div",{className:"text-center"},Xt(d.pozoNormalAsignada-d.pozoNormal,3)):r.a.createElement("div",{className:"text-center"},Xt(d.pozoNormalAsignada-d.pozoParticularNormal,3))))):r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:"".concat(e.id,"-").concat(e.clave)},r.a.createElement("th",{scope:"row",className:"text-center"},e.clave),r.a.createElement("td",null,e.cultivo),r.a.createElement("td",null,r.a.createElement("div",null,"Gravedad"),r.a.createElement("div",null,"Pozo")),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(e.gravedadExtraAutorizada,3)),r.a.createElement("div",{className:"text-center"},Xt(e.pozoExtraAutorizada,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(e.gravedadExtraAsignada,3)),r.a.createElement("div",{className:"text-center"},Xt(e.pozoExtraAsignada,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(e.gravedadExtra,3)),r.a.createElement("div",{className:"text-center"},Xt(e.pozoExtra,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(e.gravedadExtraAsignada-e.gravedadExtra,3)),r.a.createElement("div",{className:"text-center"},Xt(e.pozoExtraAsignada-e.pozoExtra,3))))})),r.a.createElement("tr",{key:"".concat(d.id,"-").concat(d.clave)},r.a.createElement("th",{scope:"row",className:"text-center"},"-"),r.a.createElement("td",null,"TOTAL"),r.a.createElement("td",null,r.a.createElement("div",null,"Gravedad"),r.a.createElement("div",null,"Pozo")),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(d.gravedadExtraAutorizada,3)),r.a.createElement("div",{className:"text-center"},Xt(d.pozoExtraAutorizada,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(d.gravedadExtraAsignada,3)),r.a.createElement("div",{className:"text-center"},Xt(d.pozoExtraAsignada,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(d.gravedadExtra,3)),r.a.createElement("div",{className:"text-center"},Xt(d.pozoExtra,3))),r.a.createElement("td",null,r.a.createElement("div",{className:"text-center"},Xt(d.gravedadExtraAsignada-d.gravedadExtra,3)),r.a.createElement("div",{className:"text-center"},Xt(d.pozoExtraAsignada-d.pozoExtra,3))))))))))},Wt=t(60),$t=function(){var e,a,t=Object(l.c)((function(e){return e.permisosScreen})).superficies,n={},o=0,c=0;null!==t&&(a="Superficie por cultivo",n={labels:(e=t).labels,datasets:[{label:a,data:e.superficiesCultivos,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},t.superficiesCultivos.forEach((function(e){o+=e})),t.numeroPermisos.forEach((function(e){c+=e})));return r.a.createElement("div",{className:"pt-4 text-secondary"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h5",null,"Superficies por cultivo")),r.a.createElement("div",{className:"d-flex flex-column pt-4 pb-4 pl-3"},r.a.createElement("div",null,r.a.createElement("h6",null,"Superficie expedida: ",o.toFixed(2)," ha")),r.a.createElement("div",null,r.a.createElement("h6",null,"Permisos expedidos: ",c))),r.a.createElement("div",{className:"pb-4"},r.a.createElement(Wt.HorizontalBar,{data:n,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},width:220})))},en=function(e){var a=e.autorizados,t=e.modulo,n=0,o=0,c=0,l=0,i=0,s=0,u=0,d=0;return null!==t&&a.forEach((function(e){n+=e.gravedadNormalAutorizada,o+=e.gravedadNormalAsignada,c+=e.gravedadExtraAutorizada,l+=e.gravedadExtraAsignada,i+=e.pozoNormalAutorizada,s+=e.pozoNormalAsignada,u+=e.pozoExtraAutorizada,d+=e.pozoExtraAsignada})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex bg-light border-primary border-bottom rounded-top p-1 justify-content-center font-weight-bold text-secondary pt-3"},r.a.createElement("h5",null,"M\xf3dulo ",t)),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-primary mb-0 text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"3"},"Total Superficie Normal")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Gravedad"),r.a.createElement("td",null,n),r.a.createElement("td",null,o)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Federal"),r.a.createElement("td",null,i),r.a.createElement("td",null,s))))),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-table-secondary text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"3"},"Total Superficie Extra")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Gravedad"),r.a.createElement("td",null,c),r.a.createElement("td",null,l)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Federal"),r.a.createElement("td",null,u),r.a.createElement("td",null,d))))))},an=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n,r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisos").orderBy("fechaEmicion","desc").limit(20).get();case 2:return n=e.sent,r=[],n.forEach((function(e){r.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();function tn(e,a){var t=new Date(e);return t.setDate(t.getDate()+a),t}var nn=function(){var e=Object(ut.a)(st.a.mark((function e(a,t,n){var r,o,c,l,i,s,d,m,p,f,E,b,v=arguments;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=v.length>3&&void 0!==v[3]?v[3]:["nombreCultivo","usuario","cuenta","numeroPermiso"],o=v.length>4&&void 0!==v[4]?v[4]:"todos",c=v.length>5&&void 0!==v[5]?v[5]:"todos",l=v.length>6&&void 0!==v[6]?v[6]:"todos",i=v.length>7&&void 0!==v[7]?v[7]:new Date(2021,8,1),s=v.length>8&&void 0!==v[8]?v[8]:new Date(2022,8,30),d=[],m=[],p=ft.a.collection("permisos").doc(n).collection("modulos").doc("Modulo-".concat(t)).collection("permisos"),f=p,"todos"!==o&&(f=f.where("estadoPermiso","==",o)),"todos"!==c&&(f=f.where("tipo","==",c)),"todos"===l){e.next=21;break}e.t0=l,e.next="Gravedad"===e.t0?16:"Pozo"===e.t0?18:20;break;case 16:return f=f.where("sistema","==",l),e.abrupt("break",21);case 18:return f=f.where("sistema","in",["Pozo Particular","Pozo Federal"]),e.abrupt("break",21);case 20:return e.abrupt("break",21);case 21:return r.forEach((function(e){m.push(f.orderBy(e).startAt(a.toUpperCase()).endAt(a.toUpperCase()+"\uf8ff").get())})),e.next=24,Promise.all(m);case 24:for(E=e.sent,b=0;b<E.length;b++)E[b].forEach((function(e){var a=e.data().fechaEmicion.toDate();a>=i&&a<=tn(s,1)&&d.push(Object(u.a)({id:e.id},e.data()))}));return 0===d.length&&Nt.a.fire("No se encontraron permisos ","Se mostrar\xe1n los \xfaltimos permisos registrados.","warning"),e.abrupt("return",d);case 28:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),rn=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,ft.a.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisosPorCultivo").orderBy("superficie","desc").get().then((function(e){var a=[];e.forEach((function(e){a.push(Object(u.a)({id:e.id},e.data()))}));var t=[],r=[],o=[],c=4,l=0,i=0;a.forEach((function(e){c>=0?(t.push("".concat(e.id," (").concat(Xt(e.superficie,2),"ha)")),r.push(e.superficie),o.push(e.numeroPermisos),c--):(l=+e.superficie,i=+e.numeroPermisos)})),t.push("Otros cultivos (".concat(Xt(l,2),"ha)")),r.push(Xt(l,3)),o.push(i),n={labels:t,superficiesCultivos:r,numeroPermisos:o}})).catch((function(e){console.log(" Error: ",e)}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),on=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=ft.a.collectionGroup("permisos").where("estadoPermiso","==","En proceso de cancelaci\xf3n").where("ciclo","==",a),e.next=4,n.get().then((function(e){e.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}))}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),cn=function(e,a){return function(){var t=Object(ut.a)(st.a.mark((function t(n){var r;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,an(e,a);case 2:r=t.sent,n(dn(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ln=function(e){return function(){var a=Object(ut.a)(st.a.mark((function a(t){var n;return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,on(e);case 2:n=a.sent,t(mn(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},sn=function(e,a){return function(){var t=Object(ut.a)(st.a.mark((function t(n){var r;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rn(e,a);case 2:r=t.sent,n(un(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},un=function(e){return{type:be,payload:e}},dn=function(e){return{type:me,payload:e}},mn=function(e){return{type:he,payload:e}},pn=function(e){return{type:fe,payload:e.id}},fn=function(e){return{type:Oe,payload:e.id}},En=function(e,a){return function(){var t=Object(ut.a)(st.a.mark((function t(n){var r,o;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ht(e,a);case 2:r=t.sent,o=0,r.forEach((function(e){o+=e.gravedadNormalAutorizada,o+=e.gravedadNormalAsignada,o+=e.gravedadExtraAutorizada,o+=e.gravedadExtraAsignada,o+=e.pozoNormalAutorizada,o+=e.pozoNormalAsignada,o+=e.pozoExtraAutorizada,o+=e.pozoExtraAsignada})),n(bn(r)),n(On(o));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},bn=function(e){return{type:xe,payload:e}},vn=function(e){return{type:Le,payload:e}},hn=function(){return{type:Pe}},Nn=function(e){return{type:je,payload:e}},On=function(e){return{type:we,payload:e}},gn=function(e){return{type:ze,payload:e}},yn=function(){return{type:De}},An=function(){var e=Object(l.c)((function(e){return e.autorizadosScreen})).autorizados,a=Object(l.c)((function(e){return e.auth})).modulo,t=Object(l.b)(),o=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual;return Object(n.useEffect)((function(){t(En(o,a)),t(sn(a,o))}),[t,o,a]),r.a.createElement("div",{className:"border border-primary rounded detallePermiso text-secondary mt-3"},r.a.createElement($t,null),e.length>0&&r.a.createElement(en,{autorizados:e,modulo:a}))},xn=function(){var e=Object(l.b)();return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(mt.b,{to:"/nuevo-permiso"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:function(){e(function(){var e=Object(ut.a)(st.a.mark((function e(a){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt();case 2:t=e.sent,a(At(t));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())}},r.a.createElement("span",null,"Nuevo Permiso "),r.a.createElement("i",{className:"fas fa-plus"}))))},Cn=function(){return r.a.createElement("div",{className:"border border-warning rounded p-4"},r.a.createElement("h3",null,"\xa1A\xfan no tiene privilegios !"),r.a.createElement("p",null,"Por favor p\xf3ngase en contacto con el administrador del sistema para que se le asignen privilegios de usuario."))},Sn=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.privilegios,t=e.rol,n=e.expedicionActivaModulo,o=Object(l.c)((function(e){return e.auth})).variablesGlobales.expedicionActiva,c=Date.now(),i=new Date(c);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row pt-5"},r.a.createElement("div",{className:"col-sm-8"},a.consultarAutorizados&&r.a.createElement(Qt,null),a.consultarAutorizados&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("button",{className:"btn btn-outline-primary mt-4 no-printme",type:"button",onClick:function(){return window.print()}},r.a.createElement("span",null,"Imprimir"),r.a.createElement("i",{className:"fas fa-print"}))),r.a.createElement("div",{className:"col-sm-2 mt-2"},i.toLocaleDateString()))),r.a.createElement("div",{className:"col-sm-4 no-printme"},o&&n&&a.expedirPermisos&&r.a.createElement(xn,null),a.consultarExpedicion&&r.a.createElement(An,null))),r.a.createElement("div",{className:"row d-flex justify-content-center pt-5"},r.a.createElement("div",{className:"col-sm-6"},"sinAsignar"===t&&r.a.createElement(Cn,null))))},Pn=t(40),jn=t.n(Pn),Rn=function(e){var a=e.title,t=e.columns,n=e.data,o=e.setFunction,c=e.closeFunction,i=e.simpleSetFunction,s=Object(l.b)();return r.a.createElement(jn.a,{onClick:function(e){return console.log(e)},columns:t,data:n,title:a,pagination:!0,paginationComponentOptions:{rowsPerPageText:"Filas por pagina",rangesSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"},fixedHeader:!0,persistTableHead:!0,fixedHeaderScrollHeight:"380px",highlightOnHover:!0,striped:!0,pointerOnHover:!0,dense:!0,onRowClicked:function(e){void 0!==o&&s(o(e)),void 0!==c&&s(c()),void 0!==i&&i(e)}})},wn=t(138);function In(){var e=Object(wn.a)(["\n\theight: 32px;\n\twidth: 200px;\n\tborder-radius: 3px;\n\tborder-top-left-radius: 5px;\n\tborder-bottom-left-radius: 5px;\n\tborder-top-right-radius: 0;\n\tborder-bottom-right-radius: 0;\n\tborder: 1px solid #e5e5e5;\n\tpadding: 0 32px 0 16px;\n\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n"]);return In=function(){return e},e}t(86).default.input(In());var zn=[{name:"id",selector:"id",omit:!0},{name:"CUENTA",selector:"cuenta",sortable:!0,width:"80px"},{name:"SUBCTA",selector:"subcta",sortable:!0,width:"40px",center:!0},{name:"PATERNO",selector:"apPaterno",width:"120px",sortable:!0},{name:"MATERNO",selector:"apMaterno",width:"120px",sortable:!0},{name:"NOMBRE",selector:"nombre",width:"150px",sortable:!0},{name:"DERECHO(ha)",selector:"supRiego",sortable:!0,width:"80px",center:!0},{name:"LOTE",selector:"predio",sortable:!0,width:"60px",center:!0},{name:"EJ/COL",selector:"tipoLocalidad",sortable:!0,width:"80px"},{name:"LOCALIDAD",selector:"nombreLocalidad",sortable:!0,width:"200px"},{name:"SECCION",selector:"seccion",sortable:!0,width:"60px",center:!0},{name:"MODULO",selector:"modulo",sortable:!0,width:"60px",center:!0},{name:"TRANSFERENCIA",selector:"folio",sortable:!0,width:"80px"}],Dn=[{name:"id",selector:"id",omit:!0},{name:"FOLIO",selector:"folio",sortable:!0,width:"100px",center:!0},{name:"ESTADO",selector:"estadoTransferencia",sortable:!0,width:"120px",center:!0},{name:"MODULO",selector:"modulo",sortable:!0,width:"60px",center:!0},{name:"SUP(ha)",selector:"superficieTransferida",sortable:!0,width:"80px",center:!0},{name:"CUENTA",selector:"cuenta",sortable:!0,width:"80px"},{name:"SUBCTA",selector:"subcta",sortable:!0,width:"40px",center:!0},{name:"PATERNO",selector:"apPaterno",width:"120px",sortable:!0},{name:"MATERNO",selector:"apMaterno",width:"120px",sortable:!0},{name:"NOMBRE",selector:"nombre",width:"150px",sortable:!0},{name:"LOTE",selector:"predio",sortable:!0,width:"60px",center:!0},{name:"EJ/COL",selector:"tipoLocalidad",sortable:!0,width:"80px"},{name:"LOCALIDAD",selector:"nombreLocalidad",sortable:!0,width:"200px"}],Ln=[{name:"CURP",selector:"id",width:"210px",sortable:!0},{name:"PATERNO",selector:"apPaterno",width:"120px",sortable:!0},{name:"MATERNO",selector:"apMaterno",width:"150px",sortable:!0},{name:"NOMBRE",selector:"nombre",width:"180px",sortable:!0},{name:"GENERO",selector:"genero",width:"120px",sortable:!0}],Tn=[{name:"id",selector:"id",omit:!0},{name:"CLAVE",selector:"clave",sortable:!0,width:"60px",center:!0},{name:"NOMBRE",selector:"nombre",sortable:!0,center:!0},{name:"SUBCICLO",selector:"subciclo",sortable:!0,center:!0}],kn=[{name:"id",selector:"id",omit:!0},{name:"CLAVE ENTIDAD",selector:"claveEntidad",sortable:!0,center:!0},{name:"NOMBRE",selector:"displayName",sortable:!0},{name:"CORREO",selector:"email",sortable:!0},{name:"ROL",selector:"rol",sortable:!0}],Mn=[{name:"id",selector:"id",omit:!0},{name:"CLAVE",selector:"clave",sortable:!0,center:!0},{name:"NOMBRE",selector:"nombre",sortable:!0},{name:"TIPO",selector:"tipo",sortable:!0},{name:"MUNICIPIO",selector:"municipio",sortable:!0},{name:"ESTADO",selector:"estado",sortable:!0}],Un=[{name:"CLAVE",selector:"clave",sortable:!0,center:!0,width:"110px"},{name:"TIPO",selector:"tipo",sortable:!0,width:"110px"},{name:"NOMBRE",selector:"ubicacion",sortable:!0,width:"200px"},{name:"T\xc9CNICO",selector:"tecnico",sortable:!0}],Fn=[{name:"id",selector:"id",omit:!0},{name:"PERMISO",selector:"numeroPermiso",sortable:!0,width:"110px"},{name:"CUENTA",selector:"cuenta",sortable:!0,width:"80px"},{name:"USUARIO",selector:"usuario",sortable:!0,width:"250px"},{name:"PRODUCTOR",selector:"nombreProductor",width:"250px",sortable:!0},{name:"CULTIVO",selector:"nombreCultivo",width:"150px",sortable:!0},{name:"HA",selector:"supAutorizada",width:"60px",sortable:!0,center:!0},{name:"LOTE",selector:"lote",sortable:!0,width:"60px",center:!0},{name:"LOCALIDAD",selector:"localidad",sortable:!0,width:"150px"},{name:"EMISI\xd3N",selector:"fechaEmicion",sortable:!0,width:"100px"},{name:"VIGENCIA",selector:"vigencia",sortable:!0,width:"100px"},{name:"ESTADO",selector:"estadoPermiso",sortable:!0,width:"100px"}],Gn=[{name:"id",selector:"id",omit:!0},{name:"CUENTA",selector:"cuenta",sortable:!0,width:"80px"},{name:"USUARIO",selector:"nombre",sortable:!0,width:"250px"},{name:"PERMISO",selector:"folio",sortable:!0,width:"120px"},{name:"MODULO",selector:"modulo",sortable:!0,width:"60px",center:!0},{name:"HA",selector:"superficie",width:"60px",sortable:!0,center:!0},{name:"LOTE",selector:"lote",sortable:!0,width:"60px",center:!0},{name:"LOCALIDAD",selector:"ubicacion",sortable:!0,width:"130px"},{name:"CULTIVO",selector:"cultivo",width:"130px",sortable:!0}],Bn=[{name:"id",selector:"id",omit:!0},{name:"PERMISO",selector:"numeroPermiso",sortable:!0,width:"70px"},{name:"CUENTA",selector:"cuenta",sortable:!0,width:"60px"},{name:"USUARIO",selector:"usuario",sortable:!0,width:"180px"},{name:"PRODUCTOR",selector:"nombreProductor",width:"140px",sortable:!0},{name:"CULTIVO",selector:"nombreCultivo",width:"70px",sortable:!0},{name:"HA",selector:"supAutorizada",width:"60px",sortable:!0,center:!0},{name:"LOTE",selector:"lote",sortable:!0,width:"40px",center:!0},{name:"LOCALIDAD",selector:"localidad",sortable:!0,width:"80px"},{name:"EMISI\xd3N",selector:"fechaEmicion",sortable:!0,width:"70px"},{name:"ESTADO",selector:"estadoPermiso",sortable:!0,width:"70px"},{name:"CUOTA",selector:"cuotaCultivo",width:"60px",sortable:!0,center:!0},{name:"SISTEMA",selector:"sistema",width:"60px",sortable:!0}],Vn=[{name:"id",selector:"id",omit:!0},{name:"CLAVE",selector:"clave",sortable:!0,width:"80px",center:!0},{name:"CULTIVO",selector:"cultivo",sortable:!0,width:"160px"},{name:"GRAVEDAD NORMAL AUTORIZADA",selector:"gravedadNormalAutorizada",sortable:!0,center:!0},{name:"GRAVEDAD NORMAL ASIGNADA",selector:"gravedadNormalAsignada",sortable:!0,center:!0},{name:"GRAVEDAD EXTRA AUTORIZADA",selector:"gravedadExtraAutorizada",sortable:!0,center:!0},{name:"GRAVEDAD EXTRA ASIGNADA",selector:"gravedadExtraAsignada",sortable:!0,center:!0},{name:"POZO NORMAL AUTORIZADA",selector:"pozoNormalAutorizada",sortable:!0,center:!0},{name:"POZO NORMAL ASIGNADA",selector:"pozoNormalAsignada",sortable:!0,center:!0},{name:"POZO EXTRA AUTORIZADA",selector:"pozoExtraAutorizada",sortable:!0,center:!0},{name:"POZO EXTRA ASIGNADA",selector:"pozoExtraAsignada",sortable:!0,center:!0}],qn=[{name:"id",selector:"id",omit:!0},{name:"CLAVE",selector:"clave",sortable:!0,width:"80px",center:!0},{name:"CULTIVO",selector:"cultivo",sortable:!0,width:"160px"},{name:"POZO NORMAL AUTORIZADA",selector:"pozoNormalAutorizada",sortable:!0,center:!0},{name:"POZO NORMAL ASIGNADA",selector:"pozoNormalAsignada",sortable:!0,center:!0},{name:"POZO EXTRA AUTORIZADA",selector:"pozoExtraAutorizada",sortable:!0,center:!0},{name:"POZO EXTRA ASIGNADA",selector:"pozoExtraAsignada",sortable:!0,center:!0}],Yn=function(){var e=Object(ut.a)(st.a.mark((function e(a,t,n){var r,o,c,l,i,s,d=arguments;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>3&&void 0!==d[3]&&d[3],o=["apPaterno","cuenta"],c=[],l=[],i=Hn(t,r),s=ft.a.collection("transferencias").doc(n).collection("modulos").doc("Modulo-".concat(t)).collection("transferencias").where("estadoTransferencia","==","ACTIVA"),o.forEach((function(e){c.push(s.orderBy(e).startAt(a).endAt(a+"\uf8ff").get()),c.push(i.orderBy(e).startAt(a).endAt(a+"\uf8ff").get()),c.push(s.where(e,"==",Number(a)).get()),c.push(i.where(e,"==",Number(a)).get())})),e.next=9,Promise.all(c);case 9:return e.sent.forEach((function(e){e.forEach((function(e){switch(t){case"UNI01":case"UNI02":case"UNI03":l.push(Object(u.a)({id:e.id,entidad:t},e.data()));break;default:1!==e.data().equipo&&l.push(Object(u.a)(Object(u.a)({},e.data()),{},{entidad:t,id:e.id}))}}))})),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),Hn=function(e,a){if(a)return ft.a.collection("derechos");switch(e){case"UNI01":return ft.a.collection("derechos").where("equipo","==",1).where("modulo","in",[4,5,6,7]);case"UNI02":return ft.a.collection("derechos").where("equipo","==",1).where("modulo","in",[8,"9A","9B"]);case"UNI03":return ft.a.collection("derechos").where("equipo","==",1).where("modulo","in",[1,2,3]);default:return ft.a.collection("derechos").where("modulo","==",function(e){return"9A"===e||"9B"===e||"dev"===e?e:parseInt(e)}(e))}},Zn=function(){var e=Object(ut.a)(st.a.mark((function e(a,t,n){var r,o,c,l,i=arguments;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>3&&void 0!==i[3]&&i[3],o=[],c=0,l=ft.a.collection("permisos").doc(n).collection("modulos").doc("Modulo-".concat(t)).collection("permisos").where("cuenta","==",a).where("estadoPermiso","!=","Cancelado"),!r){e.next=11;break}return e.next=7,l.where("idUsuarioSelected","==",r).get();case 7:e.sent.forEach((function(e){o.push(Object(u.a)({id:e.id},e.data()))})),e.next=15;break;case 11:return e.next=13,l.get();case 13:e.sent.forEach((function(e){o.push(Object(u.a)({id:e.id},e.data()))}));case 15:return o.forEach((function(e){c+=e.supAutorizada})),e.abrupt("return",c);case 17:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),Jn=t(16),_n=function(e,a){return ft.a.collection("transferencias").doc(a).collection("modulos").doc("Modulo-".concat(e)).collection("transferencias").get()},Kn=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n,r,o;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=0,o=Jn.c.map((function(e){return _n("dev"!==e?e:99,t)})),e.next=5,Promise.all(o);case 5:return e.sent.forEach((function(e){e.forEach((function(e){var t="".concat(e.data().cuenta,"-").concat(e.data().subcta),r=e.data().estadoTransferencia;a===t&&"CANCELADA"!==r&&n.push(e.data().superficieTransferida)}))})),n.length>0&&n.forEach((function(e){return r+=e})),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Xn=function(){var e=Object(ut.a)(st.a.mark((function e(){var a;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("app").doc("variablesGlobales").get();case 2:return a=e.sent,e.abrupt("return",a.data().cicloActual);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qn=function(e){document.getElementById(e)&&document.getElementById(e).focus()},Wn=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n,r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("transferencias").doc(a).collection("modulos").doc("Modulo-".concat(t)).collection("transferencias").get();case 2:return n=e.sent,r=[],n.forEach((function(e){r.push(Object(u.a)(Object(u.a)({},e.data()),{},{fecha:e.data().fecha.toDate(),id:e.id}))})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),$n=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n,r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ft.a.collection("transferencias").doc(a.ciclo).collection("modulos").doc("Modulo-".concat(a.moduloDestino)).collection("transferencias").doc(a.folio),e.prev=1,e.next=4,ft.a.runTransaction(function(){var e=Object(ut.a)(st.a.mark((function e(a){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.update(n,{estadoTransferencia:t}),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 4:if(!e.sent){e.next=11;break}return e.next=8,n.get();case 8:return r=e.sent,Nt.a.fire("Transferencia ".concat(t),"Se actualiz\xf3 con \xe9xito el estado de la transferencia.","success"),e.abrupt("return",r.data());case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(1),Nt.a.fire("Error de conexi\xf3n","Error al intntar actualizar transferencia.","error"),console.error(e.t0),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(a,t){return e.apply(this,arguments)}}(),er=function(e){return function(a){a(br()),a(ar(e))}},ar=function(e){return{type:Ke,payload:e}},tr=function(){return{type:Xe}},nr=function(e){return{type:Qe,payload:e}},rr=function(e,a){return function(){var t=Object(ut.a)(st.a.mark((function t(n){var r;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Wn(e,a);case 2:r=t.sent,n(nr(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},or=function(){return{type:qe}},cr=function(){return{type:He}},lr=function(){return{type:Ze}},ir=function(e,a){var t=e.ciclo,n=e.moduloDestino;return function(){var r=Object(ut.a)(st.a.mark((function r(o){var c;return st.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,$n(e,a);case 2:(c=r.sent)&&(o(ar(c)),o(rr(t,n)));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},sr=function(){var e=Object(ut.a)(st.a.mark((function e(a,t,n){var r,o;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],o=!1,e.next=4,ft.a.collection("permisos").doc(n).collection("modulos").doc("Modulo-".concat(t)).collection("permisos").where("cuenta","==",a).where("estadoPermiso","!=","Cancelado").get();case 4:return e.sent.forEach((function(e){r.push(Object(u.a)({id:e.id},e.data()))})),r.forEach((function(e){!0===e.laboresPendientes&&(o=!0)})),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),ur=function(){return{type:M}},dr=function(e,a,t,n){return function(){var r=Object(ut.a)(st.a.mark((function r(o){var c;return st.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Yn(e,a,t,n);case 2:c=r.sent,o(mr(c)),o(It(a));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},mr=function(e){return{type:F,payload:e}},pr=function(){return{type:G}},fr=function(e){return br(),function(){var a=Object(ut.a)(st.a.mark((function a(t){var n,r,o,c,l;return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Xn();case 2:return n=a.sent,a.next=5,sr("".concat(e.cuenta,".").concat(e.subcta),e.entidad,"2020-2021");case 5:if(r=a.sent,!e.folio){a.next=18;break}return a.next=9,Zn("".concat(e.cuenta,".").concat(e.subcta),e.moduloDestino,n,e.folio);case 9:o=a.sent,e.supRiego=e.superficieTransferida,e.supPrevia=o,e.laboresPendientes=r,t(tr()),t(Er(e)),Qn("cultivoInput"),a.next=29;break;case 18:return a.next=20,Zn("".concat(e.cuenta,".").concat(e.subcta),e.entidad,n);case 20:return c=a.sent,a.next=23,Kn("".concat(e.cuenta,"-").concat(e.subcta),n);case 23:l=a.sent,e.laboresPendientes=r,e.supPrevia=c+l,t(tr()),t(Er(e)),Qn("cultivoInput");case 29:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Er=function(e){return 26===e.estado&&(e.estado="Sonora"),2===e.estado&&(e.estado="Baja California"),2===e.municipio&&(e.municipio="Mexicali"),55===e.municipio&&(e.municipio="San Luis Rio Colorado"),1===e.sistRiego&&(e.sistRiego="Gravedad"),2===e.sistRiego&&1===e.equipo&&(e.sistRiego="Pozo Particular"),2===e.sistRiego&&2===e.equipo&&(e.sistRiego="Pozo Federal"),{type:B,payload:e}},br=function(){return{type:V}},vr=function(){return{type:Z}},hr=function(){return{type:_}},Nr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(n.useState)(e),t=Object(dt.a)(a,2),r=t[0],o=t[1],c=function(){o(e)},l=function(e){var a=e.target;switch(a.type){case"checkbox":o(Object(u.a)(Object(u.a)({},r),{},Object(Dt.a)({},a.name,a.checked)));break;case"number":o(Object(u.a)(Object(u.a)({},r),{},Object(Dt.a)({},a.name,Number(a.value))));break;default:o(Object(u.a)(Object(u.a)({},r),{},Object(Dt.a)({},a.name,a.value.toUpperCase())))}},i=function(e){o(e)};return[r,l,c,i,o]},Or=function(e){var a=e.global,t=void 0!==a&&a,o=Object(l.c)((function(e){return e.auth})),c=o.modulo,i=o.variablesGlobales.cicloActual,s=Object(l.c)((function(e){return e.altaPermisos})),u=s.idUsuarioSelected,d=s.usuario,m=Object(l.b)(),p=function(){f(),O.length>0?m({type:k}):Nt.a.fire("Nada para buscar","Ingrese apellido paterno o cuenta del usuario","warning")};Object(n.useEffect)((function(){m(br()),m(ur())}),[m]);var f=function(){m(dr(O.toUpperCase(),c,i,t))},E="";u&&(E=d);var b=Nr({usuario:""}),v=Object(dt.a)(b,2),h=v[0],N=v[1],O=h.usuario;return r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},r.a.createElement("span",{className:"text-warning"},"* "),"Usuario:"," "),r.a.createElement("label",null,E," "),u?r.a.createElement("div",{className:"fas fa-check text-success p-3"}):r.a.createElement(r.a.Fragment,null),u?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex-grow-1"},r.a.createElement("input",{tabIndex:"1",type:"text",className:"form-control",placeholder:"Apellido paterno o numero de cuenta",name:"usuario",autoComplete:"off",value:O,onChange:N,onKeyUp:function(e){"Enter"===e.key&&p()},autoFocus:!0})),u?r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){m(br()),h.usuario=""}},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:p},r.a.createElement("i",{className:"fas fa-search"}))))},gr=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("constancias").doc("".concat(a)).get().then((function(e){return e.exists?e.data().contadorConstancias:0})).catch((function(e){return console.log(" Error: ",e),Nt.a.fire("Error de conexi\xf3n","Error al intentar obtener el contador de constancias.","error"),!1}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),yr=function(e){var a=e.setModalState,t=Object(l.c)((function(e){return e.auth})).privilegios.generarConstancias,n=Object(l.c)((function(e){return e.altaPermisos})),o=Object(l.c)((function(e){return e.altaPermisos})),c=o.usuarios,i=o.idUsuarioSelected,s=function(){var e=Object(ut.a)(st.a.mark((function e(){var t,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.find((function(e){return e.id===i})),e.t0=u.a,e.t1=Object(u.a)({},t),e.t2={},e.next=6,Ar();case 6:e.t3=e.sent,e.t4=new Date,e.t5={folio:e.t3,fecha:e.t4},n=(0,e.t0)(e.t1,e.t2,e.t5),a({openModal:!0,constancia:n});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"border rounded mb-4 p-2"},r.a.createElement("div",null,"Cuenta: ",n.cuenta),r.a.createElement("div",null,"Usuario: ",n.usuario),r.a.createElement("div",null,n.tipoLocalidad,": ",n.nombreLocalidad),r.a.createElement("div",null,"Lote: ",n.lote),r.a.createElement("div",null,"Secci\xf3n: ",n.seccion),r.a.createElement("div",null,"M\xf3dulo: ",n.modulo),r.a.createElement("div",null,"Sup. Derecho: ",n.supDerecho),r.a.createElement("div",null,"Sup. Disponible: ",n.supDerecho-n.supPrevia),r.a.createElement("div",null,"Sistema: ",n.sistema),n.reacomodo&&r.a.createElement("div",{className:"text-info"},"Reacomodo: ",n.reacomodo),t&&r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{className:"btn btn-outline-primary m-4",onClick:s},"Generar constancia")))},Ar=function(){var e=Object(ut.a)(st.a.mark((function e(){var a,t,n,r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Date,t=a.getFullYear(),e.next=4,gr(t);case 4:if(!1===(n=e.sent)){e.next=10;break}return r="".concat((o=n+1,c=3,"0".repeat(c-o.toString().length)+o.toString()),"-").concat(t),e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}var o,c}),e)})));return function(){return e.apply(this,arguments)}}(),xr=t(39),Cr=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise((function(e,t){var n=new FileReader;n.readAsArrayBuffer(a),n.onload=function(a){var t=a.target.result,n=Object(xr.read)(t,{type:"buffer"}),r=n.SheetNames[0],o=n.Sheets[r],c=xr.utils.sheet_to_json(o);e(c)},n.onerror=function(e){t(e)}})),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Sr=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("colonias").orderBy("nombre").startAt(a).endAt(a+"\uf8ff").get();case 2:return t=e.sent,n=[],t.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Pr=function(){var e=Object(ut.a)(st.a.mark((function e(){var a,t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("reacomodos").get();case 2:return a=e.sent,t=[],a.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),jr=function(e){var a=!0;return["CUENTA","SUBCTA","APPATERNO","UNIDAD","ZONA","EJIDO","SECCION"].forEach((function(t){void 0===e[0][t]&&(a=!1)})),a?console.log("ok, todo en orden!"):console.log("Esto no es un padron"),a},Rr=function(e,a){var t=e.find((function(e){return e.clave===a}));return t||""},wr=function(e,a){return a>=0?e>0?"".concat(e).concat(a):a:""},Ir=function(e){return 9===e?"9A":92===e?"9B":e},zr=function(e,a){return 1===e?"Gravedad":2===e&&1===a?"Pozo Particular":2===e&&2===a?"Pozo Federal":""},Dr=function(e){var a=e.actionFunction,t=e.title,n=e.updating,o=void 0!==n&&n,c=e.fileExtension;return r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex"},r.a.createElement("label",{htmlFor:"input",className:"align-self-center"},t),o&&r.a.createElement("div",{className:"spinner-border text-primary align-self-center ml-2",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement("input",{id:"input",type:"file",className:"form-control-file mt-4",onChange:function(e){var t=e.target.files[0];t.name.match(/\.[0-9a-z]+$/i)[0]===c?a(t):Nt.a.fire("Formato incorrecto",'Verifique que el archivo que intenta cargar tenga la extensi\xf3n "'.concat(c,'".'),"error")}}))},Lr=function(){var e=Object(l.c)((function(e){return e.scenes.padronScreen})).updatingPadron,a=Object(l.b)();return r.a.createElement(Dr,{actionFunction:function(e){a(function(e){return function(){var a=Object(ut.a)(st.a.mark((function a(t){var n,r,o,c,l,i;return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t({type:q});case 2:return a.next=4,Sr("");case 4:return n=a.sent,a.next=7,Pr();case 7:return r=a.sent,a.next=10,Cr(e);case 10:if(o=a.sent,Jn.f.forEach((function(e){o.push(e)})),c=ft.a.batch(),l=1,i=500,!jr(o)){a.next=25;break}return a.next=18,o.forEach((function(e,a){var t=r.find((function(a){return a.id==="".concat(e.CUENTA,"-").concat(e.SUBCTA)}));t&&(o[a].reacomodo=t.reacomodo)}));case 18:return a.next=20,o.forEach((function(e,a){var t=Rr(n,e.EJIDO);o[a].nombreLocalidad=void 0!==t.nombre?t.nombre:"",o[a].tipoLocalidad=void 0!==t.tipo?t.tipo:""}));case 20:return a.next=22,o.forEach((function(e){var a={apMaterno:void 0!==e.APMATERNO?e.APMATERNO:"",apPaterno:void 0!==e.APPATERNO?e.APPATERNO:"",cp:void 0!==e.CP?e.CP:"",cuenta:void 0!==e.CUENTA?e.CUENTA:"",ejido:void 0!==e.EJIDO?e.EJIDO:"",nombreLocalidad:e.nombreLocalidad,tipoLocalidad:e.tipoLocalidad,equipo:void 0!==e.EQUIPO?e.EQUIPO:"",estado:void 0!==e.ESTADO?e.ESTADO:"",fecha:void 0!==e.FECHA?e.FECHA:"",grupo:void 0!==e.GRUPO?e.GRUPO:"",lt:void 0!==e.LT?e.LT:"",modulo:void 0!==e.ZONA?Ir(e.ZONA):"",municipio:void 0!==e.MUNICIPIO?e.MUNICIPIO:"",nombre:void 0!==e.NOMBRE?e.NOMBRE:"",pControl:void 0!==e.PCONTROL?e.PCONTROL:"",predio:wr(e.GRUPO,e.PREDIO),ra:void 0!==e.RA?e.RA:"",referencia:void 0!==e.REFERENCIA?e.REFERENCIA:"",seccion:void 0!==e.SECCION?e.SECCION:"",sistRiego:void 0!==e.SISTRIEGO?e.SISTRIEGO:"",sistemaRiego:zr(e.SISTRIEGO,e.EQUIPO),slt:void 0!==e.SLT?e.SLT:"",sra:void 0!==e.SRA?e.SRA:"",ssra:void 0!==e.SSRA?e.SSRA:"",subcta:void 0!==e.SUBCTA?e.SUBCTA:"",supFisica:void 0!==e.SUPFISICA?e.SUPFISICA:"",supRiego:void 0!==e.SUPRIEGO?e.SUPRIEGO:"",tenencia:void 0!==e.TENENCIA?e.TENENCIA:"",unidad:void 0!==e.UNIDAD?e.UNIDAD:"",zona:void 0!==e.ZONA?e.ZONA:"",reacomodo:void 0!==e.reacomodo?e.reacomodo:""},t=ft.a.collection("derechos").doc("".concat(a.cuenta,"-").concat(a.subcta));c.set(t,a),l===i&&(c.commit().then((function(){console.log("Se termino de subir batch")})).catch((function(e){console.error(e)})),c=ft.a.batch(),l=0),l++}));case 22:c.commit().then((function(){console.log("Se termino de actualizar el padron"),Nt.a.fire("Padron actualizado","Se actualizo con \xe9xito el padr\xf3n de usuarios.","success"),t(vr())})).catch((function(e){console.error(e)})),a.next=27;break;case 25:t(vr()),Nt.a.fire("Formato incorrecto","Verifique que el documento que intenta cargar corresponda a un padr\xf3n de usuarios v\xe1lido.","error");case 27:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(e))},title:"Cargar Padron",updating:e,fileExtension:".xlsx"})},Tr=function(e){var a=!0;return["CTA","SC","LLAVE","EJI","HAS","RE","CVEPRO"].forEach((function(t){void 0===e[0][t]&&(a=!1)})),a?console.log("ok, todo en orden!"):console.log("Esto no es un padron"),a},kr=function(){var e=Object(l.c)((function(e){return e.scenes.padronScreen})).updatingReacomodos,a=Object(l.b)();return r.a.createElement(Dr,{actionFunction:function(e){a(function(e){return function(){var a=Object(ut.a)(st.a.mark((function a(t){var n,r,o;return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t({type:J});case 2:return a.next=4,Cr(e);case 4:n=a.sent,r=ft.a.batch(),o=1,500,Tr(n)?(n.forEach((function(e){var a={cuenta:void 0!==e.CTA?e.CTA:"?",subCuenta:void 0!==e.SC?e.SC:"?",llave:void 0!==e.LLAVE?e.LLAVE:"?",modulo:void 0!==e.MODULO?e.MODULO:"?",claveEjido:void 0!==e.CVEEJI?e.CVEEJI:"?",ejido:void 0!==e.EJI?e.EJI:"?",predio:void 0!==e.PRE?e.PRE:"?",hectareas:void 0!==e.HAS?e.HAS:"?",reacomodo:void 0!==e.RE?e.RE:"?",claveProcedencia:void 0!==e.CVEPRO?e.CVEPRO:"?",ejidoProcedencia:void 0!==e.EJIPRO?e.EJIPRO:"?",predioProcedencia:void 0!==e.PREPRO?e.PREPRO:"?"},t=ft.a.collection("reacomodos").doc("".concat(a.cuenta,"-").concat(a.subCuenta));r.set(t,a),500===o&&(r.commit().then((function(){console.log("Se termino de subir batch")})).catch((function(e){console.error(e)})),r=ft.a.batch(),o=0),o++})),r.commit().then((function(){console.log("Se terminaron de actualizar los reacomodos"),Nt.a.fire("Reacomodos actualizados","Se actualizaron con \xe9xito los reacomodos.","success"),t(hr())})).catch((function(e){console.error(e)}))):(t(hr()),Nt.a.fire("Formato incorrecto","Verifique que el documento que intenta cargar corresponda a una tabla de reacomodos v\xe1lida.","error"));case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(e))},title:"Cargar Reacomodos",updating:e,fileExtension:".xlsx"})},Mr=t(139),Ur=t.n(Mr),Fr=function(e,a,t,n,r){var o=xr.utils.book_new();o.Props={Title:t,Author:n,CreatedDate:new Date},o.SheetNames.push(r);var c=xr.utils.json_to_sheet(e,a);o.Sheets[r]=c;var l=Object(xr.write)(o,{bookType:"xlsx",type:"array"});Gr(l,t)},Gr=function(e,a){var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ur.a.saveAs(t,"".concat(a,".xlsx"))},Br=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.modulo,t=e.name,n=e.variablesGlobales.cicloActual,o="PadronM".concat(a),c={header:["CUENTA","APPATERNO","APMATERNO","NOMBRE","MODULO","SECCION","EJ/COL","LOCALIDAD","PREDIO","REACOMODO","HA","SISTEMA"]},i=function(){var e=Object(ut.a)(st.a.mark((function e(){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Nt.a.fire({title:"Atenci\xf3n!!",text:"Al confirmar se iniciar\xe1 la descarga del padr\xf3n de usuarios en formato excel.",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Descargar",cancelButtonText:"Cancelar"}).then(function(){var e=Object(ut.a)(st.a.mark((function e(r){var l,i;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isConfirmed){e.next=7;break}return e.next=4,Yn("",a,n);case 4:l=e.sent,i=l.map((function(e){return{CUENTA:e.id,APPATERNO:e.apPaterno,APMATERNO:e.apMaterno,NOMBRE:e.nombre,MODULO:e.modulo,SECCION:e.seccion,"EJ/COL":e.tipoLocalidad,LOCALIDAD:e.nombreLocalidad,PREDIO:e.predio,REACOMODO:e.reacomodo,HA:e.supRiego,SISTEMA:e.sistemaRiego}})),Fr(i,c,o,t,o);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("button",{onClick:i,className:"btn btn-outline-primary m-3"},r.a.createElement("i",{className:"fas fa-download mr-2"}),"Descargar Padron")},Vr=t(14),qr=t.n(Vr),Yr=t(11),Hr=t.n(Yr),Zr=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n,r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ft.a.collection("constancias").doc("".concat(t)).collection("constancias").doc(a.folio),r=ft.a.collection("constancias").doc("".concat(t)),e.prev=2,e.next=5,ft.a.runTransaction(function(){var e=Object(ut.a)(st.a.mark((function e(t){var o,c;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(n);case 2:return o=e.sent,e.next=5,t.get(r);case 5:if(c=e.sent,!o.exists){e.next=11;break}throw Nt.a.fire("La transferencia ya existe","Est\xe1 intentando sobreescribir una transferencia ya existente, verifique su conexi\xf3n.","error"),new Error("La transferencia ya existe");case 11:t.set(n,a),c.exists?t.update(r,{contadorConstancias:Hr.a.firestore.FieldValue.increment(1)}):t.set(r,{contadorConstancias:1});case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 5:if(!e.sent){e.next=9;break}return Nt.a.fire("Constancia Guardada","Se registr\xf3 con \xe9xito la constancia de derechos.","success"),e.abrupt("return",!0);case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(2),Nt.a.fire("Error de conexi\xf3n","Error al intntar guardar constancia.","error"),console.error(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(a,t){return e.apply(this,arguments)}}(),Jr=function(e){var a=e.openModal,t=e.constancia,n=e.constancySaved,o=e.setModalState,c=t.folio,l=t.apPaterno,i=t.apMaterno,s=t.nombre,d=t.predio,m=t.tipoLocalidad,p=t.nombreLocalidad,f=t.fecha,E=t.supRiego,b=t.cuenta,v=t.subcta,h=t.modulo,N=t.sistemaRiego,O=t.municipio,g=t.estado,y=t.reacomodo,A=function(){o((function(e){return Object(u.a)(Object(u.a)({},e),{},{openModal:!1})}))},x=function(){var e=Object(ut.a)(st.a.mark((function e(){var a,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Date,n=a.getFullYear(),e.next=4,Zr(t,n);case 4:e.sent&&o((function(e){return Object(u.a)(Object(u.a)({},e),{},{constancySaved:!0})}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(qr.a,{isOpen:a,onRequestClose:A,style:{content:{width:"1125px",height:"1700px",overflow:"auto"}},closeTimeoutMS:200,className:"printModalSanidad p-5",overlayClassName:"modal-fondo"},r.a.createElement("div",{className:"border border-dark rounded"},r.a.createElement("div",{className:"border border-dark rounded m-1 p-3"},r.a.createElement("div",{className:"row p-5 d-flex align-items-center"},r.a.createElement("div",{className:"col-8"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("img",{src:"./logos/medio-cna-2022.png",alt:"Logo semarnat",style:{maxWidth:600}}))),r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"d-flex flex-column text-right"},r.a.createElement("div",null,r.a.createElement("b",null,"OFICIO:")),r.a.createElement("div",null,"B00.807.05.DR.014.P.U./",c),r.a.createElement("div",null,r.a.createElement("b",null,"LUGAR:")),r.a.createElement("div",null,"MEXICALI, B. C."),r.a.createElement("div",null,r.a.createElement("b",null,"FECHA:")),r.a.createElement("div",null,f.toLocaleString("es-MX",{weekday:"long",year:"numeric",month:"long",day:"numeric"}).toUpperCase())))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,r.a.createElement("b",null,"ORGANISMO DE CUENCA PEN\xcdNSULA DE BAJA CALIFORNIA",r.a.createElement("br",null),"DIRECCI\xd3N DE INFRAESTRUCTURA HIDROAGR\xcdCOLA",r.a.createElement("br",null),"DISTRITO DE RIEGO 014, R\xcdO COLORADO, B.C. Y SONORA",r.a.createElement("br",null),"JEFATURA DEL PADR\xd3N DE USUARIOS")))),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,r.a.createElement("b",null,"A QUIEN CORRESPONDA:")))),r.a.createElement("div",{className:"row m-3 d-flex flex-column justify-content-center mt-2"},r.a.createElement("p",{clssName:"paragraph"},"\xa0\xa0\xa0\xa0 CON FUNDAMENTO EN LOS ART\xcdCULOS 52, 67 INCISO A), 70 DE LA LEY DE AGUAS NACIONALES; 92 Y 102 DEL REGLAMENTO DEL DISTRITO DE RIEGO DEL R\xcdO COLORADO Y DEM\xc1S RELATIVOS DE LA NORMATIVIDAD VIGENTE, ART\xcdCULOS 11 LETRA B FRACCI\xd3N V, 73 FRACCI\xd3N XLI, AS\xcd COMO SU \xdaLTIMO P\xc1RRAFO, 79, FRACCI\xd3N XVII REGLAMENTO INTERIOR DE LA COMISI\xd3N NACIONAL DEL AGUA, CON BASE EN LA B\xdaSQUEDA DE LOS DATOS DEL PROMOVENTE REALIZADA EL D\xcdA DE HOY POR EL \xc1REA RESPONSABLE DEL PADR\xd3N DE USUARIOS (SIPAD), SE INFORMA QUE OBRA REGISTRO PADR\xd3N DE USUARIOS DEL DISTRITO DE RIEGO 014, R\xcdO COLORADO, BAJA CALIFORNIA Y SONORA A NOMBRE DE"," ",r.a.createElement("b",null,l," ",i," ",s),", CON EL N\xdaMERO DE CUENTA ",r.a.createElement("b",null,"".concat(b,".").concat(v)),","," ",r.a.createElement("b",null,"EN EL M\xd3DULO DE RIEGO N\xdaMERO ",h)," CON UNA SUPERFICIE DE"," ",r.a.createElement("b",null,E," HECTAREAS")," DE DERECHOS DE RIEGO DE"," ",r.a.createElement("b",null,N.toUpperCase()),", EN LA ",r.a.createElement("b",null,"PARCELA N\xdaMERO ",d),", EN"," ",r.a.createElement("b",null,m.toUpperCase()," ",p),y.length>0&&r.a.createElement("b",null," (REACOMODO ",y,")"),", DEL MUNICIPIO DE"," ",r.a.createElement("b",null,O.toUpperCase()),", ",r.a.createElement("b",null,g.toUpperCase()),"."),r.a.createElement("p",{clssName:"paragraph"},"\xa0\xa0\xa0\xa0 LA PRESENTE SE EXTIENDE CON CAR\xc1CTER INFORMATIVO A PETICI\xd3N DEL INTERESADO PARA LOS FINES QUE ESTIME CONVENIENTES Y SE LE RECUERDA QUE DE ACUERDO A LA NORMATIVA EN MATERIA DE AGUAS ES DEBER DEL USUARIO, CONCESIONARIO O ASIGNATARIO, SEGUIR LOS TR\xc1MITES Y PROCEDIMIENTOS ADMINISTRATIVOS RELATIVOS PARA LA ACTUALIZACI\xd3N DE LA INFORMACI\xd3N, TRANSMISI\xd3N, CESI\xd3N DE DERECHOS DE AGUA EN EL PADR\xd3N."),r.a.createElement("p",{clssName:"paragraph"},"\xa0\xa0\xa0\xa0 LA CONSTANCIA SE EMITE, SIN PREJUZGAR SOBRE LA EXISTENCIA DE ALGUNA OTRA SOLICITUD, PROCEDIMIENTO ADMINISTRATIVO, SUCESORIO O JUDICIAL QUE NO SE HAYA HECHO DE CONOCIMIENTO AL MOMENTO DE FORMULAR SU PETICI\xd3N.")),r.a.createElement("div",{className:"row pt-4"},r.a.createElement("p",null,r.a.createElement("b",null,r.a.createElement("div",{className:"col-12"},"ATENTAMENTE")))),r.a.createElement("div",{className:"row d-flex mt-4"},r.a.createElement("p",null,r.a.createElement("b",null,r.a.createElement("div",{className:"col-12"},"DR. JULIO ALFONSO NAVARRO URBINA,",r.a.createElement("br",null),"ING. EN JEFE DEL DISTRITO DE RIEGO 014,",r.a.createElement("br",null),"R\xcdO COLORADO, BAJA CALIFORNIA Y SONORA")))),r.a.createElement("div",{className:"row m-3 mt-4"},r.a.createElement("b",null,r.a.createElement("div",{className:"col-12"},"C.c.p.- Archivo ",r.a.createElement("br",null),"VMMR/JDLA/KPM"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10 d-flex"},r.a.createElement("div",{className:"align-self-center pl-4 pr-4 pb-2 mb-3"},r.a.createElement("div",null,"Av. Reforma y calle \u201cL\u201d s/n Col. Nueva, Mexicali, Baja California."),r.a.createElement("div",null,"Tel\xe9fono: (686) 551 64 00. "),r.a.createElement("div",null,"http//:www.gob.mx/conagua"))),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",{className:"d-flex justify-content-end mt-5"},r.a.createElement("img",{src:"./logos/pie-2022.png",alt:"Logo mexico",style:{maxWidth:970}})))),r.a.createElement("div",{className:"row m-3 d-flex justify-content-center pt-4"},n?r.a.createElement("button",{type:"button",className:"btn btn-outline-primary d-print-none",onClick:function(){window.print()}},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")):r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none",onClick:x},r.a.createElement("i",{className:"fas fa-save"}),r.a.createElement("span",null," Guardar ")),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none ml-3",onClick:A},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),r.a.createElement("span",null," Cerrar"))))))},_r=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n,r,o,c;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=["apPaterno","cuenta"],r=[],o=[],c=ft.a.collection("constancias").doc("".concat(t)).collection("constancias"),n.forEach((function(e){r.push(c.orderBy(e).startAt(a).endAt(a+"\uf8ff").get()),r.push(c.where(e,"==",Number(a)).get())})),e.next=7,Promise.all(r);case 7:return e.sent.forEach((function(e){e.forEach((function(e){o.push(Object(u.a)({},e.data()))}))})),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Kr=function(e){var a=e.constancy,t=e.setModalState,n="".concat(a.apPaterno," ").concat(a.apMaterno," ").concat(a.nombre);return r.a.createElement("div",{className:"border rounded mb-4 p-2"},r.a.createElement("div",null,r.a.createElement("h5",null,"Folio:",a.folio)),r.a.createElement("div",null,"Cuenta: ",a.cuenta),r.a.createElement("div",null,"Usuario: ",n),r.a.createElement("div",null,a.tipoLocalidad,": ",a.nombreLocalidad),r.a.createElement("div",null,"Lote: ",a.predio),r.a.createElement("div",null,"Secci\xf3n: ",a.seccion),r.a.createElement("div",null,"M\xf3dulo: ",a.modulo),r.a.createElement("div",null,"Sup. Derecho: ",a.supRiego),r.a.createElement("div",null,"Sistema: ",a.sistemaRiego),a.reacomodo&&r.a.createElement("div",{className:"text-info"},"Reacomodo: ",a.reacomodo),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{className:"btn btn-outline-primary m-4",onClick:function(){var e=a.fecha.toDate();console.log(e),t({openModal:!0,constancySaved:!0,constancia:Object(u.a)(Object(u.a)({},a),{},{fecha:e})})}},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir"))))},Xr=function(e){var a=e.modalState,t=e.setModalState,o=Object(n.useState)({usuario:"",constancySelected:!1,constancies:[]}),c=Object(dt.a)(o,2),l=c[0],i=c[1],s=l.usuario,d=l.constancySelected,m=l.constancies,p=function(e,a){var t=function(){var t=Object(ut.a)(st.a.mark((function t(){var n;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_r(e.usuario,"2021");case 2:n=t.sent,a(Object(u.a)(Object(u.a)({},e),{},{constancies:n}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return[function(t){var n=t.target;a(Object(u.a)(Object(u.a)({},e),{},{usuario:n.value.toUpperCase()}))},function(){a(Object(u.a)(Object(u.a)({},e),{},{usuario:"",constancySelected:!1}))},t,function(e){"Enter"===e.key&&t()},function(t){a(Object(u.a)(Object(u.a)({},e),{},{constancySelected:t}))}]}(l,i),f=Object(dt.a)(p,5),E=f[0],b=f[1],v=f[2],h=f[3],N=f[4];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Consulta de constancias"),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("div",{className:"d-flex form-group align-items-baseline"},r.a.createElement("label",null,"Usuario: "),d?r.a.createElement("div",{className:"ml-2"},r.a.createElement("label",null,"".concat(d.apPaterno," ").concat(d.apMaterno," ").concat(d.nombre)),r.a.createElement("i",{className:"fas fa-check text-success p-3"}),r.a.createElement("button",{className:" btn btn-outline-primary",type:"button",onClick:b},r.a.createElement("i",{className:"fas fa-trash"}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",className:"form-control ml-3",placeholder:"Apellido paterno o numero de cuenta",autoComplete:"off",value:s,onChange:E,onKeyUp:h}),r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:v},r.a.createElement("i",{className:"fas fa-search"})))))),m.length>0&&r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(Rn,{title:0===m.length?"No se encontraron constancias":"Constancias",columns:zn,data:m,simpleSetFunction:N})),d&&r.a.createElement("div",{className:"col-sm-4"},r.a.createElement(Kr,{constancy:d,modalState:a,setModalState:t}))))},Qr=[{id:"numeroPermiso",header:"PERMISO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!1,search:!0},{id:"cuenta",header:"CUENTA",styles:"",currency:!1,sum:!1,count:!0,float:!1,display:!0,selectable:!1,search:!0},{id:"usuario",header:"USUARIO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"nombreProductor",header:"PRODUCTOR",styles:"longCell",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"seccion",header:"SECCION",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"tipoLocalidad",header:"EJ/COL",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"localidad",header:"LOCALIDAD",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"lote",header:"LOTE",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!1},{id:"modulo",header:"MODULO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"nombreCultivo",header:"CULTIVO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"subciclo",header:"SUBCICLO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!0},{id:"supAutorizada",header:"HA",styles:"text-center",currency:!1,sum:!0,count:!1,float:4,display:!0,selectable:!0,search:!1},{id:"cuotaCultivo",header:"CUOTA",styles:"text-center",currency:!0,sum:!0,count:!1,float:2,display:!1,selectable:!0,search:!1},{id:"fechaEmicion",header:"FECHA",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!1},{id:"cultivoAnterior",header:"CUL. ANT.",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!0},{id:"estadoPermiso",header:"ESTADO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!0},{id:"sistema",header:"SISTEMA",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!0}],Wr=[{id:"folio",header:"FOLIO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!1,search:!1},{id:"cuenta",header:"CUENTA",styles:"",currency:!1,sum:!1,count:!0,float:!1,display:!0,selectable:!1,search:!0},{id:"nombre",header:"USUARIO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"tipoLocalidad",header:"EJ/COL",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!1},{id:"claveLocalidad",header:"CLAVE",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"ubicacion",header:"LOCALIDAD",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"lote",header:"LOTE",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!1},{id:"modulo",header:"MODULO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"cultivo",header:"CULTIVO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"superficie",header:"HA",styles:"text-center",currency:!1,sum:!0,count:!1,float:4,display:!0,selectable:!0,search:!1},{id:"superficieMapeada",header:"HA-Map",styles:"text-center",currency:!1,sum:!0,count:!1,float:4,display:!0,selectable:!0,search:!1},{id:"tecnico",header:"TECNICO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!1},{id:"desfoliado",header:"DESFOLIADO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"cosechado",header:"COSECHADO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"desvarado",header:"DESVARADO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"disqueado",header:"DISQUEADO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"desarraigado",header:"DESARRAIGADO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"barbechado",header:"BARBECHADO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"pagado",header:"PAGADO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!1},{id:"laboresPendientes",header:"BLOQUEADO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!1}],$r=[{id:"curp",header:"CURP",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!1,search:!0},{id:"apPaterno",header:"PATERNO",styles:"",currency:!1,sum:!1,count:!0,float:!1,display:!0,selectable:!1,search:!0},{id:"apMaterno",header:"MATERNO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!1,search:!0},{id:"nombre",header:"NOMBRE",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!1,search:!0},{id:"rfc",header:"RFC",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!0},{id:"genero",header:"GENERO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"direccion",header:"DIRECCION",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"municipio",header:"MUNICIPIO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"estado",header:"ESTADO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"cp",header:"CP",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"telefono",header:"TELEFONO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1}],eo=[{id:"id",header:"CUENTA",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!1,search:!1},{id:"cuenta",header:"CTA",styles:"",currency:!1,sum:!1,count:!0,float:!1,display:!0,selectable:!0,search:!0},{id:"subcta",header:"SUBCTA",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!1},{id:"apPaterno",header:"PATERNO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!1,search:!0},{id:"apMaterno",header:"MATERNO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!1,search:!0},{id:"nombre",header:"NOMBRE",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!1,search:!0},{id:"tipoLocalidad",header:"EJ/COL",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"nombreLocalidad",header:"LOCALIDAD",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"ejido",header:"CLAVE",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"predio",header:"PREDIO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!1},{id:"reacomodo",header:"REACOMODO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!1},{id:"seccion",header:"SECCION",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"modulo",header:"MODULO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"municipio",header:"MUNICIPIO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"estado",header:"ESTADO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"supRiego",header:"SUPRIEGO",styles:"text-center",currency:!1,sum:!0,count:!1,float:4,display:!0,selectable:!0,search:!1},{id:"supFisica",header:"SUPFISICA",styles:"text-center",currency:!1,sum:!0,count:!1,float:4,display:!1,selectable:!0,search:!1},{id:"sistemaRiego",header:"SISTEMA",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"cp",header:"CP",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"equipo",header:"EQUIPO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"grupo",header:"GRUPO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"lt",header:"LT",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"pControl",header:"PCONTROL",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"ra",header:"RA",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"referencia",header:"REF",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"slt",header:"SLT",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"sra",header:"SRA",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"ssra",header:"SSRA",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"tenencia",header:"TENENCIA",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1}],ao=[{id:"folio",header:"FOLIO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!1,search:!0},{id:"estadoTransferencia",header:"ESTADO",styles:"",currency:!1,sum:!1,count:!0,float:!1,display:!0,selectable:!1,search:!0},{id:"superficieTransferida",header:"HA",styles:"text-center",currency:!1,sum:!0,count:!1,float:!0,display:!0,selectable:!0,search:!1},{id:"moduloDestino",header:"MODULO-DESTINO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"clavelocalidadDestino",header:"CLAVE-DESTINO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"tipolocalidadDestino",header:"EJ/COL-DESTINO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"localidadDestino",header:"LOCALIDAD-DESTINO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"loteDestino",header:"LOTE-DESTINO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!1},{id:"apPaternoSolicitante",header:"PATERNO-DESTINO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!0},{id:"apMaternoSolicitante",header:"MATERNO-DESTINO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!0},{id:"nombreSolicitante",header:"NOMBRE-DESTINO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"claveCultivo",header:"CLAVE-CULTIVO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!0},{id:"nombreCultivo",header:"CULTIVO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"id",header:"CUENTA-ORIGEN",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"apPaterno",header:"PATERNO-ORIGEN",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!0},{id:"apMaterno",header:"MATERNO-ORIGEN",styles:"",currency:!1,sum:!1,count:!1,float:4,display:!1,selectable:!0,search:!0},{id:"nombre",header:"NOMBRE-ORIGEN",styles:"",currency:!1,sum:!1,count:!1,float:4,display:!1,selectable:!0,search:!1},{id:"modulo",header:"MODULO-ORIGEN",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"predio",header:"LOTE-ORIGEN",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!1},{id:"ejido",header:"CLAVE-ORIGEN",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"tipoLocalidad",header:"EJ/COL-ORIGEN",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"nombreLocalidad",header:"LOCALIDAD-ORIGEN",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0}],to=[{id:"folio",header:"FOLIO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!1,search:!0},{id:"estadoTransferencia",header:"ESTADO",styles:"",currency:!1,sum:!1,count:!0,float:!1,display:!0,selectable:!1,search:!0},{id:"superficieTransferida",header:"HA",styles:"text-center",currency:!1,sum:!0,count:!1,float:!0,display:!0,selectable:!0,search:!1},{id:"id",header:"CUENTA-ORIGEN",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"apPaterno",header:"PATERNO-ORIGEN",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!0},{id:"apMaterno",header:"MATERNO-ORIGEN",styles:"",currency:!1,sum:!1,count:!1,float:4,display:!1,selectable:!0,search:!0},{id:"nombre",header:"NOMBRE-ORIGEN",styles:"",currency:!1,sum:!1,count:!1,float:4,display:!1,selectable:!0,search:!1},{id:"modulo",header:"MODULO-ORIGEN",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"predio",header:"LOTE-ORIGEN",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!1},{id:"ejido",header:"CLAVE-ORIGEN",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"tipoLocalidad",header:"EJ/COL-ORIGEN",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"nombreLocalidad",header:"LOCALIDAD-ORIGEN",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"claveCultivo",header:"CLAVE-CULTIVO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!0},{id:"nombreCultivo",header:"CULTIVO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"moduloDestino",header:"MODULO-DESTINO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"clavelocalidadDestino",header:"CLAVE-DESTINO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"tipolocalidadDestino",header:"EJ/COL-DESTINO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1},{id:"localidadDestino",header:"LOCALIDAD-DESTINO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!0},{id:"loteDestino",header:"LOTE-DESTINO",styles:"text-center",currency:!1,sum:!1,count:!1,float:!1,display:!0,selectable:!0,search:!1},{id:"apPaternoSolicitante",header:"PATERNO-DESTINO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!0},{id:"apMaternoSolicitante",header:"MATERNO-DESTINO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!0},{id:"nombreSolicitante",header:"NOMBRE-DESTINO",styles:"",currency:!1,sum:!1,count:!1,float:!1,display:!1,selectable:!0,search:!1}],no=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,ft.a.collection("productores").orderBy(t).startAt(a.toUpperCase()).endAt(a.toUpperCase()+"\uf8ff").get();case 3:return e.sent.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))})),0===n.length&&Nt.a.fire("No se encontraron productores ","...","warning"),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),ro=function(e,a){switch(a.type){case"setInput":return Object(u.a)(Object(u.a)({},e),{},{inputValue:a.payload});case"setSelect":return Object(u.a)(Object(u.a)({},e),{},{campo:a.payload});case"setProductores":return Object(u.a)(Object(u.a)({},e),{},{productores:a.payload});case"setProductorSelected":return Object(u.a)(Object(u.a)({},e),{},{productorSelected:a.payload});case"unsetProductorSelected":return Object(u.a)(Object(u.a)({},e),{},{productorSelected:null});case"openModal":return Object(u.a)(Object(u.a)({},e),{},{openEditModal:!0});case"closeModal":return Object(u.a)(Object(u.a)({},e),{},{openEditModal:!1,msgError:null});case"setError":return Object(u.a)(Object(u.a)({},e),{},{msgError:a.payload});case"removeError":return Object(u.a)(Object(u.a)({},e),{},{msgError:null});default:return e}},oo=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ft.a.collection("productores").doc(a),e.prev=1,e.next=4,ft.a.runTransaction(function(){var e=Object(ut.a)(st.a.mark((function e(n){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get(t);case 2:if(!e.sent.exists){e.next=16;break}return e.next=6,co(a);case 6:if(!(e.sent.length>0)){e.next=12;break}return Nt.a.fire("El productor tiene permisos registrados.","No es posible borrar el registro de un productor si se generaron permisos a su nombre.","error"),e.abrupt("return",!1);case 12:return n.delete(t),e.abrupt("return",!0);case 14:e.next=18;break;case 16:throw Nt.a.fire("El productor no existe","...","error"),new Error("El productor no existe");case 18:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 4:if(!e.sent){e.next=8;break}return Nt.a.fire("Productor eliminado. ","Se elimin\xf3 con \xe9xito el registro del productor.","success"),e.abrupt("return",!0);case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(1),Nt.a.fire("Error de conexi\xf3n","Error al intntar borrar productor.","error"),console.error(e.t0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a){return e.apply(this,arguments)}}(),co=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=ft.a.collectionGroup("permisos").where("idProductorSelected","==",a),e.next=4,n.get().then((function(e){e.forEach((function(e){t.push(e.ref)}))}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),lo=function(e){var a=e.productor,t=e.dispatch,n=e.reload,o=a.id,c=a.apPaterno,l=a.apMaterno,i=a.nombre,s=a.direccion,u=a.estado,d=a.municipio,m=a.rfc,p=a.telefono,f=a.genero,E=a.cp,b=a.fechaRegistro.toDate();return r.a.createElement("div",{className:"border rounded p-3"},r.a.createElement("div",null,r.a.createElement("b",null,"CURP: "),o),r.a.createElement("div",null,r.a.createElement("b",null,"RFC: "),m),r.a.createElement("div",null,r.a.createElement("b",null,"PATERNO: "),c),r.a.createElement("div",null,r.a.createElement("b",null,"MATERNO: "),l),r.a.createElement("div",null,r.a.createElement("b",null,"NOMBRE: "),i),r.a.createElement("div",null,r.a.createElement("b",null,"GENERO: "),f),r.a.createElement("div",null,r.a.createElement("b",null,"DIRECCION: "),s),r.a.createElement("div",null,r.a.createElement("b",null,"MUNICIPIO: "),d),r.a.createElement("div",null,r.a.createElement("b",null,"ESTADO: "),u),r.a.createElement("div",null,r.a.createElement("b",null,"CP: "),E),r.a.createElement("div",null,r.a.createElement("b",null,"TELEFONO: "),p),r.a.createElement("div",null,r.a.createElement("b",null,"REGISTRO: "),b.toLocaleString("es-MX",{weekday:"long",year:"numeric",month:"long",day:"numeric"}).toUpperCase()),r.a.createElement("div",{className:"mt-5 d-flex justify-content-center"},r.a.createElement("button",{className:"btn btn-outline-primary",onClick:function(){t({type:"openModal"})}},"Editar"),r.a.createElement("button",{className:"btn btn-outline-danger ml-5",onClick:function(){Nt.a.fire({title:"Atenci\xf3n!!",text:"Est\xe1 a punto de eliminar el registro del productor con el id: ".concat(o,". \xbfRealmente desea eliminarlo?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar"}).then(function(){var e=Object(ut.a)(st.a.mark((function e(a){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isConfirmed){e.next=6;break}return e.next=4,oo(o);case 4:e.sent&&(n(),t({type:"unsetProductorSelected"}));case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())}},"Borrar")))},io=function(){var e=Object(ut.a)(st.a.mark((function e(a,t,n,r,o,c){var l,i,s,u,d,m,p;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=a.id,i=a.curp,s=a.rfc,u="MORAL"===a.genoro?"MORAL":"FISICA",d="".concat(a.apPaterno," ").concat(a.apMaterno," ").concat(a.nombre),m=ft.a.collection("productores").doc(t),p=ft.a.collection("productores").doc(l),e.prev=5,e.next=8,ft.a.runTransaction(function(){var e=Object(ut.a)(st.a.mark((function e(f){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get(m);case 2:if(!e.sent.exists){e.next=30;break}if(u===n&&i===r&&l===t){e.next=15;break}return e.next=7,so(t);case 7:return e.sent.forEach((function(e){f.update(e,{curpProductor:i,idProductorSelected:l,nombreProductor:d,rfcProductor:s})})),f.delete(m),delete a.id,f.set(p,a),e.abrupt("return",!0);case 15:if(d===o&&s===c){e.next=25;break}return e.next=18,so(t);case 18:return e.sent.forEach((function(e){f.update(e,{curpProductor:i,idProductorSelected:l,nombreProductor:d,rfcProductor:s})})),delete a.id,f.update(m,a),e.abrupt("return",!0);case 25:return delete a.id,f.update(m,a),e.abrupt("return",!0);case 28:e.next=32;break;case 30:throw Nt.a.fire("El productor no existe","...","error"),new Error("El productor no existe");case 32:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 8:if(!e.sent){e.next=12;break}return Nt.a.fire("Productor actualizado. ","Se actualizaron con \xe9xito los datos del productor.","success"),e.abrupt("return",!0);case 12:e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(5),Nt.a.fire("Error de conexi\xf3n","Error al intntar actualizar productor.","error"),console.error(e.t0),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(a,t,n,r,o,c){return e.apply(this,arguments)}}(),so=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=ft.a.collectionGroup("permisos").where("idProductorSelected","==",a),e.next=4,n.get().then((function(e){e.forEach((function(e){t.push(e.ref)}))}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),uo={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px",overflow:"auto"}};qr.a.setAppElement("#root");var mo=function(e){var a=e.openEditModal,t=e.productor,n=e.msgError,o=e.dispatch,c=e.reload,l=e.resetProductor,i=Nr(t),s=Object(dt.a)(i,2),d=s[0],m=s[1],p=t.id,f="MORAL"===t.genero?"MORAL":"FISICA",E=t.curp,b="".concat(t.apPaterno," ").concat(t.apMaterno," ").concat(t.nombre),v=t.rfc,h=t.uid,N=t.fechaRegistro,O=d.curp,g=d.apPaterno,y=d.apMaterno,A=d.nombre,x=d.rfc,C=d.direccion,S=d.municipio,P=d.estado,j=d.cp,R=d.telefono,w=d.genero,I=d.indice,z=void 0===I?"":I,D=function(){o({type:"closeModal"})},L=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),t={id:"MORAL"===w?"".concat(O,"-PM").concat(z):O,curp:O,apPaterno:g,apMaterno:y,nombre:A,rfc:x,direccion:C,estado:P,municipio:S,cp:j,telefono:R.replace(/ /g,""),genero:w,uid:h,fechaRegistro:N},!T()){e.next=7;break}return e.next=5,io(t,p,f,E,b,v);case 5:e.sent&&(D(),c(),l(Object(u.a)(Object(u.a)({},t),{},{id:"MORAL"===w?"".concat(O,"-PM"):O})));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),T=function(){return 0===g.trim().length?(o({type:"setError",payload:"Se requiere apellido paterno"}),!1):0===C.trim().length?(o({type:"setError",payload:"Se requiere direccion"}),!1):0===y.trim().length?(o({type:"setError",payload:"Se requiere apellido materno"}),!1):0===P.trim().length?(o({type:"setError",payload:"Se requiere estado"}),!1):0===A.trim().length?(o({type:"setError",payload:"Se requiere nombre"}),!1):0===S.trim().length?(o({type:"setError",payload:"Se requiere municipio"}),!1):O.trim().length<18||O.trim().length>18?(o({type:"setError",payload:"CURP no valido"}),!1):0===w.length?(o({type:"setError",payload:"Se requiere genero"}),!1):"MORAL"===w&&12!==x.trim().length||"MORAL"!==w&&13!==x.trim().length?(o({type:"setError",payload:"RFC no valido"}),!1):j.trim().length<5?(o({type:"setError",payload:"Codigo postal no valido"}),!1):R.replace(/ /g,"").length<10?(o({type:"setError",payload:"Telefono no valido"}),!1):(o({type:"removeError"}),!0)};return r.a.createElement(qr.a,{isOpen:a,onRequestClose:D,style:uo,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement("div",{className:"row m-3 d-flex justify-content-center"},r.a.createElement("h1",null,"Registro de nuevo productor")),r.a.createElement("div",{className:"row m-3 d-flex justify-content-center"},"* Campos obligatorios"),r.a.createElement("form",{className:"container pb-4",autoComplete:"waa",onSubmit:L},n&&r.a.createElement("div",{className:"auth__alert-error"},n),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"mt-2"},r.a.createElement("label",{htmlFor:"curp"},"* CURP:"),r.a.createElement("input",{id:"curp",type:"text",className:"form-control",placeholder:"* CURP",name:"curp",value:O,autoComplete:"waa",onChange:m})),r.a.createElement("div",{className:"mt-2"},r.a.createElement("label",{htmlFor:"apPaterno"},"* Paterno:"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Apellido Paterno",id:"apPaterno",name:"apPaterno",value:g,autoComplete:"off",onChange:m})),r.a.createElement("div",{className:"mt-2"},r.a.createElement("label",{htmlFor:"apMaterno"},"* Materno:"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Apellido Materno",id:"apMaterno",name:"apMaterno",value:y,autoComplete:"waa",onChange:m})),r.a.createElement("div",{className:"mt-2"},r.a.createElement("label",{htmlFor:"nombre"},"* Nombre:"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Nombre",id:"nombre",name:"nombre",value:A,autoComplete:"off",onChange:m})),r.a.createElement("div",{className:"mt-2"},r.a.createElement("label",{htmlFor:"rfc"},"* RFC:"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* RFC",id:"rfc",name:"rfc",value:x,autoComplete:"off",onChange:m}))),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"mt-2"},r.a.createElement("label",{htmlFor:"direccion"},"* Direcci\xf3n:"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Direccion",id:"direccion",name:"direccion",value:C,autoComplete:"waa",onChange:m})),r.a.createElement("div",{className:"mt-2"},r.a.createElement("label",{htmlFor:"estado"},"* Estado:"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Estado",id:"estado",name:"estado",value:P,autoComplete:"waa",onChange:m})),r.a.createElement("div",{className:"mt-2"},r.a.createElement("label",{htmlFor:"municipio"},"* Municipio:"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Municipio",id:"municipio",name:"municipio",value:S,autoComplete:"waa",onChange:m})),r.a.createElement("div",{className:"mt-2"},r.a.createElement("label",{htmlFor:"cp"},"* C.P:"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* CP",id:"cp",name:"cp",value:j,autoComplete:"waa",onChange:m})),r.a.createElement("div",{className:"mt-2"},r.a.createElement("label",{htmlFor:"telefono"},"* Tel\xe9fono:"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Telefono",id:"telefono",name:"telefono",value:R,autoComplete:"off",onChange:m})))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-12 d-flex align-items-baseline pt-2"},r.a.createElement("span",null,"*"),r.a.createElement("div",{className:"px-4"},r.a.createElement("input",{type:"radio",id:"masculino",name:"genero",value:"MASCULINO",onChange:m,checked:"MASCULINO"===w}),r.a.createElement("span",null," "),r.a.createElement("label",{htmlFor:"masculino"}," Masculino")),r.a.createElement("div",{className:"px-4"},r.a.createElement("input",{type:"radio",id:"femenino",name:"genero",value:"FEMENINO",onChange:m,checked:"FEMENINO"===w}),r.a.createElement("span",null," "),r.a.createElement("label",{htmlFor:"femenino"}," Femenino")),r.a.createElement("div",{className:"px-4"},r.a.createElement("input",{type:"radio",id:"femenino",name:"genero",value:"MORAL",onChange:m,checked:"MORAL"===w}),r.a.createElement("span",null," "),r.a.createElement("label",{htmlFor:"femenino"}," Persona Moral")),"MORAL"===w&&r.a.createElement("div",{className:"d-flex"},r.a.createElement("label",{htmlFor:"indice"},"Subindice:"),r.a.createElement("input",{type:"text",className:"form-control ml-3",placeholder:"Subindice",id:"indice",name:"indice",value:z,autoComplete:"waa",onChange:m})))),r.a.createElement("div",{className:"row d-flex justify-content-center pt-3"},r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary"},r.a.createElement("i",{className:"far fa-save"}),r.a.createElement("span",null," Guardar")))))},po=function(){var e=Object(n.useReducer)(ro,{inputValue:"",campo:"",productores:[],productorSelected:null,openEditModal:!1,msgError:null}),a=Object(dt.a)(e,2),t=a[0],o=a[1],c=t.inputValue,l=t.campo,i=t.productores,s=t.productorSelected,u=t.openEditModal,d=t.msgError,m=function(){var e=Object(ut.a)(st.a.mark((function e(){var a;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.length){e.next=5;break}return e.next=3,no(c,l);case 3:a=e.sent,o({type:"setProductores",payload:a});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(e){o({type:"setProductorSelected",payload:e})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("h4",null,"Productores"),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"palabra"},"PARAMETRO DE BUSQUEDA:"),r.a.createElement("input",{type:"text",className:"form-control",name:"palabra",id:"palabra",autoComplete:"off",value:c,onChange:function(e){var a=e.target;o({type:"setInput",payload:a.value})},onKeyUp:function(e){"Enter"===e.key&&m()}})),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("label",{htmlFor:"campo"},"BUSCAR EN:"),r.a.createElement("div",{className:"d-flex"},r.a.createElement("select",{name:"campo",id:"campo",type:"text",value:l,onChange:function(e){var a=e.target;o({type:"setSelect",payload:a.value})},className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),$r.map((function(e){return e.search?r.a.createElement("option",{key:e.id,value:e.id},e.header):r.a.createElement("option",{key:e.id,style:{display:"none"}})}))),r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:m},r.a.createElement("i",{className:"fas fa-search"}))))))),i.length>0&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(Rn,{title:0===i.length?"No se encontraron usuarios":"Usuarios",columns:Ln,data:i,simpleSetFunction:p})),s&&r.a.createElement("div",{className:"col-sm-4"},r.a.createElement(lo,{productor:s,dispatch:o,reload:m}))),u&&r.a.createElement(mo,{openEditModal:u,productor:s,msgError:d,dispatch:o,reload:m,resetProductor:p}))},fo=function(){var e=Object(l.c)((function(e){return e.entidades})),a=e.usuarios,t=e.usuario,o=Object(l.c)((function(e){return e.auth})).privilegios,c=Object(l.b)();Object(n.useEffect)((function(){c(br()),c(pr())}),[c]);var i=[];a&&(i=Object.values(a));var s=Object(n.useState)(!1),u=Object(dt.a)(s,2),d=u[0],m=u[1],p=function(){m(!d)},f=Object(n.useState)({openModal:!1,constancySaved:!1,constancia:{}}),E=Object(dt.a)(f,2),b=E[0],v=E[1],h=b.openModal,N=b.constancia,O=b.constancySaved;return r.a.createElement("div",{className:"mt-5"},r.a.createElement("h4",null,"Consulta en padron de usuarios"),r.a.createElement("div",{className:"row mt-2 d-flex justify-content-start"},r.a.createElement("div",{className:"col-sm-1 mt-3"},o.accesoGlobal&&(d?r.a.createElement("button",{onClick:p,className:"btn btn-primary mr-3"},"Global"):r.a.createElement("button",{onClick:p,className:"btn btn-outline-primary mr-3"},"Global"))),r.a.createElement(Or,{global:d}),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement(Br,null))),a&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8 mb-3"},r.a.createElement(Rn,{title:0===i.length?"No se encontraron usuarios":"Usuarios",columns:zn,data:i,setFunction:fr})),r.a.createElement("div",{className:"col-sm-4"},t&&r.a.createElement(yr,{setModalState:v}))),r.a.createElement("div",{className:"mt-5"}),o.generarConstancias&&r.a.createElement(Xr,{modalState:b,setModalState:v,className:"mt-5"}),r.a.createElement("div",{className:"mt-5"}),o.actualizarPadron&&r.a.createElement("div",{className:"border border-info rounded p-3 mt-3"},r.a.createElement("h3",{className:"row d-flex justify-content-center"},"Actualizar padron de usuarios y reacomodos"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 mt-3 mb-3"},r.a.createElement(Lr,null)),r.a.createElement("div",{className:"col-sm-6 mt-3 mb-3"},r.a.createElement(kr,null)))),o.editarProductores&&r.a.createElement("div",{className:"mt-4"},r.a.createElement(po,null)),h&&r.a.createElement(Jr,{openModal:h,constancia:N,constancySaved:O,setModalState:v}),r.a.createElement("br",null))},Eo=t(15),bo=t.n(Eo),vo=function(e){return{type:re,payload:e}},ho=function(){return{type:y}},No=function(){return{type:le}},Oo=function(){return{type:ie}},go=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n,r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=[],["clave","nombre"].forEach((function(e){n.push(ft.a.collection("cultivos").orderBy(e).startAt(a).endAt(a+"\uf8ff").get()),n.push(ft.a.collection("cultivos").where(e,"==",Number(a)).get())})),e.next=6,Promise.all(n);case 6:return e.sent.forEach((function(e){e.forEach((function(e){switch(t){case"nuevo":0!==e.data().clave&&r.push(Object(u.a)({id:e.id},e.data()));break;default:r.push(Object(u.a)({id:e.id},e.data()))}}))})),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),yo=function(){return{type:x}},Ao=function(){return{type:C}},xo=function(){return{type:P}},Co=function(e,a){return function(){var t=Object(ut.a)(st.a.mark((function t(n){var r,o;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,go(e,"nuevo");case 2:r=t.sent,o=[],r.forEach((function(e){o.push(Object(u.a)(Object(u.a)({},e),{},{modulo:a}))})),n(So(o));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},So=function(e){return{type:j,payload:e}},Po=function(e){return{type:R,payload:e}},jo=function(){var e=Object(ut.a)(st.a.mark((function e(a,t,n){var r,o,c;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("permisos").doc(a).collection("modulos").doc("Modulo-".concat(t)).collection("permisosPorCultivo").doc(n).get();case 2:return r=e.sent,o=Object(u.a)({},r.data()),c={gravedadNormal:o.hasOwnProperty("gravedadNormal")?o.gravedadNormal:0,gravedadExtra:o.hasOwnProperty("gravedadExtra")?o.gravedadExtra:0,pozoNormal:o.hasOwnProperty("pozoNormal")?o.pozoNormal:0,pozoExtra:o.hasOwnProperty("pozoExtra")?o.pozoExtra:0,pozoParticularNormal:o.hasOwnProperty("pozoParticularNormal")?o.pozoParticularNormal:0,pozoParticularExtra:o.hasOwnProperty("pozoParticularExtra")?o.pozoParticularExtra:0},e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),Ro=function(e){return function(){var a=Object(ut.a)(st.a.mark((function a(t){var n,r;return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Xn();case 2:return n=a.sent,a.next=5,jo(n,e.modulo,"".concat(e.clave,"-").concat(e.nombre));case 5:r=a.sent,t(wo(Object(u.a)(Object(u.a)({},e),{},{superficiePrevia:r}))),Qn("superficieInput");case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},wo=function(e){return{type:I,payload:e}},Io=function(){return{type:z}},zo=function(e){return Qn("productorInput"),{type:D,payload:e}},Do=function(){return{type:L}},Lo=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("productores").orderBy("apPaterno").startAt(a).endAt(a+"\uf8ff").get();case 2:return t=e.sent,n=[],t.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),To=function(){return{type:X}},ko=function(e){return{type:Q,payload:e}},Mo=function(e){return Qn("variedadInput"),{type:$,payload:e}},Uo=function(){return{type:ee}},Fo=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t,n,r,o,c;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"ALGODONERO"===(t={idUsuarioSelected:a.idUsuarioSelected,cuenta:a.cuenta,usuario:a.usuario,supDerecho:a.supDerecho,lote:a.lote,localidad:a.nombreLocalidad,nombreLocalidad:a.nombreLocalidad,tipoLocalidad:a.tipoLocalidad,claveLocalidad:a.claveLocalidad,municipio:a.municipio,estado:a.estado,modulo:a.modulo,zona:a.zona,seccion:a.seccion,canal:a.canal,toma:a.toma,sistema:a.sistema,idProductorSelected:a.idProductorSelected,nombreProductor:a.nombreProductor,rfcProductor:a.rfcProductor,curpProductor:a.curpProductor?a.curpProductor:"",idCultivoSelected:a.idCultivoSelected,nombreCultivo:a.nombreCultivo,claveCultivo:a.claveCultivo,subciclo:a.subciclo,cuotaCultivo:a.cuotaCultivo,supPrevia:a.supPrevia,tipo:a.tipo,ciclo:a.ciclo,numeroPermiso:a.numeroPermiso,fechaEmicion:bo()(a.fechaEmicion).toDate(),fechaLimite:bo()(a.fechaLimite).toDate(),vigencia:bo()(a.vigencia).toDate(),variedad:a.variedad,supAutorizada:a.supAutorizada,fuenteCredito:a.fuenteCredito,latitud:a.latitud,longitud:a.longitud,cultivoAnterior:a.cultivoAnterior,idCultivoAnteriorSelected:a.idCultivoAnteriorSelected,claveCultivoAnterior:a.claveCultivoAnterior,observaciones:a.observaciones,uid:a.uid,name:a.name,dotacionGravedad:a.dotacionGravedad,dotacionPozo:a.dotacionPozo,titular:a.titular,transferencia:a.transferencia,estadoPermiso:a.estadoPermiso,reacomodo:a.reacomodo?a.reacomodo:"",direccion:a.direccion}).nombreCultivo&&(t.tecnico="sinAsignar",t.desfoliado=!1,t.cosechado=!1,t.desvarado=!1,t.disqueado=!1,t.desarraigado=!1,t.superficieMapeada=0,t.pagado=!1,t.constanciaFitosanitaria=!1),n=ft.a.collection("permisos").doc(t.ciclo).collection("modulos").doc("Modulo-".concat(t.modulo)).collection("permisosPorCultivo").doc("".concat(t.claveCultivo,"-").concat(t.nombreCultivo)),r=ft.a.collection("permisos").doc(t.ciclo).collection("modulos").doc("Modulo-".concat(t.modulo)).collection("permisos").doc(t.numeroPermiso),o=ft.a.collection("permisos").doc(t.ciclo).collection("modulos").doc("Modulo-".concat(t.modulo)),e.prev=5,e.next=8,ft.a.runTransaction(function(){var e=Object(ut.a)(st.a.mark((function e(c){var l,i;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get(r);case 2:return l=e.sent,e.next=5,c.get(n);case 5:if(i=e.sent,!l.exists){e.next=11;break}throw Nt.a.fire("El permiso ya existe","Est\xe1 intentando sobreescribir un permiso ya existente, verifique su conexi\xf3n.","error"),new Error("El permiso ya existe!");case 11:if(c.set(r,t),c.update(o,{numeroPermisosModulo:Hr.a.firestore.FieldValue.increment(1),superficieModulo:Hr.a.firestore.FieldValue.increment(a.supAutorizada)}),!i.exists){e.next=30;break}e.t0=a.sistema,e.next="Gravedad"===e.t0?17:"Pozo Federal"===e.t0?20:"Pozo Particular"===e.t0?23:26;break;case 17:return"normal"===a.tipo&&c.update(n,{numeroPermisos:Hr.a.firestore.FieldValue.increment(1),superficie:Hr.a.firestore.FieldValue.increment(a.supAutorizada),gravedadNormal:Hr.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&c.update(n,{numeroPermisos:Hr.a.firestore.FieldValue.increment(1),superficie:Hr.a.firestore.FieldValue.increment(a.supAutorizada),gravedadExtra:Hr.a.firestore.FieldValue.increment(a.supAutorizada)}),e.abrupt("break",28);case 20:return"normal"===a.tipo&&c.update(n,{numeroPermisos:Hr.a.firestore.FieldValue.increment(1),superficie:Hr.a.firestore.FieldValue.increment(a.supAutorizada),pozoNormal:Hr.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&c.update(n,{numeroPermisos:Hr.a.firestore.FieldValue.increment(1),superficie:Hr.a.firestore.FieldValue.increment(a.supAutorizada),pozoExtra:Hr.a.firestore.FieldValue.increment(a.supAutorizada)}),e.abrupt("break",28);case 23:return"normal"===a.tipo&&c.update(n,{numeroPermisos:Hr.a.firestore.FieldValue.increment(1),superficie:Hr.a.firestore.FieldValue.increment(a.supAutorizada),pozoParticularNormal:Hr.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&c.update(n,{numeroPermisos:Hr.a.firestore.FieldValue.increment(1),superficie:Hr.a.firestore.FieldValue.increment(a.supAutorizada),pozoParticularExtra:Hr.a.firestore.FieldValue.increment(a.supAutorizada)}),e.abrupt("break",28);case 26:return console.log("Sistema de riego indefinido"),e.abrupt("break",28);case 28:e.next=44;break;case 30:e.t1=a.sistema,e.next="Gravedad"===e.t1?33:"Pozo Federal"===e.t1?36:"Pozo Particular"===e.t1?39:42;break;case 33:return"normal"===a.tipo&&c.set(n,{subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:Hr.a.firestore.FieldValue.increment(1),superficie:Hr.a.firestore.FieldValue.increment(a.supAutorizada),gravedadNormal:Hr.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&c.set(n,{subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:Hr.a.firestore.FieldValue.increment(1),superficie:Hr.a.firestore.FieldValue.increment(a.supAutorizada),gravedadExtra:Hr.a.firestore.FieldValue.increment(a.supAutorizada)}),e.abrupt("break",44);case 36:return"normal"===a.tipo&&c.set(n,{subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:Hr.a.firestore.FieldValue.increment(1),superficie:Hr.a.firestore.FieldValue.increment(a.supAutorizada),pozoNormal:Hr.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&c.set(n,{subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:Hr.a.firestore.FieldValue.increment(1),superficie:Hr.a.firestore.FieldValue.increment(a.supAutorizada),pozoExtra:Hr.a.firestore.FieldValue.increment(a.supAutorizada)}),e.abrupt("break",44);case 39:return"normal"===a.tipo&&c.set(n,{subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:Hr.a.firestore.FieldValue.increment(1),superficie:Hr.a.firestore.FieldValue.increment(a.supAutorizada),pozoParticularNormal:Hr.a.firestore.FieldValue.increment(a.supAutorizada)}),"extra"===a.tipo&&c.set(n,{subciclo:t.subciclo,estado:t.estado,modulo:t.modulo,clave:a.claveCultivo,cultivo:a.nombreCultivo,numeroPermisos:Hr.a.firestore.FieldValue.increment(1),superficie:Hr.a.firestore.FieldValue.increment(a.supAutorizada),pozoParticularExtra:Hr.a.firestore.FieldValue.increment(a.supAutorizada)}),e.abrupt("break",44);case 42:return console.log("Sistema de riego indefinido"),e.abrupt("break",44);case 44:return e.abrupt("return",!0);case 45:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 8:return(c=e.sent)&&Nt.a.fire("Permiso Guardado","Se registr\xf3 con \xe9xito el nuevo permiso de riego.","success"),e.abrupt("return",c);case 13:return e.prev=13,e.t0=e.catch(5),Nt.a.fire("Error de conexi\xf3n","Por favor intente m\xe1s tarde.","error"),console.error(e.t0),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(a){return e.apply(this,arguments)}}(),Go={content:{width:"1125px",height:"1500px",overflow:"auto"}},Bo=function(e){var a=e.data,t=e.isNew,n=Object(l.c)((function(e){return e.altaPermisos})),o=n.openPrintPermisoModal,c=n.enableSaveButton,i=n.enablePrintButton,s=n.enEspera,u=Object(l.b)(),d=function(){u({type:A}),u({type:oe}),u(Io()),u(Do()),u(Uo()),u(br()),u(Oo()),u({type:de}),u(No())},m=function(){var e=Object(ut.a)(st.a.mark((function e(){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u({type:se}),u({type:ce}),e.next=4,Fo(a);case 4:t=e.sent,console.log("isSave en lugar: ",t),t?(u(No()),u({type:ue})):(u(No()),u(Oo()));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){window.print()},f=function(e){return"Gravedad"===e?a.dotacionGravedad:"Pozo Federal"===e||"Pozo Particular"===e?a.dotacionPozo:void 0},E=function(){switch(a.modulo){case"UNI01":case"UNI02":case"UNI03":return 9===a.zona?"9A":92===a.zona?"9B":a.zona;default:return a.zona}};return r.a.createElement(qr.a,{isOpen:o,onRequestClose:d,style:Go,closeTimeoutMS:200,className:"printModal pl-5 pr-5 pb-0 mb-0",overlayClassName:"modal-fondo"},"activo"===a.estadoPermiso?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"watermark rotar"},a.estadoPermiso),r.a.createElement("div",{className:"row mt-5"}),r.a.createElement("div",{className:"row mt-5 d-flex justify-content-center"},r.a.createElement("div",{className:"col-3 d-flex flex-column justify-content-center"}),r.a.createElement("div",{className:"col-6 d-flex flex-column justify-content-center"},r.a.createElement("h2",{className:"d-flex justify-content-center"},r.a.createElement("b",null,"Ciclo Agr\xedcola ",a.ciclo))),r.a.createElement("div",{className:"col-3 d-flex flex-column justify-content-center"},r.a.createElement("div",{className:"d-flex justify-content-center"}),r.a.createElement("div",{className:"border border-dark rounded d-flex justify-content-center"},r.a.createElement("h2",{className:"m-0"},r.a.createElement("b",null,"Folio: ",a.numeroPermiso))),r.a.createElement("div",{className:"d-flex justify-content-center"},bo()(a.fechaEmicion).format("DD/MM/YYYY")))),r.a.createElement("div",{className:"row mt-4"}),r.a.createElement("div",{className:"row mt-5"}),r.a.createElement("h3",{className:"row d-flex justify-content-center"},r.a.createElement("div",null,a.direccion)),r.a.createElement("div",{className:"row m-3 d-flex flex-column justify-content-center border border-dark rounded"},r.a.createElement("div",{className:"d-flex justify-content-center "},"DATOS DEL USUARIO"),r.a.createElement("div",{className:"d-flex justify-content-center border-top border-dark p-1 pb-0"},r.a.createElement("div",null,"El/la C.",r.a.createElement("b",null," ",a.usuario)," con cuenta: ",r.a.createElement("b",null,a.cuenta)," tiene un derecho normal de ",r.a.createElement("b",null,a.supDerecho," "),"hect\xe1reas del lote: ",r.a.createElement("b",null,a.lote)," en la colonia/ejido ",r.a.createElement("b",null,a.nombreLocalidad),", ",r.a.createElement("b",null,a.municipio),", ",r.a.createElement("b",null,a.estado),". M\xf3dulo ",r.a.createElement("b",null,E()),", secci\xf3n"," ",r.a.createElement("b",null,a.seccion)," del canal ",r.a.createElement("b",null,a.canal)," toma ",r.a.createElement("b",null,a.toma)," con sistema de riego por ",r.a.createElement("b",null,a.sistema),".",r.a.createElement("br",null),a.reacomodo&&r.a.createElement("b",null," Reacomodo: ",a.reacomodo)))),r.a.createElement("div",{className:"row m-3 d-flex flex-column justify-content-center"},r.a.createElement("p",{clssName:"paragraph"},"Con base en el Acuerdo Nacional de Colaboraci\xf3n entre la Secretar\xeda de Agricultura, Ganader\xeda, Desarrollo Rural, Pesca y Alimentaci\xf3n y el Acuerdo de Concertaci\xf3n entre la SAGARPA, CONAGUA, Distrito de Riego R\xedo Colorado y la Sociedad de Responsabilidad Limitada con el objetivo de regular en forma ordenada la expedici\xf3n de Permisos \xdanicos de Siembra con Derechos de Agua, y con fundamento en los art\xedculos 66, 67, 68, 69 y 69 Bis de la Ley de Aguas Nacionales; Reglamento de la Ley de Sanidad Fitopecuaria de los Estados Unidos Mexicanos, en materia de sanidad vegetal, Normas Mexicanas, NOM-026-FITO-1995, que establece el control de plagas de algodonero, NOM-001-FITO-2001, para el manejo y eliminaci\xf3n de focos de infecci\xf3n de plagas, mediante el reordenamiento de fechas de siembra y destrucci\xf3n de residuos. Se otorga el Permiso \xdanico de Siembra para que establezca exclusivamente el cultivo y superficie que se indica, apercibiendose que se puede suspender el servicio de riego si se siembra superficie adicional o cultivo diferente al autorizado en este permiso.")),r.a.createElement("div",{className:"row m-3 mt-0 d-flex"},r.a.createElement("div",{className:"col-4 d-flex flex-column border border-dark rounded p-0"},r.a.createElement("div",{className:"d-flex justify-content-center "},"DETALLES DEL CULTIVO"),r.a.createElement("div",{className:"border-top border-dark p-1"},"Tipo de permiso: ",r.a.createElement("b",null,function(e){var a="";return e&&(a=e),a.toUpperCase()}(a.tipo)),r.a.createElement("br",null),"Cultivo:"," ",r.a.createElement("b",null,a.nombreCultivo," (Clave: ",a.claveCultivo,")"),r.a.createElement("br",null),"Subciclo: ",r.a.createElement("b",null,a.subciclo),r.a.createElement("br",null),"Superficie autorizada: ",r.a.createElement("b",null,a.supAutorizada," ha"),r.a.createElement("br",null),"Fecha l\xedmite de siembra: ",r.a.createElement("b",null,bo()(a.fechaLimite).format("DD/MM/YYYY")),r.a.createElement("br",null))),r.a.createElement("div",{className:"col-1"}),r.a.createElement("div",{className:"col-7 d-flex flex-column border border-dark rounded"},r.a.createElement("div",{className:"d-flex justify-content-center "},"SUPERFICIE Y DOTACI\xd3N VOLUM\xc9TRICA"),r.a.createElement("div",{className:"row border-top border-dark d-flex text-dotacion"},r.a.createElement("div",{className:"col-3 border"},r.a.createElement("div",null,"Descripci\xf3n")),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,"Derecho de riego")),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,"Utilizada Previamente")),r.a.createElement("div",{className:"col-3 border"},r.a.createElement("div",null,"Autorizada en este permiso")),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,"Disponible"))),r.a.createElement("div",{className:"row border-top d-flex text-dotacion"},r.a.createElement("div",{className:"col-3 border"},r.a.createElement("div",null,"Hect\xe1reas")),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,a.supDerecho)),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,a.supPrevia)),r.a.createElement("div",{className:"col-3 border"},r.a.createElement("div",null,a.supAutorizada)),r.a.createElement("div",{className:"col-2 border"},r.a.createElement("div",null,Xt(a.supDerecho-a.supPrevia-a.supAutorizada,3)))),r.a.createElement("div",{className:"row border-top d-flex text-dotacion"},r.a.createElement("div",{className:"col-3 border p-0"},r.a.createElement("div",{className:"p-0 ml-2",style:{fontSize:12}},"l.p.s./24 hrs en Parcela")),r.a.createElement("div",{className:"col-2 border align-self-start"},r.a.createElement("div",null,Xt(a.supDerecho*f(a.sistema),3))),r.a.createElement("div",{className:"col-2 border align-self-start"},r.a.createElement("div",null,Xt(a.supPrevia*f(a.sistema),3))),r.a.createElement("div",{className:"col-3 border align-self-start"},r.a.createElement("div",null,Xt(a.supAutorizada*f(a.sistema),3))),r.a.createElement("div",{className:"col-2 border align-self-start"},r.a.createElement("div",null,Xt((a.supDerecho-a.supPrevia-a.supAutorizada)*f(a.sistema),3))),r.a.createElement("div",{className:""},r.a.createElement("div",{className:"ml-2",style:{fontSize:12}},"Dotaci\xf3n en condiciones normales. No incluye ajuste por reducciones establecidas en el acta 323 de la CILA que deber\xe1 ser aplicado por el M\xf3dulo de Riego."))))),r.a.createElement("div",{className:"row m-3 d-flex"},r.a.createElement("div",{className:"col-4 d-flex flex-column border border-dark rounded p-0"},r.a.createElement("div",{className:"d-flex justify-content-center "},"DATOS COMPLEMENTARIOS"),r.a.createElement("div",{className:"border-top border-dark p-1"},"Cultivo Anterior: ",r.a.createElement("b",null,a.cultivoAnterior),r.a.createElement("br",null),"Fuente de cr\xe9dito: ",r.a.createElement("b",null,a.fuenteCredito),r.a.createElement("br",null),"Variedad: ",r.a.createElement("b",null,a.variedad),r.a.createElement("br",null),"Productor:"," ",r.a.createElement("b",null,a.nombreProductor," (",a.curpProductor,")"),r.a.createElement("br",null))),r.a.createElement("div",{className:"col-1"}),r.a.createElement("div",{className:"col-7 d-flex flex-column p-0"},r.a.createElement("div",{className:"border border-dark rounded"},r.a.createElement("div",{className:"d-flex justify-content-center "},"OBSERVACIONES"),r.a.createElement("div",{className:"border-top border-dark d-flex text-dotacion p-1"},r.a.createElement("p",null,a.observaciones))),r.a.createElement("div",{className:"border border-dark rounded mt-3"},r.a.createElement("div",{className:"d-flex justify-content-center "},"TRANSFERENCIA"),r.a.createElement("div",{className:"border-top border-dark d-flex text-dotacion p-1"},r.a.createElement("p",null,a.transferencia))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4 d-flex flex-column"},r.a.createElement("div",{className:"border-top border-dark firma d-flex justify-content-center"},"M\xf3dulo"),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("b",null,a.titular)),r.a.createElement("div",{className:"d-flex justify-content-center"},function(){switch(a.modulo){case"UNI01":case"UNI02":case"UNI03":return"ENCARGADO/A";default:return"PRESIDENTE"}}())),r.a.createElement("div",{className:"col-4 d-flex flex-column"},r.a.createElement("div",{className:"border-top border-dark firma d-flex justify-content-center"},"Sanidad Vegetal")),r.a.createElement("div",{className:"col-4 d-flex flex-column"},r.a.createElement("div",{className:"border-top border-dark firma d-flex justify-content-center"},"FIRMA DEL USUARIO"),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("b",null,a.usuario)),r.a.createElement("div",{className:"d-flex justify-content-center"},"Acepto de conformidad"))),r.a.createElement("p",{className:"row m-2"},r.a.createElement("b",null,r.a.createElement("u",null,"ADVERTENCIAS: (1) Es responsabilidad del usuario de este permiso, disponer de la totalidad del volumen adicional requerido por el cultivo a establecer. (2) Para los sistemas de Gravedad y Pozo Federal un derecho de riego de 20 ha. alcanza para regar una superficie sembrada para el cultivo de Trigo = 20ha., Algod\xf3n = 15ha., Alfalfa 13ha., Esparrago = 16ha., y Sorgo forrajero temprano = 18ha."))),r.a.createElement("div",{className:"row m-3 mt-5"},r.a.createElement("div",{className:"col-2"}),r.a.createElement("div",{className:"col-10"},r.a.createElement("div",{className:"row d-flex justify-content-between"},r.a.createElement("div",{className:"border border-dark rounded mt-2 p-2"},"Folio: ",a.numeroPermiso),r.a.createElement("div",{className:"border border-dark rounded mt-2 p-2"},"Bueno por: $ ",Xt(a.cuotaCultivo*a.supAutorizada,3)," pesos M.N.")),r.a.createElement("div",{className:"row"},r.a.createElement("u",null,"Recibimos de El/la C."," ",r.a.createElement("b",null,a.usuario," La cantidad de ",Xt(a.cuotaCultivo*a.supAutorizada,3)," ","pesos M.N.")," ","Por concepto de aportaci\xf3n a las campa\xf1as Fitosanitarias, para el sostenimiento del comit\xe9 Estatal de Sanidad Vegetal.")))),r.a.createElement("div",{className:"row m-3"},r.a.createElement("div",{className:"col-2 d-flex flex-column"}),r.a.createElement("div",{className:"col-10 d-flex flex-column border border-dark rounded p-0"},r.a.createElement("div",{className:"d-flex justify-content-center border-bottom border-dark"},"DATOS DEL USUARIO"),r.a.createElement("p",{className:"m-2"},"El/la C.",r.a.createElement("b",null," ",a.usuario)," con cuenta: ",r.a.createElement("b",null,a.cuenta)," tiene un derecho normal de ",r.a.createElement("b",null,a.supDerecho," "),"hect\xe1reas del lote: ",r.a.createElement("b",null,a.lote)," en la colonia ",r.a.createElement("b",null,a.nombreLocalidad),","," ",r.a.createElement("b",null,a.municipio),", ",r.a.createElement("b",null,a.estado),". M\xf3dulo ",r.a.createElement("b",null,E()),", secci\xf3n"," ",r.a.createElement("b",null,a.seccion)," del canal ",r.a.createElement("b",null,a.canal)," toma ",r.a.createElement("b",null,a.toma)," con sistema de riego por ",r.a.createElement("b",null,a.sistema),"."))),r.a.createElement("div",{className:"row mb-0 pb-0"},r.a.createElement("div",{className:"col-12 d-flex justify-content-center align-items-center pt-2"},c?t?r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary ml-5 d-print-none",onClick:m},r.a.createElement("i",{className:"far fa-save"}),r.a.createElement("span",null," Guardar")):r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none",onClick:p},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")):r.a.createElement(r.a.Fragment,null),s?r.a.createElement("div",{className:"spinner-border border-dark text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):r.a.createElement(r.a.Fragment,null),i?r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none",onClick:p},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")):r.a.createElement(r.a.Fragment,null),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none ml-3",onClick:d},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),r.a.createElement("span",null," Cerrar")))))},Vo=function(e,a,t,n,r){ft.a.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisos").doc(e).update({estadoPermiso:"Cancelado",cuotaCultivo:0,fechaCancelacion:n,apruebaCancelacion:r})},qo=(t(49),function(e,a,t){ft.a.collection("permisos").doc(e).collection("modulos").doc("Modulo-".concat(a)).update({superficieModulo:Hr.a.firestore.FieldValue.increment(-1*t)})}),Yo=function(e,a,t,n,r,o,c){var l=ft.a.collection("permisos").doc(e).collection("modulos").doc("Modulo-".concat(a)).collection("permisosPorCultivo").doc("".concat(t,"-").concat(n));switch(r){case"Gravedad":"normal"===o&&l.update({numeroPermisos:Hr.a.firestore.FieldValue.increment(-1),superficie:Hr.a.firestore.FieldValue.increment(-1*c),gravedadNormal:Hr.a.firestore.FieldValue.increment(-1*c)}),"extra"===o&&l.update({numeroPermisos:Hr.a.firestore.FieldValue.increment(-1),superficie:Hr.a.firestore.FieldValue.increment(-1*c),gravedadExtra:Hr.a.firestore.FieldValue.increment(-1*c)});break;case"Pozo Federal":"normal"===o&&l.update({numeroPermisos:Hr.a.firestore.FieldValue.increment(-1),superficie:Hr.a.firestore.FieldValue.increment(-1*c),pozoNormal:Hr.a.firestore.FieldValue.increment(-1*c)}),"extra"===o&&l.update({numeroPermisos:Hr.a.firestore.FieldValue.increment(-1),superficie:Hr.a.firestore.FieldValue.increment(-1*c),pozoExtra:Hr.a.firestore.FieldValue.increment(-1*c)});break;case"Pozo Particular":"normal"===o&&l.update({numeroPermisos:Hr.a.firestore.FieldValue.increment(-1),superficie:Hr.a.firestore.FieldValue.increment(-1*c),pozoParticularNormal:Hr.a.firestore.FieldValue.increment(-1*c)}),"extra"===o&&l.update({numeroPermisos:Hr.a.firestore.FieldValue.increment(-1),superficie:Hr.a.firestore.FieldValue.increment(-1*c),pozoParticularExtra:Hr.a.firestore.FieldValue.increment(-1*c)});break;default:console.log("Sistema de riego indefinido")}},Ho=function(){var e=Object(ut.a)(st.a.mark((function e(a,t,n){var r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("permisos").doc(n).collection("modulos").doc("Modulo-".concat(t)).collection("permisos").doc(a).get();case 2:return r=e.sent,e.abrupt("return",r.data().estadoPermiso);case 4:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),Zo=function(){var e=Object(l.c)((function(e){return e.permisosScreen})),a=e.preCancelPermits,t=e.permitToCancelSelected,n=Object(l.c)((function(e){return e.auth})).uid,o=a.find((function(e){return e.id===t})),c=o.numeroPermiso,i=o.motivoCancelacion,s=o.modulo,u=o.claveCultivo,d=o.nombreCultivo,m=o.sistema,p=o.tipo,f=o.supAutorizada,E={MODULO:o.modulo,CUENTA:o.cuenta,USUARIO:o.usuario,CULTIVO:o.nombreCultivo,"SUPERFICIE (ha)":o.supAutorizada},b=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual,v=Object(l.b)();return r.a.createElement("div",{className:"border border-info rounded detallePermiso"},r.a.createElement("div",{className:"d-flex bg-light border-info border-bottom rounded-top p-1 justify-content-center font-weight-bold text-secondary pt-3"},r.a.createElement("h5",null,c)),r.a.createElement("div",{className:"m-3"},r.a.createElement("div",{className:"row p-1 pl-2 text-warning"},r.a.createElement("div",{className:"col-4"},"MOTIVO: "),r.a.createElement("div",{className:"col-8"},i)),Object.entries(E).map((function(e){return r.a.createElement("div",{className:"row p-1 pl-2",key:e[0]},r.a.createElement("div",{className:"col-4"},e[0],": "),r.a.createElement("div",{className:"col-8"},e[1]))}))),r.a.createElement("div",{className:"mb-3 d-flex justify-content-center"},r.a.createElement("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){Nt.a.fire({title:"Atenci\xf3n!!",text:"Est\xe1 a punto de cancelar el permiso ".concat(c,", \xbfRealmente desea cancelar este permiso?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then(function(){var e=Object(ut.a)(st.a.mark((function e(a){var r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isConfirmed){e.next=7;break}return e.next=4,Ho(t,s,b);case 4:r=e.sent,console.log("permitStatus en lugar: ",r),"En proceso de cancelaci\xf3n"===r&&(Vo(t,s,b,new Date,n),Yo(b,s,u,d,m,p,f),qo(b,s,f),v(ln(b)),v({type:ge}),Nt.a.fire("Permiso cancelado","Se cancel\xf3 con exito el permiso ".concat(c),"success"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())}},r.a.createElement("i",{className:"fas fa-times"}),r.a.createElement("span",null," Cancelar"))))},Jo=function(){var e=Object(l.c)((function(e){return e.permisosScreen})).preCancelPermits,a=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual,t=Object(l.b)();e||t(ln(a));var n=[];return e&&e.forEach((function(e){n.push(Object(u.a)(Object(u.a)({},e),{},{fechaEmicion:bo()(e.fechaEmicion.toDate()).format("DD/MM/YYYY"),fechaLimite:bo()(e.fechaLimite.toDate()).format("DD/MM/YYYY"),vigencia:bo()(e.vigencia.toDate()).format("DD/MM/YYYY")}))})),r.a.createElement(Rn,{title:"Permisos en proceso de cancelaci\xf3n",columns:Fn,data:n,setFunction:fn})},_o=function(){var e=Object(l.c)((function(e){return e.permisosScreen})).permitToCancelSelected;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(Jo,null)),r.a.createElement("div",{className:"col-sm-4"},e&&r.a.createElement(Zo,null)))},Ko=function(){var e=Object(l.b)(),a=Lt({palabra:""}),t=Object(dt.a)(a,2),o=t[0],c=t[1],i=o.palabra,s=Object(l.c)((function(e){return e.permisosScreen})),d=s.permisos,m=s.permisoSelected,p=Object(l.c)((function(e){return e.auth})),f=p.modulo,E=p.privilegios,b=p.expedicionActivaModulo,v=p.uid,h=Object(l.c)((function(e){return e.auth})).variablesGlobales,N=h.cicloActual,O=h.expedicionActiva;Object(n.useEffect)((function(){e(cn(f,N)),e(sn(f,N)),e(br())}),[e,f,N]);var g,y=function(){i.length>0?e(function(e,a,t){return function(){var n=Object(ut.a)(st.a.mark((function n(r){var o;return st.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,nn(e,a,t);case 2:o=n.sent,r(dn(o));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(i,f,N)):Nt.a.fire("Nada para buscar","Ingrese n\xfamero de permiso, n\xfamero de cuenta o el apellido paterno del usuario.","warning")},A=[];d.forEach((function(e){A.push(Object(u.a)(Object(u.a)({},e),{},{fechaEmicion:bo()(e.fechaEmicion.toDate()).format("DD/MM/YYYY"),fechaLimite:bo()(e.fechaLimite.toDate()).format("DD/MM/YYYY"),vigencia:bo()(e.vigencia.toDate()).format("DD/MM/YYYY")}))})),d.forEach((function(e){e.id===m&&(g=e)}));var x={};void 0!==g&&(x=Object(u.a)(Object(u.a)({},g),{},{fechaEmicion:g.fechaEmicion.toDate(),fechaLimite:g.fechaLimite.toDate(),vigencia:g.vigencia.toDate()}));var C;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"d-flex justify-content-center col-sm-4 p-2"},O&&b&&E.expedirPermisos&&r.a.createElement(xn,null)),r.a.createElement("div",{className:"col-sm-8 d-inline-flex p-2 pr-4"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"N\xfamero de permiso, n\xfamero de cuenta o apellido paterno",name:"palabra",autoComplete:"off",value:i,onChange:c,onKeyUp:function(e){"Enter"===e.key&&y()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:y},r.a.createElement("i",{className:"fas fa-search"})))))),r.a.createElement("div",{className:"row pt-3 pb-4"},r.a.createElement("div",{className:"col-sm-8 pr-0 mt-3"},r.a.createElement(Rn,{title:"Permisos",columns:Fn,data:A,setFunction:pn})),m&&void 0!==g?r.a.createElement("div",{className:"col-sm-4 mt-3"},r.a.createElement("div",{className:"border border-info rounded detallePermiso"},r.a.createElement("div",{className:"d-flex bg-light border-info border-bottom rounded-top p-1 justify-content-center font-weight-bold text-secondary pt-3"},r.a.createElement("h5",null,g.numeroPermiso)),r.a.createElement("div",{className:"row p-1 pl-2 pt-2"},r.a.createElement("div",{className:"col-4"},"CUENTA:"),r.a.createElement("div",{className:"col-8"},g.cuenta)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"USUARIO:"),r.a.createElement("div",{className:"col-8"},g.usuario)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"PRODUCTOR:"),r.a.createElement("div",{className:"col-8"},g.nombreProductor)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"CULTIVO:"),r.a.createElement("div",{className:"col-8"},g.nombreCultivo)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SUBCICLO:"),r.a.createElement("div",{className:"col-8"},g.subciclo)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SUPERFICIE:"),r.a.createElement("div",{className:"col-8"},g.supAutorizada," ha")),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"DOTACION:"),r.a.createElement("div",{className:"col-8"},Xt(("Gravedad"===(C=g.sistema)?g.dotacionGravedad:"Pozo Federal"===C||"Pozo Particular"===C?g.dotacionPozo:void 0)*g.supAutorizada,3)," lts")),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SISTEMA:"),r.a.createElement("div",{className:"col-8"},g.sistema)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"LOCALIDAD:"),r.a.createElement("div",{className:"col-8"},g.localidad)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"LOTE:"),r.a.createElement("div",{className:"col-8"},g.lote)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SECCION:"),r.a.createElement("div",{className:"col-8"},g.seccion)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"MODULO:"),r.a.createElement("div",{className:"col-8"},g.modulo)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"EXPEDICION:"),r.a.createElement("div",{className:"col-8"},bo()(g.fechaEmicion.toDate()).format("DD/MM/YYYY"))),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"FECHA LIMITE:"),r.a.createElement("div",{className:"col-8"},bo()(g.fechaLimite.toDate()).format("DD/MM/YYYY"))),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"VIGENCIA:"),r.a.createElement("div",{className:"col-8"},bo()(g.vigencia.toDate()).format("DD/MM/YYYY"))),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"ESTADO:"),r.a.createElement("div",{className:"col-8"},g.estadoPermiso)),r.a.createElement("div",{className:"row p-1 pl-2 pt-4 pb-4"},r.a.createElement("div",{className:"col-6 d-flex justify-content-center"},r.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:function(){e(ho())}},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir"))),r.a.createElement("div",{className:"col-6 d-flex justify-content-center"},"activo"===g.estadoPermiso&&E.solicitarCancelarPermisos&&r.a.createElement("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){Nt.a.fire({input:"textarea",inputPlaceholder:"Indique la raz\xf3n por la que desea cancelar el permiso",title:"Atenci\xf3n!!",text:"Est\xe1 a punto de cancelar el permiso ".concat(g.numeroPermiso,", \xbfRealmente desea cancelar este permiso?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then((function(a){var t=a.isConfirmed,n=a.value;t&&(n.length>0?(!function(e,a,t,n,r){ft.a.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisos").doc(e).update({estadoPermiso:"En proceso de cancelaci\xf3n",motivoCancelacion:n,solicitanteCancelacion:r,fechaSolicitudCancelacion:new Date})}(m,f,N,n,v),e(cn(f,N)),Nt.a.fire("Solicitud recibida","Se inici\xf3 el proceso de cancelaci\xf3n para el permiso ".concat(g.numeroPermiso),"success")):Nt.a.fire("Error","Indique la raz\xf3n por la que desea cancelar el permiso","warning"))}))}},r.a.createElement("i",{className:"fas fa-times"}),r.a.createElement("span",null," Cancelar")))))):r.a.createElement("div",{className:"col-sm-4 mt-3"},r.a.createElement("div",{className:"border border-info rounded detallePermiso"},r.a.createElement($t,null)))),E.cancelarPermisos&&r.a.createElement(_o,null),r.a.createElement(Bo,{data:x,isNew:!1}))},Xo={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};qr.a.setAppElement("#root");var Qo=function(){var e,a=Object(l.b)(),t=Object(l.c)((function(e){return e.altaPermisos})),n=t.openCultivosModal,o=t.cultivos;e=Object.values(o);return r.a.createElement(qr.a,{isOpen:n,onRequestClose:function(){a(Ao())},style:Xo,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement(Rn,{title:0===e.length?"No se encontraron cultivos":"Cultivos",columns:Tn,data:e,setFunction:Ro,closeFunction:Ao}))},Wo={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};qr.a.setAppElement("#root");var $o=function(){var e,a=Object(l.b)(),t=Object(l.c)((function(e){return e.altaPermisos})),n=t.openUsuariosModal,o=t.usuarios;e=Object.values(o);return r.a.createElement(qr.a,{isOpen:n,onRequestClose:function(){a(ur())},style:Wo,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement(Rn,{title:0===e.length?"No se encontraron usuarios":"Usuarios",columns:zn,data:e,setFunction:fr,closeFunction:ur}))},ec=function(){return{type:te}},ac={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};qr.a.setAppElement("#root");var tc=function(){var e,a=Object(l.b)(),t=Object(l.c)((function(e){return e.altaPermisos})),n=t.openProductoresModal,o=t.productores;e=Object.values(o);return r.a.createElement(qr.a,{isOpen:n,onRequestClose:function(){a(To())},style:ac,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement(Rn,{title:0===e.length?"No se encontraron productores":"Productores",columns:Ln,data:e,setFunction:Mo,closeFunction:To}),r.a.createElement("div",{className:"row d-flex justify-content-center pt-3"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:function(){a(To()),a({type:ae})}},r.a.createElement("span",null,"Registrar nuevo productor "),r.a.createElement("i",{className:"fas fa-plus"}))))},nc={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};qr.a.setAppElement("#root");var rc=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.altaPermisos})).isOpenNuevoProductorModal,t=Object(l.c)((function(e){return e.ui})).msgError,n=Object(l.c)((function(e){return e.auth})).uid,o=Nr(),c=Object(dt.a)(o,2),i=c[0],s=c[1],d=i.apPaterno,m=void 0===d?"":d,p=i.direccion,f=void 0===p?"":p,E=i.apMaterno,b=void 0===E?"":E,v=i.estado,h=void 0===v?"":v,N=i.nombre,O=void 0===N?"":N,g=i.municipio,y=void 0===g?"":g,A=i.rfc,x=void 0===A?"":A,C=i.cp,S=void 0===C?"":C,P=i.genero,j=void 0===P?"":P,R=i.telefono,w=void 0===R?"":R,I=i.curp,z=void 0===I?"":I,D=function(){return 0===m.trim().length?(e(Et("Se requiere apellido paterno")),!1):0===f.trim().length?(e(Et("Se requiere direccion")),!1):0===b.trim().length?(e(Et("Se requiere apellido materno")),!1):0===h.trim().length?(e(Et("Se requiere estado")),!1):0===O.trim().length?(e(Et("Se requiere nombre")),!1):0===y.trim().length?(e(Et("Se requiere municipio")),!1):z.trim().length<18||z.trim().length>18?(e(Et("CURP no valido")),!1):0===j.length?(e(Et("Se requiere genero")),!1):"MORAL"===j&&12!==x.trim().length||"MORAL"!==j&&13!==x.trim().length?(e(Et("RFC no valido")),!1):S.trim().length<5?(e(Et("Codigo postal no valido")),!1):w.replace(/ /g,"").length<10?(e(Et("Telefono no valido")),!1):(e(bt()),!0)};return r.a.createElement(qr.a,{isOpen:a,onRequestClose:function(){e(ec()),e(bt())},style:nc,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement("div",{className:"row m-3 d-flex justify-content-center"},r.a.createElement("h1",null,"Registro de nuevo productor")),r.a.createElement("div",{className:"row m-3 d-flex justify-content-center"},"* Campos obligatorios"),r.a.createElement("form",{className:"container pb-4",autoComplete:"waa",onSubmit:function(a){var t;a.preventDefault(),D()&&e((t=Object(u.a)(Object(u.a)({},i),{},{apPaterno:m.toUpperCase(),apMaterno:b.toUpperCase(),nombre:O.toUpperCase(),direccion:f.toUpperCase(),estado:h.toUpperCase(),municipio:y.toUpperCase(),rfc:x.toUpperCase(),curp:z.toUpperCase(),telefono:w.replace(/ /g,""),uid:n,fechaRegistro:new Date}),function(e){var a=ft.a.collection("productores").doc(t.curp);"MORAL"===t.genero&&(a=ft.a.collection("productores").doc("".concat(t.curp,"-PM"))),a.get().then((function(n){if(n.exists){var r=n.data(),o=r.apPaterno,c=r.apMaterno,l=r.nombre,i=r.curp;Nt.a.fire("El CURP ".concat(i," ya existe!"),"NOMBRE: ".concat(o," ").concat(c," ").concat(l),"error")}else a.set(t).then((function(){Nt.a.fire("Productor registrado","Se registr\xf3 con \xe9xito el nuevo productor.","success"),e(ec())}))}))}))}},t&&r.a.createElement("div",{className:"auth__alert-error"},t),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Apellido Paterno",name:"apPaterno",value:m,autoComplete:"off",onChange:s})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Direccion",name:"direccion",value:f,autoComplete:"waa",onChange:s}))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Apellido Materno",name:"apMaterno",value:b,autoComplete:"waa",onChange:s})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Estado",name:"estado",value:h,autoComplete:"waa",onChange:s}))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Nombre",name:"nombre",value:O,autoComplete:"off",onChange:s})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Municipio",name:"municipio",value:y,autoComplete:"waa",onChange:s}))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* CURP",name:"curp",value:z,autoComplete:"waa",onChange:s})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* CP",name:"cp",value:S,autoComplete:"waa",onChange:s}))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* RFC",name:"rfc",value:x,autoComplete:"off",onChange:s})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"* Telefono",name:"telefono",value:w,autoComplete:"off",onChange:s}))),r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-sm-12 d-flex align-items-baseline pt-2"},r.a.createElement("span",null,"*"),r.a.createElement("div",{className:"px-4"},r.a.createElement("input",{type:"radio",id:"masculino",name:"genero",value:"MASCULINO",onChange:s}),r.a.createElement("span",null," "),r.a.createElement("label",{htmlFor:"masculino"}," Masculino")),r.a.createElement("div",{className:"px-4"},r.a.createElement("input",{type:"radio",id:"femenino",name:"genero",value:"FEMENINO",onChange:s}),r.a.createElement("span",null," "),r.a.createElement("label",{htmlFor:"femenino"}," Femenino")),r.a.createElement("div",{className:"px-4"},r.a.createElement("input",{type:"radio",id:"femenino",name:"genero",value:"MORAL",onChange:s}),r.a.createElement("span",null," "),r.a.createElement("label",{htmlFor:"femenino"}," Persona Moral")))),r.a.createElement("div",{className:"row d-flex justify-content-center pt-3"},r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary"},r.a.createElement("i",{className:"far fa-save"}),r.a.createElement("span",null," Guardar")))))},oc=function(){var e=Object(l.b)();Object(n.useEffect)((function(){e(Io()),e(Ao())}),[e]);var a=function(){o(),E.length>0?e(yo()):Nt.a.fire("Nada para buscar","Ingrese nombre del cultivo","warning")},t=Object(l.c)((function(e){return e.auth})).claveEntidad,o=function(){e(Co(E.toUpperCase(),t))},c=Object(l.c)((function(e){return e.altaPermisos})),i=c.idCultivoSelected,s=c.nombreCultivo,u="";i&&(u=s);var d=Nr({cultivo:""}),m=Object(dt.a)(d,2),p=m[0],f=m[1],E=p.cultivo;return r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},r.a.createElement("span",{className:"text-warning"},"* "),"Cultivo:"," "),r.a.createElement("label",{className:""},u," "),i?r.a.createElement("div",{className:"fas fa-check text-success p-3"}):r.a.createElement(r.a.Fragment,null),i?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex-grow-1"},r.a.createElement("input",{id:"cultivoInput",tabIndex:"2",type:"text",className:"form-control",placeholder:"Clave o nombre del cultivo",name:"cultivo",autoComplete:"off",value:E,onChange:f,onKeyUp:function(e){"Enter"===e.key&&a()}})),i?r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){e(Io()),p.cultivo=""}},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:a},r.a.createElement("i",{className:"fas fa-search"}))))},cc=function(){var e=Object(l.b)();Object(n.useEffect)((function(){e(Uo()),e(To())}),[e]);var a=function(){t(),f.length>0?e({type:K}):Nt.a.fire("Nada para buscar","Ingrese apellido paterno del productor","warning")},t=function(){e(function(e){return function(){var a=Object(ut.a)(st.a.mark((function a(t){var n;return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Lo(e);case 2:n=a.sent,t(ko(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(f.toUpperCase()))},o=Object(l.c)((function(e){return e.altaPermisos})),c=o.idProductorSelected,i=o.nombreProductor,s="";c&&(s=i);var u=Nr({productor:""}),d=Object(dt.a)(u,2),m=d[0],p=d[1],f=m.productor;return r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},r.a.createElement("span",{className:"text-warning"},"* "),"Productor:"," "),r.a.createElement("label",null,s," "),c?r.a.createElement("div",{className:"fas fa-check text-success p-3"}):r.a.createElement(r.a.Fragment,null),c?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex-grow-1"},r.a.createElement("input",{id:"productorInput",tabIndex:"5",type:"text",className:"form-control",placeholder:"Apellido paterno",name:"productor",autoComplete:"off",value:f,onChange:p,onKeyUp:function(e){"Enter"===e.key&&a()}})),c?r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){e(Uo()),m.productor=""}},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:a},r.a.createElement("i",{className:"fas fa-search"}))))},lc=function(){var e=Object(l.c)((function(e){return e.altaPermisos})),a=e.usuarios,t=e.idUsuarioSelected,n=e.supPrevia,o=e.supDerecho,c=a.find((function(e){return e.id===t}));return r.a.createElement("div",{className:"border rounded mb-4 p-2"},c.laboresPendientes&&r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center"},r.a.createElement("div",{className:"text-danger"},"Labores fitosanitarias pendientes."))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},"Cuenta: ","".concat(c.cuenta,".").concat(c.subcta)),r.a.createElement("div",{className:"col-sm-3"},c.tipoLocalidad,": ",c.nombreLocalidad),c.folio?r.a.createElement("div",{className:"col-sm-3"},"Sup. Derecho: ",c.superficieTransferida):r.a.createElement("div",{className:"col-sm-3"},"Sup. Derecho: ",o)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},"Usuario: ","".concat(c.apPaterno," ").concat(c.apMaterno," ").concat(c.nombre)),r.a.createElement("div",{className:"col-sm-3"},"Lote: ",c.predio),o-n===0?r.a.createElement("div",{className:"col-sm-3 text-danger"},"Sup. Disponible: ",o-n):r.a.createElement("div",{className:"col-sm-3"},"Sup. Disponible: ",o-n)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},c.reacomodo&&r.a.createElement("div",{className:"text-info"},"Reacomodo: ",c.reacomodo)),r.a.createElement("div",{className:"col-sm-3"},"Seccion: ",c.seccion),r.a.createElement("div",{className:"col-sm-3"},"Sistema: ",c.sistRiego)))},ic=function(){var e=Object(l.c)((function(e){return e.altaPermisos})),a=e.productores,t=e.idProductorSelected,n="",o="",c="";return a.forEach((function(e){e.id===t&&(n=e.rfc,c=e.curp,o="".concat(e.apPaterno," ").concat(e.apMaterno," ").concat(e.nombre))})),r.a.createElement("div",{className:"border rounded mb-4 p-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-5"},"Productor: ",o),r.a.createElement("div",{className:"col-sm-4"},"CURP: ",c),r.a.createElement("div",{className:"col-sm-3"},"RFC: ",n)))},sc=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.next=3,ft.a.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).get().then((function(e){e.exists?n=e.data().numeroPermisosModulo:ft.a.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).set({numeroPermisosModulo:0})})).catch((function(e){console.log(" Error: ",e)}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),uc=function(){var e=Object(l.c)((function(e){return e.altaPermisos})),a=e.nombreCultivo,t=e.claveCultivo,n=e.subciclo,o=e.superficiePreviaCultivo,c=e.sistema,i=Object(l.c)((function(e){return e.autorizadosScreen})).autorizadosPorCultivo;return r.a.createElement("div",{className:"border rounded mb-4 p-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 d-inline-flex"},r.a.createElement("div",{className:"mr-4"},"Cultivo: ",a),r.a.createElement("div",{className:"mr-4"},"Clave: ",t),r.a.createElement("div",{className:"mr-4"},"Subciclo: ",n))),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Superficie"),r.a.createElement("th",{scope:"col",className:"text-center"},"Autorizada"),r.a.createElement("th",{scope:"col",className:"text-center"},"Asignada"),r.a.createElement("th",{scope:"col",className:"text-center"},"Expedida"),r.a.createElement("th",{scope:"col",className:"text-center"},"Disponible"))),r.a.createElement("tbody",null,"Gravedad"===c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Gravedad Normal"),r.a.createElement("td",{className:"text-center"},i.gravedadNormalAutorizada),r.a.createElement("td",{className:"text-center"},i.gravedadNormalAsignada),r.a.createElement("td",{className:"text-center"},Xt(o.gravedadNormal,4)),Xt(i.gravedadNormalAsignada-o.gravedadNormal,4)<=0?r.a.createElement("td",{className:"text-center text-danger"},Xt(i.gravedadNormalAsignada-o.gravedadNormal,4)):r.a.createElement("td",{className:"text-center"},Xt(i.gravedadNormalAsignada-o.gravedadNormal,4))),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Gravedad Extra"),r.a.createElement("td",{className:"text-center"},i.gravedadExtraAutorizada),r.a.createElement("td",{className:"text-center"},i.gravedadExtraAsignada),r.a.createElement("td",{className:"text-center"},Xt(o.gravedadExtra,4)),Xt(i.gravedadExtraAsignada-o.gravedadExtra,4)<=0?r.a.createElement("td",{className:"text-center text-danger"},Xt(i.gravedadExtraAsignada-o.gravedadExtra,4)):r.a.createElement("td",{className:"text-center"},Xt(i.gravedadExtraAsignada-o.gravedadExtra,4)))),"Pozo Federal"===c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Normal"),r.a.createElement("td",{className:"text-center"},i.pozoNormalAutorizada),r.a.createElement("td",{className:"text-center"},i.pozoNormalAsignada),r.a.createElement("td",{className:"text-center"},Xt(o.pozoNormal,4)),Xt(i.pozoNormalAsignada-o.pozoNormal,4)<=0?r.a.createElement("td",{className:"text-center text-danger"},Xt(i.pozoNormalAsignada-o.pozoNormal,4)):r.a.createElement("td",{className:"text-center"},Xt(i.pozoNormalAsignada-o.pozoNormal,4))),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Extra"),r.a.createElement("td",{className:"text-center"},i.pozoExtraAutorizada),r.a.createElement("td",{className:"text-center"},i.pozoExtraAsignada),r.a.createElement("td",{className:"text-center"},Xt(o.pozoExtra,4)),Xt(i.pozoExtraAsignada-o.pozoExtra,4)<=0?r.a.createElement("td",{className:"text-center text-danger"},Xt(i.pozoExtraAsignada-o.pozoExtra,4)):r.a.createElement("td",{className:"text-center"},Xt(i.pozoExtraAsignada-o.pozoExtra,4)))),"Pozo Particular"===c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Normal"),r.a.createElement("td",{className:"text-center"},i.pozoNormalAutorizada),r.a.createElement("td",{className:"text-center"},i.pozoNormalAsignada),r.a.createElement("td",{className:"text-center"},Xt(o.pozoParticularNormal,4)),Xt(i.pozoNormalAsignada-o.pozoParticularNormal,4)<=0?r.a.createElement("td",{className:"text-center text-danger"},Xt(i.pozoNormalAsignada-o.pozoParticularNormal,4)):r.a.createElement("td",{className:"text-center"},Xt(i.pozoNormalAsignada-o.pozoParticularNormal,4))),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Extra"),r.a.createElement("td",{className:"text-center"},i.pozoExtraAutorizada),r.a.createElement("td",{className:"text-center"},i.pozoExtraAsignada),r.a.createElement("td",{className:"text-center"},Xt(o.pozoParticularExtra,4)),Xt(i.pozoExtraAsignada-o.pozoParticularExtra,4)<=0?r.a.createElement("td",{className:"text-center text-danger"},Xt(i.pozoExtraAsignada-o.pozoParticularExtra,4)):r.a.createElement("td",{className:"text-center"},Xt(i.pozoExtraAsignada-o.pozoParticularExtra,4))))))))))},dc={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};qr.a.setAppElement("#root");var mc=function(){var e,a=Object(l.b)(),t=Object(l.c)((function(e){return e.altaPermisos})),n=t.openCultivoAnteriorModal,o=t.cultivosAnteriores;e=Object.values(o);return r.a.createElement(qr.a,{isOpen:n,onRequestClose:function(){a(xo())},style:dc,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement(Rn,{title:0===e.length?"No se encontraron cultivos":"Cultivo Anterior",columns:Tn,data:e,setFunction:zo,closeFunction:xo}))},pc=function(){var e=Object(l.b)();Object(n.useEffect)((function(){e(Do()),e(xo())}),[e]);var a=function(){t(),f.length>0?e({type:S}):Nt.a.fire("Nada para buscar","Ingrese nombre del cultivo","warning")},t=function(){var a;e((a=f.toUpperCase(),function(){var e=Object(ut.a)(st.a.mark((function e(t){var n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,go(a,"anterior");case 2:n=e.sent,t(Po(n));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()))},o=Object(l.c)((function(e){return e.altaPermisos})),c=o.idCultivoAnteriorSelected,i=o.cultivoAnterior,s="";c&&(s=i);var u=Nr({nombreCultivoAnterior:""}),d=Object(dt.a)(u,2),m=d[0],p=d[1],f=m.nombreCultivoAnterior;return r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},r.a.createElement("span",{className:"text-warning"},"* "),"Cultivo Anterior:"," "),r.a.createElement("label",{className:""},s," "),c?r.a.createElement("div",{className:"fas fa-check text-success p-3"}):r.a.createElement(r.a.Fragment,null),c?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"flex-grow-1"},r.a.createElement("input",{tabIndex:"4",type:"text",className:"form-control",placeholder:"Clave o nombre del cultivo",name:"nombreCultivoAnterior",autoComplete:"off",value:f,onChange:p,onKeyUp:function(e){"Enter"===e.key&&a()}})),c?r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){e(Do()),m.cultivoAnterior=""}},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement("button",{tabIndex:"-1",className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:a},r.a.createElement("i",{className:"fas fa-search"}))))},fc=function(){var e=Object(l.c)((function(e){return e.altaPermisos})),a=e.idUsuarioSelected,t=e.idProductorSelected,o=e.idCultivoSelected,c=e.subciclo,i=e.nombreCultivo,s=e.superficiePreviaCultivo,d=e.usuarios,m=Object(l.c)((function(e){return e.altaPermisos})),p=Object(l.c)((function(e){return e.auth})),f=p.variablesGlobales,E=p.expedicionActivaModulo,b=f.cicloActual,v=f.expedicionActiva,h=Object(l.c)((function(e){return e.ui})).msgError,N=Object(l.c)((function(e){return e.autorizadosScreen})).autorizadosPorCultivo,O=Nr({variedad:"",supAutorizada:"",fuenteCredito:"",latitud:"",longitud:"",observaciones:"",transferencia:"",cuotaSanidad:!0}),g=Object(dt.a)(O,5),y=g[0],A=g[1],x=g[4],C=y.variedad,S=y.supAutorizada,P=y.fuenteCredito,j=y.observaciones,R=y.transferencia,w=y.cuotaSanidad,I=Object(u.a)(Object(u.a)(Object(u.a)({},y),m),p),z=Object(l.b)();Object(n.useEffect)((function(){z(bt())}),[z]),Object(n.useEffect)((function(){z(function(e,a,t){return function(){var n=Object(ut.a)(st.a.mark((function n(r){var o;return st.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Zt(e,a,t);case 2:o=n.sent,r(vn(o));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(b,p.modulo,m.claveCultivo))}),[b,z,p.modulo,m.claveCultivo]),Object(n.useEffect)((function(){var e,a=m.cultivos.find((function(e){return e.id===m.idCultivoSelected}));z((e=w?m.idCultivoSelected?a.costoHectarea:void 0:0,{type:T,payload:e}))}),[b,z,m.cuotaCultivo,w,m.cultivos,m.idCultivoSelected]);var D=function(){var e=Object(ut.a)(st.a.mark((function e(a){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:if(!e.sent){e.next=13;break}return a.preventDefault(),z({type:ne,payload:y}),e.t0=z,e.t1=vo,e.next=9,k();case 9:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3),z(ho());case 13:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),L=function(){return v&&E?m.usuario?m.nombreProductor?m.nombreCultivo?S<=0?(z(Et("Ingrese la superficie que ser\xe1 autorizada en este permiso.")),!1):m.supDerecho-m.supPrevia<parseInt(S)?(z(Et("La superficie excede la superficie disponible de la cuenta seleccionada.")),!1):m.laboresPendientes?(z(Et("La cuenta seleccionada tiene labores fitosanitarias pendientes.")),!1):P?m.cultivoAnterior?void 0===N||"Superficie no disponible"===M(s,N)?(z(Et("La superficie asignada para el cultivo no es suficiente.")),!1):(z(bt()),!0):(z(Et("Especifique el cultivo anterior.")),!1):(z(Et("Especifique la fuente de cr\xe9dito.")),!1):(z(Et("El campo cultivo es obligatorio.")),!1):(z(Et("El campo productor es obligatorio.")),!1):(z(Et("El campo usuario es obligatorio.")),!1):(z(Et("Expedici\xf3n cerrada! Por el momento no es posible expedir permisos.")),!1)},k=function(){var e=Object(ut.a)(st.a.mark((function e(){var a;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=M(s,N),e.t1=b,e.next=4,U();case 4:return e.t2=e.sent,e.t3=bo()(),e.t4=V(i),e.t5=G(c),e.next=10,B(i);case 10:return e.t6=e.sent,a={tipo:e.t0,ciclo:e.t1,numeroPermiso:e.t2,fechaEmicion:e.t3,fechaLimite:e.t4,vigencia:e.t5,estadoPermiso:e.t6},e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e,a){var t=a.gravedadNormalAsignada,n=a.gravedadExtraAsignada,r=a.pozoNormalAsignada,o=a.pozoExtraAsignada,c=e.gravedadNormal,l=e.gravedadExtra,i=e.pozoNormal,s=e.pozoExtra,u=e.pozoParticularNormal,d=e.pozoParticularExtra;switch(m.sistema){case"Gravedad":return Xt(t-c,4)>=S?"normal":Xt(n-l,4)>=S?"extra":"Superficie no disponible";case"Pozo Federal":return Xt(r-i,4)>=S?"normal":Xt(o-s,4)>=S?"extra":"Superficie no disponible";case"Pozo Particular":return Xt(r-u,4)>=S?"normal":Xt(o-d,4)>=S?"extra":"Superficie no disponible";default:return"Superficie no disponible"}},U=function(){var e=Object(ut.a)(st.a.mark((function e(){var a,t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Pozo Particular"!==m.sistema){e.next=12;break}return e.t0="".concat(p.modulo,"-"),e.t1=F,e.next=5,sc(p.modulo,b);case 5:return e.t2=e.sent,e.t3=e.t2+1,e.t4=(0,e.t1)(e.t3,4),a=e.t0.concat.call(e.t0,e.t4),e.abrupt("return",a);case 12:return e.t5="MOD".concat(p.modulo,"-"),e.t6=F,e.next=16,sc(p.modulo,b);case 16:return e.t7=e.sent,e.t8=e.t7+1,e.t9=(0,e.t6)(e.t8,4),t=e.t5.concat.call(e.t5,e.t9),e.abrupt("return",t);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(e,a){return"0".repeat(a-e.toString().length)+e.toString()},G=function(e){var a=null;if(e)switch(e){case"PRIMAVERA-VERANO":case"OTO\xd1O-INVIERNO":case"PERENNES":case"PERENES":a=bo()("09/30/2022");break;default:a=""}return a},B=function(){var e=Object(ut.a)(st.a.mark((function e(){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","activo");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(e){return"TRIGO"===e?bo()("12/31/2021"):bo()("03/31/2022")},q=Object(n.useCallback)((function(e,a,t,n){x((function(r){return Object(u.a)(Object(u.a)({},r),{},{observaciones:"TRANSFERENCIA FOLIO ".concat(e," EN EL LOTE ").concat(a,", ").concat(t.toUpperCase()," ").concat(n)})}))}),[x]);return Object(n.useEffect)((function(){if(a){var e=d.find((function(e){return e.id===a}));e.folio&&q(e.folio,e.loteDestino,e.tipolocalidadDestino,e.localidadDestino)}}),[a,d,q]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row m-3 d-flex justify-content-center"},r.a.createElement("h1",null,"Alta de permiso unico de siembra")),r.a.createElement("form",{className:"container pb-4"},h&&r.a.createElement("div",{className:"auth__alert-error"},h),a&&r.a.createElement(lc,null),t&&r.a.createElement(ic,null),o&&N&&s&&r.a.createElement(uc,null),r.a.createElement("div",{className:"row text-warning"},"* Campos obligatorios"),r.a.createElement("div",{className:"row"},r.a.createElement(Or,null),r.a.createElement(cc,null)),r.a.createElement("div",{className:"row"},r.a.createElement(oc,null),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},r.a.createElement("span",{className:"text-warning"},"* "),"Variedad:"),r.a.createElement("div",{className:"flex-grow-1 "},r.a.createElement("input",{id:"variedadInput",tabIndex:"6",type:"text",className:"form-control",placeholder:"variedad",name:"variedad",value:C,autoComplete:"off",onChange:A}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},r.a.createElement("span",{className:"text-warning"},"* "),"Superficie:"),r.a.createElement("div",{className:"flex-grow-1 "},r.a.createElement("input",{id:"superficieInput",tabIndex:"3",type:"number",className:"form-control",placeholder:"superficie",name:"supAutorizada",value:S,autoComplete:"off",onChange:A})))),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},r.a.createElement("span",{className:"text-warning"},"* "),"Fuente de credito:"),r.a.createElement("div",{className:"flex-grow-1 "},r.a.createElement("input",{tabIndex:"7",type:"text",className:"form-control",placeholder:"fuente de credito",name:"fuenteCredito",value:P,autoComplete:"off",onChange:A}))))),r.a.createElement("div",{className:"row"},r.a.createElement(pc,null),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group d-flex align-items-baseline row p-3"},r.a.createElement("label",{className:"col-sm-3"},"Transferencia interna:"),r.a.createElement("div",{className:"flex-grow-1 "},r.a.createElement("input",{tabIndex:"8",type:"text",className:"form-control",placeholder:"Cuenta destino",name:"transferencia",value:R,autoComplete:"off",onChange:A}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"form-group row p-3"},r.a.createElement("label",{className:"mr-3"},r.a.createElement("span",{className:"text-warning"},"* ")),r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{tabIndex:"9",type:"checkbox",className:"form-check-input",id:"cuotaSanidad",name:"cuotaSanidad",value:w,onChange:A,checked:w}),r.a.createElement("label",{className:"form-check-label",htmlFor:"cuotaSanidad"},"Cobrar cuota de sanidad vegetal"))))),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{tabIndex:"10",type:"text",className:"form-control",placeholder:"Observaciones",rows:"5",name:"observaciones",value:j,onChange:A}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Informaci\xf3n adicional")),h&&r.a.createElement("div",{className:"auth__alert-error"},h),r.a.createElement("div",{className:"row d-flex justify-content-center pt-5 d-print-none"},r.a.createElement("button",{tabIndex:"11",type:"button",className:"btn btn-outline-primary",onClick:D},r.a.createElement("i",{className:"far fa-file"}),r.a.createElement("span",null," Revisar")))),r.a.createElement(Qo,null),r.a.createElement(mc,null),r.a.createElement($o,null),r.a.createElement(tc,null),r.a.createElement(rc,null),r.a.createElement(Bo,{data:I,isNew:!0}))},Ec=function(){var e=Object(l.c)((function(e){return e.entidades})).usuario,a=e.cuenta,t=e.subcta,n=e.nombreLocalidad,o=e.supRiego,c=e.predio,i=e.supPrevia,s=e.apPaterno,u=e.apMaterno,d=e.nombre,m=e.seccion,p=e.tipoLocalidad,f=o-i,E="".concat(s," ").concat(u," ").concat(d);return r.a.createElement("div",{className:"border border-info rounded"},r.a.createElement("div",{className:"border-bottom border-info p-2"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h3",null,"Cuenta: ","".concat(a,".").concat(t)))),r.a.createElement("div",{className:"d-flex flex-column p-4"},r.a.createElement("div",null,"Usuario: ",E),r.a.createElement("div",null,"Lote: ",c),r.a.createElement("div",null,p,": ",n),r.a.createElement("div",null,"Seccion: ",m),r.a.createElement("div",null,"Sup. Derecho: ",o),r.a.createElement("div",null,"Sup. Disponible: ",f)))},bc=function(e){var a=e.cultivo,t=e.handleInputChange,n=Object(l.b)(),o=function(){c(),a.length>0?n(yo()):Nt.a.fire("Nada para buscar","Ingrese nombre del cultivo","warning")},c=function(){n(Co(a.toUpperCase()))},i=Object(l.c)((function(e){return e.altaPermisos})),s=i.idCultivoSelected,u=i.nombreCultivo,d="";s&&(d=u);return r.a.createElement("div",{className:"form-group flex-column row p-3"},r.a.createElement("label",{className:"mr-2"},r.a.createElement("span",{className:"text-warning"},"* "),"Cultivo:"),s?r.a.createElement("div",{className:"d-flex align-items-baseline"},r.a.createElement("label",{className:""},d," "),r.a.createElement("i",{className:"fas fa-check text-success p-3"}),r.a.createElement("button",{className:"btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){n(Io()),a=""}},r.a.createElement("i",{className:"fas fa-trash"}))):r.a.createElement("div",{className:"d-flex"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Cultivo",name:"cultivo",autoComplete:"off",value:a,onChange:t,onKeyUp:function(e){"Enter"===e.key&&o()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:o},r.a.createElement("i",{className:"fas fa-search"}))))},vc=function(){var e=Object(ut.a)(st.a.mark((function e(){var a,t,n,r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ft.a.collectionGroup("permisos").where("ciclo","==","2020-2021"),t=[],n=[],r=[],e.next=6,ft.a.collectionGroup("colonias").get();case 6:return e.sent.forEach((function(e){r.push(Object(u.a)({id:e.id},e.data()))})),e.next=10,a.get().then((function(e){e.forEach((function(e){e.data().claveLocalidad&&!t.includes(e.data().claveLocalidad)&&(t.push(e.data().claveLocalidad),n.push({id:Nc(e.data().claveLocalidad,r),clave:e.data().claveLocalidad,ubicacion:e.data().ubicacion,tipo:e.data().tipoLocalidad,tecnico:hc(e.data().claveLocalidad,r)}))}))}));case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hc=function(e,a){var t=a.find((function(a){return a.clave===e}));return t.tecnico?t.tecnico:"Sin asignar"},Nc=function(e,a){return a.find((function(a){return a.clave===e})).id},Oc=function(e){return{type:pa,payload:e}},gc=function(e){return{type:va,payload:e}},yc=function(){return{type:ha}},Ac=function(){return{type:Oa}},xc=function(e){var a=e.localtie,t=e.handleInputChange,n=Object(l.b)(),o=function(){c(),a.length>0?n({type:Na}):Nt.a.fire("Nada para buscar","Ingrese nombre de la localidad","warning")},c=function(){n(function(e){return function(){var a=Object(ut.a)(st.a.mark((function a(t){var n;return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Sr(e);case 2:n=a.sent,t(Oc(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(a.toUpperCase()))},i=Object(l.c)((function(e){return e.entidades})).localtieSelected,s="",u="";i&&(s=i.nombre,u=i.id);return r.a.createElement("div",{className:"form-group d-flex flex-column row p-3"},r.a.createElement("label",{className:"mr-2"},r.a.createElement("span",{className:"text-warning"},"* "),"Localidad destino:"),u?r.a.createElement("div",{className:"d-flex align-items-baseline"},r.a.createElement("label",null,s," "),r.a.createElement("i",{className:"fas fa-check text-success p-3"}),r.a.createElement("button",{className:"btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:function(){n(yc())}},r.a.createElement("i",{className:"fas fa-trash"}))):r.a.createElement("div",{className:"d-flex"},r.a.createElement("input",{type:"text",className:"form-control d-flex",placeholder:"Localidad",name:"localtie",autoComplete:"off",value:a,onChange:t,onKeyUp:function(e){"Enter"===e.key&&o()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:o},r.a.createElement("i",{className:"fas fa-search"}))))},Cc=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("transferencias").doc(t).collection("modulos").doc("Modulo-".concat(a)).get().then((function(e){return e.exists?e.data().numeroTransferenciasModulo:0})).catch((function(e){return console.log(" Error: ",e),Nt.a.fire("Error de conexi\xf3n","Error al intentar obtener el contador de transferencias.","error"),!1}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Sc=function(e){var a,t=e.values,n=e.handleInputChange,o=Object(l.c)((function(e){return e.entidades})),c=o.usuario,i=o.localtieSelected,s=Object(l.c)((function(e){return e.altaPermisos})),d=s.nombreCultivo,m=s.claveCultivo,p=Object(l.c)((function(e){return e.ui})).msgError,f=t.superficieTransferida,E=t.loteDestino,b=t.moduloDestino,v=t.cultivo,h=t.localtie,N=t.apPaternoSolicitante,O=t.apMaternoSolicitante,g=t.nombreSolicitante;c&&(a=c.supRiego-c.supPrevia);var y=Object(l.b)(),A=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual,x=function(){var e=Object(ut.a)(st.a.mark((function e(){var a,t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cc("DEV"===b?"dev":b,A);case 2:if(!1===(a=e.sent)){e.next=8;break}return t="M".concat("DEV"===b?"dev":b,"-").concat("0".repeat(3-(n=a+1).toString().length)+n.toString()),e.abrupt("return",t);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(ut.a)(st.a.mark((function e(t){var n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(f<=0?(y(Et("Indique superficie a transferir")),0):f>a?(y(Et("La superficie a transferir excede a la superficie disponible")),0):null===d?(y(Et("Indique Cultivo")),0):0===N.trim().length?(y(Et("Indique apellido paterno del solicitante")),0):0===O.trim().length?(y(Et("Indique apellido materno del solicitante")),0):0===g.trim().length?(y(Et("Indique nombre del solicitante")),0):0===b.trim().length?(y(Et("Indique el m\xf3dulo destino")),0):null===i||void 0===i?(y(Et("Indique la localidad destino")),0):0===E.trim().length?(y(Et("Indique el lote en el que se aplicar\xe1 la transferencia")),0):(y(bt()),1))){e.next=24;break}return e.t0=u.a,e.t1=Object(u.a)({},c),e.t2={},e.next=7,x();case 7:e.t3=e.sent,e.t4=A,e.t5=f,e.t6=E,e.t7="DEV"===b?"dev":b,e.t8=N,e.t9=O,e.t10=g,e.t11=d,e.t12=m,e.t13=i.nombre,e.t14=i.clave,e.t15=i.tipo,e.t16=new Date,e.t17={folio:e.t3,ciclo:e.t4,estadoTransferencia:"PENDIENTE",superficieTransferida:e.t5,loteDestino:e.t6,moduloDestino:e.t7,apPaternoSolicitante:e.t8,apMaternoSolicitante:e.t9,nombreSolicitante:e.t10,nombreCultivo:e.t11,claveCultivo:e.t12,localidadDestino:e.t13,clavelocalidadDestino:e.t14,tipolocalidadDestino:e.t15,fecha:e.t16},null!==(n=(0,e.t0)(e.t1,e.t2,e.t17)).folio&&(y({type:Je,payload:n}),y(or()));case 24:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=function(e){"Enter"===e.key&&C(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"border border-info rounded mt-4"},r.a.createElement("div",{className:"d-flex justify-content-center border-bottom border-info p-2"},r.a.createElement("h3",null,"Transferencia")),r.a.createElement("div",{className:"d-flex flex-column p-3"},r.a.createElement("div",{className:"row d-flex p-3 text-warning"},"* Campos obligatorios"),p&&r.a.createElement("div",{className:"auth__alert-error"},p),r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement("label",{htmlFor:""},r.a.createElement("span",{className:"text-warning"},"* "),"Superficie a transferir (ha):"),r.a.createElement("input",{type:"number",className:"form-control ml-1",placeholder:"0 ha",name:"superficieTransferida",autoComplete:"off",value:f,onChange:n,onKeyUp:S})),r.a.createElement("div",{className:"pt-3"},r.a.createElement(bc,{cultivo:v,handleInputChange:n})),r.a.createElement("div",{className:"border rounded p-2"},"Datos del solicitante",r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement("label",{htmlFor:""},r.a.createElement("span",{className:"text-warning"},"* "),"Apellido paterno:"),r.a.createElement("input",{type:"text",className:"form-control ml-1",placeholder:"Apellido paterno",name:"apPaternoSolicitante",autoComplete:"off",value:N,onChange:n,onKeyUp:S})),r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement("label",{htmlFor:""},r.a.createElement("span",{className:"text-warning"},"* "),"Apellido materno:"),r.a.createElement("input",{type:"text",className:"form-control ml-1",placeholder:"Apellido materno",name:"apMaternoSolicitante",autoComplete:"off",value:O,onChange:n,onKeyUp:S})),r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement("label",{htmlFor:""},r.a.createElement("span",{className:"text-warning"},"* "),"Nombre:"),r.a.createElement("input",{type:"text",className:"form-control ml-1",placeholder:"Nombre",name:"nombreSolicitante",autoComplete:"off",value:g,onChange:n,onKeyUp:S}))),r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement("label",{htmlFor:""},r.a.createElement("span",{className:"text-warning"},"* "),"Modulo destino:"),r.a.createElement("select",{type:"text",name:"moduloDestino",value:b,onChange:n,className:"form-control ml-1"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"Modulo"),r.a.createElement("option",{value:"1"},"Modulo 1"),r.a.createElement("option",{value:"2"},"Modulo 2"),r.a.createElement("option",{value:"3"},"Modulo 3"),r.a.createElement("option",{value:"4"},"Modulo 4"),r.a.createElement("option",{value:"5"},"Modulo 5"),r.a.createElement("option",{value:"6"},"Modulo 6"),r.a.createElement("option",{value:"7"},"Modulo 7"),r.a.createElement("option",{value:"8"},"Modulo 8"),r.a.createElement("option",{value:"9A"},"Modulo 9A"),r.a.createElement("option",{value:"9B"},"Modulo 9B"),r.a.createElement("option",{value:"10"},"Modulo 10"),r.a.createElement("option",{value:"11"},"Modulo 11"),r.a.createElement("option",{value:"12"},"Modulo 12"),r.a.createElement("option",{value:"14"},"Modulo 14"),r.a.createElement("option",{value:"15"},"Modulo 15"),r.a.createElement("option",{value:"16"},"Modulo 16"),r.a.createElement("option",{value:"17"},"Modulo 17"),r.a.createElement("option",{value:"18"},"Modulo 18"),r.a.createElement("option",{value:"19"},"Modulo 19"),r.a.createElement("option",{value:"20"},"Modulo 20"),r.a.createElement("option",{value:"21"},"Modulo 21"),r.a.createElement("option",{value:"22"},"Modulo 22"),r.a.createElement("option",{value:"23"},"Modulo 23"),r.a.createElement("option",{value:"dev"},"Modulo dev"))),r.a.createElement("div",{className:"pt-3"},r.a.createElement(xc,{localtie:h,handleInputChange:n})),r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement("label",{htmlFor:""},r.a.createElement("span",{className:"text-warning"},"* "),"Lote destino:"),r.a.createElement("input",{type:"text",className:"form-control ml-1",placeholder:"Lote",name:"loteDestino",autoComplete:"off",value:E,onChange:n,onKeyUp:S})),p&&r.a.createElement("div",{className:"auth__alert-error"},p),r.a.createElement("div",{className:" row d-flex p-3"},r.a.createElement("button",{className:" btn btn-outline-primary flex-fill",type:"button",onClick:C},r.a.createElement("span",null,"Revisar "),r.a.createElement("i",{className:"far fa-file"}))))))},Pc=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.modulo,t=e.variablesGlobales.cicloActual,n=Object(l.b)(),o=function(){d.length>0?n(dr(d.toUpperCase(),a,t)):Nt.a.fire("Nada para buscar","Ingrese apellido paterno o cuenta del usuario","warning")},c=Lt({usuario:""}),i=Object(dt.a)(c,2),s=i[0],u=i[1],d=s.usuario;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group d-flex align-items-baseline"},r.a.createElement("label",null,"Usuario: "),r.a.createElement("input",{type:"text",className:"form-control ml-5",placeholder:"Apellido paterno o numero de cuenta",name:"usuario",autoComplete:"off",value:d,onChange:u,onKeyUp:function(e){"Enter"===e.key&&o()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block",type:"button",onClick:o},r.a.createElement("i",{className:"fas fa-search"}))))},jc=function(){var e=Object(l.c)((function(e){return e.entidades})).usuarios,a=[];return e?(a=Object.values(e),r.a.createElement(Rn,{title:0===a.length?"No se encontraron usuarios":"Usuarios",columns:zn,data:a,setFunction:fr})):r.a.createElement(r.a.Fragment,null)},Rc={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"550px"}};qr.a.setAppElement("#root");var wc=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.entidades})),t=a.openLocaltiesModal,n=a.localties,o=[];n&&(o=Object.values(n));return r.a.createElement(qr.a,{isOpen:t,onRequestClose:function(){e(Ac())},style:Rc,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement(Rn,{title:0===o.length?"No se encontraron localidades":"Localidades",columns:Mn,data:o,setFunction:gc,closeFunction:Ac}))},Ic=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n,r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ft.a.collection("transferencias").doc(t).collection("modulos").doc("Modulo-".concat(a.moduloDestino)).collection("transferencias").doc(a.folio),r=ft.a.collection("transferencias").doc(t).collection("modulos").doc("Modulo-".concat(a.moduloDestino)),e.prev=2,e.next=5,ft.a.runTransaction(function(){var e=Object(ut.a)(st.a.mark((function e(t){var o,c;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(n);case 2:return o=e.sent,e.next=5,t.get(r);case 5:if(c=e.sent,!o.exists){e.next=11;break}throw Nt.a.fire("La transferencia ya existe","Est\xe1 intentando sobreescribir una transferencia ya existente, verifique su conexi\xf3n.","error"),new Error("La transferencia ya existe");case 11:t.set(n,a),c.exists?t.update(r,{numeroTransferenciasModulo:Hr.a.firestore.FieldValue.increment(1),superficieRecibidaModulo:Hr.a.firestore.FieldValue.increment(Number(a.superficieTransferida))}):t.set(r,{numeroTransferenciasModulo:1,superficieRecibidaModulo:Number(a.superficieTransferida)});case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 5:if(!e.sent){e.next=9;break}return Nt.a.fire("Transferencia Guardada","Se registr\xf3 con \xe9xito la transferncia de volumen.","success"),e.abrupt("return",!0);case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(2),Nt.a.fire("Error de conexi\xf3n","Error al intentar guardar transferencia.","error"),console.error(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(a,t){return e.apply(this,arguments)}}(),zc=function(e){var a=e.transferencia,t=e.reset,n=a.folio,o=a.ciclo,c=a.apPaterno,i=a.apMaterno,s=a.nombre,u=a.predio,d=a.tipoLocalidad,m=a.nombreLocalidad,p=a.superficieTransferida,f=a.nombreCultivo,E=a.apPaternoSolicitante,b=a.apMaternoSolicitante,v=a.nombreSolicitante,h=a.loteDestino,N=a.tipolocalidadDestino,O=a.localidadDestino,g=a.fecha,y=a.zona,A=a.moduloDestino,x=Object(l.c)((function(e){return e.entidades})).usuario,C=Object(l.c)((function(e){return e.transferenciasScreen})),S=C.printTransferModal,P=C.transferPrintButton,j=Object(l.b)(),R=function(){j({type:Ye}),j(lr())},w=function(){var e=Object(ut.a)(st.a.mark((function e(){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ic(a,o);case 2:e.sent&&(j(cr()),j(fr(x)),t(),j(Io()),j(yc()));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(qr.a,{isOpen:S,onRequestClose:R,style:{content:{width:"1125px",height:"1500px",overflow:"auto"}},closeTimeoutMS:200,className:"printModalSanidad p-5",overlayClassName:"modal-fondo"},r.a.createElement("div",{className:"row p-5 "},r.a.createElement("div",{className:"col-2 d-flex justify-content-center"},r.a.createElement("img",{className:"align-self-center",src:"./logos/cna.png",alt:"Logo cna",style:{maxHeight:70}})),r.a.createElement("div",{className:"col-8 text-center"},r.a.createElement("h5",null,"ORGANISMO DE CUENCA PEN\xcdNSULA DE BAJA CALIFORNIA",r.a.createElement("br",null),"DIRECCI\xd3N DE INFRAESTRUCTURA HIDROAGR\xcdCOLA",r.a.createElement("br",null),"DISTRITO DE RIEGO 014, R\xcdO COLORADO, B.C. Y SONORA",r.a.createElement("br",null),"JEFATURA DE OPERACI\xd3N")),r.a.createElement("div",{className:"col-2 d-flex justify-content-center"},r.a.createElement("img",{className:"align-self-center",src:"./logos/medio-2022.png",alt:"Logo secretaria del medio ambiente",style:{maxWidth:200}}))),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("h5",null,r.a.createElement("b",null,"AVISO DE TRANSFERENCIA DE VOL\xdaMENES Y DERECHOS DE RIEGO A\xd1O AGR\xcdCOLA ",o))),r.a.createElement("div",{className:"row m-3 justify-content-end mt-5"},r.a.createElement("p",null,"NO. OP./",n)),r.a.createElement("div",{className:"row m-3 d-flex flex-column justify-content-center mt-2"},r.a.createElement("p",{clssName:"paragraph"},"\xa0\xa0\xa0\xa0 EN BASE A LO DISPUESTO EN EL ART\xcdCULO 49 DE LA LEY DE AGUAS NACIONALES EN EL CUAL ESPECIFICA QUE LOS DERECHOS DE EXPLOTACI\xd3N, USO O APROVECHAMIENTO DE AGUA PARA USO AGR\xcdCOLA, GANADERO O FORESTAL SE PODR\xc1N TRANSMITIR EN LOS T\xc9RMINOS Y CONDICIONES ESTABLECIDAS EN LA LEY Y SU REGLAMENTO, Y EL ART\xcdCULO 88 DEL REGLAMENTO DE LA PROPIA LEY, DICE QUE LA TRANSMISI\xd3N DE DERECHOS DE RIEGO A QUE SE REFIERE EL ART\xcdCULO 49 DE LA \u2018LEY\u2019 EN RELACI\xd3N CON EL CAP\xcdTULO V DEL T\xcdTULO CUARTO DE LA MISMA, AS\xcd COMO LAS TRANSMISIONES EN UNIDADES Y DISTRITOS DE RIEGO PODR\xc1N SER TEMPORAL O DEFINITIVA."),r.a.createElement("p",{clssName:"paragraph"},"\xa0\xa0\xa0\xa0 ES TEMPORAL CUANDO LOS DERECHOS SE TRANSFIEREN POR DETERMINADOS CICLOS AGR\xcdCOLAS CONSERVANDO LA TITULARIDAD DE LA CONCESI\xd3N SIEMPRE Y CUANDO NO SE CAUSEN PERJUICIOS A TERCEROS, POR LO ANTERIORMENTE SE\xd1ALADO LA COMISI\xd3N NACIONAL DEL AGUA HA ACORDADO, QUE SE AUTORICE LA TRANSFERENCIA PROVISIONAL DE LOS DERECHOS DE RIEGO.")),r.a.createElement("div",{className:"row m-3 mt-5"},r.a.createElement("div",{className:"col-6"},r.a.createElement("p",null,"SOLICITANTE: ",r.a.createElement("br",null),c," ",i," ",s,r.a.createElement("br",null),"LOTE: ",u," EN ",d.toUpperCase()," ",m,r.a.createElement("br",null),p," HECT\xc1REAS DE ",f,r.a.createElement("br",null))),r.a.createElement("div",{className:"col-6"},r.a.createElement("p",null,"ADJUDICATARIO:",r.a.createElement("br",null),E," ",b," ",v,r.a.createElement("br",null),"LOTE: ",h," EN ",N.toUpperCase()," ",O,r.a.createElement("br",null)))),r.a.createElement("div",{className:"row m-3 d-flex flex-column justify-content-center mt-5"},r.a.createElement("p",{clssName:"paragraph"},"\xa0\xa0\xa0\xa0 ESTA TRANSFERENCIA TENDR\xc1 VALIDEZ \xdaNICAMENTE EN EL PRESENTE CICLO AGR\xcdCOLA ",o,", DEBIENDO ENTREGARSE EL SERVICIO DE RIEGO PRECISAMENTE AL SOLICITANTE.")),r.a.createElement("div",{className:"row m-3 justify-content-end mt-5"},r.a.createElement("p",null,"MEXICALI, B. C. , A ",g.toLocaleString("es-MX",{weekday:"long",year:"numeric",month:"long",day:"numeric"}).toUpperCase())),r.a.createElement("div",{className:"row d-flex justify-content-center mt-5"},r.a.createElement("p",{className:"text-center"},"ATENTAMENTE",r.a.createElement("br",null),"EL ING. EN JEFE DEL DISTRITO DE",r.a.createElement("br",null),"RIEGO 014, RIO COLORADO",r.a.createElement("br",null))),r.a.createElement("div",{className:"row m-3 justify-content-center"},r.a.createElement("p",{className:"text-center"},"DR. JULIO ALFONSO NAVARRO URBINA")),r.a.createElement("div",{className:"row m-3 mt-5"},"C.C.P. DISTRITO DE RIEGO NO. 014, RIO COLORADO. - EDIF. ",r.a.createElement("br",null),"C.C.P. JEFATURA DE OPERACI\xd3N. - EDIF. ",r.a.createElement("br",null),"C.C.P. DISTRITO DE RIEGO RIO COLORADO S.de R.L. de I.P. - PTE. ",r.a.createElement("br",null),"C.C.P. M\xd3DULOS DE RIEGO ",y," y ",A,". - PTE. ",r.a.createElement("br",null),"C.C.P. MINUTARIO ",r.a.createElement("br",null),"C.C.P. ARCHIVO ",r.a.createElement("br",null)),r.a.createElement("div",{className:"row m-3 d-flex justify-content-center pt-5"},P?r.a.createElement("button",{type:"button",className:"btn btn-outline-primary d-print-none",onClick:function(){window.print()}},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")):r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none",onClick:w},r.a.createElement("i",{className:"fas fa-save"}),r.a.createElement("span",null," Guardar ")),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none ml-3",onClick:R},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),r.a.createElement("span",null," Cerrar"))))},Dc=function(){var e=Object(l.c)((function(e){return e.transferenciasScreen})).transferencias;return r.a.createElement(Rn,{title:0===e.length?"No se encontraron transferencias":"Transferencias",columns:Dn,data:e,setFunction:er})},Lc=function(e){var a=e.transferencia,t=Object(l.b)(),n=a.folio,o=a.cuenta,c=a.subcta,i=a.nombreLocalidad,s=a.supRiego,u=a.predio,d=a.apPaterno,m=a.apMaterno,p=a.nombre,f=a.apPaternoSolicitante,E=a.apMaternoSolicitante,b=a.nombreSolicitante,v=a.zona,h=a.tipoLocalidad,N=a.moduloDestino,O=a.tipolocalidadDestino,g=a.localidadDestino,y=a.loteDestino,A=a.claveCultivo,x=a.nombreCultivo,C=a.superficieTransferida,S=a.estadoTransferencia,P="".concat(d," ").concat(m," ").concat(p),j="".concat(f," ").concat(E," ").concat(b);return r.a.createElement("div",{className:"border border-info rounded"},r.a.createElement("div",{className:"border-bottom border-info p-2"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h3",null,"Folio: ",n))),r.a.createElement("div",{className:"d-flex flex-column border-bottom border-info p-4"},r.a.createElement("div",null,"SOLICITANTE"),r.a.createElement("div",null,"Nombre: ",P),r.a.createElement("div",null,"Cuenta: ","".concat(o,".").concat(c)),r.a.createElement("div",null,h,": ",i),r.a.createElement("div",null,"Lote: ",u),r.a.createElement("div",null,"Modulo Origen: ",v),r.a.createElement("div",null,"Sup. Derecho: ",s," ha")),r.a.createElement("div",{className:"d-flex flex-column border-bottom border-info p-4"},r.a.createElement("div",null,"ADJUDICATARIO"),r.a.createElement("div",null,"Nombre: ",j),r.a.createElement("div",null,"Modulo Destino: ",N),r.a.createElement("div",null,O,": ",g),r.a.createElement("div",null,"Lote: ",y),r.a.createElement("div",null,"Cultivo: ","".concat(A," - ").concat(x)),r.a.createElement("div",null,"Sup. Trasferida: ",C," ha")),r.a.createElement("div",{className:"d-flex flex-column border-bottom border-info p-4"},r.a.createElement("div",null,"ESTADO: ",S),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary mt-4",onClick:function(){t(or()),t(cr())}},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")),"ACTIVA"!==S&&r.a.createElement("button",{type:"button",className:"btn btn-outline-success mt-4",onClick:function(){t(ir(a,"ACTIVA"))}},r.a.createElement("i",{className:"fas fa-check"}),r.a.createElement("span",null," Autorizar")),"CANCELADA"!==S&&r.a.createElement("button",{type:"button",className:"btn btn-outline-danger mt-4",onClick:function(){Nt.a.fire({title:"Atenci\xf3n!!",text:"Est\xe1 a punto de cancelar la transferencia. \xbfRealmente desea cancelarla?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar"}).then((function(e){e.isConfirmed&&t(ir(a,"CANCELADA"))}))}},r.a.createElement("i",{className:"fas fa-times"}),r.a.createElement("span",null," Cancelar"))))},Tc=function(){var e=Object(l.c)((function(e){return e.entidades})).usuario,a=Object(l.c)((function(e){return e.auth})),t=a.variablesGlobales,o=a.modulo,c=t.cicloActual,i=Object(l.c)((function(e){return e.transferenciasScreen})).nuevaTransferencia,s=Object(l.c)((function(e){return e.transferenciasScreen})).transferencia,u=Object(l.b)();Object(n.useEffect)((function(){u(rr(c,o)),u(tr()),u(pr()),u(br())}),[u,c,o]);var d=Nr({superficieTransferida:"",loteDestino:"",moduloDestino:"",cultivo:"",localtie:"",apPaternoSolicitante:"",apMaternoSolicitante:"",nombreSolicitante:""}),m=Object(dt.a)(d,3),p=m[0],f=m[1],E=m[2];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("div",{className:"border rounded p-4"},r.a.createElement("h3",{className:"mb-4"},"Transferir superficie"),r.a.createElement(Pc,null),r.a.createElement(jc,null)),r.a.createElement("div",{className:"border rounded p-4 mt-5"},r.a.createElement("h3",{className:"mb-4"},"Transferencias recibidas"),r.a.createElement(Dc,null))),r.a.createElement("div",{className:"col-sm-4"},e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ec,null),r.a.createElement(Sc,{values:p,handleInputChange:f})),s&&r.a.createElement(Lc,{transferencia:s}))),r.a.createElement(tc,null),r.a.createElement(rc,null),r.a.createElement(Qo,null),r.a.createElement(wc,null),i&&r.a.createElement(zc,{transferencia:i,reset:E}),s&&r.a.createElement(zc,{transferencia:s,reset:E}))},kc=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n,r,o;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=Mc(a,t),e.next=4,r.get().then((function(e){e.forEach((function(e){n.push(Object(u.a)({id:e.id,superficieMapeada:e.data().superficie},e.data()))}))}));case 4:return o=Uc(a,t),e.next=7,o.get().then((function(e){e.forEach((function(e){n.push(Object(u.a)({id:e.id,superficieMapeada:e.data().superficie},e.data()))}))}));case 7:return 0===n.length&&Nt.a.fire("No se encontraron registros!","Por favor intente con otro par\xe1metro de b\xfasqueda.","error"),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Mc=function(e,a){return 0===e?ft.a.collectionGroup("permisos").where("ciclo","==","2020-2021").orderBy("nombre").startAt(a.toUpperCase()).endAt(a.toUpperCase()+"\uf8ff"):ft.a.collectionGroup("permisos").where("tecnico","==",e).where("ciclo","==","2020-2021").orderBy("nombre").startAt(a.toUpperCase()).endAt(a.toUpperCase()+"\uf8ff")},Uc=function(e,a){return 0===e?ft.a.collectionGroup("permisos").where("ciclo","==","2020-2021").orderBy("cuenta").startAt(a).endAt(a+"\uf8ff"):ft.a.collectionGroup("permisos").where("tecnico","==",e).where("ciclo","==","2020-2021").orderBy("cuenta").startAt(a).endAt(a+"\uf8ff")},Fc=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("constanciasSanidad").doc(a).get().then((function(e){return e.exists?e.data().numeroConstancia:0})).catch((function(e){return console.log(" Error: ",e),Nt.a.fire("Error de conexi\xf3n","Error al intentar obtener el contador de constancias.","error"),!1}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Gc=function(){var e=Object(ut.a)(st.a.mark((function e(){var a,t,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,ft.a.collectionGroup("permisos").where("ciclo","==","2020-2021").where("desarraigado","==",!0).get();case 3:return t=e.sent,e.next=6,ft.a.collectionGroup("permisos").where("ciclo","==","2020-2021").where("barbechado","==",!0).get();case 6:return n=e.sent,t.forEach((function(e){!0!==e.data().pagado&&a.push(Object(u.a)({id:e.id,superficieMapeada:e.data().superficie},e.data()))})),n.forEach((function(e){!0!==e.data().pagado&&a.push(Object(u.a)({id:e.id,superficieMapeada:e.data().superficie},e.data()))})),0===a.length&&Nt.a.fire("No se encontraron registros!","Por favor intente con otro par\xe1metro de b\xfasqueda.","error"),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Bc=function(e,a){return function(){var t=Object(ut.a)(st.a.mark((function t(n){var r;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,kc(e,a);case 2:r=t.sent,n(Vc(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Vc=function(e){return{type:Fe,payload:e}},qc=function(e){return{type:fe,payload:e.id}},Yc=function(e){return{type:Be,payload:e}},Hc=function(){return function(e){e(lr()),e({type:Ve})}},Zc=function(e){var a;return!1!==e?"CESVBC-".concat("0".repeat(4-(a=e+1).toString().length)+a.toString()):null},Jc=function(e){return{type:Da,payload:e}},_c=function(e){var a=e.state,t=Object(l.b)(),o=a.technicians,c=Object(l.c)((function(e){return e.algodoneroScreen})),i=c.permisos,s=c.permisoSelected,u=i.find((function(e){return e.id===s})),d=u.folio,m=u.nombre,p=u.cuenta,f=u.tecnico,E=o.find((function(e){return e.id===f})),b=Object(n.useState)(""),v=Object(dt.a)(b,2),h=v[0],N=v[1],O=Object(l.c)((function(e){return e.auth})),g=O.uid,y=O.rol;return r.a.createElement("div",{className:"border border-info rounded text-center p-3"},r.a.createElement("h4",null,d),r.a.createElement("div",null,"Cuenta: ",p),r.a.createElement("div",null,m),r.a.createElement("div",null,"T\xe9cnico: ",E?E.displayName:"Sin asignar"),r.a.createElement("select",{name:"campo",id:"campo",type:"text",value:h,onChange:function(e){var n=e.target;N(n.value),function(e,a,t){ft.a.collection("permisos").doc("2020-2021").collection("modulos").doc("Modulo-".concat(e)).collection("permisos").doc(a).update({tecnico:t}).then((function(){Nt.a.fire("T\xe9cnico asignado","Se aplicaron los cambios en la asignaci\xf3n de predios. ","success")})).catch((function(e){console.log(e)}))}(u.modulo,u.folio,n.value),t(Bc("tecnicoCESVBC"===y?g:0,a.palabra))},className:"form-control mt-4"},r.a.createElement("option",{hidden:!0,defaultValue:""},"Asignar T\xe9cnico"),o.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.displayName)}))))},Kc=t(63),Xc=function(){var e=Object(ut.a)(st.a.mark((function e(a,t,n,r){var o,c,l,i,s,u,d,m,p;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nt.a.fire({title:"Actualizando...",text:"Por favor espere...",allowOutsideClick:!1,didOpen:function(){Nt.a.showLoading()}}),(o=Qc(n,r)).push({id:a,nombre:t,localidades:n}),e.next=5,ft.a.collectionGroup("permisos").where("tecnico","!=",a).where("ciclo","==","2020-2021").where("claveLocalidad","in",n.length>0?n:["x"]).get();case 5:return c=e.sent,l=[],o.forEach((function(e){e.localidades.forEach((function(e){l.push(ft.a.collection("colonias").where("clave","==",e).get())}))})),e.next=10,Promise.all(l);case 10:return i=e.sent,s=[],i.forEach((function(e){e.forEach((function(e){s.push({id:e.id,clave:e.data().clave})}))})),u=[],o.forEach((function(e){e.localidades.forEach((function(a){var t=s.find((function(e){return e.clave===a}));u.push({id:t.id,tecnico:e.nombre})}))})),d=ft.a.batch(),m=1,500,e.prev=18,p=0,u.forEach((function(e){d.update(ft.a.collection("colonias").doc(e.id),{tecnico:e.tecnico}),500===m&&(d.commit().then((function(){console.log("Se termino de subir batch")})).catch((function(e){console.error(e)})),d=ft.a.batch(),m=0),m++})),o.forEach((function(e){d.update(ft.a.collection("usuarios").doc(e.id),{localidades:e.localidades}),500===m&&(d.commit().then((function(){console.log("Se termino de subir batch")})).catch((function(e){console.error(e)})),d=ft.a.batch(),m=0),m++})),c.forEach((function(e){d.update(ft.a.collection("permisos").doc("2020-2021").collection("modulos").doc("Modulo-".concat(e.data().modulo)).collection("permisos").doc(e.id),{tecnico:a}),p++,500===m&&(d.commit().then((function(){console.log("Se termino de subir batch")})).catch((function(e){console.error(e)})),d=ft.a.batch(),m=0),m++})),d.commit().then((function(){console.log("Se terminaron de actualizar los permisos"),Nt.a.close(),Nt.a.fire("Cambios guardados","Se aplicaron los cambios en la asignaci\xf3n de predios. \n\t\t\t\t".concat(p," predios asignados."),"success")})).catch((function(e){console.error(e)})),e.abrupt("return",{updates:o,updatesInPadron:u});case 27:return e.prev=27,e.t0=e.catch(18),Nt.a.close(),Nt.a.fire("Error de conexi\xf3n","Error al intentar guardar los cambios.","error"),console.error(e.t0),e.abrupt("return",!1);case 33:case"end":return e.stop()}}),e,null,[[18,27]])})));return function(a,t,n,r){return e.apply(this,arguments)}}(),Qc=function(e,a){var t=[];a.forEach((function(e){t.push({id:e.id,nombre:e.nombre,localidades:Object(Kc.a)(e.localidades)})})),e.forEach((function(e){t.forEach((function(a,n){if(a.localidades.includes(e)){var r=a.localidades.indexOf(e);t[n].localidades.splice(r,1)}}))}));for(var n=[],r=0;r<a.length;r++)a[r].localidades.length!==t[r].localidades.length&&n.push(t[r]);return n},Wc=function(e){var a=e.state,t=e.dispatch,o=a.selectedLocalties,c=a.technicians,l=a.technicianSelected,i=Object(n.useState)(""),s=Object(dt.a)(i,2),u=s[0],d=s[1],m=function(){var e=Object(ut.a)(st.a.mark((function e(a){var n,r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.target,d(n.value),r=c.find((function(e){return e.id===n.value})),t({type:wa,payload:r});case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),p=function(){var e=Object(ut.a)(st.a.mark((function e(){var n,r,c;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u.length>0)){e.next=11;break}return n=[],a.technicians.forEach((function(e){var a;e.id!==u&&n.push({id:e.id,nombre:e.displayName,localidades:null!==(a=e.localidades)&&void 0!==a?a:[]})})),r=[],o.forEach((function(e){return r.push(e.clave)})),e.next=7,Xc(u,l.displayName,r,n);case 7:(c=e.sent)&&(t({type:ja,payload:c.updates}),t({type:Ra,payload:c.updatesInPadron})),e.next=12;break;case 11:Nt.a.fire("T\xe9cnico no seleccionado!","Por favor indique el t\xe9cnico a quien le ser\xe1n asignadas las localidades seleccionadas.","warning");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"border border-info rounded text-center p-3"},r.a.createElement("h4",null,"Localidades seleccionadas: ",o.length),r.a.createElement("div",null,o.map((function(e){return r.a.createElement("div",{key:e.id}," ",e.ubicacion)}))),r.a.createElement("select",{name:"campo",id:"campo",type:"text",value:u,onChange:m,className:"form-control mt-4"},r.a.createElement("option",{hidden:!0,defaultValue:""},"Seleccionar T\xe9cnico"),c.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.displayName)}))),r.a.createElement("button",{onClick:p,className:"btn btn-success mt-4"},"Aplicar cambios"))},$c=function(e){var a=e.dispatch,t=Object(l.b)(),n=Lt({palabra:""}),o=Object(dt.a)(n,2),c=o[0],i=o[1],s=c.palabra,u=Object(l.c)((function(e){return e.algodoneroScreen})).permisos,d=Object(l.c)((function(e){return e.auth})),m=d.uid,p=d.rol,f=function(){s.length>0?(t(Bc("tecnicoCESVBC"===p?m:0,s)),a({type:Ia,payload:s})):Nt.a.fire("Nada para buscar","Ingrese n\xfamero de permiso, n\xfamero de cuenta o el apellido paterno del usuario.","warning")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-inline-flex"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Apellido paterno",name:"palabra",autoComplete:"off",value:s,onChange:i,onKeyUp:function(e){"Enter"===e.key&&f()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:f},r.a.createElement("i",{className:"fas fa-search"}))),r.a.createElement("div",{className:""},u.length>0&&r.a.createElement(Rn,{title:"Permisos",columns:Gn,data:u,setFunction:qc})))},el=function(e){var a=e.title,t=e.columns,n=e.data,o=e.setSelectedRowsFunction,c=e.simpleSetSelectedRowsFunction,i=e.contextMessage,s=Object(l.b)();return r.a.createElement(jn.a,{columns:t,data:n,title:a,pagination:!0,paginationComponentOptions:{rowsPerPageText:"Filas por pagina",rangesSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"},fixedHeader:!0,persistTableHead:!0,fixedHeaderScrollHeight:"380px",highlightOnHover:!0,striped:!0,pointerOnHover:!0,dense:!0,selectableRows:!0,onSelectedRowsChange:function(e){void 0!==o&&s(o(e.selectedRows)),void 0!==!c&&c(e.selectedRows)},contextMessage:i})},al=function(e){var a=e.localties,t=e.dispatch;return r.a.createElement(el,{title:"Localidades",columns:Un,data:a,simpleSetSelectedRowsFunction:function(e){t({type:Sa,payload:e})},contextMessage:{singular:"localidad",plural:"localidades",message:"para asignar"}})},tl=function(){var e=Object(ut.a)(st.a.mark((function e(){var a;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,ft.a.collection("usuarios").where("rol","==","tecnicoCESVBC").get();case 3:return e.sent.forEach((function(e){var t,n;a.push(Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id,modulos:null!==(t=e.data().modulos)&&void 0!==t?t:[],localidades:null!==(n=e.data().localidades)&&void 0!==n?n:[]}))})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nl=function(e,a){switch(a.type){case Ca:return Object(u.a)(Object(u.a)({},e),{},{localties:a.payload});case Sa:return Object(u.a)(Object(u.a)({},e),{},{selectedLocalties:a.payload});case Pa:return Object(u.a)(Object(u.a)({},e),{},{technicians:a.payload});case wa:return Object(u.a)(Object(u.a)({},e),{},{technicianSelected:a.payload});case Ia:return Object(u.a)(Object(u.a)({},e),{},{palabra:a.payload});case ja:var t=[];return e.technicians.forEach((function(e,n){t.push(e),a.payload.forEach((function(a){e.id===a.id&&(t[n].localidades=a.localidades)}))})),Object(u.a)(Object(u.a)({},e),{},{technicians:t});case Ra:var n=[],r=[];return a.payload.forEach((function(e){return r.push(e.id)})),e.localties.forEach((function(e){var t=r.indexOf(e.id);t>=0?n.push(Object(u.a)(Object(u.a)({},e),{},{tecnico:a.payload[t].tecnico})):n.push(Object(u.a)({},e))})),Object(u.a)(Object(u.a)({},e),{},{localties:n});default:return e}},rl=function(){var e=Object(l.c)((function(e){return e.auth})).privilegios.asignarTecnico,a=Object(l.c)((function(e){return e.algodoneroScreen})).permisoSelected,t=Object(n.useReducer)(nl,{localties:[],selectedLocalties:[],technicians:[],technicianSelected:null,permits:[],permitSelected:null}),o=Object(dt.a)(t,2),c=o[0],i=o[1],s=c.selectedLocalties,u=c.localties;return Object(n.useEffect)((function(){vc().then((function(e){i({type:Ca,payload:e})}))}),[i]),Object(n.useEffect)((function(){tl().then((function(e){i({type:Pa,payload:e})}))}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row d-flex justify-content-center p-4"},r.a.createElement("h1",null,"Asignaci\xf3n de t\xe9cnico")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},u.length>0&&r.a.createElement(al,{localties:u,dispatch:i})),r.a.createElement("div",{className:"col-sm-4"},s.length>0&&r.a.createElement(Wc,{state:c,dispatch:i}))),e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row d-flex justify-content-center mt-5"},r.a.createElement("h4",null,"Asignaci\xf3n individual")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement($c,{dispatch:i})),r.a.createElement("div",{className:"col-sm-4"},a&&r.a.createElement(_c,{state:c})))),r.a.createElement("div",{className:"mt-5"}," ",r.a.createElement("br",null)))},ol=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ft.a.collection("permisos").doc("2020-2021").collection("modulos").doc("Modulo-".concat(t)).collection("permisos").doc(a).delete();case 3:return console.log("Permiso borrado: ",a),e.abrupt("return",!0);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a,t){return e.apply(this,arguments)}}(),cl=function(){var e=Object(ut.a)(st.a.mark((function e(a,t,n,r){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ft.a.collection("permisos").doc(n).collection("modulos").doc("Modulo-".concat(t)).collection("permisos").doc(a).update(r);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t,n,r){return e.apply(this,arguments)}}(),ll=function(e,a){switch(a.type){case ka:return a.payload;case Ma:var t=e.map((function(e){return e}));return t[0].state=!0,t[1].editable=!0,t;case Ua:var n=e.map((function(e){return e}));return n[0].state=!1,n[1].editable=!1,n;case Fa:var r=e.map((function(e){return e}));return r[1].state=!0,r[0].editable=!1,r[2].editable=!0,r;case Ga:var o=e.map((function(e){return e}));return o[1].state=!1,o[0].editable=!0,o[2].editable=!1,o;case Ba:var c=e.map((function(e){return e}));return c[2].state=!0,c[1].editable=!1,c[3].editable=!0,c;case Va:var l=e.map((function(e){return e}));return l[2].state=!1,l[1].editable=!0,l[3].editable=!1,l;case qa:var i=e.map((function(e){return e}));return i[2].editable=!1,i[3].state=!0,i[4].editable=!0,i[5].editable=!0,i;case Ya:var s=e.map((function(e){return e}));return s[2].editable=!0,s[3].state=!1,s[4].editable=!1,s[5].editable=!1,s;case Ha:var u=e.map((function(e){return e}));return u[3].editable=!1,u[4].state=!0,u[5].state=!1,u[6].editable=!0,u;case Za:var d=e.map((function(e){return e}));return d[3].editable=!0,d[4].state=!1,d[5].state=!1,d[6].editable=!1,d;case Ja:var m=e.map((function(e){return e}));return m[3].editable=!1,m[4].state=!1,m[5].state=!0,m[6].editable=!0,m;case _a:var p=e.map((function(e){return e}));return p[3].editable=!0,p[4].state=!1,p[5].state=!1,p[6].editable=!1,p;case Ka:var f=e.map((function(e){return e}));return f[4].editable=!1,f[5].editable=!1,f[6].state=!0,f;case Xa:var E=e.map((function(e){return e}));return E[4].editable=!0,E[5].editable=!0,E[6].state=!1,E;default:return e}},il=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.algodoneroScreen})),t=a.permisos,o=a.permisoSelected,c=a.technicians,i=Object(l.c)((function(e){return e.auth})),s=i.uid,d=i.privilegios,m=d.registrarLabores,p=d.pagarLabores,f=d.imprimirLabores,E=d.borrarPermisos,b=t.find((function(e){return e.id===o})),v=c.find((function(e){return e.id===b.tecnico}));Object(n.useEffect)((function(){var e=ul(b);g({type:ka,payload:e})}),[b]);var h=Object(n.useReducer)(ll,ul(b)),N=Object(dt.a)(h,2),O=N[0],g=N[1],y=function(){var a=Object(ut.a)(st.a.mark((function a(t,n,r){var c;return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!pl(t,n,m,p,s,b.tecnico)){a.next=6;break}return c=ml(n,r),a.next=4,cl(o,b.modulo,"2020-2021",c);case 4:a.sent&&(g(dl(n,r)),e(Jc(Object(u.a)(Object(u.a)({},b),c))));case 6:case"end":return a.stop()}}),a)})));return function(e,t,n){return a.apply(this,arguments)}}(),A=new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"});return r.a.createElement("div",{className:"col-sm-4 mt-3"},r.a.createElement("div",{className:"border border-info rounded detallePermiso"},r.a.createElement("div",{className:"d-flex bg-light border-info border-bottom rounded-top p-1 justify-content-center font-weight-bold text-secondary pt-3"},r.a.createElement("h5",null,b.folio)),E&&r.a.createElement("div",{className:"row p-1 pl-2 pt-2"},r.a.createElement("div",{className:"col-4"},r.a.createElement("button",{className:"btn btn-danger",onClick:function(){Nt.a.fire({title:"Atenci\xf3n!!",text:"Borrar?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then(function(){var a=Object(ut.a)(st.a.mark((function a(t){return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.isConfirmed){a.next=7;break}return console.log("Borrando permiso ",b.id,b.modulo),a.next=5,ol(b.id,b.modulo);case 5:a.sent&&e((n=b.id,{type:La,payload:n}));case 7:case"end":return a.stop()}var n}),a)})));return function(e){return a.apply(this,arguments)}}())}},"Borrar"))),r.a.createElement("div",{className:"row p-1 pl-2 pt-2"},r.a.createElement("div",{className:"col-4"},"T\xc9CNICO:"),r.a.createElement("div",{className:"col-8"},v?v.displayName:"SIN ASIGNAR")),r.a.createElement("div",{className:"row p-1 pl-2 pt-2"},r.a.createElement("div",{className:"col-4"},"CUENTA:"),r.a.createElement("div",{className:"col-8"},b.cuenta)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"USUARIO:"),r.a.createElement("div",{className:"col-8"},b.nombre)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"LOTE:"),r.a.createElement("div",{className:"col-8"},b.lote)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"LOCALIDAD:"),r.a.createElement("div",{className:"col-8"},b.ubicacion)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"MODULO:"),r.a.createElement("div",{className:"col-8"},b.modulo)),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"SUPERFICIE:"),r.a.createElement("div",{className:"col-8"},b.superficie," ha")),r.a.createElement("div",{className:"row border rounded m-2 p-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-6 "},"SUPERFICIE MAPEADA:"),r.a.createElement("div",{className:"col-3"},b.superficieMapeada," Ha"),r.a.createElement("div",{className:"col-3"},m&&r.a.createElement("button",{className:" btn btn-outline-primary btn-sm ",type:"button",onClick:function(){return a=b.superficieMapeada,void Nt.a.fire({title:"Actualizar superficie mapeada",input:"text",inputPlaceholder:a,inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar"}).then(function(){var a=Object(ut.a)(st.a.mark((function a(t){return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.isConfirmed){a.next=5;break}return a.next=3,cl(o,b.modulo,"2020-2021",{superficieMapeada:Number(t.value)});case 3:a.sent&&(e(Jc(Object(u.a)(Object(u.a)({},b),{},{superficieMapeada:Number(t.value)}))),Nt.a.fire("OK","Se actualiso la superficie mapeada","success"));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());var a}},r.a.createElement("i",{className:"fas fa-edit"})))),r.a.createElement("div",{className:"row border rounded m-2 p-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-6 "},"FOLIO DE CONSTANCIA F\xcdSICA:"),r.a.createElement("div",{className:"col-3"},b.folioConstaniciaFisica),r.a.createElement("div",{className:"col-3"},m&&r.a.createElement("button",{className:" btn btn-outline-primary btn-sm ",type:"button",onClick:function(){var a,t;return t=null!==(a=b.folioConstaniciaFisica)&&void 0!==a?a:"",void Nt.a.fire({title:"Folio de constancia f\xedsica:",input:"text",inputPlaceholder:t,inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar"}).then(function(){var a=Object(ut.a)(st.a.mark((function a(t){return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.isConfirmed){a.next=5;break}return a.next=3,cl(o,b.modulo,"2020-2021",{folioConstaniciaFisica:t.value});case 3:a.sent&&(e(Jc(Object(u.a)(Object(u.a)({},b),{},{folioConstaniciaFisica:t.value}))),Nt.a.fire("OK","Se guard\xf3 el folio de la constancia.","success"));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}},r.a.createElement("i",{className:"fas fa-edit"})))),r.a.createElement("div",{className:"row border rounded m-2 p-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-6 "},"COMENTARIO:"),r.a.createElement("div",{className:"col-3"}," "," - "," "),r.a.createElement("div",{className:"col-3"},m&&r.a.createElement("button",{className:" btn btn-outline-primary btn-sm ",type:"button",onClick:function(){var a,t;return t=null!==(a=b.comentario)&&void 0!==a?a:"",void Nt.a.fire({title:"Folio de constancia f\xedsica:",input:"textarea",inputValue:t,inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar"}).then(function(){var a=Object(ut.a)(st.a.mark((function a(t){return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.isConfirmed){a.next=5;break}return a.next=3,cl(o,b.modulo,"2020-2021",{comentario:t.value});case 3:a.sent&&(e(Jc(Object(u.a)(Object(u.a)({},b),{},{comentario:t.value}))),Nt.a.fire("OK","Se guard\xf3 el comentario.","success"));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}},r.a.createElement("i",{className:"fas fa-edit"})))),b.comentario&&b.comentario.length>0&&r.a.createElement("div",{className:"row border rounded m-2 p-2"},r.a.createElement("div",{className:"col-12"},b.comentario)),O.map((function(e){return r.a.createElement("div",{key:e.name,className:"row p-1 pl-2 d-flex align-items-center"},r.a.createElement("div",{className:"col-4"},e.tag,":"),r.a.createElement("div",{className:"col-8"},r.a.createElement("button",{className:"btn btn-sm ".concat(sl(e.state,e.editable)),type:"button",onClick:function(){return y(e.editable,e.name,e.state)}},r.a.createElement("div",null,r.a.createElement("i",{className:"fas fa-check"})))))})),r.a.createElement("div",{className:"row p-1 pl-2"},r.a.createElement("div",{className:"col-4"},"MONTO A PAGAR:"),r.a.createElement("div",{className:"col-8"},A.format(60*b.superficieMapeada)," MN")),r.a.createElement("div",{className:"row pt-3 pl-2"},r.a.createElement("div",{className:"col-12 ".concat(!b.laboresPendientes&&"text-success")},b.laboresPendientes?"CUENTA BLOQUEADA PARA EXPEDICI\xd3N":"CUENTA LIBERADA PARA EXPEDICI\xd3N")),r.a.createElement("div",{className:"row p-1 pl-2 pt-4 pb-4"},r.a.createElement("div",{className:"col-12 d-flex justify-content-center"},b.pagado&&f&&r.a.createElement("button",{type:"button",className:"btn btn-outline-success",onClick:function(){var a,t;e((a="2020-2021",t=b,function(){var e=Object(ut.a)(st.a.mark((function e(n){var r,o;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.folioSanidad){e.next=5;break}n(cr()),n(Yc(t)),e.next=10;break;case 5:return e.next=7,Fc(a);case 7:r=e.sent,o=Zc(r),n(Yc(Object(u.a)(Object(u.a)({},t),{},{folioSanidad:o})));case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()))}},r.a.createElement("i",{className:"fas fa-print"}),b.folioSanidad?r.a.createElement("span",null," Imprimir Constancia"):r.a.createElement("span",null," Generar Constancia"))))))},sl=function(e,a){return!0===e?"btn-success":!0===a?"btn-outline-success":"btn-outline-secondary"},ul=function(e){var a,t,n,r,o,c,l,i=null!==(a=e.desfoliado)&&void 0!==a&&a,s=null!==(t=e.cosechado)&&void 0!==t&&t,u=null!==(n=e.desvarado)&&void 0!==n&&n,d=null!==(r=e.disqueado)&&void 0!==r&&r,m=null!==(o=e.desarraigado)&&void 0!==o&&o,p=null!==(c=e.barbechado)&&void 0!==c&&c,f=null!==(l=e.pagado)&&void 0!==l&&l,E=[{name:"desfoliado",tag:"DESFOLIADO",state:i,editable:!1},{name:"cosechado",tag:"COSECHADO",state:s,editable:!1},{name:"desvarado",tag:"DESVARADO",state:u,editable:!1},{name:"disqueado",tag:"DISQUEADO",state:d,editable:!1},{name:"desarraigado",tag:"DESARRAIGADO",state:m,editable:!1},{name:"barbechado",tag:"BARBECHADO",state:p,editable:!1},{name:"pagado",tag:"PAGADO",state:f,editable:!1}];return f?(E[6].editable=!0,E):p?(E[5].editable=!0,E[6].editable=!0,E):m?(E[4].editable=!0,E[6].editable=!0,E):d?(E[3].editable=!0,E[4].editable=!0,E[5].editable=!0,E):u?(E[2].editable=!0,E[3].editable=!0,E):s?(E[1].editable=!0,E[2].editable=!0,E):i?(E[0].editable=!0,E[1].editable=!0,E):(E[0].editable=!0,E)},dl=function(e,a){if(a)switch(e){case"desfoliado":return{type:Ua};case"cosechado":return{type:Ga};case"desvarado":return{type:Va};case"disqueado":return{type:Ya};case"desarraigado":return{type:Za};case"barbechado":return{type:_a};case"pagado":return{type:Xa};default:return{type:""}}else switch(e){case"desfoliado":return{type:Ma};case"cosechado":return{type:Fa};case"desvarado":return{type:Ba};case"disqueado":return{type:qa};case"desarraigado":return{type:Ha};case"barbechado":return{type:Ja};case"pagado":return{type:Ka};default:return{type:""}}},ml=function(e,a){return"pagado"===e?{pagado:!a,laboresPendientes:a}:Object(Dt.a)({},e,!a)},pl=function(e,a,t,n,r,o){return!!e&&("pagado"===a?!!n:!!t||r===o)},fl=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n,r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ft.a.collection("constanciasSanidad").doc(t).collection("constancias").doc(a.folio),r=ft.a.collection("constanciasSanidad").doc(t),e.prev=2,e.next=5,ft.a.runTransaction(function(){var e=Object(ut.a)(st.a.mark((function e(t){var o,c;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(n);case 2:return o=e.sent,e.next=5,t.get(r);case 5:if(c=e.sent,!o.exists){e.next=11;break}throw Nt.a.fire("La constancia ya existe","Est\xe1 intentando sobreescribir una constancia ya existente, verifique su conexi\xf3n.","error"),new Error("La constancia ya existe");case 11:t.set(n,a),c.exists?t.update(r,{numeroConstancia:Hr.a.firestore.FieldValue.increment(1)}):t.set(r,{numeroConstancia:1});case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 5:if(!e.sent){e.next=9;break}return Nt.a.fire("Constancia Guardada","Se registr\xf3 con \xe9xito la constancia.","success"),e.abrupt("return",!0);case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(2),Nt.a.fire("Error de conexi\xf3n","Error al intentar guardar la constancia.","error"),console.error(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(a,t){return e.apply(this,arguments)}}(),El=function(){var e=Object(l.c)((function(e){return e.algodoneroScreen})),a=e.printSanidadModal,t=e.technicians.find((function(e){return e.id===a.tecnico})),n=Object(l.c)((function(e){return e.transferenciasScreen})).transferPrintButton,o=Object(l.b)(),c=function(){o(Hc())},i=function(){var e=Object(ut.a)(st.a.mark((function e(){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fl(Object(u.a)(Object(u.a)({},a),{},{folioSanidad:a.folioSanidad}),"2020-2021");case 2:e.sent&&(o(cr()),cl(a.folio,a.modulo,"2020-2021",{folioSanidad:a.folioSanidad}),o(Jc(Object(u.a)(Object(u.a)({},a),{},{folioSanidad:a.folioSanidad}))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=new Date;return r.a.createElement(qr.a,{isOpen:!!a,onRequestClose:c,style:{content:{width:"1125px",height:"1500px",overflow:"auto"}},closeTimeoutMS:200,className:"printModalSanidad",overlayClassName:"modal-fondo"},r.a.createElement("div",{className:"row p-5"},r.a.createElement("div",{className:"col-2"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("img",{src:"./logos/sader.png",alt:"Logo sader",style:{maxHeight:50}}))),r.a.createElement("div",{className:"col-8 text-center"},r.a.createElement("h5",null,"SECRETARIA DE AGRICULTURA Y DESARROLLO RURAL ",r.a.createElement("br",null),"DISTRITO DE DESARROLLO RURAL 002, RIO COLORADO ",r.a.createElement("br",null),"COMIT\xc9 ESTATAL DE SANIDAD VEGETAL DE BAJA CALIFORNIA")),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",{className:"d-flex-column justify-content-center"},r.a.createElement("img",{src:"./logos/cesvbc.webp",alt:"Logo sanidad vegetal",style:{maxHeight:80}}),r.a.createElement("div",{className:"mt-3"},r.a.createElement("b",null,"FOLIO: ",a.folioSanidad," "))))),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row dflex justify-content-center"},r.a.createElement("h4",null,r.a.createElement("b",null,"CONSTANCIA DE EJECUCI\xd3N DE LABORES FITOSANITARIAS"))),r.a.createElement("div",{className:"row dflex justify-content-center"},r.a.createElement("h5",null,r.a.createElement("b",null,"ALGODONERO CICLO P-V 2021-2021"))),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row d-flex justify-content-center pt-5 text-justify"},r.a.createElement("div",{className:"col-8"},r.a.createElement("p",null,"POR LA PRESENTE HACEMOS CONSTAR QUE EL C. ",a.nombre,", PRODUCTOR DEL LOTE NO.",a.lote," DEL EJIDO/COLONIA ",a.ubicacion,", REALIZ\xd3 LAS LABORES FITOSANITARIAS EN UNA SUPERFICIE DE ",a.superficie," HA."),r.a.createElement("p",null,"DANDO AS\xcd CUMPLIMIENTO A LO ESTABLECIDO EN LA LEY FEDERAL DE SANIDAD VEGETAL, LA NORMA OFICIAL MEXICANA: NOM-026-SAG/FITO-2014 POR LA QUE SE ESTABLECE EL CONTROL DE PLAGAS REGLAMENTADAS DEL ALGODONERO Y LA NOM-081-FITO-2001-MANEJO Y ELIMINACI\xd3N DE FOCOS DE INFESTACI\xd3N DE PLAGAS, MEDIANTE EL ESTABLECIMIENTO O REORDENAMIENTO DE FECHAS DE SIEMBRA, COSECHA Y DESTRUCCI\xd3N DE RESIDUOS."),r.a.createElement("p",null,"SIRVA EL PRESENTE DOCUMENTO PARA LA LIBERACI\xd3N DE CARTA DE GARANT\xcdA EMITIDA."),r.a.createElement("p",null,"PROPIETARIO: ",a.nombre," ",r.a.createElement("br",null),"CUENTA: ",a.cuenta," ",r.a.createElement("br",null),"T\xc9CNICO: ",t?t.displayName:""),r.a.createElement("div",{className:" d-flex justify-content-end pt-5"},r.a.createElement("p",null,"MEXICALI, B. C. , A ",s.toLocaleString("es-MX",{weekday:"long",year:"numeric",month:"long",day:"numeric"}).toUpperCase())))),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row pt-5"}),r.a.createElement("div",{className:"row pt-5 d-flex "},r.a.createElement("div",{className:"col-4 d-flex-column align-items-end justify-content-center"},r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{src:"./logos/sello-cesvbc.png",alt:"Sello sanidad vegetal",style:{maxHeight:150}}))),r.a.createElement("div",{className:"col-4 d-flex flex-column ml-3"},r.a.createElement("p",{className:"pb-5 text-center"},"NOMBRE Y FIRMA"),r.a.createElement("hr",null),r.a.createElement("div",{className:"text-center"},r.a.createElement("b",null,"T\xc9CNICO FITOSANITARIO DEL CESVBC")))),r.a.createElement("div",{className:"row p-5"},"C.c.p. -DISTRITO DE DESARROLLO RURAL 002-RIO COLORADO ",r.a.createElement("br",null),"C.c.p. -ARCHIVO"),r.a.createElement("div",{className:"row m-3 d-flex justify-content-center pt-5"},n?r.a.createElement("button",{type:"button",className:"btn btn-outline-primary d-print-none",onClick:function(){window.print()}},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")):r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none",onClick:i},r.a.createElement("i",{className:"fas fa-save"}),r.a.createElement("span",null," Guardar ")),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none ml-3",onClick:c},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),r.a.createElement("span",null," Cerrar"))))},bl=function(){var e=Object(l.b)(),a=Lt({palabra:""}),t=Object(dt.a)(a,2),o=t[0],c=t[1],i=o.palabra,s=Object(l.c)((function(e){return e.algodoneroScreen})),u=s.permisos,d=s.permisoSelected,m=s.printSanidadModal;Object(n.useEffect)((function(){tl().then((function(a){e({type:Ta,payload:a})}))}),[e]);var p,f=function(){i.length>0?e(Bc(0,i)):Nt.a.fire("Nada para buscar","Ingrese n\xfamero de permiso, n\xfamero de cuenta o el apellido paterno del usuario.","warning")};u.forEach((function(e){e.id===d&&(p=e)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-sm-6 d-inline-flex mt-2"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Apellido paterno",name:"palabra",autoComplete:"off",value:i,onChange:c,onKeyUp:function(e){"Enter"===e.key&&f()}}),r.a.createElement("button",{className:"btn btn-outline-primary",onClick:f},r.a.createElement("i",{className:"fas fa-search"}))),r.a.createElement("div",{className:"col-sm-4 mt-2"},r.a.createElement("button",{className:"btn btn-outline-primary",onClick:function(){e(function(){var e=Object(ut.a)(st.a.mark((function e(a){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gc();case 2:t=e.sent,a(Vc(t));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())}},"Labores Completas"))),r.a.createElement("div",{className:"row pt-3 pb-4"},r.a.createElement("div",{className:"col-sm-8 pr-0 mt-3"},u.length>0&&r.a.createElement(Rn,{title:"Permisos",columns:Gn,data:u,setFunction:qc})),d&&void 0!==p?r.a.createElement(il,{palabra:i}):r.a.createElement(r.a.Fragment,null)),void 0!==m&&r.a.createElement(El,null))},vl={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"430px",width:"1000px"}};qr.a.setAppElement("#root");var hl=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.autorizadosScreen})),t=a.openAutorizadosModal,n=a.autorizadoSelected,o=a.autorizados,c=a.formError,i=Object(l.c)((function(e){return e.sicperScreen})).expedicion.find((function(e){return e.id==="".concat(n.clave,"-").concat(n.cultivo)})),s=i?i.gravedadNormal:0,u=i?i.gravedadExtra:0,d=i?i.pozoNormal:0,m=i?i.pozoExtra:0,p=Lt({clave:n.clave,cultivo:n.cultivo,subciclo:n.subciclo,gravedadNormalAutorizada:n.gravedadNormalAutorizada,gravedadNormalAsignada:n.gravedadNormalAsignada,gravedadExtraAutorizada:n.gravedadExtraAutorizada,gravedadExtraAsignada:n.gravedadExtraAsignada,pozoNormalAutorizada:n.pozoNormalAutorizada,pozoNormalAsignada:n.pozoNormalAsignada,pozoExtraAutorizada:n.pozoExtraAutorizada,pozoExtraAsignada:n.pozoExtraAsignada}),f=Object(dt.a)(p,2),E=f[0],b=f[1],v=E.clave,h=E.cultivo,N=E.subciclo,O=E.gravedadNormalAutorizada,g=E.gravedadNormalAsignada,y=E.gravedadExtraAutorizada,A=E.gravedadExtraAsignada,x=E.pozoNormalAutorizada,C=E.pozoNormalAsignada,S=E.pozoExtraAutorizada,P=E.pozoExtraAsignada,j=[],R=function(){I()&&(o.forEach((function(e){e.cultivo===n.cultivo?j.push({clave:v,cultivo:h,subciclo:N,gravedadNormalAutorizada:Number(O),gravedadNormalAsignada:Number(g),gravedadExtraAutorizada:Number(y),gravedadExtraAsignada:Number(A),pozoNormalAutorizada:Number(x),pozoNormalAsignada:Number(C),pozoExtraAutorizada:Number(S),pozoExtraAsignada:Number(P)}):j.push(e)})),e(bn(j)),e(hn()))},w=function(e){"Enter"===e.key&&R()},I=function(){var a="No se permiten valores negativos !",t="La superficie asignada no puede ser mayor a la superficie autorizada !",n="Es necesario asignar un valor a todas las superficies !",r="La superficie asignada no puede ser menor que la superficie expedida !";return Number(O)<0||Number(g)<0||Number(y)<0||Number(A)<0||Number(x)<0||Number(C)<0||Number(S)<0||Number(P)<0?(e(gn(a)),!1):""===O||""===g||""===y||""===A||""===x||""===C||""===S||""===P?(e(gn(n)),!1):g>O||A>y||C>x||P>S?(e(gn(t)),!1):A-u<0||g-s<0||C-d<0||P-m<0?(e(gn(r)),!1):(e(yn()),!0)};return r.a.createElement(qr.a,{isOpen:t,onRequestClose:function(){e(hn()),e(yn())},style:vl,closeTimeoutMS:200,className:"autorizadosModal",overlayClassName:"modal-fondo"},r.a.createElement("form",null,r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center pt-2"},r.a.createElement("h5",null,"".concat(v," - ").concat(h)))),c?r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center pt-2"},r.a.createElement("div",{className:"border border-danger rounded text-danger p-2"},c))):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-borderless table-hover table-striped table-info mt-4 border-info text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"}),r.a.createElement("th",{colSpan:"2"},"Superficie Normal"),r.a.createElement("th",{colSpan:"2"},"Superficie Extra")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"),r.a.createElement("th",{scope:"col"},"Expedida"),r.a.createElement("th",{scope:"col"},"Disponible"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"),r.a.createElement("th",{scope:"col"},"Expedida"),r.a.createElement("th",{scope:"col"},"Disponible"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Gravedad"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Gravedad Normal Autorizada",name:"gravedadNormalAutorizada",value:O,autoComplete:"off",onChange:b,onKeyUp:w})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"gravedad Normal Asignada",name:"gravedadNormalAsignada",value:g,autoComplete:"off",onChange:b,onKeyUp:w})),r.a.createElement("td",null,Xt(s,4)),r.a.createElement("td",null,Xt(g-s,4)),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Gravedad Extra Autorizada",name:"gravedadExtraAutorizada",value:y,autoComplete:"off",onChange:b,onKeyUp:w})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Gravedad Extra Asignada",name:"gravedadExtraAsignada",value:A,autoComplete:"off",onChange:b,onKeyUp:w})),r.a.createElement("td",null,Xt(u,4)),r.a.createElement("td",null,Xt(A-u,4))),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Federal"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Normal Autorizada",name:"pozoNormalAutorizada",value:x,autoComplete:"off",onChange:b,onKeyUp:w})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Normal Asignada",name:"pozoNormalAsignada",value:C,autoComplete:"off",onChange:b,onKeyUp:w})),r.a.createElement("td",null,Xt(d,4)),r.a.createElement("td",null,Xt(C-d,4)),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Extra Autorizada",name:"pozoExtraAutorizada",value:S,autoComplete:"off",onChange:b,onKeyUp:w})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Extra Asignada",name:"pozoExtraAsignada",value:P,autoComplete:"off",onChange:b,onKeyUp:w})),r.a.createElement("td",null,Xt(m,4)),r.a.createElement("td",null,Xt(P-m,4)))))),r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"d-flex justify-content-center col-sm-12"},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:R},r.a.createElement("i",{className:"fas fa-check"}))))))},Nl={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"430px",width:"1000px"}};qr.a.setAppElement("#root");var Ol=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.autorizadosScreen})),t=a.openAutorizadosModal,n=a.autorizadoSelected,o=a.autorizados,c=a.formError,i=Object(l.c)((function(e){return e.sicperScreen})).expedicion.find((function(e){return e.id==="".concat(n.clave,"-").concat(n.cultivo)})),s=i?i.pozoParticularNormal:0,u=i?i.pozoParticularExtra:0,d=Lt({clave:n.clave,cultivo:n.cultivo,subciclo:n.subciclo,gravedadNormalAutorizada:n.gravedadNormalAutorizada,gravedadNormalAsignada:n.gravedadNormalAsignada,gravedadExtraAutorizada:n.gravedadExtraAutorizada,gravedadExtraAsignada:n.gravedadExtraAsignada,pozoNormalAutorizada:n.pozoNormalAutorizada,pozoNormalAsignada:n.pozoNormalAsignada,pozoExtraAutorizada:n.pozoExtraAutorizada,pozoExtraAsignada:n.pozoExtraAsignada}),m=Object(dt.a)(d,2),p=m[0],f=m[1],E=p.clave,b=p.cultivo,v=p.subciclo,h=p.gravedadNormalAutorizada,N=p.gravedadNormalAsignada,O=p.gravedadExtraAutorizada,g=p.gravedadExtraAsignada,y=p.pozoNormalAutorizada,A=p.pozoNormalAsignada,x=p.pozoExtraAutorizada,C=p.pozoExtraAsignada,S=[],P=function(){R()&&(o.forEach((function(e){e.cultivo===n.cultivo?S.push({clave:E,cultivo:b,subciclo:v,gravedadNormalAutorizada:Number(h),gravedadNormalAsignada:Number(N),gravedadExtraAutorizada:Number(O),gravedadExtraAsignada:Number(g),pozoNormalAutorizada:Number(y),pozoNormalAsignada:Number(A),pozoExtraAutorizada:Number(x),pozoExtraAsignada:Number(C)}):S.push(e)})),e(bn(S)),e(hn()))},j=function(e){"Enter"===e.key&&P()},R=function(){var a="No se permiten valores negativos !",t="La superficie asignada no puede ser mayor a la superficie autorizada !",n="Es necesario asignar un valor a todas las superficies !",r="La superficie asignada no puede ser menor que la superficie expedida !";return Number(h)<0||Number(N)<0||Number(O)<0||Number(g)<0||Number(y)<0||Number(A)<0||Number(x)<0||Number(C)<0?(e(gn(a)),!1):""===h||""===N||""===O||""===g||""===y||""===A||""===x||""===C?(e(gn(n)),!1):N>h||g>O||A>y||C>x?(e(gn(t)),!1):A-s<0||C-u<0?(e(gn(r)),!1):(e(yn()),!0)};return r.a.createElement(qr.a,{isOpen:t,onRequestClose:function(){e(hn()),e(yn())},style:Nl,closeTimeoutMS:200,className:"autorizadosModal",overlayClassName:"modal-fondo"},r.a.createElement("form",null,r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center pt-2"},r.a.createElement("h5",null,"".concat(E," - ").concat(b)))),c?r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center pt-2"},r.a.createElement("div",{className:"border border-danger rounded text-danger p-2"},c))):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-borderless table-hover table-striped table-info mt-4 border-info text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"}),r.a.createElement("th",{colSpan:"2"},"Superficie Normal"),r.a.createElement("th",{colSpan:"2"},"Superficie Extra")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"),r.a.createElement("th",{scope:"col"},"Expedida"),r.a.createElement("th",{scope:"col"},"Disponible"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"),r.a.createElement("th",{scope:"col"},"Expedida"),r.a.createElement("th",{scope:"col"},"Disponible"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Particular"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Normal Autorizada",name:"pozoNormalAutorizada",value:y,autoComplete:"off",onChange:f,onKeyUp:j})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Normal Asignada",name:"pozoNormalAsignada",value:A,autoComplete:"off",onChange:f,onKeyUp:j})),r.a.createElement("td",null,Xt(s,4)),r.a.createElement("td",null,Xt(A-s,4)),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Extra Autorizada",name:"pozoExtraAutorizada",value:x,autoComplete:"off",onChange:f,onKeyUp:j})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Pozo Extra Asignada",name:"pozoExtraAsignada",value:C,autoComplete:"off",onChange:f,onKeyUp:j})),r.a.createElement("td",null,Xt(u,4)),r.a.createElement("td",null,Xt(C-u,4)))))),r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"d-flex justify-content-center col-sm-12"},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:P},r.a.createElement("i",{className:"fas fa-check"}))))))},gl=function(e){var a=e.autorizados,t=e.modulo,n=0,o=0,c=0,l=0;return null!==t&&a.forEach((function(e){n+=e.pozoNormalAutorizada,o+=e.pozoNormalAsignada,c+=e.pozoExtraAutorizada,l+=e.pozoExtraAsignada})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex bg-light border-info border-bottom rounded-top p-1 justify-content-center font-weight-bold text-secondary pt-3"},r.a.createElement("h5",null," ",t)),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-info mb-0 text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"3"},"Total Superficie Normal")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Particular"),r.a.createElement("td",null,n),r.a.createElement("td",null,o))))),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-table-secondary text-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"3"},"Total Superficie Extra")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Sistema"),r.a.createElement("th",{scope:"col"},"Autorizada"),r.a.createElement("th",{scope:"col"},"Asignada"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Pozo Particular"),r.a.createElement("td",null,c),r.a.createElement("td",null,l))))))},yl=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.autorizadosScreen})),t=a.modulo,n=a.autorizados,o=a.autorizadoSelected,c=a.superficieReferencia,i=Object(l.c)((function(e){return e.auth})),s=i.variablesGlobales,u=i.privilegios,d=s.cicloActual,m=0,p=0,f=0,E=0,b=0,v=0,h=0,N=0,O=0;null!==t&&(n.forEach((function(e){m+=e.gravedadNormalAutorizada,p+=e.gravedadNormalAsignada,f+=e.gravedadExtraAutorizada,E+=e.gravedadExtraAsignada,b+=e.pozoNormalAutorizada,v+=e.pozoNormalAsignada,h+=e.pozoExtraAutorizada,N+=e.pozoExtraAsignada})),O=m+p+f+E+b+v+h+N);var g=function(a){e(function(e){return{type:ye,payload:e}}(a)),e(En(d,a)),e(_t(a,d))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row pt-3 .autorizadosModal"},r.a.createElement("div",{className:"col-sm-8 "},Jn.c.map((function(e){return t===e?r.a.createElement("button",{key:e,className:"btn btn-primary m-1",type:"button",onClick:function(){return g(e)}},r.a.createElement("span",null,"M-",e)):r.a.createElement("button",{key:e,className:"btn btn-outline-primary m-1",type:"button",onClick:function(){return g(e)}},r.a.createElement("span",null,"M-",e))})))),r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"col-sm-8 pr-0 mt-3"},"Pozo Particular"===t?r.a.createElement(Rn,{title:"Autorizados",columns:qn,data:n,setFunction:Nn}):r.a.createElement(Rn,{title:"Autorizados",columns:Vn,data:n,setFunction:Nn})),t?r.a.createElement("div",{className:"col-sm-4 pl-3 mt-3"},r.a.createElement("div",{className:"d-flex flex-column border rounded border-info"},n.length>0?"Pozo Particular"===t?r.a.createElement(gl,{autorizados:n,modulo:t}):r.a.createElement(en,{autorizados:n,modulo:t}):r.a.createElement(r.a.Fragment,null),u.editarAutorizados&&c!==O&&r.a.createElement("div",{className:"row p-1 pl-2  d-flex flex-column"},r.a.createElement("div",{className:"d-flex justify-content-center pt-5 text-warning"},"! Hay modificaciones sin guardar !"),r.a.createElement("div",{className:"d-flex justify-content-center pt-4 pb-4"},r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary",onClick:function(){!function(e,a,t){var n=ft.a.batch();t.forEach((function(t){var r=ft.a.collection("autorizados").doc(e).collection("modulos").doc("Modulo-".concat(a)).collection("autorizados").doc("".concat(t.clave,"-").concat(t.cultivo)),o=t.gravedadNormalAutorizada+t.pozoNormalAutorizada,c=t.gravedadExtraAutorizada+t.pozoExtraAutorizada,l=o+c,i=function(e){return 1===e||2===e||3===e?"Sonora":"Baja California"}(a);n.set(r,{estado:i,modulo:a,clave:t.clave,cultivo:t.cultivo,subciclo:t.subciclo,superficieNormal:o,superficieExtra:c,superficieTotal:l,gravedadNormalAutorizada:t.gravedadNormalAutorizada,gravedadNormalAsignada:t.gravedadNormalAsignada,gravedadExtraAutorizada:t.gravedadExtraAutorizada,gravedadExtraAsignada:t.gravedadExtraAsignada,pozoNormalAutorizada:t.pozoNormalAutorizada,pozoNormalAsignada:t.pozoNormalAsignada,pozoExtraAutorizada:t.pozoExtraAutorizada,pozoExtraAsignada:t.pozoExtraAsignada})})),n.commit().then((function(){console.log("Se registraron con \xe9xito los cambios."),Nt.a.fire("Autorizados Guardados","Se registraron con \xe9xito los cambios.","success")})).catch((function(e){console.error("Error writing document: ",e)}))}(d,t,n),e(En(d,t)),e(_t(t,d))}},r.a.createElement("i",{className:"far fa-save"}),r.a.createElement("span",null," Guardar Cambios")))))):r.a.createElement(r.a.Fragment,null)),o?"UNI01"===t||"UNI02"===t||"UNI03"===t?r.a.createElement(Ol,null):r.a.createElement(hl,null):r.a.createElement(r.a.Fragment,null))},Al=function(e){var a=e.titulo,t=e.subtitulo1,n=e.subtitulo2,o=e.etiquetas,c=e.dataSet,l=e.ancho,i={labels:o,datasets:[{label:a,data:c,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(20, 200, 132, 0.2)","rgba(230, 2, 134, 0.2)","rgba(80, 150, 80, 0.2)","rgba(150, 50, 150,0.21)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(20, 200, 132, 1)","rgba(230, 2, 134, 1)","rgba(80, 150, 80, 1)","rgba(150, 50, 150, 1)"],borderWidth:1}]};return r.a.createElement("div",{className:"pt-4 text-secondary"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h5",null,a)),r.a.createElement("div",{className:"d-flex flex-column pt-4 pb-4 pl-3"},r.a.createElement("div",null,r.a.createElement("h6",null,t)),r.a.createElement("div",null,r.a.createElement("h6",null,n))),r.a.createElement("div",{className:"pb-4"},r.a.createElement(Wt.HorizontalBar,{data:i,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},width:l})))},xl=function(){var e=Object(l.c)((function(e){return e.entidades})),a=e.permisos,t=e.campoOrdenador,n=[],o=0,c=0;a&&((n=function(e,a){var t={};e.forEach((function(e){var n=e[a];t[n]?(t[n].superficie+=e.supAutorizada,t[n].numeroPermisos++):t[n]={label:n,superficie:e.supAutorizada,numeroPermisos:1}}));var n=Object.values(t);n.sort((function(e,a){return e.superficie<a.superficie?1:e.superficie>a.superficie?-1:0}));var r=[],o=[],c=[],l=8,i=0,s=0;return n.forEach((function(e){l>=0?(r.push("".concat(e.label," (").concat(e.superficie,"ha)")),o.push(e.superficie),c.push(e.numeroPermisos),l--):(i+=e.superficie,s+=e.numeroPermisos)})),r.push("Otros ".concat(a," (").concat(i,"ha)")),o.push(i),c.push(s),{labels:r,superficiesCultivos:o,numeroPermisos:c}}(a,t)).superficiesCultivos.forEach((function(e){o+=e})),n.numeroPermisos.forEach((function(e){c+=e})));var i="Superficie incluida: ".concat(o," ha"),s="Permisos incluidos: ".concat(c);return r.a.createElement("div",null,n?r.a.createElement(Al,{titulo:"Superficies por ".concat(function(e){switch(e){case"nombreCultivo":return"cultivo";case"usuario":return"usuario";case"nombreProductor":return"productor";case"localidad":return"localidad"}}(t)),subtitulo1:i,subtitulo2:s,etiquetas:n.labels,dataSet:n.superficiesCultivos,ancho:220}):r.a.createElement(r.a.Fragment,null))},Cl=t(41),Sl=t.n(Cl),Pl=function(e,a,t,n,r,o,c,l,i){return function(){var s=Object(ut.a)(st.a.mark((function s(u){var d;return st.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,nn(e,a,t,n,r,o,c,l,i);case 2:d=s.sent,u(jl(d)),u(Rl(n[0]));case 5:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},jl=function(e){return{type:ea,payload:e}},Rl=function(e){return{type:aa,payload:e}},wl=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.auth})).modulo,t=Lt({palabra:""}),o=Object(dt.a)(t,2),c=o[0],i=o[1],s=c.palabra,u=c.campo,d=c.activosCancelados,m=c.tipoSuperficie,p=c.sistema,f=Object(n.useState)(new Date(2021,8,1)),E=Object(dt.a)(f,2),b=E[0],v=E[1],h=Object(n.useState)(new Date),N=Object(dt.a)(h,2),O=N[0],g=N[1],y=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual,A=function(){u?e(Pl(s,a,y,[u],d,m,p,b,O)):Nt.a.fire("Nada para buscar","Seleccione un campo.","warning")};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 d-inline-flex p-0"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"parametro de busqueda",name:"palabra",autoComplete:"off",value:s,onChange:i,onKeyUp:function(e){"Enter"===e.key&&A()}}),r.a.createElement("select",{name:"campo",value:u,onChange:i,className:"form-control ml-2"},r.a.createElement("option",{value:""},"-"),r.a.createElement("option",{value:"nombreCultivo"},"Cultivo"),r.a.createElement("option",{value:"usuario"},"Usuario"),r.a.createElement("option",{value:"nombreProductor"},"Productor"),r.a.createElement("option",{value:"localidad"},"Localidad")),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-2 no-printme",type:"button",onClick:A},r.a.createElement("i",{className:"fas fa-search"})))),r.a.createElement("div",{className:"row justify-content-between pt-2"},r.a.createElement("div",{className:"col-sm-4 border rounded pt-2 pb-2"},r.a.createElement("p",null,"ESTADO DE LOS PERMISOS"),r.a.createElement("div",{className:"form-check d-flex flex-column"},r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"activosCancelados",id:"todos",value:"todos",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"todos"},"Todos los permisos")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"activosCancelados",id:"activos",value:"activo",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"activos"},"Permisos activos")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"activosCancelados",id:"cancelados",value:"Cancelado",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"cancelados"},"Permisos cancelados")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"activosCancelados",id:"En proceso de cancelaci\xf3n",value:"En proceso de cancelaci\xf3n",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"En proceso de cancelaci\xf3n"},"En proceso de cancelaci\xf3n")))),r.a.createElement("div",{className:"col-sm-4 border rounded pt-2 pb-2"},r.a.createElement("p",null,"TIPO DE EXPEDICI\xd3N"),r.a.createElement("div",{className:"form-check d-flex flex-column"},r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"tipoSuperficie",id:"toda",value:"todos",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"toda"},"Toda la superficie")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"tipoSuperficie",id:"superficieNormal",value:"normal",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"superficieNormal"},"Superficie normal")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"tipoSuperficie",id:"superficieExtra",value:"extra",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"superficieExtra"},"Superficie extra")))),r.a.createElement("div",{className:"col-sm-3 border rounded pt-2 pb-2"},r.a.createElement("p",null,"SISTEMA DE RIEGO"),r.a.createElement("div",{className:"form-check d-flex flex-column"},r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"sistema",id:"gravedadPozo",value:"todos",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"gravedadPozo"},"Gravedad y pozo")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"sistema",id:"gravedad",value:"Gravedad",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"gravedad"},"Gravedad")),r.a.createElement("div",null,r.a.createElement("input",{className:"form-check-input",type:"radio",name:"sistema",id:"pozo",value:"Pozo",onChange:i}),r.a.createElement("label",{className:"form-check-label",htmlFor:"pozo"},"Pozo"))))),r.a.createElement("div",{className:"row justify-content-between border rounded mt-2"},r.a.createElement("div",{className:"col-sm-12 p-2"},r.a.createElement("p",null,"RANGO DE EXPEDICI\xd3N")),r.a.createElement("div",{className:"col-sm-5  pb-2"},r.a.createElement("label",{className:"form-check-label"},"Fecha inicial"),r.a.createElement("div",null,r.a.createElement(Sl.a,{type:"date",onChange:v,value:b,format:"dd/MM/yyyy"}))),r.a.createElement("div",{className:"col-sm-5 pb-2"},r.a.createElement("label",{className:"form-check-label"},"Fecha final"),r.a.createElement("div",null,r.a.createElement(Sl.a,{type:"date",onChange:g,value:O,format:"dd/MM/yyyy"})))),r.a.createElement("div",{className:" row d-flex pt-3"},r.a.createElement("button",{className:"btn btn-outline-primary flex-fill no-printme",type:"button",onClick:function(){window.print()}},r.a.createElement("span",null,"Imprimir informe "),r.a.createElement("i",{className:"fas fa-print"})))))},Il=function(e){var a=e.title,t=e.data,n=e.columns,o=e.setFunction,c=e.closeFunction,i=Object(l.b)();return r.a.createElement("div",{className:"table table-responsive table-striped"},r.a.createElement(jn.a,{columns:n,data:t,title:a,highlightOnHover:!0,striped:!0,pointerOnHover:!0,dense:!0,onRowClicked:function(e){void 0!==o&&i(o(e)),void 0!==c&&i(c())},customStyles:{headCells:{style:{paddingLeft:"5px",paddingRight:"5px"}},headRow:{style:{backgroundColor:"lightgray"}},cells:{style:{fontSize:"10px",paddingLeft:"5px",paddingRight:"5px"}}}}))},zl=function(){var e=Object(l.c)((function(e){return e.entidades})).permisos,a=Object(l.c)((function(e){return e.auth})).modulo,t=Object(l.b)(),n=Object(l.c)((function(e){return e.auth})).variablesGlobales.cicloActual,o=Date.now(),c=new Date(o);e||t(Pl("",a,n,["nombreCultivo"]));var i=[];if(e){var s={numeroPermiso:"TOTALES",supAutorizada:0,cuotaCultivo:0};e.forEach((function(e){s.supAutorizada=s.supAutorizada+e.supAutorizada,s.cuotaCultivo=s.cuotaCultivo+Xt(e.cuotaCultivo*e.supAutorizada,3),i.push(Object(u.a)(Object(u.a)({},e),{},{fechaEmicion:bo()(e.fechaEmicion.toDate()).format("DD/MM/YYYY"),fechaLimite:bo()(e.fechaLimite.toDate()).format("DD/MM/YYYY"),vigencia:bo()(e.vigencia.toDate()).format("DD/MM/YYYY"),cuotaCultivo:Xt(e.cuotaCultivo*e.supAutorizada,3)}))})),i.push(s)}return r.a.createElement("div",{className:"printme"},r.a.createElement(Il,{title:"",columns:Bn,data:i}),r.a.createElement("div",{className:"mt-1"},c.toLocaleDateString()))},Dl=function(e){var a=e.inputName,t=e.options,n=e.formValues,o=e.setFunction,c=e.styles;return r.a.createElement("div",{className:c.group},t.map((function(e){var t,l=e.id,i=e.label;return r.a.createElement("label",{key:l,className:"".concat(c.button," ").concat((t=l,t===n[a]&&"active"))},r.a.createElement("input",{type:"radio",name:a,id:l,value:l,onChange:o}),i)})))},Ll=function(){var e=Object(ut.a)(st.a.mark((function e(a,t,n){var r,o,c,l,i,s,d,m,p,f,E,b,v=arguments;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>3&&void 0!==v[3]?v[3]:new Date(2021,8,1),o=v.length>4&&void 0!==v[4]?v[4]:new Date(2022,8,30),c=a[0],l=c.palabra,i=void 0===l?0:l,s=c.campo,d=[],m=[],p=[],f=ft.a.collection("permisos").doc(n).collection("modulos").doc("Modulo-".concat(t)).collection("permisos"),0===i.length?p.push(f.orderBy(s).get()):(p.push(f.orderBy(s).startAt(i.toUpperCase()).endAt(i.toUpperCase()+"\uf8ff").get()),p.push(f.orderBy(s).startAt(i).endAt(i+"\uf8ff").get()),p.push(f.where(s,"==",Number(i)).get())),e.next=10,Promise.all(p);case 10:if(e.sent.forEach((function(e){e.forEach((function(e){var a=e.data().fechaEmicion.toDate(),t=e.data().cuotaCultivo*e.data().supAutorizada;a>=r&&a<=Tl(o,1)&&d.push(Object(u.a)(Object(u.a)({id:e.id},e.data()),{},{cuotaCultivo:t,fechaEmicion:a.toLocaleDateString()}))}))})),m.push(d),a.length>1)for(E=function(e){var t=m.pop();m.push(t.filter((function(t){return t[a[e].campo]===kl(a[e].campo,a[e].palabra)})))},b=1;b<=a.length-1;b++)E(b);return 0===d.length&&Nt.a.fire("No se encontraron permisos ","...","warning"),e.abrupt("return",Ml(m.pop(),"numeroPermiso"));case 16:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),Tl=function(e,a){var t=new Date(e);return t.setDate(t.getDate()+a),t},kl=function(e,a){switch(e){case"seccion":return parseInt(a);default:return a}},Ml=function(e,a){var t=[],n=[];return e.forEach((function(e){-1===t.indexOf(e[a])&&(t.push(e[a]),n.push(e))})),n},Ul=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{filter:"",order1:""},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{includeEmtyRow:!1,includeSubtotalRow:!1},o=Object(n.useState)(a),c=Object(dt.a)(o,2),l=c[0],i=c[1],s=Object(n.useState)(t),d=Object(dt.a)(s,2),m=d[0],p=d[1],f=m.filter,E=m.order1,b=Object(n.useState)(r),v=Object(dt.a)(b,2),h=v[0],N=v[1],O=h.includeEmtyRow,g=h.includeSubtotalRow,y=function(a){var t=a.target;p(Object(u.a)(Object(u.a)({},m),{},Object(Dt.a)({},t.name,t.value))),"filter"===t.name&&i(Fl(l,e,t.value,E,O,g)),"order1"===t.name&&i(Fl(l,e,f,t.value,O,g))},A=function(a){var t=a.target;N(Object(u.a)(Object(u.a)({},h),{},Object(Dt.a)({},t.name,t.checked))),"includeEmtyRow"===t.name&&i(Fl(l,e,f,E,t.checked,g)),"includeSubtotalRow"===t.name&&i(Fl(l,e,f,E,O,t.checked))},x=function(){p(t),N(r)};return[l,i,m,y,h,A,x]},Fl=function(e,a,t,n,r,o){var c=a[0].id,l=[],i=e.filter((function(e){return"-"!==e[c]&&"SUBTOTAL"!==e[c]&&"TOTAL"!==e[c]&&!l.find((function(a){return a===e[c]}))&&(l.push(e[c]),!0)})),s=Gl(i,t),u=[],d=[],m=Object(Dt.a)({},c,"TOTAL");return s.forEach((function(e){u.push(i.filter((function(a){return a[t]===e})))})),u.forEach((function(e){var t=Object(Dt.a)({},c,"SUBTOTAL"),l=Object(Dt.a)({},c,"-"),i=[],s=[];e.sort((function(e,a){return Bl(e[n],a[n])}));var u=Gl(e,n);for(var p in u.forEach((function(a){i.push(e.filter((function(e){return e[n]===a})))})),i.forEach((function(e){e.forEach((function(e){s.push(e)})),r&&s.push(l)})),r&&s.pop(),s.forEach((function(e){a.forEach((function(a){a.sum&&e[a.id]&&(t[a.id]?t[a.id]+=e[a.id]:t[a.id]=e[a.id],m[a.id]?m[a.id]+=e[a.id]:m[a.id]=e[a.id]),a.count&&e[a.id]&&(t[a.id]?t[a.id]++:t[a.id]=1,m[a.id]?m[a.id]++:m[a.id]=1)})),d.push(e)})),t)"number"===typeof t[p]&&(t[p]=Xt(t[p],4));o&&d.push(t)})),d.push(m),d},Gl=function(e,a){var t=[];return e.forEach((function(e){if("object"===typeof e[a]){var n=e[a].toDate();console.log(n.toLocaleDateString()),-1===t.indexOf(n.toLocaleDateString())&&t.push(n.toLocaleDateString())}else{-1===t.indexOf(e[a])&&t.push(e[a])}})),t.sort((function(e,a){return Bl(e,a)})),t},Bl=function(e,a){if(Vl(e)){var t=new Date(ql(e)),n=new Date(ql(a));return t>n?1:t<n?-1:0}switch(typeof e){case"number":return e<a?1:e>a?-1:0;default:return e>a?1:e<a?-1:0}},Vl=function(e){return!!e&&("string"===typeof e&&3===e.split("/").length)},ql=function(e){var a=e.split("/");return"".concat(a[1],"/").concat(a[0],"/").concat(a[2])},Yl=t(61),Hl=t.n(Yl),Zl=function(e){var a=e.title,t=e.pages,n=e.page,o=e.range,c=void 0===o?"":o,i=Object(l.c)((function(e){return e.auth})),s=i.email,u=i.entidad,d=i.img,m=i.variablesGlobales,p=Date.now(),f=new Date(p);return r.a.createElement("div",{className:"row border rounded border-dark m-0"},r.a.createElement("div",{className:"col-2 p-3 d-flex justify-content-center"},r.a.createElement("img",{src:"./logos/".concat(d),alt:"Logo de la entidad",style:{maxHeight:80}})),r.a.createElement("div",{className:"col-2 p-3",style:{maxHeight:80}},r.a.createElement("div",null,"Operador:"),r.a.createElement("div",null,s)),r.a.createElement("div",{className:"col-6 p-3 justify-content-center"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("b",null,u)),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("b",null,a)),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",null,c))),r.a.createElement("div",{className:"col-2 p-3 d-flex flex-column"},r.a.createElement("b",null,"Ciclo: ",m.cicloActual),r.a.createElement("div",null,f.toLocaleDateString()),r.a.createElement("div",null,"Pagina ",n," de ",t)))},Jl=Object(n.forwardRef)((function(e,a){for(var t=e.title,n=e.headers,o=e.data,c=e.rowsPerPage,l=e.orientation,i=void 0===l?"portrait":l,s=e.range,u=[],d=0;d<o.length;d+=c){var m=o.slice(d,d+c);u.push(m)}return r.a.createElement("div",{ref:a},u.map((function(e,a){return r.a.createElement("div",{key:a,className:"page-break"},r.a.createElement("style",null,"@page { margin: ".concat(60," ").concat(60," ").concat(60," ").concat(60," !important; size:letter ").concat(i,";}")),r.a.createElement(Zl,{title:t,pages:u.length,page:a+1,range:s}),r.a.createElement("table",{className:"table table-sm table-striped border mt-4",style:{fontSize:12}},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,n.map((function(e){return e.display?r.a.createElement("th",{key:"".concat(a,"-").concat(e.id),scope:"col",className:e.styles},e.header):r.a.createElement("th",{key:"".concat(a,"-").concat(e.id),style:{display:"none"}})})))),r.a.createElement("tbody",null,e&&e.map((function(e,t){return r.a.createElement("tr",{key:"".concat(a,"-").concat(t,"-").concat(e[0])},n.map((function(t,n){if(t.display){if("object"===typeof e[t.id]){var o=e[t.id].toDate().toLocaleDateString();return r.a.createElement("td",{key:"".concat(a,"-").concat(n,"-").concat(o),className:t.styles},o)}return r.a.createElement("td",{key:"".concat(a,"-").concat(n,"-").concat(t.id),className:t.styles},t.float?_l(e[t.id],t.float,t.currency):e[t.id])}return r.a.createElement("td",{key:"".concat(a,"-").concat(n,"-").concat(t.id),style:{display:"none"}})})))})))))})))})),_l=function(e,a,t){switch(typeof e){case"number":return t?Intl.NumberFormat("en-IN",{minimumFractionDigits:a,style:"currency",currency:"USD",currencyDisplay:"symbol"}).format(e):Intl.NumberFormat("en-IN",{minimumFractionDigits:a}).format(e);default:return e}},Kl=function(e){var a=e.title,t=e.excelTitle,o=e.headers,c=e.data,i=e.range,s=Object(n.createRef)(),d=Object(l.c)((function(e){return e.auth})).name,m=Object(n.useState)({orientation:"landscape",rowsPerPage:25}),p=Object(dt.a)(m,2),f=p[0],E=p[1],b=f.orientation,v=f.rowsPerPage;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-sm-4 d-flex mt-4"},r.a.createElement("label",{htmlFor:"orientation"},"Lineas por pagina: ",r.a.createElement("b",null,v)),r.a.createElement("div",{className:"btn-group btn-group-toggle d-print-none mr-4 ml-2",id:"orientation"},r.a.createElement("button",{onClick:function(){E(Object(u.a)(Object(u.a)({},f),{},{rowsPerPage:v+1}))},className:"btn btn-sm btn-outline-primary",style:{width:40}},"+"),r.a.createElement("button",{onClick:function(){E(Object(u.a)(Object(u.a)({},f),{},{rowsPerPage:v-1}))},className:"btn btn-sm btn-outline-primary",style:{width:40}},"-"))),r.a.createElement("div",{className:"col-sm-4 d-flex mt-4"},r.a.createElement("label",{htmlFor:"orientation"},"Orientacion:"),r.a.createElement("div",{className:"btn-group btn-group-toggle d-print-none mr-4 ml-2",id:"orientation"},r.a.createElement("button",{onClick:function(){E({rowsPerPage:25,orientation:"landscape"})},className:"btn btn-sm ".concat("landscape"===b?"btn-primary":"btn-outline-primary")},"Horizontal"),r.a.createElement("button",{onClick:function(){E({rowsPerPage:50,orientation:"portrait"})},className:"btn btn-sm ".concat("portrait"===b?"btn-primary":"btn-outline-primary")},"Vertical"))),r.a.createElement("div",{className:"col-sm-4 d-flex justify-content-end mt-4"},r.a.createElement(Hl.a,{trigger:function(){return r.a.createElement("button",{className:"btn btn-sm btn-outline-primary d-print-none "},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir"))},content:function(){return s.current},pageStyle:"bootstrap/dist/css/bootstrap.min.css"}),r.a.createElement("button",{type:"button",onClick:function(){var e=[],a=[],n=[];o.forEach((function(a){a.display&&e.push([a.id,a.header])})),c.forEach((function(t){var r={};e.forEach((function(e){if(a.push(e[1]),"object"===typeof t[e[0]]){var n=t[e[0]].toDate().toLocaleDateString();r[e[1]]=n}else r[e[1]]=t[e[0]]})),n.push(r)})),Fr(n,a,t.substring(0,30),d,t.substring(0,30))},className:"btn btn-sm btn-outline-primary ml-2"},r.a.createElement("i",{className:"fas fa-download"}),r.a.createElement("span",null," Descargar")))),r.a.createElement(Jl,{title:a,headers:o,data:c,ref:s,rowsPerPage:v,orientation:b,className:"mt-0",range:i}))},Xl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=Object(n.useState)(e),t=Object(dt.a)(a,2),r=t[0],o=t[1],c=function(){o(e)},l=function(e){var a=e.target,t=parseInt(a.attributes.index.nodeValue),n=r[t],c=Object(u.a)(Object(u.a)({},n),{},Object(Dt.a)({},a.name,a.value)),l=r.map((function(e,a){return a===t?c:e}));o(l)},i=function(){o([].concat(Object(Kc.a)(r),[{palabra:"",campo:""}]))},s=function(){var e=r.slice(0,r.length-1);o(e)};return[r,l,i,s,c]},Ql=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.modulo,t=e.variablesGlobales.cicloActual,o=Xl([{palabra:"",campo:""}]),c=Object(dt.a)(o,4),i=c[0],s=c[1],d=c[2],m=c[3],p=Object(n.useState)(new Date(2021,8,1)),f=Object(dt.a)(p,2),E=f[0],b=f[1],v=Object(n.useState)(new Date),h=Object(dt.a)(v,2),N=h[0],O=h[1],g="Del ".concat(E.toLocaleDateString()," al ").concat(N.toLocaleDateString()),y=Object(n.useState)(Qr),A=Object(dt.a)(y,2),x=A[0],C=A[1],S=function(e){var a=e.target,t=x.findIndex((function(e){return e.id===a.id})),n=x.map((function(e){return e}));n.splice(t,1,Object(u.a)(Object(u.a)({},x[t]),{},{display:!x[t].display})),C(n)},P=Ul(x,[]),j=Object(dt.a)(P,7),R=j[0],w=j[1],I=j[2],z=j[3],D=j[4],L=j[5],T=j[6],k=I.filter,M=I.order1,U=D.includeEmtyRow,F=D.includeSubtotalRow,G=function(){var e=Object(ut.a)(st.a.mark((function e(){var n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i[0].campo.length){e.next=6;break}return e.next=3,Ll(i,a,t,E,N);case 3:n=e.sent,T(),w(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e){"Enter"===e.key&&G()},V=function(e,a){var t=k.length>0?x.find((function(e){return e.id===k})):x.find((function(e){return e.id===i[0].campo}));return t?"report"===e?"REPORTE DE ".concat(a," POR ").concat(t.header):"excel"===e?"".concat(a," POR ").concat(t.header):void 0:"PERMISOS"},q=V("report","PERMISOS"),Y=V("excel","PERMISOS");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container mb-4 col-sm-8"},r.a.createElement("div",{className:"row d-flex justify-content-end"},i.length>1&&r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:m},r.a.createElement("i",{className:"fas fa-minus"})),r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:d},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:G},r.a.createElement("i",{className:"fas fa-search"}))),i.map((function(e,a){return r.a.createElement("div",{className:"row mt-2",key:"form".concat(a)},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"palabra"},"PARAMETRO DE BUSQUEDA:"),r.a.createElement("input",{index:a,type:"text",className:"form-control",name:"palabra",id:"palabra",autoComplete:"off",value:e.palabra,onChange:s,onKeyUp:B})),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("label",{htmlFor:"campo"},"BUSCAR EN:"),r.a.createElement("div",{className:"d-flex"},r.a.createElement("select",{index:a,name:"campo",id:"campo",type:"text",value:e.campo,onChange:s,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),x.map((function(e){return e.search?r.a.createElement("option",{key:e.id,value:e.id},e.header):r.a.createElement("option",{key:e.id,style:{display:"none"}})}))))))})),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("label",{className:"form-check-label"},"Fecha inicial"),r.a.createElement("div",null,r.a.createElement(Sl.a,{type:"date",onChange:b,value:E,format:"dd/MM/yyyy"}))),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("label",{className:"form-check-label"},"Fecha final"),r.a.createElement("div",null,r.a.createElement(Sl.a,{type:"date",onChange:O,value:N,format:"dd/MM/yyyy"})))),R.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"filter"},"ORDENADO POR:"),r.a.createElement("select",{name:"filter",id:"filter",type:"text",value:k,onChange:z,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),x.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.header)})))),r.a.createElement("div",{className:"col-sm-4 align-self-end"},r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",name:"includeSubtotalRow",id:"includeSubtotalRow",value:F,checked:F,onChange:L,className:"form-check-input"}),r.a.createElement("label",{htmlFor:"includeSubtotalRow"}," INCLUIR SUBTOTALES ")))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"order1"},"SUB-ORDENADO POR:"),r.a.createElement("select",{name:"order1",id:"order1",type:"text",value:M,onChange:z,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),x.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.header)})))),r.a.createElement("div",{className:"col-sm-4 align-self-end"},r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",name:"includeEmtyRow",id:"includeEmtyRow",value:U,checked:U,onChange:L,className:"form-check-input"}),r.a.createElement("label",{htmlFor:"includeEmtyRow"}," INCLUIR SEPARACI\xd3N ")))),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-12"},x.map((function(e){if(e.selectable){var a=e.display?"btn btn-sm btn-info m-1":"btn btn-sm btn-outline-info m-1";return r.a.createElement("button",{key:"0-".concat(e.header),className:a,onClick:S,id:e.id,value:e.selectable},e.header)}return r.a.createElement("div",{key:"1-".concat(e.header),style:{display:"none"}})})))))),R.length>0&&r.a.createElement(Kl,{title:q,excelTitle:Y,headers:x,data:R,range:g}))},Wl=function(){var e=Object(ut.a)(st.a.mark((function e(a,t,n){var r;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,ft.a.collection("permisos").doc(n).collection("modulos").doc("Modulo-".concat(t)).collection("permisos").where("seccion","==",parseInt(a)).where("estadoPermiso","==","activo").orderBy("nombreCultivo").get();case 3:return e.sent.forEach((function(e){var a=e.data().fechaEmicion.toDate(),t=e.data().cuotaCultivo*e.data().supAutorizada;r.push(Object(u.a)(Object(u.a)({id:e.id},e.data()),{},{cuotaCultivo:t,fechaEmicion:a.toLocaleDateString()}))})),0===r.length&&Nt.a.fire("No se encontraron permisos ","...","warning"),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),$l=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.modulo,t=e.variablesGlobales.cicloActual,o=Lt({palabra:""}),c=Object(dt.a)(o,2),i=c[0],s=c[1],u=i.palabra,d=Object(n.useState)([]),m=Object(dt.a)(d,2),p=m[0],f=m[1],E="localidad",b=new Date(2021,8,1),v=new Date,h=function(){var e=Object(ut.a)(st.a.mark((function e(){var n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wl(u,a,t);case 2:n=e.sent,f(N(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e){var a=function(e,a){var t=[];return e.forEach((function(e){-1===t.indexOf(e[a])&&t.push(e[a])})),t.sort((function(e,a){return e>a?1:e<a?-1:0})),t}(e,"seccion"),t=[],n=[];return a.forEach((function(a){t.push(e.filter((function(e){return e.seccion===a})))})),t.forEach((function(e){e.sort((function(e,a){return e[E]>a[E]?1:e[E]<a[E]?-1:0})),e.forEach((function(e){n.push(e)}))})),n};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container d-flex mb-4 col-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Seccion",name:"palabra",autoComplete:"off",value:u,onChange:s,onKeyUp:function(e){"Enter"===e.key&&h()}}),r.a.createElement("button",{className:" btn btn-outline-primary d-sm-block ml-auto",type:"button",onClick:h},r.a.createElement("i",{className:"fas fa-search"}))),p.length>0&&r.a.createElement(Kl,{title:"REPORTE DE PERMISOS ACTIVOS POR SECCION",excelTitle:"REPORTE DE PERMISOS POR SECCION",headers:Qr,data:p,rowsPerPage:24,orientation:"landscape",fechaInicial:b,fechaFinal:v}))},ei=function(){var e=Lt(),a=Object(dt.a)(e,2),t=a[0],n=a[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"row m-0 "},r.a.createElement("div",{className:"col-sm-12 p-3 d-flex justify-content-center"},r.a.createElement("h2",null,"Reportes de permisos"))),r.a.createElement("div",{className:"row justify-content-center mb-5"},r.a.createElement(Dl,{inputName:"reportType",options:[{id:"grafico",label:"Reporte con grafico"},{id:"seccion",label:"Reporte por seccion"},{id:"configurable",label:"Reporte configurable"}],formValues:t,setFunction:n,styles:{group:"btn-group btn-group-toggle d-print-none",button:"btn btn-outline-primary"}})),"grafico"===t.reportType&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("div",{className:"col-sm-9 no-printme"},r.a.createElement(wl,null))),r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("div",{className:"col-sm-5 no-printme"},r.a.createElement(xl,null))),r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("div",{className:"col-lg-9"},r.a.createElement(zl,null)))),"seccion"===t.reportType&&r.a.createElement($l,null),"configurable"===t.reportType&&r.a.createElement(Ql,null))},ai={supGravedadProgramada:0,supGravedadExpedida:0,supGravedadRealizada:0,supPozoProgramada:0,supPozoExpedida:0,supPozoRealizada:0,supPozoPartProgramada:0,supPozoPartExpedida:0,supPozoPartRealizada:0},ti=Object(u.a)({},Jn.a),ni=function(e,a,t,n,r,o,c,l,i){e.supGravedadProgramada=e.supGravedadProgramada+a,e.supGravedadExpedida=e.supGravedadExpedida+t,e.supGravedadRealizada=e.supGravedadRealizada+n,e.supPozoProgramada=e.supPozoProgramada+r,e.supPozoExpedida=e.supPozoExpedida+o,e.supPozoRealizada=e.supPozoRealizada+c,e.supPozoPartProgramada=e.supPozoPartProgramada+l,e.supPozoPartExpedida=e.supPozoPartExpedida+i},ri=function(e,a,t){return Object.keys(ti).forEach((function(e){Object.keys(ti[e]).forEach((function(a){ti[e][a]=Object(u.a)({},ai)}))})),Object.values(e).forEach((function(e){var n=e.subciclo,r=e.cultivo,o=e.modulo,c=e.estado,l=e.supGravedadProgramada,i=e.supGravedadExpedida,s=e.supGravedadRealizada,u=e.supPozoProgramada,d=e.supPozoExpedida,m=e.supPozoRealizada,p=e.supPozoPartProgramada,f=e.supPozoPartExpedida;(function(e,a,t,n){switch(e){case"modulos":case"modulo":return function(e,a){var t=!1;return e.length>0?e.forEach((function(e){a.toString()===e&&(t=!0)})):t=!0,t}(a,t);case"Baja California":case"Sonora":return e===n;case"global":return!0;default:return!1}})(a,t,o,c)&&(ti[n][r]?(ni(ti[n][r],l,i,s,u,d,m,p,f),ni(ti[n].SUBTOTAL,l,i,s,u,d,m,p,f)):(ni(ti[n].VARIOS,l,i,s,u,d,m,p,f),ni(ti[n].SUBTOTAL,l,i,s,u,d,m,p,f)))})),ti},oi={},ci={cultivo:"",modulo:"",subciclo:"",estado:"",supGravedadProgramada:0,supGravedadExpedida:0,supGravedadRealizada:0,supPozoProgramada:0,supPozoExpedida:0,supPozoRealizada:0,supPozoPartProgramada:0,supPozoPartExpedida:0,supPozoPartRealizada:0},li=function(e,a){return e.forEach((function(e){!function(e){var a=e.id,t=e.modulo,n=e.subciclo,r=e.estado,o=void 0===r?"":r,c=e.gravedadExtraAutorizada,l=void 0===c?0:c,i=e.gravedadNormalAutorizada,s=void 0===i?0:i,d=e.pozoExtraAutorizada,m=void 0===d?0:d,p=e.pozoNormalAutorizada,f=void 0===p?0:p;"PERENES"===n&&(n="PERENNES"),ii(t)?oi["".concat(a,"-").concat(t)]=Object(u.a)(Object(u.a)({},ci),{},{cultivo:a,modulo:t,subciclo:n,estado:o,supGravedadProgramada:s+l,supPozoPartProgramada:f+m}):oi["".concat(a,"-").concat(t)]=Object(u.a)(Object(u.a)({},ci),{},{cultivo:a,modulo:t,subciclo:n,estado:o,supGravedadProgramada:s+l,supPozoProgramada:f+m})}(e)})),a.forEach((function(e){oi["".concat(e.id,"-").concat(e.modulo)]&&function(e){var a=e.id,t=e.modulo,n=e.gravedadNormal,r=void 0===n?0:n,o=e.gravedadExtra,c=void 0===o?0:o,l=e.pozoNormal,i=void 0===l?0:l,s=e.pozoExtra,d=void 0===s?0:s,m=e.pozoParticularNormal,p=void 0===m?0:m,f=e.pozoParticularExtra,E=void 0===f?0:f;oi["".concat(a,"-").concat(t)]=Object(u.a)(Object(u.a)({},oi["".concat(a,"-").concat(t)]),{},{supGravedadExpedida:oi["".concat(a,"-").concat(t)].supGravedadExpedida+r+c,supPozoExpedida:oi["".concat(a,"-").concat(t)].supPozoExpedida+i+d,supPozoPartExpedida:oi["".concat(a,"-").concat(t)].supPozoPartExpedida+p+E})}(e)})),oi},ii=function(e){switch(e){case"UNI01":case"UNI02":case"UNI03":return!0;default:return!1}},si=function(e,a){var t=e.unidades,n=e.modulosPorUnidad,r=a.type,o=a.payload;switch(r){case"setUnidad":if(t[o])return Object(u.a)(Object(u.a)({},e),{},{unidades:Object(u.a)(Object(u.a)({},t),{},Object(Dt.a)({},o,!1))});var c={};return Object.keys(t).forEach((function(e){c[e]=!1})),Object(u.a)(Object(u.a)({},e),{},{unidades:Object(u.a)(Object(u.a)({},c),{},Object(Dt.a)({},o,!0))});case"changeModulo":var l=o.unidad,i=o.modulo;return Object(u.a)(Object(u.a)({},e),{},{modulosPorUnidad:Object(u.a)(Object(u.a)({},n),{},Object(Dt.a)({},l,Object(u.a)(Object(u.a)({},n[l]),{},Object(Dt.a)({},i,!n[l][i]))))});case"changeGroup":var s=Object(u.a)({},n);return Object.keys(e.unidades).forEach((function(a){Object.keys(e.modulosPorUnidad[a]).forEach((function(t){s[a][t]=e.unidades[a]}))})),Object(u.a)(Object(u.a)({},e),{},{modulosPorUnidad:s})}},ui=function(e){var a=e.data,t=e.modulos,n=Object(l.c)((function(e){return e.auth})).name;return r.a.createElement("div",{className:"table-responsive-sm"},r.a.createElement("table",{className:"table table-sm table-bordered font12"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row",rowSpan:"2"},"CULTIVO"),r.a.createElement("th",{scope:"row",colSpan:"3"},"SUP. GRAVEDAD"),r.a.createElement("th",{scope:"row",colSpan:"3"},"SUP. POZO FEDERAL"),r.a.createElement("th",{scope:"row",colSpan:"3"},"SUP. POZO PARTICULAR"),r.a.createElement("th",{scope:"row",colSpan:"3"},"SUP. TOTAL")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Programada"),r.a.createElement("th",{scope:"col"},"Expedida"),r.a.createElement("th",{scope:"col"},"Realizado"),r.a.createElement("th",{scope:"col"},"Programada"),r.a.createElement("th",{scope:"col"},"Expedida"),r.a.createElement("th",{scope:"col"},"Realizado"),r.a.createElement("th",{scope:"col"},"Programada"),r.a.createElement("th",{scope:"col"},"Expedida"),r.a.createElement("th",{scope:"col"},"Realizado"),r.a.createElement("th",{scope:"col"},"Programada"),r.a.createElement("th",{scope:"col"},"Expedida"),r.a.createElement("th",{scope:"col"},"Realizado"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row",colSpan:"13",className:"pt-4"},"OTO\xd1O - INVIERNO")),Object.values(a["OTO\xd1O-INVIERNO"]).map((function(e,t){var n=Object.keys(a["OTO\xd1O-INVIERNO"])[t];return r.a.createElement("tr",{key:n},r.a.createElement("th",{scope:"row"},n),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadProgramada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadExpedida,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadRealizada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoProgramada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoExpedida,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoRealizada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoPartProgramada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoPartExpedida,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoPartRealizada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadProgramada+e.supPozoProgramada+e.supPozoPartProgramada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadExpedida+e.supPozoExpedida+e.supPozoPartExpedida,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadRealizada+e.supPozoRealizada+e.supPozoPartRealizada,3)))})),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row",colSpan:"13",className:"pt-4"},"PERENNES")),Object.values(a.PERENNES).map((function(e,t){var n=Object.keys(a.PERENNES)[t];return r.a.createElement("tr",{key:n},r.a.createElement("th",{scope:"row"},n),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadProgramada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadExpedida,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadRealizada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoProgramada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoExpedida,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoRealizada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoPartProgramada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoPartExpedida,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoPartRealizada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadProgramada+e.supPozoProgramada+e.supPozoPartProgramada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadExpedida+e.supPozoExpedida+e.supPozoPartExpedida,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadRealizada+e.supPozoRealizada+e.supPozoPartRealizada,3)))})),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row",colSpan:"13",className:"pt-4"},"PRIMAVERA-VERANO")),Object.values(a["PRIMAVERA-VERANO"]).map((function(e,t){var n=Object.keys(a["PRIMAVERA-VERANO"])[t];return r.a.createElement("tr",{key:n},r.a.createElement("th",{scope:"row"},n),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadProgramada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadExpedida,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadRealizada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoProgramada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoExpedida,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoRealizada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoPartProgramada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoPartExpedida,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supPozoPartRealizada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadProgramada+e.supPozoProgramada+e.supPozoPartProgramada,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadExpedida+e.supPozoExpedida+e.supPozoPartExpedida,3)),r.a.createElement("td",{className:"text-right"},Xt(e.supGravedadRealizada+e.supPozoRealizada+e.supPozoPartRealizada,3)))})))),r.a.createElement("button",{type:"button",onClick:function(){var e=mi(t);Fr(di(a),{header:["CULTIVO","GRAVEDAD PROGRAMADA","GRAVEDAD EXPEDIDA","GRAVEDAD REALIZADA","POZO PROGRAMADA","POZO EXPEDIDA","POZO REALIZADA","POZO PART PROGRAMADA","POZO PART EXPEDIDA","POZO PART REALIZADA","TOTAL PROGRAMADA","TOTAL EXPEDIDA","TOTAL REALIZADA"]},e,n,e)},className:"btn btn-outline-primary d-print-none"},r.a.createElement("i",{className:"fas fa-download"}),r.a.createElement("span",null," Descargar")),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-5 d-print-none",onClick:function(){return window.print()}},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir")))},di=function(e){var a=[];return Object.entries(e).forEach((function(e){a.push({cultivo:e[0]}),Object.entries(e[1]).forEach((function(e){a.push(Object(u.a)({cultivo:e[0]},e[1]))}))})),a.map((function(e){return Object.keys(e).length>1?{CULTIVO:e.cultivo,"GRAVEDAD PROGRAMADA":e.supGravedadProgramada,"GRAVEDAD EXPEDIDA":e.supGravedadExpedida,"GRAVEDAD REALIZADA":e.supGravedadRealizada,"POZO PROGRAMADA":e.supPozoProgramada,"POZO EXPEDIDA":e.supPozoExpedida,"POZO REALIZADA":e.supPozoRealizada,"POZO PART PROGRAMADA":e.supPozoPartProgramada,"POZO PART EXPEDIDA":e.supPozoPartExpedida,"POZO PART REALIZADA":e.supPozoPartRealizada,"TOTAL PROGRAMADA":e.supGravedadProgramada+e.supPozoProgramada+e.supPozoPartProgramada,"TOTAL EXPEDIDA":e.supGravedadExpedida+e.supPozoExpedida+e.supPozoPartExpedida,"TOTAL REALIZADA":e.supGravedadRealizada+e.supPozoRealizada+e.supPozoPartRealizada}:{CULTIVO:e.cultivo}}))},mi=function(e){switch(e.length){case 0:return"ExpedicionGlobal";case 1:return"ExpedicionM".concat(e[0]);default:return"Expedicion"}},pi=function(e){var a=e.options,t=e.setFunction,n=e.groupStyles,o=e.buttonStyles;return r.a.createElement("div",{className:n},Object.entries(a).map((function(e){var a;return r.a.createElement("button",{className:(a=e[1],a?o.on:o.off),type:"button",key:e[0],onClick:function(){t(e[0])}},r.a.createElement("span",null,e[0]))})))},fi=function(e){var a=e.state,t=e.dispatch,n=a.unidades,o=a.modulosPorUnidad,c=o.primeraUnidad,l=o.segundaUnidad,i=o.terceraUnidad,s=o.pozosParticulares,u={on:"btn btn-primary",off:"btn btn-outline-primary"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row justify-content-center mt-5"},r.a.createElement(pi,{options:n,setFunction:function(e){t({type:"setUnidad",payload:e})},groupStyles:"btn-group btn-group-toggle",buttonStyles:u})),r.a.createElement("div",{className:"row d-flex justify-content-around"},r.a.createElement("div",{className:"mt-3"},r.a.createElement(pi,{options:c,setFunction:function(e){t({type:"changeModulo",payload:{unidad:"primeraUnidad",modulo:e}})},groupStyles:"btn-group btn-group-toggle",buttonStyles:u})),r.a.createElement("div",{className:"mt-3"},r.a.createElement(pi,{options:l,setFunction:function(e){t({type:"changeModulo",payload:{unidad:"segundaUnidad",modulo:e}})},groupStyles:"btn-group btn-group-toggle",buttonStyles:u})),r.a.createElement("div",{className:"mt-3"},r.a.createElement(pi,{options:i,setFunction:function(e){t({type:"changeModulo",payload:{unidad:"terceraUnidad",modulo:e}})},groupStyles:"btn-group btn-group-toggle",buttonStyles:u})),r.a.createElement("div",{className:"mt-3"},r.a.createElement(pi,{options:s,setFunction:function(e){t({type:"changeModulo",payload:{unidad:"pozosParticulares",modulo:e}})},groupStyles:"btn-group btn-group-toggle",buttonStyles:u}))))},Ei={unidades:{primeraUnidad:!1,segundaUnidad:!1,terceraUnidad:!1,pozosParticulares:!1},modulosPorUnidad:Jn.d},bi=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.privilegios,t=e.modulo,o=Object(l.c)((function(e){return e.scenes.reportesScreen})),c=o.autorizados,i=o.expedicion,s=Lt(),u=Object(dt.a)(s,4),d=u[0],m=u[1],p=u[3];0===Object.keys(d).length&&p({opcion:"modulo"});var f=Object(n.useReducer)(si,Ei),E=Object(dt.a)(f,2),b=E[0],v=E[1],h=b.unidades,N=b.modulosPorUnidad,O=N.primeraUnidad,g=N.segundaUnidad,y=N.terceraUnidad,A=N.pozosParticulares;Object(n.useEffect)((function(){v({type:"changeGroup"})}),[h]);var x=function(){var e=[];return Object.keys(O).forEach((function(a){O[a]&&e.push(a)})),Object.keys(g).forEach((function(a){g[a]&&e.push(a)})),Object.keys(y).forEach((function(a){y[a]&&e.push(a)})),Object.keys(A).forEach((function(a){A[a]&&e.push(a)})),e};return r.a.createElement("div",null,r.a.createElement("div",{className:"row m-0 "},r.a.createElement("div",{className:"col-sm-12 p-3 d-flex justify-content-center"},r.a.createElement("h2",null,"Reporte de expedici\xf3n"))),r.a.createElement("div",{className:"row justify-content-center"},a.accesoGlobal&&r.a.createElement(Dl,{inputName:"opcion",options:[{id:"global",label:"Global"},{id:"Baja California",label:"Baja California"},{id:"Sonora",label:"Sonora"},{id:"modulos",label:"Modulos"}],formValues:d,setFunction:m,styles:{group:"btn-group btn-group-toggle",button:"btn btn-outline-primary"}})),"modulos"===d.opcion&&r.a.createElement(fi,{state:b,dispatch:v}),(a.accesoGlobal&&"global"===d.opcion||"Baja California"===d.opcion||"Sonora"===d.opcion)&&r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-sm-12 pt-5"},r.a.createElement(ui,{modulos:[],data:ri(li(c,i),d.opcion,[])}))),a.accesoGlobal&&"modulos"===d.opcion&&x().length>0&&r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-sm-12 pt-5"},r.a.createElement(ui,{modulos:x(),data:ri(li(c,i),d.opcion,x())}))),!a.accesoGlobal&&r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-sm-12 pt-5"},c&&i&&r.a.createElement(ui,{modulos:[t],data:ri(li(c,i),d.opcion,[t])}))))},vi=function(e,a){return ft.a.collection("autorizados").doc(a).collection("modulos").doc("Modulo-".concat(e)).collection("autorizados").orderBy("modulo").get()},hi=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=Jn.c.map((function(e){return vi("dev"!==e?e:99,a)})),e.next=4,Promise.all(n);case 4:return e.sent.forEach((function(e){e.forEach((function(e){"0-SIN CULTIVO"!==e.id&&t.push(Object(u.a)(Object(u.a)({id:e.id},e.data()),{},{estado:"UNI03"===e.data().modulo?"Sonora":e.data().estado}))}))})),0===t.length&&(t=!1),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Ni=function(e,a){return ft.a.collection("permisos").doc(a).collection("modulos").doc("Modulo-".concat(e)).collection("permisosPorCultivo").orderBy("modulo").get()},Oi=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=Jn.c.map((function(e){return Ni("dev"!==e?e:99,a)})),e.next=4,Promise.all(n);case 4:return e.sent.forEach((function(e){e.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}))})),0===t.length&&(t=!1),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),gi=function(e){return{type:ga,payload:e}},yi=function(e){return{type:ya,payload:e}},Ai=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n,r,o;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=[],o=0,e.next=5,ft.a.collection("permisos").doc(a).collection("modulos").doc("Modulo-".concat(t)).collection("permisos").get();case 5:return e.sent.forEach((function(e){var a=e.data().curpProductor;n.includes(a)||n.push(a)})),n.forEach((function(e){r[o]?r[o].length<10?r[o].push(e):(o++,r[o]=[e]):r[o]=[e]})),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),xi=function(){var e=Object(ut.a)(st.a.mark((function e(a,t,n){var r,o,c,l,i,s,d,m,p,f,E;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a[0],o=r.palabra,c=void 0===o?0:o,l=r.campo,i=[],s=[],d=[],m=ft.a.collection("productores"),e.next=7,Ai(t,n);case 7:return e.sent.forEach((function(e){d.push(m.where("curp","in",e).get())})),e.next=11,Promise.all(d);case 11:if(e.sent.forEach((function(e){e.forEach((function(e){i.push(Object(u.a)({},e.data()))}))})),p=i.filter((function(e){return e[l].includes(c.toUpperCase())})),s.push(p),a.length>1)for(f=function(e){var t=s.pop();s.push(t.filter((function(t){return t[a[e].campo]===Ci(a[e].campo,a[e].palabra)})))},E=1;E<=a.length-1;E++)f(E);return 0===p.length&&Nt.a.fire("No se encontraron productores ","...","warning"),e.abrupt("return",Si(s.pop(),"curp"));case 18:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),Ci=function(e,a){switch(e){case"seccion":return parseInt(a);default:return a}},Si=function(e,a){var t=[],n=[];return e.forEach((function(e){-1===t.indexOf(e[a])&&(t.push(e[a]),n.push(e))})),n},Pi=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.modulo,t=e.variablesGlobales.cicloActual,o=Xl([{palabra:"",campo:""}]),c=Object(dt.a)(o,4),i=c[0],s=c[1],d=c[2],m=c[3],p=Object(n.useState)($r),f=Object(dt.a)(p,2),E=f[0],b=f[1],v=function(e){var a=e.target,t=E.findIndex((function(e){return e.id===a.id})),n=E.map((function(e){return e}));n.splice(t,1,Object(u.a)(Object(u.a)({},E[t]),{},{display:!E[t].display})),b(n)},h=Ul(E,[]),N=Object(dt.a)(h,7),O=N[0],g=N[1],y=N[2],A=N[3],x=N[4],C=N[5],S=N[6],P=y.filter,j=y.order1,R=x.includeEmtyRow,w=x.includeSubtotalRow,I=function(){var e=Object(ut.a)(st.a.mark((function e(){var n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i[0].campo.length){e.next=6;break}return e.next=3,xi(i,t,a);case 3:n=e.sent,S(),g(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(e){"Enter"===e.key&&I()},D=function(e,a){var t=P.length>0?E.find((function(e){return e.id===P})):E.find((function(e){return e.id===i[0].campo}));return t?"report"===e?"REPORTE DE ".concat(a," POR ").concat(t.header):"excel"===e?"".concat(a," POR ").concat(t.header):void 0:"PRODUCTORES"},L=D("report","PRODUCTORES"),T=D("excel","PRODUCTORES");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container mb-4 col-sm-8"},r.a.createElement("div",{className:"row d-flex justify-content-end"},i.length>1&&r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:m},r.a.createElement("i",{className:"fas fa-minus"})),r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:d},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:I},r.a.createElement("i",{className:"fas fa-search"}))),i.map((function(e,a){return r.a.createElement("div",{className:"row mt-2",key:"form".concat(a)},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"palabra"},"PARAMETRO DE BUSQUEDA:"),r.a.createElement("input",{index:a,type:"text",className:"form-control",name:"palabra",id:"palabra",autoComplete:"off",value:e.palabra,onChange:s,onKeyUp:z})),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("label",{htmlFor:"campo"},"BUSCAR EN:"),r.a.createElement("div",{className:"d-flex"},r.a.createElement("select",{index:a,name:"campo",id:"campo",type:"text",value:e.campo,onChange:s,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),E.map((function(e){return e.search?r.a.createElement("option",{key:e.id,value:e.id},e.header):r.a.createElement("option",{key:e.id,style:{display:"none"}})}))))))})),O.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"filter"},"ORDENADO Y SUBTOTALES POR:"),r.a.createElement("select",{name:"filter",id:"filter",type:"text",value:P,onChange:A,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),E.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.header)})))),r.a.createElement("div",{className:"col-sm-4 align-self-end"},r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",name:"includeSubtotalRow",id:"includeSubtotalRow",value:w,checked:w,onChange:C,className:"form-check-input"}),r.a.createElement("label",{htmlFor:"includeSubtotalRow"}," INCLUIR SUBTOTALES ")))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"order1"},"SUB-ORDENADO POR:"),r.a.createElement("select",{name:"order1",id:"order1",type:"text",value:j,onChange:A,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),E.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.header)})))),r.a.createElement("div",{className:"col-sm-4 align-self-end"},r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",name:"includeEmtyRow",id:"includeEmtyRow",value:R,checked:R,onChange:C,className:"form-check-input"}),r.a.createElement("label",{htmlFor:"includeEmtyRow"}," INCLUIR SEPARACI\xd3N ")))),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-12"},E.map((function(e){if(e.selectable){var a=e.display?"btn btn-sm btn-info m-1":"btn btn-sm btn-outline-info m-1";return r.a.createElement("button",{key:"0-".concat(e.header),className:a,onClick:v,id:e.id,value:e.selectable},e.header)}return r.a.createElement("div",{key:"1-".concat(e.header),style:{display:"none"}})})))))),O.length>0&&r.a.createElement(Kl,{title:L,excelTitle:T,headers:E,data:O}))},ji=function(){var e=Object(ut.a)(st.a.mark((function e(a,t,n,r){var o,c,l,i,s,d,m,p,f,E,b,v,h,N,O,g,y;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a[0],c=o.palabra,l=void 0===c?0:c,i=o.campo,s=[],d=[],m=[],p=[],f=[],E=Ri(t),b=ft.a.collection("permisos").doc(n).collection("modulos").doc("Modulo-".concat(t)).collection("permisos").where("estadoPermiso","!=","Cancelado"),v=ft.a.collection("transferencias").doc(n).collection("modulos").doc("Modulo-".concat(t)).collection("transferencias").where("estadoTransferencia","!=","CANCELADA"),!r){e.next=18;break}return e.next=12,b.get();case 12:return h=e.sent,e.next=15,v.get();case 15:N=e.sent,h.forEach((function(e){p.push([e.data().cuenta.replace(".","-"),e.data().supAutorizada])})),N.forEach((function(e){var a="".concat(e.data().cuenta,"-").concat(e.data().subcta);f.push([a,e.data().superficieTransferida])}));case 18:return 0===l.length?m.push(E.orderBy(i).get()):(m.push(E.orderBy(i).startAt(l.toUpperCase()).endAt(l.toUpperCase()+"\uf8ff").get()),m.push(E.orderBy(i).startAt(l).endAt(l+"\uf8ff").get()),m.push(E.where(i,"==",Number(l)).get())),e.next=21,Promise.all(m);case 21:if(e.sent.forEach((function(e){e.forEach((function(e){switch(t){case"UNI01":case"UNI02":case"UNI03":s.push(Object(u.a)({id:e.id,entidad:t},e.data()));break;default:1!==e.data().equipo&&s.push(Object(u.a)({id:e.id,entidad:t},e.data()))}}))})),d.push(s),a.length>1)for(O=function(e){var t=d.pop();d.push(t.filter((function(t){return t[a[e].campo]===wi(a[e].campo,a[e].palabra)})))},g=1;g<=a.length-1;g++)O(g);if(0===s.length&&Nt.a.fire("No se encontraron usuarios ","...","warning"),y=Ii(d.pop(),"id"),!r){e.next=31;break}return e.abrupt("return",zi(y,p,f));case 31:return e.abrupt("return",y);case 32:case"end":return e.stop()}}),e)})));return function(a,t,n,r){return e.apply(this,arguments)}}(),Ri=function(e){switch(e){case"UNI01":return ft.a.collection("derechos").where("equipo","==",1).where("modulo","in",[4,5,6,7]);case"UNI02":return ft.a.collection("derechos").where("equipo","==",1).where("modulo","in",[8,"9A","9B"]);case"UNI03":return ft.a.collection("derechos").where("equipo","==",1).where("modulo","in",[1,2,3]);default:return ft.a.collection("derechos").where("modulo","==",function(e){switch(e){case"9A":case"9B":case"dev":return e;default:return parseInt(e)}}(e))}},wi=function(e,a){switch(e){case"seccion":return parseInt(a);default:return a}},Ii=function(e,a){var t=[],n=[];return e.forEach((function(e){-1===t.indexOf(e[a])&&(t.push(e[a]),n.push(e))})),n},zi=function(e,a,t){return a.forEach((function(a){var t=e.findIndex((function(e){return e.id===a[0]}));t>=0&&(e[t].supRiego=e[t].supRiego-a[1],e[t].supRiego<=0&&e.splice(t,1))})),t.forEach((function(a){var t=e.findIndex((function(e){return e.id===a[0]}));t>=0&&(e[t].supRiego=e[t].supRiego-a[1],e[t].supRiego<=0&&e.splice(t,1))})),e},Di=function(e){var a=e.onlyAvailable,t=Object(l.c)((function(e){return e.auth})),o=t.modulo,c=t.variablesGlobales.cicloActual,i=Xl([{palabra:"",campo:""}]),s=Object(dt.a)(i,4),d=s[0],m=s[1],p=s[2],f=s[3],E=Object(n.useState)(eo),b=Object(dt.a)(E,2),v=b[0],h=b[1],N=function(e){var a=e.target,t=v.findIndex((function(e){return e.id===a.id})),n=v.map((function(e){return e}));n.splice(t,1,Object(u.a)(Object(u.a)({},v[t]),{},{display:!v[t].display})),h(n)},O=Ul(v,[]),g=Object(dt.a)(O,7),y=g[0],A=g[1],x=g[2],C=g[3],S=g[4],P=g[5],j=g[6],R=x.filter,w=x.order1,I=S.includeEmtyRow,z=S.includeSubtotalRow,D=function(){var e=Object(ut.a)(st.a.mark((function e(){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d[0].campo.length){e.next=6;break}return e.next=3,ji(d,o,c,a);case 3:t=e.sent,j(),A(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){"Enter"===e.key&&D()},T=function(e,a){var t=R.length>0?v.find((function(e){return e.id===R})):v.find((function(e){return e.id===d[0].campo}));return t?"report"===e?"REPORTE DE ".concat(a," POR ").concat(t.header):"excel"===e?"".concat(a," POR ").concat(t.header):void 0:"USUARIOS"},k=T("report","USUARIOS"),M=T("excel","USUARIOS");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container mb-4 col-sm-8"},r.a.createElement("div",{className:"row d-flex justify-content-end"},d.length>1&&r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:f},r.a.createElement("i",{className:"fas fa-minus"})),r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:p},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:D},r.a.createElement("i",{className:"fas fa-search"}))),d.map((function(e,a){return r.a.createElement("div",{className:"row mt-2",key:"form".concat(a)},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"palabra"},"PARAMETRO DE BUSQUEDA:"),r.a.createElement("input",{index:a,type:"text",className:"form-control",name:"palabra",id:"palabra",autoComplete:"off",value:e.palabra,onChange:m,onKeyUp:L})),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("label",{htmlFor:"campo"},"BUSCAR EN:"),r.a.createElement("div",{className:"d-flex"},r.a.createElement("select",{index:a,name:"campo",id:"campo",type:"text",value:e.campo,onChange:m,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),v.map((function(e){return e.search?r.a.createElement("option",{key:e.id,value:e.id},e.header):r.a.createElement("option",{key:e.id,style:{display:"none"}})}))))))})),y.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"filter"},"ORDENADO Y SUBTOTALES POR:"),r.a.createElement("select",{name:"filter",id:"filter",type:"text",value:R,onChange:C,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),v.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.header)})))),r.a.createElement("div",{className:"col-sm-4 align-self-end"},r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",name:"includeSubtotalRow",id:"includeSubtotalRow",value:z,checked:z,onChange:P,className:"form-check-input"}),r.a.createElement("label",{htmlFor:"includeSubtotalRow"}," INCLUIR SUBTOTALES ")))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"order1"},"SUB-ORDENADO POR:"),r.a.createElement("select",{name:"order1",id:"order1",type:"text",value:w,onChange:C,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),v.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.header)})))),r.a.createElement("div",{className:"col-sm-4 align-self-end"},r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",name:"includeEmtyRow",id:"includeEmtyRow",value:I,checked:I,onChange:P,className:"form-check-input"}),r.a.createElement("label",{htmlFor:"includeEmtyRow"}," INCLUIR SEPARACI\xd3N ")))),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-12"},v.map((function(e){if(e.selectable){var a=e.display?"btn btn-sm btn-info m-1":"btn btn-sm btn-outline-info m-1";return r.a.createElement("button",{key:"0-".concat(e.header),className:a,onClick:N,id:e.id,value:e.selectable},e.header)}return r.a.createElement("div",{key:"1-".concat(e.header),style:{display:"none"}})})))))),y.length>0&&r.a.createElement(Kl,{title:k,excelTitle:M,headers:v,data:y}))},Li=function(){var e=Lt(),a=Object(dt.a)(e,2),t=a[0],n=a[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"row m-0 "},r.a.createElement("div",{className:"col-sm-12 p-3 d-flex justify-content-center"},r.a.createElement("h2",null,"Reportes de padron"))),r.a.createElement("div",{className:"row justify-content-center mb-5"},r.a.createElement(Dl,{inputName:"reportType",options:[{id:"usuarios",label:"Padron de usuarios"},{id:"supDisponible",label:"Superficie disponible"},{id:"productores",label:"Padron de productores"}],formValues:t,setFunction:n,styles:{group:"btn-group btn-group-toggle d-print-none",button:"btn btn-outline-primary"}})),"usuarios"===t.reportType&&r.a.createElement(Di,{onlyAvailable:!1}),"supDisponible"===t.reportType&&r.a.createElement(Di,{onlyAvailable:!0}),"productores"===t.reportType&&r.a.createElement(Pi,null))},Ti=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t,n,r,o,c,l,i,s,u,d,m,p,f,E,b,v;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=[],r=[],Jn.g.forEach((function(e){return r.push(e)})),o=r.length,c=0;c<o;c++){for(l=[],i=0;i<o;i++)l.push(0);n.push(l)}return e.next=8,ft.a.collectionGroup("transferencias").where("ciclo","==",a).get();case 8:for(e.sent.forEach((function(e){"dev"!==e.data().moduloDestino&&t.push({origen:"".concat(e.data().modulo),destino:e.data().moduloDestino,ha:e.data().superficieTransferida})})),s=function(e){for(var a=function(a){var o=t.filter((function(t){return t.origen===r[e]&&t.destino===r[a]}));o.length>0&&o.forEach((function(t){return n[e][a]+=t.ha}))},c=0;c<o;c++)a(c)},u=0;u<o;u++)s(u);for(d=0;d<o;d++){for(m=0,p=0;p<o;p++)m+=n[d][p];n[d].push(m)}for(f=["Total Destino"],E=0;E<=o;E++){for(b=0,v=0;v<o;v++)b+=n[v][E];f.push(b)}return r.unshift("x"),n.unshift(r),r.forEach((function(e,a){0!==a&&n[a].unshift([e])})),r.push("Total Origen"),n.push(f),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ki=Object(n.forwardRef)((function(e,a){var t=e.data,n=e.title,o=e.orientation;return r.a.createElement("div",{ref:a,className:"mt-3"},r.a.createElement("style",null,"@page { margin: ".concat(60," ").concat(60," ").concat(60," ").concat(60," !important; size:letter ").concat(o,";}")),r.a.createElement(Zl,{title:n,pages:1,page:1}),r.a.createElement("table",{className:"table table-sm mt-3"},r.a.createElement("tbody",null,t.map((function(e,a){return r.a.createElement("tr",{key:"row-".concat(a)},e.map((function(e,t){return r.a.createElement("th",{key:"cell-".concat(a).concat(t),className:"text-center border border-dark ".concat(a===t&&"bg-secondary"),style:{fontSize:12}},a===t&&0!==a&&0!==t&&24!==a&&24!==t?"X":e)})))})))))})),Mi=function(){var e=Object(n.createRef)(),a=Object(l.c)((function(e){return e.auth.variablesGlobales})).cicloActual,t=Object(n.useState)([]),o=Object(dt.a)(t,2),c=o[0],i=o[1];return Object(n.useEffect)((function(){i([]),Ti(a).then((function(e){return i(e)}))}),[a]),r.a.createElement("div",null,r.a.createElement("div",{className:"mt-4"},r.a.createElement(Hl.a,{trigger:function(){return r.a.createElement("button",{className:"btn btn-sm btn-outline-primary d-print-none "},r.a.createElement("i",{className:"fas fa-print"}),r.a.createElement("span",null," Imprimir"))},content:function(){return e.current},pageStyle:"bootstrap/dist/css/bootstrap.min.css"})),r.a.createElement(ki,{data:c,title:"Un titulo",ref:e,className:"mt-2",orientation:"landscape"}))},Ui=t(140),Fi=function(e){var a=e.tipo,t=Object(l.c)((function(e){return e.auth})),o=t.modulo,c=t.variablesGlobales.cicloActual,i=Xl([{palabra:"",campo:""}]),s=Object(dt.a)(i,4),d=s[0],m=s[1],p=s[2],f=s[3],E=Object(n.useState)("salientes"===a?to:ao),b=Object(dt.a)(E,2),v=b[0],h=b[1],N=function(e){var a=e.target,t=v.findIndex((function(e){return e.id===a.id})),n=v.map((function(e){return e}));n.splice(t,1,Object(u.a)(Object(u.a)({},v[t]),{},{display:!v[t].display})),h(n)},O=Ul(v,[]),g=Object(dt.a)(O,7),y=g[0],A=g[1],x=g[2],C=g[3],S=g[4],P=g[5],j=g[6],R=x.filter,w=x.order1,I=S.includeEmtyRow,z=S.includeSubtotalRow,D=function(){var e=Object(ut.a)(st.a.mark((function e(){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d[0].campo.length){e.next=6;break}return e.next=3,Object(Ui.a)(d,o,c,a);case 3:t=e.sent,j(),A(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){"Enter"===e.key&&D()},T=function(e,a){var t=R.length>0?v.find((function(e){return e.id===R})):v.find((function(e){return e.id===d[0].campo}));return t?"report"===e?"REPORTE DE ".concat(a," POR ").concat(t.header):"excel"===e?"".concat(a," POR ").concat(t.header):void 0:"TRANSFERENCIAS"},k=T("report","TRANSFERENCIAS"),M=T("excel","TRANSFERENCIAS");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container mb-4 col-sm-8"},r.a.createElement("div",{className:"row d-flex justify-content-end"},d.length>1&&r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:f},r.a.createElement("i",{className:"fas fa-minus"})),r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:p},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:D},r.a.createElement("i",{className:"fas fa-search"}))),d.map((function(e,a){return r.a.createElement("div",{className:"row mt-2",key:"form".concat(a)},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"palabra"},"PARAMETRO DE BUSQUEDA:"),r.a.createElement("input",{index:a,type:"text",className:"form-control",name:"palabra",id:"palabra",autoComplete:"off",value:e.palabra,onChange:m,onKeyUp:L})),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("label",{htmlFor:"campo"},"BUSCAR EN:"),r.a.createElement("div",{className:"d-flex"},r.a.createElement("select",{index:a,name:"campo",id:"campo",type:"text",value:e.campo,onChange:m,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),v.map((function(e){return e.search?r.a.createElement("option",{key:e.id,value:e.id},e.header):r.a.createElement("option",{key:e.id,style:{display:"none"}})}))))))})),y.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"filter"},"ORDENADO Y SUBTOTALES POR:"),r.a.createElement("select",{name:"filter",id:"filter",type:"text",value:R,onChange:C,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),v.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.header)})))),r.a.createElement("div",{className:"col-sm-4 align-self-end"},r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",name:"includeSubtotalRow",id:"includeSubtotalRow",value:z,checked:z,onChange:P,className:"form-check-input"}),r.a.createElement("label",{htmlFor:"includeSubtotalRow"}," INCLUIR SUBTOTALES ")))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"order1"},"SUB-ORDENADO POR:"),r.a.createElement("select",{name:"order1",id:"order1",type:"text",value:w,onChange:C,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),v.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.header)})))),r.a.createElement("div",{className:"col-sm-4 align-self-end"},r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",name:"includeEmtyRow",id:"includeEmtyRow",value:I,checked:I,onChange:P,className:"form-check-input"}),r.a.createElement("label",{htmlFor:"includeEmtyRow"}," INCLUIR SEPARACI\xd3N ")))),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-12"},v.map((function(e){if(e.selectable){var a=e.display?"btn btn-sm btn-info m-1":"btn btn-sm btn-outline-info m-1";return r.a.createElement("button",{key:"0-".concat(e.header),className:a,onClick:N,id:e.id,value:e.selectable},e.header)}return r.a.createElement("div",{key:"1-".concat(e.header),style:{display:"none"}})})))))),y.length>0&&r.a.createElement(Kl,{title:k,excelTitle:M,headers:v,data:y}))},Gi=function(){var e=Lt(),a=Object(dt.a)(e,2),t=a[0],n=a[1],o=Object(l.c)((function(e){return e.auth})).privilegios.accesoGlobal;return r.a.createElement("div",null,r.a.createElement("div",{className:"row m-0 "},r.a.createElement("div",{className:"col-sm-12 p-3 d-flex justify-content-center"},r.a.createElement("h2",null,"Reportes de transferencias"))),r.a.createElement("div",{className:"row justify-content-center mb-5"},r.a.createElement(Dl,{inputName:"reportType",options:o?[{id:"salientes",label:"Transferencias salientes"},{id:"entrantes",label:"Transferencias recibidas"},{id:"global",label:"Reportes global de transferencias"},{id:"tabla",label:"Tabla de transferencias"}]:[{id:"salientes",label:"Transferencias salientes"},{id:"entrantes",label:"Transferencias recibidas"}],formValues:t,setFunction:n,styles:{group:"btn-group btn-group-toggle d-print-none",button:"btn btn-outline-primary"}})),"salientes"===t.reportType&&r.a.createElement(Fi,{tipo:"salientes"}),"entrantes"===t.reportType&&r.a.createElement(Fi,{tipo:"entrantes"}),"global"===t.reportType&&o&&r.a.createElement(Fi,{tipo:"global"}),"tabla"===t.reportType&&o&&r.a.createElement(Mi,{tipo:"tabla"}))},Bi=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t,n,r,o,c,l,i,s,d,m,p;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a[0],n=t.palabra,r=void 0===n?0:n,o=t.campo,c=[],l=[],i=[],s=[],d=ft.a.collectionGroup("permisos").where("ciclo","==","2020-2021"),0===r.length?s.push(d.orderBy(o).get()):(s.push(d.orderBy(o).startAt(r.toUpperCase()).endAt(r.toUpperCase()+"\uf8ff").get()),s.push(d.orderBy(o).startAt(r).endAt(r+"\uf8ff").get()),s.push(d.where(o,"==",Number(r)).get())),e.next=9,ft.a.collection("usuarios").where("rol","==","tecnicoCESVBC").get();case 9:return e.sent.forEach((function(e){l.push({id:e.id,nombre:e.data().displayName})})),e.next=13,Promise.all(s);case 13:if(e.sent.forEach((function(e){e.forEach((function(e){var a=l.find((function(a){return a.id===e.data().tecnico}));c.push(Object(u.a)(Object(u.a)({id:e.id},e.data()),{},{desfoliado:e.data().desfoliado?"SI":"NO",cosechado:e.data().cosechado?"SI":"NO",desvarado:e.data().desvarado?"SI":"NO",disqueado:e.data().disqueado?"SI":"NO",desarraigado:e.data().desarraigado?"SI":"NO",barbechado:e.data().barbechado?"SI":"NO",pagado:e.data().pagado?"SI":"NO",laboresPendientes:e.data().laboresPendientes?"SI":"NO",tecnico:a?a.nombre:""}))}))})),i.push(c),a.length>1)for(m=function(e){var t=i.pop();i.push(t.filter((function(t){return t[a[e].campo]===Vi(a[e].campo,a[e].palabra)})))},p=1;p<=a.length-1;p++)m(p);return 0===c.length&&Nt.a.fire("No se encontraron permisos ","...","warning"),e.abrupt("return",qi(i.pop(),"folio"));case 19:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Vi=function(e,a){switch(e){case"seccion":return parseInt(a);default:return a}},qi=function(e,a){var t=[],n=[];return e.forEach((function(e){-1===t.indexOf(e[a])&&(t.push(e[a]),n.push(e))})),n},Yi=function(){var e=Xl([{palabra:"",campo:""}]),a=Object(dt.a)(e,4),t=a[0],o=a[1],c=a[2],l=a[3],i=Object(n.useState)(Wr),s=Object(dt.a)(i,2),d=s[0],m=s[1],p=function(e){var a=e.target,t=d.findIndex((function(e){return e.id===a.id})),n=d.map((function(e){return e}));n.splice(t,1,Object(u.a)(Object(u.a)({},d[t]),{},{display:!d[t].display})),m(n)},f=Ul(d,[]),E=Object(dt.a)(f,7),b=E[0],v=E[1],h=E[2],N=E[3],O=E[4],g=E[5],y=E[6],A=h.filter,x=h.order1,C=O.includeEmtyRow,S=O.includeSubtotalRow,P=function(){var e=Object(ut.a)(st.a.mark((function e(){var a;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t[0].campo.length){e.next=6;break}return e.next=3,Bi(t);case 3:a=e.sent,y(),v(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(e){"Enter"===e.key&&P()},R=function(e,a){var n=A.length>0?d.find((function(e){return e.id===A})):d.find((function(e){return e.id===t[0].campo}));return n?"report"===e?"REPORTE DE ".concat(a," POR ").concat(n.header):"excel"===e?"".concat(a," POR ").concat(n.header):void 0:"LABORES"},w=R("report","LABORES"),I=R("excel","LABORES");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container mb-4 col-sm-8"},r.a.createElement("div",{className:"row d-flex justify-content-end"},t.length>1&&r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:l},r.a.createElement("i",{className:"fas fa-minus"})),r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:c},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("button",{className:"btn btn-outline-primary ml-2",type:"button",onClick:P},r.a.createElement("i",{className:"fas fa-search"}))),t.map((function(e,a){return r.a.createElement("div",{className:"row mt-2",key:"form".concat(a)},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"palabra"},"PARAMETRO DE BUSQUEDA:"),r.a.createElement("input",{index:a,type:"text",className:"form-control",name:"palabra",id:"palabra",autoComplete:"off",value:e.palabra,onChange:o,onKeyUp:j})),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("label",{htmlFor:"campo"},"BUSCAR EN:"),r.a.createElement("div",{className:"d-flex"},r.a.createElement("select",{index:a,name:"campo",id:"campo",type:"text",value:e.campo,onChange:o,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),d.map((function(e){return e.search?r.a.createElement("option",{key:e.id,value:e.id},e.header):r.a.createElement("option",{key:e.id,style:{display:"none"}})}))))))})),b.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"filter"},"ORDENADO POR:"),r.a.createElement("select",{name:"filter",id:"filter",type:"text",value:A,onChange:N,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),d.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.header)})))),r.a.createElement("div",{className:"col-sm-4 align-self-end"},r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",name:"includeSubtotalRow",id:"includeSubtotalRow",value:S,checked:S,onChange:g,className:"form-check-input"}),r.a.createElement("label",{htmlFor:"includeSubtotalRow"}," INCLUIR SUBTOTALES ")))),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("label",{htmlFor:"order1"},"SUB-ORDENADO POR:"),r.a.createElement("select",{name:"order1",id:"order1",type:"text",value:x,onChange:N,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"-"),d.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.header)})))),r.a.createElement("div",{className:"col-sm-4 align-self-end"},r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",name:"includeEmtyRow",id:"includeEmtyRow",value:C,checked:C,onChange:g,className:"form-check-input"}),r.a.createElement("label",{htmlFor:"includeEmtyRow"}," INCLUIR SEPARACI\xd3N ")))),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-12"},d.map((function(e){if(e.selectable){var a=e.display?"btn btn-sm btn-info m-1":"btn btn-sm btn-outline-info m-1";return r.a.createElement("button",{key:"0-".concat(e.header),className:a,onClick:p,id:e.id,value:e.selectable},e.header)}return r.a.createElement("div",{key:"1-".concat(e.header),style:{display:"none"}})})))))),b.length>0&&r.a.createElement(Kl,{title:w,excelTitle:I,headers:d,data:b}))},Hi=function(){var e=Lt(),a=Object(dt.a)(e,2),t=a[0],n=a[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"row m-0 "},r.a.createElement("div",{className:"col-sm-12 p-3 d-flex justify-content-center"},r.a.createElement("h2",null,"Reportes (CESVBC)"))),r.a.createElement("div",{className:"row justify-content-center mb-5"},r.a.createElement(Dl,{inputName:"reportType",options:[{id:"labores",label:"Reporte De Labores"}],formValues:t,setFunction:n,styles:{group:"btn-group btn-group-toggle d-print-none",button:"btn btn-outline-primary"}})),"labores"===t.reportType&&r.a.createElement(Yi,{tipo:"salientes"}))},Zi=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.privilegios,t=e.variablesGlobales.cicloActual,o=Lt(),c=Object(dt.a)(o,2),i=c[0],s=c[1],u=Object(l.b)();return Object(n.useEffect)((function(){u(function(e){return function(){var a=Object(ut.a)(st.a.mark((function a(t){var n;return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Oi(e);case 2:n=a.sent,t(gi(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t)),u(function(e){return function(){var a=Object(ut.a)(st.a.mark((function a(t){var n;return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,hi(e);case 2:n=a.sent,t(yi(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t))}),[u,t]),r.a.createElement("div",{className:"mt-5"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(Dl,{inputName:"reportType",options:[{id:"expedicion",label:"Expedici\xf3n"},{id:"permisos",label:"Permisos"},{id:"padron",label:"Padr\xf3n"},{id:"transferencias",label:"Transferencias"},{id:"sanidad",label:"CESVBC"}],formValues:i,setFunction:s,styles:{group:"btn-group btn-group-toggle d-print-none",button:"btn btn-outline-primary"}})),r.a.createElement("div",{className:"mt-5"},"expedicion"===i.reportType&&a.consultarExpedicion&&r.a.createElement(bi,null)),r.a.createElement("div",{className:"mt-5"},"permisos"===i.reportType&&a.consultarPermisos&&r.a.createElement(ei,null)),r.a.createElement("div",{className:"mt-5"},"padron"===i.reportType&&a.consultarPadron&&r.a.createElement(Li,null)),r.a.createElement("div",{className:"mt-5"},"transferencias"===i.reportType&&a.consultarTransferencias&&r.a.createElement(Gi,null)),r.a.createElement("div",{className:"mt-5"},"sanidad"===i.reportType&&a.consultarLabores&&r.a.createElement(Hi,null)),r.a.createElement("div",{className:"pb-5"}))},Ji=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],"dev"!==a){e.next=6;break}return e.next=4,ft.a.collection("usuarios").orderBy("claveEntidad").get();case 4:e.sent.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}));case 6:if("CNA"!==a){e.next=11;break}return e.next=9,ft.a.collection("usuarios").where("claveEntidad","!=","CESVBC").orderBy("claveEntidad").get();case 9:e.sent.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}));case 11:if("CESVBC"!==a){e.next=16;break}return e.next=14,ft.a.collection("usuarios").where("claveEntidad","==","CESVBC").get();case 14:e.sent.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))}));case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),_i=function(){var e=Object(ut.a)(st.a.mark((function e(){var a;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,ft.a.collection("roles").get();case 3:return e.sent.forEach((function(e){a.push(e.id)})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ki=function(){var e=Object(ut.a)(st.a.mark((function e(a){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("roles").doc(a).get();case 2:return t=e.sent,e.abrupt("return",t.data());case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Xi=function(e){return function(){var a=Object(ut.a)(st.a.mark((function a(t){var n;return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ji(e);case 2:n=a.sent,t(Qi(n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Qi=function(e){return{type:ra,payload:e}},Wi=function(e){return function(a){a(bt()),a(function(e){return{type:oa,payload:e}}(e))}},$i=function(){return function(){var e=Object(ut.a)(st.a.mark((function e(a){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_i();case 2:t=e.sent,a(es(t));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},es=function(e){return{type:la,payload:e}},as=function(e){return{type:sa,payload:e}},ts=function(e){return{type:da,payload:e}},ns=function(){var e=Lt({newRole:""}),a=Object(dt.a)(e,2),t=a[0],n=a[1],o=t.newRole,c=Object(l.b)(),i=function(){var e;o.length>0&&(e=o,ft.a.collection("roles").doc(e).set({}).then((function(){return console.log("Se guardo rol -> ".concat(e)),!0})).catch((function(e){console.log(e)})),c($i()))};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("label",null,"Crear nuevo rol:")),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Nuevo Rol",name:"newRole",autoComplete:"off",value:o,onChange:n,onKeyUp:function(e){"Enter"===e.key&&i()}})),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:i},r.a.createElement("span",null,"Agregar "),r.a.createElement("i",{className:"fas fa-plus"}))))},rs=function(){var e=Object(ut.a)(st.a.mark((function e(a){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ft.a.collection("roles").doc(a).delete().then((function(){console.log("Rol de usuario borrado (".concat(a,")"))})).catch((function(e){console.error("Error removing document: ",e)}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),os=function(){var e=Object(l.c)((function(e){return e.entidades})).userRoles,a=Object(l.b)(),t=Lt(),n=Object(dt.a)(t,2),o=n[0],c=n[1],i=o.selectedRole;if(e||a($i()),e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},"Gestionar rol:"),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("select",{type:"text",name:"selectedRole",value:i,onChange:c,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"Rol"),e.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"col-sm-4 d-flex"},i?r.a.createElement("button",{onClick:function(e){var t;e.preventDefault(),i&&a((t=i,function(){var e=Object(ut.a)(st.a.mark((function e(a){var n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ki(t);case 2:n=e.sent,a(as(t)),a({type:ma}),a(ts(n));case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()))},className:"btn btn-outline-primary"},r.a.createElement("span",null,"Editar Rol "),r.a.createElement("i",{className:"fas fa-edit"})):r.a.createElement(r.a.Fragment,null),i?r.a.createElement("button",{onClick:function(){Nt.a.fire({title:"Atenci\xf3n!!",text:"Esta apunto de borrar el rol de usuario ".concat(i,", \xbfRealmente desea borrarlo?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then((function(e){e.isConfirmed&&(rs(i),a({type:ia}),a({type:ua}),a($i()),Nt.a.fire("Rol: ".concat(i),"Se borro el rol con \xe9xito !","success"))}))},className:" btn btn-outline-danger ml-4"},r.a.createElement("span",null,"Borrar")):r.a.createElement(r.a.Fragment,null)))}return r.a.createElement(r.a.Fragment,null)},cs=function(){var e=Object(ut.a)(st.a.mark((function e(a,t){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ft.a.collection("roles").doc(a).set(t).then((function(){Nt.a.fire("Rol: ".concat(a),"Se actualizaron los privilegios con \xe9xito !","success")})).catch((function(e){console.error("Error writing document: ",e)}));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),ls=function(){var e=Object(l.c)((function(e){return e.entidades})),a=e.userRoleSelected,t=e.privilegesToEdit;Object.getOwnPropertyNames(t).map((function(e){return Jn.e[e]=t[e],!0}));var n=Lt(Jn.e),o=Object(dt.a)(n,2),c=o[0],i=o[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),cs(a,c)},className:"border rounded p-4"},r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-sm-8"},"PRIVILEGIOS PARA EL ROL:","  ",r.a.createElement("span",{className:"text-success font-weight-bold"},a)),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("button",{type:"submit",className:" btn btn-outline-primary"},"Guardar"))),r.a.createElement("div",{className:"form-check d-flex flex-wrap"},Object.getOwnPropertyNames(Jn.e).map((function(e){return r.a.createElement("div",{key:e,className:"w-25 p-1"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",name:e,id:e,onChange:i,checked:c[e]}),r.a.createElement("label",{className:"form-check-label",htmlFor:"todos"},e))}))))},is={content:{width:"1125px",height:"1500px",overflow:"auto"}};qr.a.setAppElement("#root");var ss=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.ui})).isOpenUserRoleModal,t=Object(l.c)((function(e){return e.entidades})),n=t.privilegesToEdit,o=t.userRoleSelected;return r.a.createElement(qr.a,{isOpen:a,onRequestClose:function(){e({type:xa})},style:is,closeTimeoutMS:200,className:"printModal",overlayClassName:"modal-fondo"},r.a.createElement("div",{className:"p-4"},r.a.createElement(ns,null)),r.a.createElement("div",{className:"p-4"},r.a.createElement(os,null)),r.a.createElement("div",{className:"p-4"},n&&o?r.a.createElement(ls,null):r.a.createElement(r.a.Fragment,null)))},us=function(){var e=Object(l.b)();return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{className:"btn btn-outline-primary",type:"button",onClick:function(){e({type:Aa})}},r.a.createElement("span",null,"Gestionar Roles "),r.a.createElement("i",{className:"fa fa-edit"})))},ds=function(){var e=Object(l.c)((function(e){return e.entidades})).systemUserSelected,a=Object(l.c)((function(e){return e.ui})).msgError,t=Object(l.c)((function(e){return e.auth})),n=t.claveEntidad,o=t.privilegios,c=Object(l.c)((function(e){return e.entidades})).userRoles,i=Lt(),s=Object(dt.a)(i,2),u=s[0],d=s[1],m=u.rol,p=Object(l.b)();c||p($i());var f=function(){return m?(p(bt()),!0):(p(Et("Seleccione un rol de usuario")),!1)};return e?r.a.createElement("div",{className:"row border border-info rounded m-1"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row border-bottom border-info p-2"},r.a.createElement("div",{className:"col-12 d-flex justify-content-center"},r.a.createElement("h5",null,"Cuenta: ",e.email))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 d-flex flex-column p-4"},r.a.createElement("div",null,"Usuario: ",e.displayName),r.a.createElement("div",null,"Clave Entidad: ",e.claveEntidad),"sinAsignar"===e.rol?r.a.createElement("div",{className:"text-warning"},"Rol: ",e.rol):r.a.createElement("div",{className:"text-success"},"Rol: ",e.rol),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),f()&&(!function(e,a){ft.a.collection("usuarios").doc(e).update({rol:a}).then((function(){return Nt.a.fire("Usuario habilitado","Se asign\xf3 correctamente el rol de usuario","success"),!0})).catch((function(e){console.log(e),Nt.a.fire("Error",e,"error")}))}(e.id,m),p(Xi(n)),p({type:ca}))},className:"form-group pt-3"},r.a.createElement("select",{type:"text",name:"rol",value:m,onChange:d,className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:!1},"Rol"),r.a.createElement("option",{value:"sinAsignar"},"Sin Asignar"),c.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-block mt-3 mb-5"},"Asignar Rol"),a&&r.a.createElement("div",{className:"auth__alert-error"},a)),o.editarRoles?r.a.createElement(us,null):r.a.createElement(r.a.Fragment,null))))):r.a.createElement(r.a.Fragment,null)},ms=function(){var e=Object(l.c)((function(e){return e.entidades})).systemUsers,a=Object(l.c)((function(e){return e.auth})).claveEntidad,t=Object(l.b)(),n=[];return e||t(Xi(a)),e?(n=Object.values(e),r.a.createElement(Rn,{title:0===n.length?"No se encontraron usuarios":"Usuarios",columns:kn,data:n,setFunction:Wi})):r.a.createElement(r.a.Fragment,null)},ps=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:""},r.a.createElement("h3",null,"Gesti\xf3n de roles de usuarios")),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement(ms,null)),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement(ds,null))))},fs=function(){var e=Object(ut.a)(st.a.mark((function e(){var a,t,n,r=arguments;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:Jn.b,t=ft.a.collection("entidades"),n=[],a.forEach((function(e){t.doc(e.clave).get().then((function(a){a.exist?n.push(t.doc(e.clave).update(e)):n.push(t.doc(e.clave).set(e))})).catch((function(a){console.log("Error al actualizar entidad (".concat(e.clave,")"),a)}))})),e.next=6,Promise.all(n).then(Nt.a.fire("Cambios guardados","Se actualizaron con \xe9xito los datos de las entidades.","success"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Es=function(){var e=Object(l.c)((function(e){return e.entidades})).entities,a=Object(l.c)((function(e){return e.auth})).privilegios,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=Object(n.useState)(e),t=Object(dt.a)(a,2),r=t[0],o=t[1],c=function(){o(e)},l=function(e){var a=e.target,t=a.name.split("-"),n=t[0],c=t[1],l=r.slice();"button"===a.type?l[n][c]=!l[n][c]:"number"===a.type?l[n][c]=Number(a.value):l[n][c]=a.value,o(l)};return[r,l,c]}(e),o=Object(dt.a)(t,2),c=o[0],i=o[1],s=function(){fs(c)};return r.a.createElement("div",null,r.a.createElement("div",{className:"mb-4"},r.a.createElement("h3",null,"Edici\xf3n de entidades")),e!==c&&a.editarEntidades&&r.a.createElement("div",{className:"row mb-3 d-flex justify-content-center mt-4"},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:s},r.a.createElement("span",null," Actualizar Entidades"))),r.a.createElement("form",null,e.map((function(t,n){return"dev"!==t.clave?r.a.createElement("div",{key:t.clave,className:"d-flex flex-column mb-5"},r.a.createElement("h5",null,t.nombre),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-2 mt-3 h-100 d-flex justify-content-center align-items-center"},r.a.createElement("img",{className:"align-self-center",src:"./logos/".concat(t.img),alt:"Logo de la entidad",style:{maxHeight:70,maxWidth:100}})),r.a.createElement("div",{className:"col-sm-8 mt-3"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("label",{className:"align-self-center col-sm-2",htmlFor:"".concat(n,"-titular")},"Titular:"),r.a.createElement("input",{type:"text",className:"form-control ml-2",id:"".concat(n,"-titular"),name:"".concat(n,"-titular"),autoComplete:"off",value:c[n].titular,onChange:i})),r.a.createElement("div",{className:"d-flex mt-2"},r.a.createElement("label",{className:"align-self-center col-sm-2",htmlFor:"".concat(n,"-direccion")},"Direccion:"),r.a.createElement("input",{type:"text",className:"form-control ml-2",id:"".concat(n,"-direccion"),name:"".concat(n,"-direccion"),autoComplete:"off",value:e[n].direccion,onChange:i})),"SADER"!==t.clave&&"CNA"!==t.clave&&"SRL"!==t.clave&&"CESVBC"!==t.clave&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex mt-2"},r.a.createElement("label",{className:"align-self-center col-sm-2",htmlFor:"".concat(n,"-dotacionGravedad")},"Dotaci\xf3n Gravedad:"),r.a.createElement("input",{type:"number",className:"form-control ml-2 w-25",id:"".concat(n,"-dotacionGravedad"),name:"".concat(n,"-dotacionGravedad"),autoComplete:"off",value:e[n].dotacionGravedad,onChange:i})),r.a.createElement("div",{className:"d-flex mt-2"},r.a.createElement("label",{className:"align-self-center col-sm-2",htmlFor:"".concat(n,"-dotacionPozo")},"Dotaci\xf3n Pozo:"),r.a.createElement("input",{type:"number",className:"form-control ml-2 w-25",id:"".concat(n,"-dotacionPozo"),name:"".concat(n,"-dotacionPozo"),autoComplete:"off",value:e[n].dotacionPozo,onChange:i})))),a.cerrarExpedicionModulos&&"SADER"!==t.clave&&"CNA"!==t.clave&&"SRL"!==t.clave&&"CESVBC"!==t.clave&&r.a.createElement("div",{className:"col-sm-2 mt-3"},"Expedici\xf3n:",r.a.createElement("div",{className:"btn-group",role:"group"},r.a.createElement("button",{type:"button",name:"".concat(n,"-expedicionActivaModulo"),className:e[n].expedicionActivaModulo?"btn btn-primary":"btn btn-outline-primary",onClick:i},"Activa"),r.a.createElement("button",{type:"button",name:"".concat(n,"-expedicionActivaModulo"),className:e[n].expedicionActivaModulo?"btn btn-outline-primary":"btn btn-primary",onClick:i},"Cerrada"))))):r.a.createElement("div",{key:t.clave})}))),e!==c&&a.editarEntidades&&r.a.createElement("div",{className:"mb-3 d-flex justify-content-center mt-4"},r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:s},r.a.createElement("span",null," Actualizar Entidades"))))},bs=function(){var e=Object(ut.a)(st.a.mark((function e(){var a,t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collection("entidades").orderBy("nombre").get();case 2:return a=e.sent,t=[],a.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),vs=function(){return function(){var e=Object(ut.a)(st.a.mark((function e(a){var t;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bs();case 2:t=e.sent,a(hs(t));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},hs=function(e){return{type:g,payload:e}},Ns=function(){var e=Object(l.c)((function(e){return e.auth})).privilegios,a=Object(l.c)((function(e){return e.entidades})).entities,t=Object(l.b)();a||t(vs());var n=Lt(),o=Object(dt.a)(n,2),c=o[0],i=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row pt-4"},r.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center"},r.a.createElement("h1",null,"Configuracion"))),r.a.createElement("div",{className:"row justify-content-center pt-4"},r.a.createElement(Dl,{inputName:"module",options:[{id:"usuarios",label:"usuarios"},{id:"entidades",label:"entidades"}],formValues:c,setFunction:i,styles:{group:"btn-group btn-group-toggle d-print-none",button:"btn btn-outline-primary"}})),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-12"},"usuarios"===c.module&&e.asignarRoles&&r.a.createElement(ps,null))),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-sm-12"},"entidades"===c.module&&e.editarEntidades&&r.a.createElement(Es,null))),r.a.createElement(ss,null))},Os=function(){var e=Object(ut.a)(st.a.mark((function e(){var a,t,n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Cargando permisos..."),a=[],t=[],n=[],e.next=6,ft.a.collectionGroup("permisos").where("ciclo","==","2020-2021").get();case 6:e.sent.forEach((function(e){var r=a.find((function(a){return a.cuenta===e.data().cuenta}));r?t.includes(e.data().cuenta)||(t.push(r.cuenta),n.push(e.data())):a.push(e.data())})),console.log(t),console.table(n),t.forEach(function(){var e=Object(ut.a)(st.a.mark((function e(a,t){var n;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft.a.collectionGroup("permisos").where("ciclo","==","2020-2021").where("cuenta","==",a).get();case 2:return n=e.sent,e.next=5,console.log("".concat(t," Cargando grupo..."),a);case 5:n.forEach((function(e){console.log(e.id,e.data().cuenta," :",Object.keys(e.data()).length)}));case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),gs=function(){var e=Object(ut.a)(st.a.mark((function e(a,t,n){var r,o,c,l,i;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,ft.a.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisos").where("estadoPermiso","!=","Cancelado").get();case 3:return o=e.sent,c=[],o.forEach((function(e){c.push(e.data())})),e.next=8,ft.a.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisosPorCultivo").get();case 8:l=e.sent,i=[],l.forEach((function(e){i.push(Object(u.a)({id:e.id},e.data()))})),ys(c,"claveCultivo").forEach((function(e){var a=c.filter((function(a){return a.claveCultivo===e})),t={id:"".concat(e,"-").concat(a[0].nombreCultivo),clave:e,cultivo:a[0].nombreCultivo,gravedadNormal:0,numeroPermisos:0,pozoNormal:0,pozoParticularNormal:0,superficie:0};a.forEach((function(e){switch(e.sistema){case"Gravedad":t.gravedadNormal=t.gravedadNormal+e.supAutorizada;break;case"Pozo Federal":t.pozoNormal=t.pozoNormal+e.supAutorizada;break;case"Pozo Particular":t.pozoParticularNormal=t.pozoParticularNormal+e.supAutorizada}t.numeroPermisos=t.numeroPermisos+1,t.superficie=t.superficie+e.supAutorizada})),r.push(t)})),r.forEach((function(e){var r=i.find((function(a){return a.id===e.id}));void 0===r.gravedadNormal&&(r.gravedadNormal=0),void 0===r.pozoNormal&&(r.pozoNormal=0),void 0===r.pozoParticularNormal&&(r.pozoParticularNormal=0);var o=r.gravedadNormal===e.gravedadNormal,c=r.pozoNormal===e.pozoNormal,l=r.pozoParticularNormal===e.pozoParticularNormal,s=r.superficie===e.superficie,u=r.numeroPermisos===e.numeroPermisos,d=[{tipo:e.id},{tipo:"Gravedad",conteo:r.gravedadNormal,permisos:e.gravedadNormal,dif:e.gravedadNormal-r.gravedadNormal,igualdad:o},{tipo:"Pozo",conteo:r.pozoNormal,permisos:e.pozoNormal,dif:e.pozoNormal-r.pozoNormal,igualdad:c},{tipo:"Pozo Particular",conteo:r.pozoParticularNormal,permisos:e.pozoParticularNormal,dif:e.pozoParticularNormal-r.pozoParticularNormal,igualdad:l},{tipo:"Total",conteo:r.superficie,permisos:e.superficie,dif:e.superficie-r.superficie,igualdad:s},{tipo:"Numero",conteo:r.numeroPermisos,permisos:e.numeroPermisos,dif:e.numeroPermisos-r.numeroPermisos,igualdad:u}];o&&c&&l&&s&&u||(console.table(d),n&&ft.a.collection("permisos").doc(t).collection("modulos").doc("Modulo-".concat(a)).collection("permisosPorCultivo").doc(e.id).update({gravedadNormal:e.gravedadNormal,pozoNormal:e.pozoNormal,pozoParticularNormal:e.pozoParticularNormal,superficie:e.superficie,numeroPermisos:e.numeroPermisos}))})),console.log("Se termido de actualizar el modulo: ".concat(a));case 15:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),ys=function(e,a){var t=[];return e.forEach((function(e){-1===t.indexOf(e[a])&&t.push(e[a])})),t.sort((function(e,a){return As(e,a)})),t},As=function(e,a){switch(typeof e){case"number":return e<a?1:e>a?-1:0;default:return e>a?1:e<a?-1:0}},xs=function(){var e=Object(l.c)((function(e){return e.auth})).modulo,a=Object(n.useState)(!1),t=Object(dt.a)(a,2),o=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Verificar expedicion"),r.a.createElement("div",{className:"col-12 d-flex"},r.a.createElement("h5",null,"Modulo: ",e),r.a.createElement("button",{className:"btn btn-outline-primary ml-4",onClick:function(){c(!o)}},"Modo:"),r.a.createElement("button",{onClick:function(){return gs(e,"2021-2022",o)},className:"btn btn-primary ml-5"},o?"Actualizar":"Revisar")))},Cs=function(e,a){var t=e.split(".");return 1===t.length?"".concat(t[0]).concat(a,"0"):"".concat(t[0]).concat(a).concat(t[1])},Ss=function(e,a){switch(e){case"UNI01":case"UNI02":case"UNI03":return"".concat(e,"-").concat(a);default:return"MOD".concat(e,"-").concat(a)}},Ps=function(e,a){return"Desconocido"===e.split(" ")[0]?a.trim():e.trim()},js=function(e){return"BARBECHADO"===e.trim()?{desfoliado:!0,cosechado:!0,desvarado:!0,disqueado:!0,desarraigado:!0,barbechado:!0}:{}},Rs=function(e){switch(e.trim()){case"ADRIAN VILLA":return"GOxDoCdADSSVhj1gQIXxzZ5YN4H3";case"EDUARDO BA\xd1UELOS":return"rUxW1A8ehVWGYzjK91c8LCwwklb2";case"EDUARDO ZAVALA":return"31naXMbqQibk1SzOLIhZ5JXFYAk1";case"GUILEBALDO ZAVALA":return"u2onRGMYn6RqLafQC3LNe2cP64q1";case"SAUL VEA BERRELLEZA":return"rA5pOGIhqZceAigtDlP0cVy2SwA3";case"CORNELIO LARA":return"bHflypkGK8SBj2VAOe6lIccxwbc2";default:return""}},ws=function(){var e=Object(l.c)((function(e){return e.ui})).updatingPermisos,a=Object(l.b)();return r.a.createElement("div",null,r.a.createElement("h3",null,"Subir Permisos"),r.a.createElement(Dr,{actionFunction:function(e){a(function(e,a){return function(){var t=Object(ut.a)(st.a.mark((function t(n){var r,o,c,l,i,s,d;return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n({type:Y});case 2:return t.next=4,Cr(e);case 4:return r=t.sent,t.next=7,ft.a.collection("colonias").get();case 7:return o=t.sent,c=[],o.forEach((function(e){c.push(e.data())})),t.next=12,r.map(function(){var e=Object(ut.a)(st.a.mark((function e(a){var t,n,r,o,l,i,s,d,m,p,f;return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cs("".concat(a.cuenta),"."),o=Cs("".concat(a.cuenta),"-"),e.next=4,ft.a.collection("derechos").doc(o).get();case 4:if(l=e.sent,i=js(null!==(t=a.labores)&&void 0!==t?t:""),s=Rs(null!==(n=a.tecnico)&&void 0!==n?n:""),!l.exists){e.next=15;break}return d="".concat(l.data().modulo),m=Ss(d,a.folio),p=l.data().ejido,f=c.find((function(e){return e.clave===p})),e.abrupt("return",Object(u.a)(Object(u.a)({},i),{},{folio:m,modulo:d,cuenta:r,nombre:a.nombre.trim(),cultivo:a.cultivo.trim(),superficie:a.superficie,lote:"".concat(a.lote),ubicacion:Ps(f.nombre,a.ubicaci\u00f3n),claveLocalidad:f.clave,tipoLocalidad:f.tipo,estadoPermiso:"Activo",laboresPendientes:!0,ciclo:"2020-2021",tecnico:s}));case 15:console.log("Cuenta desconocida: ",o);case 16:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 12:return l=t.sent,t.next=15,Promise.all(l);case 15:i=t.sent,s=ft.a.batch(),d=1,500,i.forEach((function(e){if(e){var t=ft.a.collection("permisos").doc(a).collection("modulos").doc("Modulo-".concat(e.modulo)).collection("permisos").doc(e.folio);s.set(t,e)}500===d&&(s.commit().then((function(){console.log("Se termino de subir batch")})).catch((function(e){console.error(e)})),s=ft.a.batch(),d=0),d++})),s.commit().then((function(){console.log("Se terminaron de subir los permisos"),Nt.a.fire("Permisos actualizados","Se subieron con exito los permisos.","success"),n({type:H})})).catch((function(e){console.error(e)}));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e,"2020-2021"))},title:"Cargar Padron",updating:e,fileExtension:".xlsx"}))},Is=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row justify-content-center pt-5"},r.a.createElement("h1",null,"TestArea")),r.a.createElement("div",{className:"row"},r.a.createElement(Pi,null)),r.a.createElement("div",{className:"row justify-content-center pt-5"},r.a.createElement("h1",null,"Dev Tools")),r.a.createElement("div",{className:"row border rounded p-3 m-1"},r.a.createElement(xs,null)),r.a.createElement("div",{className:"row border rounded p-3 m-1 mt-5"},r.a.createElement(ws,null)),r.a.createElement("div",{className:"row border rounded p-3 m-1 mt-5"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){Os()}},"Permisos Duplicados")))},zs=function(){var e=Object(l.c)((function(e){return e.entidades})).entities,a=Object(l.c)((function(e){return e.auth})).rol,t=Object(l.b)(),o=e.filter((function(e){switch(e.id){case"CNA":case"SADER":case"CESVBC":case"SRL":return!1;default:return!0}})),c=Object(n.useState)(""),i=Object(dt.a)(c,2),s=i[0],u=i[1];return r.a.createElement("select",{name:"campo",id:"campo",type:"text",value:s,onChange:function(n){var r=n.target;u(r.value);var o=e.find((function(e){return e.id===r.value}));t(yt(o.nombre,o.img,o.clave,o.dotacionGravedad,o.dotacionPozo,o.titular,o.direccion,o.expedicionActivaModulo,a,o.clave))},className:"form-control"},r.a.createElement("option",{hidden:!0,defaultValue:""},"Entidad"),o.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.id)})))},Ds=function(){var e=Object(l.c)((function(e){return e.auth})),a=e.email,t=e.entidad,o=e.img,c=e.variablesGlobales,i=e.claveEntidad,s=e.privilegios.accesoGlobal,u=Object(l.c)((function(e){return e.entidades})).entities,d=Object(l.b)();Object(n.useEffect)((function(){d(vs())}),[d]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row d-flex justify-content-between header"},r.a.createElement("div",{className:"col-sm-2 text-center "},r.a.createElement("div",{className:"border rounded h-100 d-flex justify-content-center"},r.a.createElement("img",{className:"align-self-center",src:"./logos/".concat(o),alt:"Logo de la entidad",style:function(e){switch(e){case"SADER":case"CNA":case"UNI01":case"UNI02":case"UNI03":return{maxWidth:140};default:return{maxHeight:100}}}(i)}))),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("div",{className:"card border"},r.a.createElement("div",{className:"card-header d-inline-flex"},r.a.createElement("div",{className:"div"},"".concat(t," - Operador: ").concat(a)," "),r.a.createElement("div",{className:"div ml-5"},r.a.createElement("b",null,"Ciclo: ",c.cicloActual))),r.a.createElement("div",{className:"card-body text-dark"},r.a.createElement("h5",{className:"card-title"},"Plataforma digital")," ",r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 card-text"},"Distrito de riego 014 Rio Colorado"),r.a.createElement("div",{className:"col-sm-6"},u&&s&&r.a.createElement(zs,null))))))))},Ls=function(){return r.a.createElement("div",{className:"container-fluid pr-4"},r.a.createElement(qt,null),r.a.createElement(Ds,null),r.a.createElement(pt.d,null,r.a.createElement(pt.b,{exact:!0,path:"/sicper",component:Sn}),r.a.createElement(pt.b,{exact:!0,path:"/padron",component:fo}),r.a.createElement(pt.b,{exact:!0,path:"/permisos",component:Ko}),r.a.createElement(pt.b,{exact:!0,path:"/nuevo-permiso",component:fc}),r.a.createElement(pt.b,{exact:!0,path:"/transferencias",component:Tc}),r.a.createElement(pt.b,{exact:!0,path:"/asignacion",component:rl}),r.a.createElement(pt.b,{exact:!0,path:"/labores",component:bl}),r.a.createElement(pt.b,{exact:!0,path:"/autorizados",component:yl}),r.a.createElement(pt.b,{exact:!0,path:"/reportes",component:Zi}),r.a.createElement(pt.b,{exact:!0,path:"/configuracion",component:Ns}),r.a.createElement(pt.b,{exact:!0,path:"/test",component:Is}),r.a.createElement(pt.a,{to:"/sicper"})))},Ts=t(64),ks=function(e){var a=e.isAuthenticated,t=e.component,n=Object(Ts.a)(e,["isAuthenticated","component"]);return localStorage.setItem("lastPath",n.location.pathname),r.a.createElement(pt.b,Object.assign({},n,{component:function(e){return a?r.a.createElement(t,e):r.a.createElement(pt.a,{to:"/auth/login"})}}))},Ms=function(e){var a=e.isAuthenticated,t=e.component,n=Object(Ts.a)(e,["isAuthenticated","component"]);return r.a.createElement(pt.b,Object.assign({},n,{component:function(e){return a?r.a.createElement(pt.a,{to:"/"}):r.a.createElement(t,e)}}))},Us=function(){var e=Object(l.b)(),a=Object(n.useState)(!0),t=Object(dt.a)(a,2),o=t[0],c=t[1],i=Object(n.useState)(!1),s=Object(dt.a)(i,2),u=s[0],d=s[1];return Object(n.useEffect)((function(){ft.b.auth().onAuthStateChanged(function(){var a=Object(ut.a)(st.a.mark((function a(t){var n,r,o,l,i,s,u,m,p,f,E,b;return st.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(null===t||void 0===t?void 0:t.uid)){a.next=21;break}return a.next=3,Ct(t.uid);case 3:return n=a.sent,a.next=6,St(n.claveEntidad);case 6:return r=a.sent,a.next=9,Pt(n.rol);case 9:return o=a.sent,l=r.nombre,i=r.img,s=r.clave,u=r.dotacionGravedad,m=r.dotacionPozo,p=r.titular,f=r.direccion,E=r.expedicionActivaModulo,e(gt(t.uid,t.displayName,t.email)),e(yt(l,i,s,u,m,p,f,E,n.rol,n.modulo)),e(Rt(o)),a.next=16,jt();case 16:b=a.sent,e(At(b)),d(!0),a.next=22;break;case 21:d(!1);case 22:c(!1);case 23:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}),[e,c,d]),o?r.a.createElement("div",{className:"container pt-5 d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Cargando..."))):r.a.createElement(mt.a,null,r.a.createElement("div",null,r.a.createElement(pt.d,null,r.a.createElement(Ms,{path:"/auth",component:Ft,isAuthenticated:u}),r.a.createElement(ks,{exat:!0,isAuthenticated:u,path:"/",component:Ls}),r.a.createElement(pt.a,{to:"/auth/login"}))))},Fs=function(){return r.a.createElement("div",null,r.a.createElement("script",{srs:"filesaver.js"}),r.a.createElement(l.a,{store:lt},r.a.createElement(Us,null)))};t(359),t(360);c.a.render(r.a.createElement(Fs,null),document.getElementById("root"))},5:function(e,a,t){"use strict";t.d(a,"a",(function(){return o})),t.d(a,"c",(function(){return c}));var n=t(11),r=t.n(n);t.d(a,"b",(function(){return r.a}));t(49),t(153);r.a.initializeApp({apiKey:"AIzaSyCiaXlZPBKZRW64e60mmFyHtJt_Tt5NceQ",authDomain:"sicper-e1812.firebaseapp.com",databaseURL:"https://sicper-e1812.firebaseio.com",projectId:"sicper-e1812",storageBucket:"sicper-e1812.appspot.com",messagingSenderId:"868337651917",appId:"1:868337651917:web:ce83022e99f450f19dd984"});var o=r.a.firestore(),c=new r.a.auth.GoogleAuthProvider}},[[141,1,2]]]);
//# sourceMappingURL=main.b4724bce.chunk.js.map